import{f as g_,g as mh,h as Hf,m as b_,n as qf,p as y_,u as v_}from"./chunk-H7J4EZMB.js";import{a as f_}from"./chunk-Y2DPZIF3.js";import{a as jf,b as l_}from"./chunk-3SVHTJQ2.js";import{a as En,b as ph,c as Lf,d as Ga,e as c_,f as Vf}from"./chunk-VPQVVA4O.js";import"./chunk-5G5ROAPX.js";import"./chunk-DGDWXWRD.js";import{e as ey}from"./chunk-GD7TJA3Q.js";import{A as fh,B as Ni,C as ci,D as za,E as wn,F as xn,G as ye,H as $a,I as li,J as Ut,K as rl,L as nl,M as Qb,N as n_,P as Di,Q as Bf,T as i_,V as Q,W as Xb,Y as ke,Z as s_,_ as il,a as JC,b as YC,ba as Uf,c as QC,d as ZC,da as o_,e as el,f as Kt,g as Br,ga as He,i as XC,ia as Js,j as Ha,ja as a_,k as ds,l as Ks,m as qa,ma as p_,n as Bo,na as m_,o as vn,p as Xr,q as e_,r as t_,s as Ws,t as Uo,u as Ti,v as Lo,w as tl,x as Yb,y as r_,z as dh}from"./chunk-3VEWMGKM.js";import{b as Zb}from"./chunk-77POFJ7J.js";import{a as ty,b as ry,c as u_,d as ny,e as h_,f as d_}from"./chunk-CIQDEF3W.js";import"./chunk-IYZIRKFV.js";import{b as $C,c as GC,d as KC,e as WC}from"./chunk-WAHCF7I3.js";import{c as Wb,d as LC,e as VC,g as jC,h as HC,i as Jb,j as qC,k as zC}from"./chunk-W5UVDF5Y.js";import{a as ja,b as OC,c as MC,d as Gt,e as Gb,f as Of,g as Mf,h as Ir,i as kC,j as Xc,k as FC,l as BC,m as Bt,n as UC,o as kf,p as Kb,q as Ff}from"./chunk-5ESA32RH.js";import{$ as tC,$a as mC,$b as IC,A as Nb,Aa as Fb,Ab as Ee,B as Do,Ba as Bb,Bb as te,C as J2,Ca as lC,Cb as Mo,Db as Gs,E as Wc,Eb as La,F as Ro,Fa as lh,Fb as Ii,G as Db,Ga as Sf,Gb as kr,H as Y2,Ha as uC,Hb as Fr,I as Q2,Ia as uh,Ib as ko,J as Rb,Ja as Y,Jb as ne,Ka as Ae,Kb as Sr,L as Z2,La as Ub,Lb as St,M as Ft,Ma as hC,Mb as wC,N as X2,Na as cs,Nb as xC,O as xr,Oa as $s,Ob as EC,P as ot,Pa as If,Pb as Pi,Q as Oo,Qb as qb,Ra as dC,Rb as It,S as Ba,Sa as fC,Sb as Qc,T as he,Ta as Ce,Tb as CC,U as ss,Ua as ls,Ub as _C,V as eC,Va as Ar,Vb as Va,W as Ue,Wb as Rf,X as Ob,Xa as us,Xb as AC,Y as Ie,Ya as pC,Yb as zb,Z as K,Za as Le,Zb as SC,_ as os,_a as Lb,_b as $b,a as H2,aa as rC,ab as Pf,b as q2,ba as as,bb as Tf,bc as hh,c as Ab,ca as Si,cb as Vb,d as Sb,da as Hn,db as Nf,dc as PC,e as Ib,ea as Ye,eb as Df,ec as TC,f as si,fa as Qe,fb as Ua,fc as NC,g as Rn,ga as nC,gb as gC,gc as DC,h as No,ha as iC,hb as bC,hc as Zc,i as Mr,ia as Hs,ib as zn,ic as $t,j as _e,ja as sC,jb as oe,jc as Fo,k as Ai,ka as qs,kb as yC,kc as $n,l as z2,la as oC,lb as jb,lc as RC,m as $2,ma as Af,mb as hs,n as Be,na as qn,nb as Hb,o as Pb,oa as Er,ob as Ke,p as oi,pa as Mb,pb as Yr,q as G2,qa as Wr,qb as Qr,r as Tb,ra as ee,rb as Zr,s as K2,sa as Jr,sb as j,t as W2,ta as Jc,tb as z,ua as xe,ub as le,v as is,va as aC,vb as vC,wa as kb,wb as xt,x as ai,xa as cC,xb as Yc,y as Fa,ya as zs,za as ch}from"./chunk-IW2PTHIM.js";import"./chunk-WXCPMYFQ.js";import"./chunk-6F6K4OU5.js";import{a as k,b as de,c as ah,d as mD,e as we,f as Nn,h as dn,i as _f,j as Dn,k as p}from"./chunk-HIVZEDT5.js";var Qh={};Nn(Qh,{__assign:()=>wv,__asyncDelegator:()=>e9,__asyncGenerator:()=>Xk,__asyncValues:()=>t9,__await:()=>Yh,__awaiter:()=>Kk,__classPrivateFieldGet:()=>s9,__classPrivateFieldSet:()=>o9,__createBinding:()=>Jk,__decorate:()=>zk,__exportStar:()=>Yk,__extends:()=>Hk,__generator:()=>Wk,__importDefault:()=>i9,__importStar:()=>n9,__makeTemplateObject:()=>r9,__metadata:()=>Gk,__param:()=>$k,__read:()=>ES,__rest:()=>qk,__spread:()=>Qk,__spreadArrays:()=>Zk,__values:()=>xv});function Hk(r,e){vv(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function qk(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function zk(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function $k(r,e){return function(t,n){e(t,n,r)}}function Gk(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Kk(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(r,e||[])).next())})}function Wk(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Jk(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function Yk(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function xv(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ES(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function Qk(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(ES(arguments[e]));return r}function Zk(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Yh(r){return this instanceof Yh?(this.v=r,this):new Yh(r)}function Xk(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){n[m]&&(i[m]=function(b){return new Promise(function(f,v){s.push([m,b,f,v])>1||a(m,b)})})}function a(m,b){try{c(n[m](b))}catch(f){h(s[0][3],f)}}function c(m){m.value instanceof Yh?Promise.resolve(m.value.v).then(l,u):h(s[0][2],m)}function l(m){a("next",m)}function u(m){a("throw",m)}function h(m,b){m(b),s.shift(),s.length&&a(s[0][0],s[0][1])}}function e9(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:Yh(r[i](o)),done:i==="return"}:s?s(o):o}:s}}function t9(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof xv=="function"?xv(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,c){o=r[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function r9(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function n9(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function i9(r){return r&&r.__esModule?r:{default:r}}function s9(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function o9(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var vv,wv,Zh=mD(()=>{"use strict";vv=function(r,e){return vv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},vv(r,e)};wv=function(){return wv=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wv.apply(this,arguments)}});var CS=we(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.delay=void 0;function a9(r){return new Promise(e=>{setTimeout(()=>{e(!0)},r)})}Hp.delay=a9});var _S=we(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.ONE_THOUSAND=wl.ONE_HUNDRED=void 0;wl.ONE_HUNDRED=100;wl.ONE_THOUSAND=1e3});var AS=we(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.ONE_YEAR=ae.FOUR_WEEKS=ae.THREE_WEEKS=ae.TWO_WEEKS=ae.ONE_WEEK=ae.THIRTY_DAYS=ae.SEVEN_DAYS=ae.FIVE_DAYS=ae.THREE_DAYS=ae.ONE_DAY=ae.TWENTY_FOUR_HOURS=ae.TWELVE_HOURS=ae.SIX_HOURS=ae.THREE_HOURS=ae.ONE_HOUR=ae.SIXTY_MINUTES=ae.THIRTY_MINUTES=ae.TEN_MINUTES=ae.FIVE_MINUTES=ae.ONE_MINUTE=ae.SIXTY_SECONDS=ae.THIRTY_SECONDS=ae.TEN_SECONDS=ae.FIVE_SECONDS=ae.ONE_SECOND=void 0;ae.ONE_SECOND=1;ae.FIVE_SECONDS=5;ae.TEN_SECONDS=10;ae.THIRTY_SECONDS=30;ae.SIXTY_SECONDS=60;ae.ONE_MINUTE=ae.SIXTY_SECONDS;ae.FIVE_MINUTES=ae.ONE_MINUTE*5;ae.TEN_MINUTES=ae.ONE_MINUTE*10;ae.THIRTY_MINUTES=ae.ONE_MINUTE*30;ae.SIXTY_MINUTES=ae.ONE_MINUTE*60;ae.ONE_HOUR=ae.SIXTY_MINUTES;ae.THREE_HOURS=ae.ONE_HOUR*3;ae.SIX_HOURS=ae.ONE_HOUR*6;ae.TWELVE_HOURS=ae.ONE_HOUR*12;ae.TWENTY_FOUR_HOURS=ae.ONE_HOUR*24;ae.ONE_DAY=ae.TWENTY_FOUR_HOURS;ae.THREE_DAYS=ae.ONE_DAY*3;ae.FIVE_DAYS=ae.ONE_DAY*5;ae.SEVEN_DAYS=ae.ONE_DAY*7;ae.THIRTY_DAYS=ae.ONE_DAY*30;ae.ONE_WEEK=ae.SEVEN_DAYS;ae.TWO_WEEKS=ae.ONE_WEEK*2;ae.THREE_WEEKS=ae.ONE_WEEK*3;ae.FOUR_WEEKS=ae.ONE_WEEK*4;ae.ONE_YEAR=ae.ONE_DAY*365});var Ev=we(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});var SS=(Zh(),_f(Qh));SS.__exportStar(_S(),qp);SS.__exportStar(AS(),qp)});var PS=we(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.fromMiliseconds=xl.toMiliseconds=void 0;var IS=Ev();function c9(r){return r*IS.ONE_THOUSAND}xl.toMiliseconds=c9;function l9(r){return Math.floor(r/IS.ONE_THOUSAND)}xl.fromMiliseconds=l9});var NS=we(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});var TS=(Zh(),_f(Qh));TS.__exportStar(CS(),zp);TS.__exportStar(PS(),zp)});var DS=we(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.Watch=void 0;var $p=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(typeof t.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);let n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){let t=this.timestamps.get(e);if(typeof t>"u")throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}};Xh.Watch=$p;Xh.default=$p});var RS=we(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.IWatch=void 0;var Cv=class{};Gp.IWatch=Cv});var OS=we(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});var u9=(Zh(),_f(Qh));u9.__exportStar(RS(),_v)});var Cl=we(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});var Kp=(Zh(),_f(Qh));Kp.__exportStar(NS(),El);Kp.__exportStar(DS(),El);Kp.__exportStar(OS(),El);Kp.__exportStar(Ev(),El)});var Zp=we(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=ft.getLocation=ft.getLocationOrThrow=ft.getNavigator=ft.getNavigatorOrThrow=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function oc(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}ft.getFromWindow=oc;function _l(r){let e=oc(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}ft.getFromWindowOrThrow=_l;function z9(){return _l("document")}ft.getDocumentOrThrow=z9;function $9(){return oc("document")}ft.getDocument=$9;function G9(){return _l("navigator")}ft.getNavigatorOrThrow=G9;function K9(){return oc("navigator")}ft.getNavigator=K9;function W9(){return _l("location")}ft.getLocationOrThrow=W9;function J9(){return oc("location")}ft.getLocation=J9;function Y9(){return _l("crypto")}ft.getCryptoOrThrow=Y9;function Q9(){return oc("crypto")}ft.getCrypto=Q9;function Z9(){return _l("localStorage")}ft.getLocalStorageOrThrow=Z9;function X9(){return oc("localStorage")}ft.getLocalStorage=X9});var t3=we(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.getWindowMetadata=void 0;var e3=Zp();function e7(){let r,e;try{r=e3.getDocumentOrThrow(),e=e3.getLocationOrThrow()}catch{return null}function t(){let h=r.getElementsByTagName("link"),m=[];for(let b=0;b<h.length;b++){let f=h[b],v=f.getAttribute("rel");if(v&&v.toLowerCase().indexOf("icon")>-1){let E=f.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let I=e.protocol+"//"+e.host;if(E.indexOf("/")===0)I+=E;else{let N=e.pathname.split("/");N.pop();let D=N.join("/");I+=D+"/"+E}m.push(I)}else if(E.indexOf("//")===0){let I=e.protocol+E;m.push(I)}else m.push(E)}}return m}function n(...h){let m=r.getElementsByTagName("meta");for(let b=0;b<m.length;b++){let f=m[b],v=["itemprop","property","name"].map(E=>f.getAttribute(E)).filter(E=>E?h.includes(E):!1);if(v.length&&v){let E=f.getAttribute("content");if(E)return E}}return""}function i(){let h=n("name","og:site_name","og:title","twitter:title");return h||(h=r.title),h}function s(){return n("description","og:description","twitter:description","keywords")}let o=i(),a=s(),c=e.origin,l=t();return{description:a,url:c,icons:l,name:o}}Xp.getWindowMetadata=e7});var C3=we((mse,fF)=>{fF.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var S3=we(om=>{"use strict";om.byteLength=mF;om.toByteArray=bF;om.fromByteArray=wF;var vs=[],hi=[],pF=typeof Uint8Array<"u"?Uint8Array:Array,e1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(cc=0,_3=e1.length;cc<_3;++cc)vs[cc]=e1[cc],hi[e1.charCodeAt(cc)]=cc;var cc,_3;hi[45]=62;hi[95]=63;function A3(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function mF(r){var e=A3(r),t=e[0],n=e[1];return(t+n)*3/4-n}function gF(r,e,t){return(e+t)*3/4-t}function bF(r){var e,t=A3(r),n=t[0],i=t[1],s=new pF(gF(r,n,i)),o=0,a=i>0?n-4:n,c;for(c=0;c<a;c+=4)e=hi[r.charCodeAt(c)]<<18|hi[r.charCodeAt(c+1)]<<12|hi[r.charCodeAt(c+2)]<<6|hi[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=hi[r.charCodeAt(c)]<<2|hi[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=hi[r.charCodeAt(c)]<<10|hi[r.charCodeAt(c+1)]<<4|hi[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function yF(r){return vs[r>>18&63]+vs[r>>12&63]+vs[r>>6&63]+vs[r&63]}function vF(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(yF(n));return i.join("")}function wF(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(vF(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(vs[e>>2]+vs[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(vs[e>>10]+vs[e>>4&63]+vs[e<<2&63]+"=")),i.join("")}});var I3=we(t1=>{"use strict";t1.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=t?i-1:0,m=t?-1:1,b=r[e+h];for(h+=m,s=b&(1<<-u)-1,b>>=-u,u+=a;u>0;s=s*256+r[e+h],h+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+r[e+h],h+=m,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-l}return(b?-1:1)*o*Math.pow(2,s-n)};t1.write=function(r,e,t,n,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,h=u>>1,m=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:s-1,f=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=m/c:e+=m*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;r[t+b]=a&255,b+=f,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;r[t+b]=o&255,b+=f,o/=256,l-=8);r[t+b-f]|=v*128}});var V3=we(Dl=>{"use strict";var r1=S3(),Nl=I3(),P3=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Dl.Buffer=G;Dl.SlowBuffer=SF;Dl.INSPECT_MAX_BYTES=50;var am=2147483647;Dl.kMaxLength=am;G.TYPED_ARRAY_SUPPORT=xF();!G.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function xF(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(G.prototype,"parent",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.buffer}});Object.defineProperty(G.prototype,"offset",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.byteOffset}});function eo(r){if(r>am)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,G.prototype),e}function G(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o1(r)}return D3(r,e,t)}G.poolSize=8192;function D3(r,e,t){if(typeof r=="string")return CF(r,e);if(ArrayBuffer.isView(r))return _F(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ws(r,ArrayBuffer)||r&&ws(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ws(r,SharedArrayBuffer)||r&&ws(r.buffer,SharedArrayBuffer)))return i1(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return G.from(n,e,t);var i=AF(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return G.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}G.from=function(r,e,t){return D3(r,e,t)};Object.setPrototypeOf(G.prototype,Uint8Array.prototype);Object.setPrototypeOf(G,Uint8Array);function R3(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function EF(r,e,t){return R3(r),r<=0?eo(r):e!==void 0?typeof t=="string"?eo(r).fill(e,t):eo(r).fill(e):eo(r)}G.alloc=function(r,e,t){return EF(r,e,t)};function o1(r){return R3(r),eo(r<0?0:a1(r)|0)}G.allocUnsafe=function(r){return o1(r)};G.allocUnsafeSlow=function(r){return o1(r)};function CF(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!G.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=O3(r,e)|0,n=eo(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function n1(r){for(var e=r.length<0?0:a1(r.length)|0,t=eo(e),n=0;n<e;n+=1)t[n]=r[n]&255;return t}function _F(r){if(ws(r,Uint8Array)){var e=new Uint8Array(r);return i1(e.buffer,e.byteOffset,e.byteLength)}return n1(r)}function i1(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,G.prototype),n}function AF(r){if(G.isBuffer(r)){var e=a1(r.length)|0,t=eo(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||c1(r.length)?eo(0):n1(r);if(r.type==="Buffer"&&Array.isArray(r.data))return n1(r.data)}function a1(r){if(r>=am)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+am.toString(16)+" bytes");return r|0}function SF(r){return+r!=r&&(r=0),G.alloc(+r)}G.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==G.prototype};G.compare=function(e,t){if(ws(e,Uint8Array)&&(e=G.from(e,e.offset,e.byteLength)),ws(t,Uint8Array)&&(t=G.from(t,t.offset,t.byteLength)),!G.isBuffer(e)||!G.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};G.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};G.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return G.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=G.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var o=e[n];if(ws(o,Uint8Array))s+o.length>i.length?G.from(o).copy(i,s):Uint8Array.prototype.set.call(i,o,s);else if(G.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function O3(r,e){if(G.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ws(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return s1(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return L3(r).length;default:if(i)return n?-1:s1(r).length;e=(""+e).toLowerCase(),i=!0}}G.byteLength=O3;function IF(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return BF(this,e,t);case"utf8":case"utf-8":return k3(this,e,t);case"ascii":return kF(this,e,t);case"latin1":case"binary":return FF(this,e,t);case"base64":return OF(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return UF(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}G.prototype._isBuffer=!0;function lc(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}G.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)lc(this,t,t+1);return this};G.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)lc(this,t,t+3),lc(this,t+1,t+2);return this};G.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)lc(this,t,t+7),lc(this,t+1,t+6),lc(this,t+2,t+5),lc(this,t+3,t+4);return this};G.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?k3(this,0,e):IF.apply(this,arguments)};G.prototype.toLocaleString=G.prototype.toString;G.prototype.equals=function(e){if(!G.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:G.compare(this,e)===0};G.prototype.inspect=function(){var e="",t=Dl.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};P3&&(G.prototype[P3]=G.prototype.inspect);G.prototype.compare=function(e,t,n,i,s){if(ws(e,Uint8Array)&&(e=G.from(e,e.offset,e.byteLength)),!G.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var o=s-i,a=n-t,c=Math.min(o,a),l=this.slice(i,s),u=e.slice(t,n),h=0;h<c;++h)if(l[h]!==u[h]){o=l[h],a=u[h];break}return o<a?-1:a<o?1:0};function M3(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,c1(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=G.from(e,n)),G.isBuffer(e))return e.length===0?-1:T3(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):T3(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function T3(r,e,t,n,i){var s=1,o=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,o/=2,a/=2,t/=2}function c(b,f){return s===1?b[f]:b.readUInt16BE(f*s)}var l;if(i){var u=-1;for(l=t;l<o;l++)if(c(r,l)===c(e,u===-1?0:l-u)){if(u===-1&&(u=l),l-u+1===a)return u*s}else u!==-1&&(l-=l-u),u=-1}else for(t+a>o&&(t=o-a),l=t;l>=0;l--){for(var h=!0,m=0;m<a;m++)if(c(r,l+m)!==c(e,m)){h=!1;break}if(h)return l}return-1}G.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};G.prototype.indexOf=function(e,t,n){return M3(this,e,t,n,!0)};G.prototype.lastIndexOf=function(e,t,n){return M3(this,e,t,n,!1)};function PF(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(o*2,2),16);if(c1(a))return o;r[t+o]=a}return o}function TF(r,e,t,n){return cm(s1(e,r.length-t),r,t,n)}function NF(r,e,t,n){return cm(jF(e),r,t,n)}function DF(r,e,t,n){return cm(L3(e),r,t,n)}function RF(r,e,t,n){return cm(HF(e,r.length-t),r,t,n)}G.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return PF(this,e,t,n);case"utf8":case"utf-8":return TF(this,e,t,n);case"ascii":case"latin1":case"binary":return NF(this,e,t,n);case"base64":return DF(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return RF(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};G.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function OF(r,e,t){return e===0&&t===r.length?r1.fromByteArray(r):r1.fromByteArray(r.slice(e,t))}function k3(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var s=r[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=t){var c,l,u,h;switch(a){case 1:s<128&&(o=s);break;case 2:c=r[i+1],(c&192)===128&&(h=(s&31)<<6|c&63,h>127&&(o=h));break;case 3:c=r[i+1],l=r[i+2],(c&192)===128&&(l&192)===128&&(h=(s&15)<<12|(c&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=r[i+1],l=r[i+2],u=r[i+3],(c&192)===128&&(l&192)===128&&(u&192)===128&&(h=(s&15)<<18|(c&63)<<12|(l&63)<<6|u&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return MF(n)}var N3=4096;function MF(r){var e=r.length;if(e<=N3)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=N3));return t}function kF(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function FF(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function BF(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",s=e;s<t;++s)i+=qF[r[s]];return i}function UF(r,e,t){for(var n=r.slice(e,t),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}G.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,G.prototype),i};function Lr(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}G.prototype.readUintLE=G.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Lr(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return i};G.prototype.readUintBE=G.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Lr(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};G.prototype.readUint8=G.prototype.readUInt8=function(e,t){return e=e>>>0,t||Lr(e,1,this.length),this[e]};G.prototype.readUint16LE=G.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Lr(e,2,this.length),this[e]|this[e+1]<<8};G.prototype.readUint16BE=G.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Lr(e,2,this.length),this[e]<<8|this[e+1]};G.prototype.readUint32LE=G.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Lr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};G.prototype.readUint32BE=G.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Lr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};G.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Lr(e,t,this.length);for(var i=this[e],s=1,o=0;++o<t&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};G.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Lr(e,t,this.length);for(var i=t,s=1,o=this[e+--i];i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*t)),o};G.prototype.readInt8=function(e,t){return e=e>>>0,t||Lr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};G.prototype.readInt16LE=function(e,t){e=e>>>0,t||Lr(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};G.prototype.readInt16BE=function(e,t){e=e>>>0,t||Lr(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};G.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Lr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};G.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Lr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};G.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Lr(e,4,this.length),Nl.read(this,e,!0,23,4)};G.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Lr(e,4,this.length),Nl.read(this,e,!1,23,4)};G.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Lr(e,8,this.length),Nl.read(this,e,!0,52,8)};G.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Lr(e,8,this.length),Nl.read(this,e,!1,52,8)};function Mn(r,e,t,n,i,s){if(!G.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}G.prototype.writeUintLE=G.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;Mn(this,e,t,n,s,0)}var o=1,a=0;for(this[t]=e&255;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n};G.prototype.writeUintBE=G.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){var s=Math.pow(2,8*n)-1;Mn(this,e,t,n,s,0)}var o=n-1,a=1;for(this[t+o]=e&255;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n};G.prototype.writeUint8=G.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,1,255,0),this[t]=e&255,t+1};G.prototype.writeUint16LE=G.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};G.prototype.writeUint16BE=G.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};G.prototype.writeUint32LE=G.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};G.prototype.writeUint32BE=G.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};G.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){var s=Math.pow(2,8*n-1);Mn(this,e,t,n,s-1,-s)}var o=0,a=1,c=0;for(this[t]=e&255;++o<n&&(a*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};G.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){var s=Math.pow(2,8*n-1);Mn(this,e,t,n,s-1,-s)}var o=n-1,a=1,c=0;for(this[t+o]=e&255;--o>=0&&(a*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/a>>0)-c&255;return t+n};G.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};G.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};G.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};G.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};G.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Mn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function F3(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function B3(r,e,t,n,i){return e=+e,t=t>>>0,i||F3(r,e,t,4,34028234663852886e22,-34028234663852886e22),Nl.write(r,e,t,n,23,4),t+4}G.prototype.writeFloatLE=function(e,t,n){return B3(this,e,t,!0,n)};G.prototype.writeFloatBE=function(e,t,n){return B3(this,e,t,!1,n)};function U3(r,e,t,n,i){return e=+e,t=t>>>0,i||F3(r,e,t,8,17976931348623157e292,-17976931348623157e292),Nl.write(r,e,t,n,52,8),t+8}G.prototype.writeDoubleLE=function(e,t,n){return U3(this,e,t,!0,n)};G.prototype.writeDoubleBE=function(e,t,n){return U3(this,e,t,!1,n)};G.prototype.copy=function(e,t,n,i){if(!G.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),s};G.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!G.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{var a=G.isBuffer(e)?e:G.from(e,i),c=a.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%c]}return this};var LF=/[^+/0-9A-Za-z-_]/g;function VF(r){if(r=r.split("=")[0],r=r.trim().replace(LF,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function s1(r,e){e=e||1/0;for(var t,n=r.length,i=null,s=[],o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function jF(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function HF(r,e){for(var t,n,i,s=[],o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function L3(r){return r1.toByteArray(VF(r))}function cm(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ws(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function c1(r){return r!==r}var qF=function(){for(var r="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var n=t*16,i=0;i<16;++i)e[n+i]=r[t]+r[i];return e}()});var xs=we((j3,l1)=>{"use strict";(function(r,e){"use strict";function t(P,d){if(!P)throw new Error(d||"Assertion failed")}function n(P,d){P.super_=d;var y=function(){};y.prototype=d.prototype,P.prototype=new y,P.prototype.constructor=P}function i(P,d,y){if(i.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((d==="le"||d==="be")&&(y=d,d=10),this._init(P||0,d||10,y||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=V3().Buffer}catch{}i.isBN=function(d){return d instanceof i?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===i.wordSize&&Array.isArray(d.words)},i.max=function(d,y){return d.cmp(y)>0?d:y},i.min=function(d,y){return d.cmp(y)<0?d:y},i.prototype._init=function(d,y,C){if(typeof d=="number")return this._initNumber(d,y,C);if(typeof d=="object")return this._initArray(d,y,C);y==="hex"&&(y=16),t(y===(y|0)&&y>=2&&y<=36),d=d.toString().replace(/\s+/g,"");var A=0;d[0]==="-"&&(A++,this.negative=1),A<d.length&&(y===16?this._parseHex(d,A,C):(this._parseBase(d,y,A),C==="le"&&this._initArray(this.toArray(),y,C)))},i.prototype._initNumber=function(d,y,C){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(t(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),y,C)},i.prototype._initArray=function(d,y,C){if(t(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var w,x,T=0;if(C==="be")for(A=d.length-1,w=0;A>=0;A-=3)x=d[A]|d[A-1]<<8|d[A-2]<<16,this.words[w]|=x<<T&67108863,this.words[w+1]=x>>>26-T&67108863,T+=24,T>=26&&(T-=26,w++);else if(C==="le")for(A=0,w=0;A<d.length;A+=3)x=d[A]|d[A+1]<<8|d[A+2]<<16,this.words[w]|=x<<T&67108863,this.words[w+1]=x>>>26-T&67108863,T+=24,T>=26&&(T-=26,w++);return this.strip()};function o(P,d){var y=P.charCodeAt(d);return y>=65&&y<=70?y-55:y>=97&&y<=102?y-87:y-48&15}function a(P,d,y){var C=o(P,y);return y-1>=d&&(C|=o(P,y-1)<<4),C}i.prototype._parseHex=function(d,y,C){this.length=Math.ceil((d.length-y)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var w=0,x=0,T;if(C==="be")for(A=d.length-1;A>=y;A-=2)T=a(d,y,A)<<w,this.words[x]|=T&67108863,w>=18?(w-=18,x+=1,this.words[x]|=T>>>26):w+=8;else{var _=d.length-y;for(A=_%2===0?y+1:y;A<d.length;A+=2)T=a(d,y,A)<<w,this.words[x]|=T&67108863,w>=18?(w-=18,x+=1,this.words[x]|=T>>>26):w+=8}this.strip()};function c(P,d,y,C){for(var A=0,w=Math.min(P.length,y),x=d;x<w;x++){var T=P.charCodeAt(x)-48;A*=C,T>=49?A+=T-49+10:T>=17?A+=T-17+10:A+=T}return A}i.prototype._parseBase=function(d,y,C){this.words=[0],this.length=1;for(var A=0,w=1;w<=67108863;w*=y)A++;A--,w=w/y|0;for(var x=d.length-C,T=x%A,_=Math.min(x,x-T)+C,g=0,S=C;S<_;S+=A)g=c(d,S,S+A,y),this.imuln(w),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(T!==0){var q=1;for(g=c(d,S,d.length,y),S=0;S<T;S++)q*=y;this.imuln(q),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this.strip()},i.prototype.copy=function(d){d.words=new Array(this.length);for(var y=0;y<this.length;y++)d.words[y]=this.words[y];d.length=this.length,d.negative=this.negative,d.red=this.red},i.prototype.clone=function(){var d=new i(null);return this.copy(d),d},i.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(d,y){d=d||10,y=y|0||1;var C;if(d===16||d==="hex"){C="";for(var A=0,w=0,x=0;x<this.length;x++){var T=this.words[x],_=((T<<A|w)&16777215).toString(16);w=T>>>24-A&16777215,A+=2,A>=26&&(A-=26,x--),w!==0||x!==this.length-1?C=l[6-_.length]+_+C:C=_+C}for(w!==0&&(C=w.toString(16)+C);C.length%y!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(d===(d|0)&&d>=2&&d<=36){var g=u[d],S=h[d];C="";var q=this.clone();for(q.negative=0;!q.isZero();){var $=q.modn(S).toString(d);q=q.idivn(S),q.isZero()?C=$+C:C=l[g-$.length]+$+C}for(this.isZero()&&(C="0"+C);C.length%y!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(d,y){return t(typeof s<"u"),this.toArrayLike(s,d,y)},i.prototype.toArray=function(d,y){return this.toArrayLike(Array,d,y)},i.prototype.toArrayLike=function(d,y,C){var A=this.byteLength(),w=C||Math.max(1,A);t(A<=w,"byte array longer than desired length"),t(w>0,"Requested array length <= 0"),this.strip();var x=y==="le",T=new d(w),_,g,S=this.clone();if(x){for(g=0;!S.isZero();g++)_=S.andln(255),S.iushrn(8),T[g]=_;for(;g<w;g++)T[g]=0}else{for(g=0;g<w-A;g++)T[g]=0;for(g=0;!S.isZero();g++)_=S.andln(255),S.iushrn(8),T[w-g-1]=_}return T},Math.clz32?i.prototype._countBits=function(d){return 32-Math.clz32(d)}:i.prototype._countBits=function(d){var y=d,C=0;return y>=4096&&(C+=13,y>>>=13),y>=64&&(C+=7,y>>>=7),y>=8&&(C+=4,y>>>=4),y>=2&&(C+=2,y>>>=2),C+y},i.prototype._zeroBits=function(d){if(d===0)return 26;var y=d,C=0;return y&8191||(C+=13,y>>>=13),y&127||(C+=7,y>>>=7),y&15||(C+=4,y>>>=4),y&3||(C+=2,y>>>=2),y&1||C++,C},i.prototype.bitLength=function(){var d=this.words[this.length-1],y=this._countBits(d);return(this.length-1)*26+y};function m(P){for(var d=new Array(P.bitLength()),y=0;y<d.length;y++){var C=y/26|0,A=y%26;d[y]=(P.words[C]&1<<A)>>>A}return d}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,y=0;y<this.length;y++){var C=this._zeroBits(this.words[y]);if(d+=C,C!==26)break}return d},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},i.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var y=0;y<d.length;y++)this.words[y]=this.words[y]|d.words[y];return this.strip()},i.prototype.ior=function(d){return t((this.negative|d.negative)===0),this.iuor(d)},i.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},i.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},i.prototype.iuand=function(d){var y;this.length>d.length?y=d:y=this;for(var C=0;C<y.length;C++)this.words[C]=this.words[C]&d.words[C];return this.length=y.length,this.strip()},i.prototype.iand=function(d){return t((this.negative|d.negative)===0),this.iuand(d)},i.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},i.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},i.prototype.iuxor=function(d){var y,C;this.length>d.length?(y=this,C=d):(y=d,C=this);for(var A=0;A<C.length;A++)this.words[A]=y.words[A]^C.words[A];if(this!==y)for(;A<y.length;A++)this.words[A]=y.words[A];return this.length=y.length,this.strip()},i.prototype.ixor=function(d){return t((this.negative|d.negative)===0),this.iuxor(d)},i.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},i.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},i.prototype.inotn=function(d){t(typeof d=="number"&&d>=0);var y=Math.ceil(d/26)|0,C=d%26;this._expand(y),C>0&&y--;for(var A=0;A<y;A++)this.words[A]=~this.words[A]&67108863;return C>0&&(this.words[A]=~this.words[A]&67108863>>26-C),this.strip()},i.prototype.notn=function(d){return this.clone().inotn(d)},i.prototype.setn=function(d,y){t(typeof d=="number"&&d>=0);var C=d/26|0,A=d%26;return this._expand(C+1),y?this.words[C]=this.words[C]|1<<A:this.words[C]=this.words[C]&~(1<<A),this.strip()},i.prototype.iadd=function(d){var y;if(this.negative!==0&&d.negative===0)return this.negative=0,y=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,y=this.isub(d),d.negative=1,y._normSign();var C,A;this.length>d.length?(C=this,A=d):(C=d,A=this);for(var w=0,x=0;x<A.length;x++)y=(C.words[x]|0)+(A.words[x]|0)+w,this.words[x]=y&67108863,w=y>>>26;for(;w!==0&&x<C.length;x++)y=(C.words[x]|0)+w,this.words[x]=y&67108863,w=y>>>26;if(this.length=C.length,w!==0)this.words[this.length]=w,this.length++;else if(C!==this)for(;x<C.length;x++)this.words[x]=C.words[x];return this},i.prototype.add=function(d){var y;return d.negative!==0&&this.negative===0?(d.negative=0,y=this.sub(d),d.negative^=1,y):d.negative===0&&this.negative!==0?(this.negative=0,y=d.sub(this),this.negative=1,y):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},i.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var y=this.iadd(d);return d.negative=1,y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var C=this.cmp(d);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,w;C>0?(A=this,w=d):(A=d,w=this);for(var x=0,T=0;T<w.length;T++)y=(A.words[T]|0)-(w.words[T]|0)+x,x=y>>26,this.words[T]=y&67108863;for(;x!==0&&T<A.length;T++)y=(A.words[T]|0)+x,x=y>>26,this.words[T]=y&67108863;if(x===0&&T<A.length&&A!==this)for(;T<A.length;T++)this.words[T]=A.words[T];return this.length=Math.max(this.length,T),A!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(d){return this.clone().isub(d)};function b(P,d,y){y.negative=d.negative^P.negative;var C=P.length+d.length|0;y.length=C,C=C-1|0;var A=P.words[0]|0,w=d.words[0]|0,x=A*w,T=x&67108863,_=x/67108864|0;y.words[0]=T;for(var g=1;g<C;g++){for(var S=_>>>26,q=_&67108863,$=Math.min(g,d.length-1),W=Math.max(0,g-P.length+1);W<=$;W++){var Z=g-W|0;A=P.words[Z]|0,w=d.words[W]|0,x=A*w+q,S+=x/67108864|0,q=x&67108863}y.words[g]=q|0,_=S|0}return _!==0?y.words[g]=_|0:y.length--,y.strip()}var f=function(d,y,C){var A=d.words,w=y.words,x=C.words,T=0,_,g,S,q=A[0]|0,$=q&8191,W=q>>>13,Z=A[1]|0,ce=Z&8191,fe=Z>>>13,Te=A[2]|0,be=Te&8191,pe=Te>>>13,Nt=A[3]|0,je=Nt&8191,Me=Nt>>>13,Tn=A[4]|0,Je=Tn&8191,ct=Tn>>>13,ka=A[5]|0,Dt=ka&8191,Rt=ka>>>13,ih=A[6]|0,Et=ih&8191,wt=ih>>>13,sh=A[7]|0,Ct=sh&8191,_t=sh>>>13,oh=A[8]|0,At=oh&8191,Ot=oh>>>13,Cf=A[9]|0,Mt=Cf&8191,kt=Cf>>>13,R2=w[0]|0,tr=R2&8191,rr=R2>>>13,O2=w[1]|0,nr=O2&8191,ir=O2>>>13,M2=w[2]|0,sr=M2&8191,or=M2>>>13,k2=w[3]|0,ar=k2&8191,cr=k2>>>13,F2=w[4]|0,lr=F2&8191,ur=F2>>>13,B2=w[5]|0,hr=B2&8191,dr=B2>>>13,U2=w[6]|0,fr=U2&8191,pr=U2>>>13,L2=w[7]|0,mr=L2&8191,gr=L2>>>13,V2=w[8]|0,br=V2&8191,yr=V2>>>13,j2=w[9]|0,vr=j2&8191,wr=j2>>>13;C.negative=d.negative^y.negative,C.length=19,_=Math.imul($,tr),g=Math.imul($,rr),g=g+Math.imul(W,tr)|0,S=Math.imul(W,rr);var ob=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(ob>>>26)|0,ob&=67108863,_=Math.imul(ce,tr),g=Math.imul(ce,rr),g=g+Math.imul(fe,tr)|0,S=Math.imul(fe,rr),_=_+Math.imul($,nr)|0,g=g+Math.imul($,ir)|0,g=g+Math.imul(W,nr)|0,S=S+Math.imul(W,ir)|0;var ab=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(ab>>>26)|0,ab&=67108863,_=Math.imul(be,tr),g=Math.imul(be,rr),g=g+Math.imul(pe,tr)|0,S=Math.imul(pe,rr),_=_+Math.imul(ce,nr)|0,g=g+Math.imul(ce,ir)|0,g=g+Math.imul(fe,nr)|0,S=S+Math.imul(fe,ir)|0,_=_+Math.imul($,sr)|0,g=g+Math.imul($,or)|0,g=g+Math.imul(W,sr)|0,S=S+Math.imul(W,or)|0;var cb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(cb>>>26)|0,cb&=67108863,_=Math.imul(je,tr),g=Math.imul(je,rr),g=g+Math.imul(Me,tr)|0,S=Math.imul(Me,rr),_=_+Math.imul(be,nr)|0,g=g+Math.imul(be,ir)|0,g=g+Math.imul(pe,nr)|0,S=S+Math.imul(pe,ir)|0,_=_+Math.imul(ce,sr)|0,g=g+Math.imul(ce,or)|0,g=g+Math.imul(fe,sr)|0,S=S+Math.imul(fe,or)|0,_=_+Math.imul($,ar)|0,g=g+Math.imul($,cr)|0,g=g+Math.imul(W,ar)|0,S=S+Math.imul(W,cr)|0;var lb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(lb>>>26)|0,lb&=67108863,_=Math.imul(Je,tr),g=Math.imul(Je,rr),g=g+Math.imul(ct,tr)|0,S=Math.imul(ct,rr),_=_+Math.imul(je,nr)|0,g=g+Math.imul(je,ir)|0,g=g+Math.imul(Me,nr)|0,S=S+Math.imul(Me,ir)|0,_=_+Math.imul(be,sr)|0,g=g+Math.imul(be,or)|0,g=g+Math.imul(pe,sr)|0,S=S+Math.imul(pe,or)|0,_=_+Math.imul(ce,ar)|0,g=g+Math.imul(ce,cr)|0,g=g+Math.imul(fe,ar)|0,S=S+Math.imul(fe,cr)|0,_=_+Math.imul($,lr)|0,g=g+Math.imul($,ur)|0,g=g+Math.imul(W,lr)|0,S=S+Math.imul(W,ur)|0;var ub=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(ub>>>26)|0,ub&=67108863,_=Math.imul(Dt,tr),g=Math.imul(Dt,rr),g=g+Math.imul(Rt,tr)|0,S=Math.imul(Rt,rr),_=_+Math.imul(Je,nr)|0,g=g+Math.imul(Je,ir)|0,g=g+Math.imul(ct,nr)|0,S=S+Math.imul(ct,ir)|0,_=_+Math.imul(je,sr)|0,g=g+Math.imul(je,or)|0,g=g+Math.imul(Me,sr)|0,S=S+Math.imul(Me,or)|0,_=_+Math.imul(be,ar)|0,g=g+Math.imul(be,cr)|0,g=g+Math.imul(pe,ar)|0,S=S+Math.imul(pe,cr)|0,_=_+Math.imul(ce,lr)|0,g=g+Math.imul(ce,ur)|0,g=g+Math.imul(fe,lr)|0,S=S+Math.imul(fe,ur)|0,_=_+Math.imul($,hr)|0,g=g+Math.imul($,dr)|0,g=g+Math.imul(W,hr)|0,S=S+Math.imul(W,dr)|0;var hb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(hb>>>26)|0,hb&=67108863,_=Math.imul(Et,tr),g=Math.imul(Et,rr),g=g+Math.imul(wt,tr)|0,S=Math.imul(wt,rr),_=_+Math.imul(Dt,nr)|0,g=g+Math.imul(Dt,ir)|0,g=g+Math.imul(Rt,nr)|0,S=S+Math.imul(Rt,ir)|0,_=_+Math.imul(Je,sr)|0,g=g+Math.imul(Je,or)|0,g=g+Math.imul(ct,sr)|0,S=S+Math.imul(ct,or)|0,_=_+Math.imul(je,ar)|0,g=g+Math.imul(je,cr)|0,g=g+Math.imul(Me,ar)|0,S=S+Math.imul(Me,cr)|0,_=_+Math.imul(be,lr)|0,g=g+Math.imul(be,ur)|0,g=g+Math.imul(pe,lr)|0,S=S+Math.imul(pe,ur)|0,_=_+Math.imul(ce,hr)|0,g=g+Math.imul(ce,dr)|0,g=g+Math.imul(fe,hr)|0,S=S+Math.imul(fe,dr)|0,_=_+Math.imul($,fr)|0,g=g+Math.imul($,pr)|0,g=g+Math.imul(W,fr)|0,S=S+Math.imul(W,pr)|0;var db=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(db>>>26)|0,db&=67108863,_=Math.imul(Ct,tr),g=Math.imul(Ct,rr),g=g+Math.imul(_t,tr)|0,S=Math.imul(_t,rr),_=_+Math.imul(Et,nr)|0,g=g+Math.imul(Et,ir)|0,g=g+Math.imul(wt,nr)|0,S=S+Math.imul(wt,ir)|0,_=_+Math.imul(Dt,sr)|0,g=g+Math.imul(Dt,or)|0,g=g+Math.imul(Rt,sr)|0,S=S+Math.imul(Rt,or)|0,_=_+Math.imul(Je,ar)|0,g=g+Math.imul(Je,cr)|0,g=g+Math.imul(ct,ar)|0,S=S+Math.imul(ct,cr)|0,_=_+Math.imul(je,lr)|0,g=g+Math.imul(je,ur)|0,g=g+Math.imul(Me,lr)|0,S=S+Math.imul(Me,ur)|0,_=_+Math.imul(be,hr)|0,g=g+Math.imul(be,dr)|0,g=g+Math.imul(pe,hr)|0,S=S+Math.imul(pe,dr)|0,_=_+Math.imul(ce,fr)|0,g=g+Math.imul(ce,pr)|0,g=g+Math.imul(fe,fr)|0,S=S+Math.imul(fe,pr)|0,_=_+Math.imul($,mr)|0,g=g+Math.imul($,gr)|0,g=g+Math.imul(W,mr)|0,S=S+Math.imul(W,gr)|0;var fb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(fb>>>26)|0,fb&=67108863,_=Math.imul(At,tr),g=Math.imul(At,rr),g=g+Math.imul(Ot,tr)|0,S=Math.imul(Ot,rr),_=_+Math.imul(Ct,nr)|0,g=g+Math.imul(Ct,ir)|0,g=g+Math.imul(_t,nr)|0,S=S+Math.imul(_t,ir)|0,_=_+Math.imul(Et,sr)|0,g=g+Math.imul(Et,or)|0,g=g+Math.imul(wt,sr)|0,S=S+Math.imul(wt,or)|0,_=_+Math.imul(Dt,ar)|0,g=g+Math.imul(Dt,cr)|0,g=g+Math.imul(Rt,ar)|0,S=S+Math.imul(Rt,cr)|0,_=_+Math.imul(Je,lr)|0,g=g+Math.imul(Je,ur)|0,g=g+Math.imul(ct,lr)|0,S=S+Math.imul(ct,ur)|0,_=_+Math.imul(je,hr)|0,g=g+Math.imul(je,dr)|0,g=g+Math.imul(Me,hr)|0,S=S+Math.imul(Me,dr)|0,_=_+Math.imul(be,fr)|0,g=g+Math.imul(be,pr)|0,g=g+Math.imul(pe,fr)|0,S=S+Math.imul(pe,pr)|0,_=_+Math.imul(ce,mr)|0,g=g+Math.imul(ce,gr)|0,g=g+Math.imul(fe,mr)|0,S=S+Math.imul(fe,gr)|0,_=_+Math.imul($,br)|0,g=g+Math.imul($,yr)|0,g=g+Math.imul(W,br)|0,S=S+Math.imul(W,yr)|0;var pb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(pb>>>26)|0,pb&=67108863,_=Math.imul(Mt,tr),g=Math.imul(Mt,rr),g=g+Math.imul(kt,tr)|0,S=Math.imul(kt,rr),_=_+Math.imul(At,nr)|0,g=g+Math.imul(At,ir)|0,g=g+Math.imul(Ot,nr)|0,S=S+Math.imul(Ot,ir)|0,_=_+Math.imul(Ct,sr)|0,g=g+Math.imul(Ct,or)|0,g=g+Math.imul(_t,sr)|0,S=S+Math.imul(_t,or)|0,_=_+Math.imul(Et,ar)|0,g=g+Math.imul(Et,cr)|0,g=g+Math.imul(wt,ar)|0,S=S+Math.imul(wt,cr)|0,_=_+Math.imul(Dt,lr)|0,g=g+Math.imul(Dt,ur)|0,g=g+Math.imul(Rt,lr)|0,S=S+Math.imul(Rt,ur)|0,_=_+Math.imul(Je,hr)|0,g=g+Math.imul(Je,dr)|0,g=g+Math.imul(ct,hr)|0,S=S+Math.imul(ct,dr)|0,_=_+Math.imul(je,fr)|0,g=g+Math.imul(je,pr)|0,g=g+Math.imul(Me,fr)|0,S=S+Math.imul(Me,pr)|0,_=_+Math.imul(be,mr)|0,g=g+Math.imul(be,gr)|0,g=g+Math.imul(pe,mr)|0,S=S+Math.imul(pe,gr)|0,_=_+Math.imul(ce,br)|0,g=g+Math.imul(ce,yr)|0,g=g+Math.imul(fe,br)|0,S=S+Math.imul(fe,yr)|0,_=_+Math.imul($,vr)|0,g=g+Math.imul($,wr)|0,g=g+Math.imul(W,vr)|0,S=S+Math.imul(W,wr)|0;var mb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(mb>>>26)|0,mb&=67108863,_=Math.imul(Mt,nr),g=Math.imul(Mt,ir),g=g+Math.imul(kt,nr)|0,S=Math.imul(kt,ir),_=_+Math.imul(At,sr)|0,g=g+Math.imul(At,or)|0,g=g+Math.imul(Ot,sr)|0,S=S+Math.imul(Ot,or)|0,_=_+Math.imul(Ct,ar)|0,g=g+Math.imul(Ct,cr)|0,g=g+Math.imul(_t,ar)|0,S=S+Math.imul(_t,cr)|0,_=_+Math.imul(Et,lr)|0,g=g+Math.imul(Et,ur)|0,g=g+Math.imul(wt,lr)|0,S=S+Math.imul(wt,ur)|0,_=_+Math.imul(Dt,hr)|0,g=g+Math.imul(Dt,dr)|0,g=g+Math.imul(Rt,hr)|0,S=S+Math.imul(Rt,dr)|0,_=_+Math.imul(Je,fr)|0,g=g+Math.imul(Je,pr)|0,g=g+Math.imul(ct,fr)|0,S=S+Math.imul(ct,pr)|0,_=_+Math.imul(je,mr)|0,g=g+Math.imul(je,gr)|0,g=g+Math.imul(Me,mr)|0,S=S+Math.imul(Me,gr)|0,_=_+Math.imul(be,br)|0,g=g+Math.imul(be,yr)|0,g=g+Math.imul(pe,br)|0,S=S+Math.imul(pe,yr)|0,_=_+Math.imul(ce,vr)|0,g=g+Math.imul(ce,wr)|0,g=g+Math.imul(fe,vr)|0,S=S+Math.imul(fe,wr)|0;var gb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(gb>>>26)|0,gb&=67108863,_=Math.imul(Mt,sr),g=Math.imul(Mt,or),g=g+Math.imul(kt,sr)|0,S=Math.imul(kt,or),_=_+Math.imul(At,ar)|0,g=g+Math.imul(At,cr)|0,g=g+Math.imul(Ot,ar)|0,S=S+Math.imul(Ot,cr)|0,_=_+Math.imul(Ct,lr)|0,g=g+Math.imul(Ct,ur)|0,g=g+Math.imul(_t,lr)|0,S=S+Math.imul(_t,ur)|0,_=_+Math.imul(Et,hr)|0,g=g+Math.imul(Et,dr)|0,g=g+Math.imul(wt,hr)|0,S=S+Math.imul(wt,dr)|0,_=_+Math.imul(Dt,fr)|0,g=g+Math.imul(Dt,pr)|0,g=g+Math.imul(Rt,fr)|0,S=S+Math.imul(Rt,pr)|0,_=_+Math.imul(Je,mr)|0,g=g+Math.imul(Je,gr)|0,g=g+Math.imul(ct,mr)|0,S=S+Math.imul(ct,gr)|0,_=_+Math.imul(je,br)|0,g=g+Math.imul(je,yr)|0,g=g+Math.imul(Me,br)|0,S=S+Math.imul(Me,yr)|0,_=_+Math.imul(be,vr)|0,g=g+Math.imul(be,wr)|0,g=g+Math.imul(pe,vr)|0,S=S+Math.imul(pe,wr)|0;var bb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(bb>>>26)|0,bb&=67108863,_=Math.imul(Mt,ar),g=Math.imul(Mt,cr),g=g+Math.imul(kt,ar)|0,S=Math.imul(kt,cr),_=_+Math.imul(At,lr)|0,g=g+Math.imul(At,ur)|0,g=g+Math.imul(Ot,lr)|0,S=S+Math.imul(Ot,ur)|0,_=_+Math.imul(Ct,hr)|0,g=g+Math.imul(Ct,dr)|0,g=g+Math.imul(_t,hr)|0,S=S+Math.imul(_t,dr)|0,_=_+Math.imul(Et,fr)|0,g=g+Math.imul(Et,pr)|0,g=g+Math.imul(wt,fr)|0,S=S+Math.imul(wt,pr)|0,_=_+Math.imul(Dt,mr)|0,g=g+Math.imul(Dt,gr)|0,g=g+Math.imul(Rt,mr)|0,S=S+Math.imul(Rt,gr)|0,_=_+Math.imul(Je,br)|0,g=g+Math.imul(Je,yr)|0,g=g+Math.imul(ct,br)|0,S=S+Math.imul(ct,yr)|0,_=_+Math.imul(je,vr)|0,g=g+Math.imul(je,wr)|0,g=g+Math.imul(Me,vr)|0,S=S+Math.imul(Me,wr)|0;var yb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(yb>>>26)|0,yb&=67108863,_=Math.imul(Mt,lr),g=Math.imul(Mt,ur),g=g+Math.imul(kt,lr)|0,S=Math.imul(kt,ur),_=_+Math.imul(At,hr)|0,g=g+Math.imul(At,dr)|0,g=g+Math.imul(Ot,hr)|0,S=S+Math.imul(Ot,dr)|0,_=_+Math.imul(Ct,fr)|0,g=g+Math.imul(Ct,pr)|0,g=g+Math.imul(_t,fr)|0,S=S+Math.imul(_t,pr)|0,_=_+Math.imul(Et,mr)|0,g=g+Math.imul(Et,gr)|0,g=g+Math.imul(wt,mr)|0,S=S+Math.imul(wt,gr)|0,_=_+Math.imul(Dt,br)|0,g=g+Math.imul(Dt,yr)|0,g=g+Math.imul(Rt,br)|0,S=S+Math.imul(Rt,yr)|0,_=_+Math.imul(Je,vr)|0,g=g+Math.imul(Je,wr)|0,g=g+Math.imul(ct,vr)|0,S=S+Math.imul(ct,wr)|0;var vb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(vb>>>26)|0,vb&=67108863,_=Math.imul(Mt,hr),g=Math.imul(Mt,dr),g=g+Math.imul(kt,hr)|0,S=Math.imul(kt,dr),_=_+Math.imul(At,fr)|0,g=g+Math.imul(At,pr)|0,g=g+Math.imul(Ot,fr)|0,S=S+Math.imul(Ot,pr)|0,_=_+Math.imul(Ct,mr)|0,g=g+Math.imul(Ct,gr)|0,g=g+Math.imul(_t,mr)|0,S=S+Math.imul(_t,gr)|0,_=_+Math.imul(Et,br)|0,g=g+Math.imul(Et,yr)|0,g=g+Math.imul(wt,br)|0,S=S+Math.imul(wt,yr)|0,_=_+Math.imul(Dt,vr)|0,g=g+Math.imul(Dt,wr)|0,g=g+Math.imul(Rt,vr)|0,S=S+Math.imul(Rt,wr)|0;var wb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(wb>>>26)|0,wb&=67108863,_=Math.imul(Mt,fr),g=Math.imul(Mt,pr),g=g+Math.imul(kt,fr)|0,S=Math.imul(kt,pr),_=_+Math.imul(At,mr)|0,g=g+Math.imul(At,gr)|0,g=g+Math.imul(Ot,mr)|0,S=S+Math.imul(Ot,gr)|0,_=_+Math.imul(Ct,br)|0,g=g+Math.imul(Ct,yr)|0,g=g+Math.imul(_t,br)|0,S=S+Math.imul(_t,yr)|0,_=_+Math.imul(Et,vr)|0,g=g+Math.imul(Et,wr)|0,g=g+Math.imul(wt,vr)|0,S=S+Math.imul(wt,wr)|0;var xb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(xb>>>26)|0,xb&=67108863,_=Math.imul(Mt,mr),g=Math.imul(Mt,gr),g=g+Math.imul(kt,mr)|0,S=Math.imul(kt,gr),_=_+Math.imul(At,br)|0,g=g+Math.imul(At,yr)|0,g=g+Math.imul(Ot,br)|0,S=S+Math.imul(Ot,yr)|0,_=_+Math.imul(Ct,vr)|0,g=g+Math.imul(Ct,wr)|0,g=g+Math.imul(_t,vr)|0,S=S+Math.imul(_t,wr)|0;var Eb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(Eb>>>26)|0,Eb&=67108863,_=Math.imul(Mt,br),g=Math.imul(Mt,yr),g=g+Math.imul(kt,br)|0,S=Math.imul(kt,yr),_=_+Math.imul(At,vr)|0,g=g+Math.imul(At,wr)|0,g=g+Math.imul(Ot,vr)|0,S=S+Math.imul(Ot,wr)|0;var Cb=(T+_|0)+((g&8191)<<13)|0;T=(S+(g>>>13)|0)+(Cb>>>26)|0,Cb&=67108863,_=Math.imul(Mt,vr),g=Math.imul(Mt,wr),g=g+Math.imul(kt,vr)|0,S=Math.imul(kt,wr);var _b=(T+_|0)+((g&8191)<<13)|0;return T=(S+(g>>>13)|0)+(_b>>>26)|0,_b&=67108863,x[0]=ob,x[1]=ab,x[2]=cb,x[3]=lb,x[4]=ub,x[5]=hb,x[6]=db,x[7]=fb,x[8]=pb,x[9]=mb,x[10]=gb,x[11]=bb,x[12]=yb,x[13]=vb,x[14]=wb,x[15]=xb,x[16]=Eb,x[17]=Cb,x[18]=_b,T!==0&&(x[19]=T,C.length++),C};Math.imul||(f=b);function v(P,d,y){y.negative=d.negative^P.negative,y.length=P.length+d.length;for(var C=0,A=0,w=0;w<y.length-1;w++){var x=A;A=0;for(var T=C&67108863,_=Math.min(w,d.length-1),g=Math.max(0,w-P.length+1);g<=_;g++){var S=w-g,q=P.words[S]|0,$=d.words[g]|0,W=q*$,Z=W&67108863;x=x+(W/67108864|0)|0,Z=Z+T|0,T=Z&67108863,x=x+(Z>>>26)|0,A+=x>>>26,x&=67108863}y.words[w]=T,C=x,x=A}return C!==0?y.words[w]=C:y.length--,y.strip()}function E(P,d,y){var C=new I;return C.mulp(P,d,y)}i.prototype.mulTo=function(d,y){var C,A=this.length+d.length;return this.length===10&&d.length===10?C=f(this,d,y):A<63?C=b(this,d,y):A<1024?C=v(this,d,y):C=E(this,d,y),C};function I(P,d){this.x=P,this.y=d}I.prototype.makeRBT=function(d){for(var y=new Array(d),C=i.prototype._countBits(d)-1,A=0;A<d;A++)y[A]=this.revBin(A,C,d);return y},I.prototype.revBin=function(d,y,C){if(d===0||d===C-1)return d;for(var A=0,w=0;w<y;w++)A|=(d&1)<<y-w-1,d>>=1;return A},I.prototype.permute=function(d,y,C,A,w,x){for(var T=0;T<x;T++)A[T]=y[d[T]],w[T]=C[d[T]]},I.prototype.transform=function(d,y,C,A,w,x){this.permute(x,d,y,C,A,w);for(var T=1;T<w;T<<=1)for(var _=T<<1,g=Math.cos(2*Math.PI/_),S=Math.sin(2*Math.PI/_),q=0;q<w;q+=_)for(var $=g,W=S,Z=0;Z<T;Z++){var ce=C[q+Z],fe=A[q+Z],Te=C[q+Z+T],be=A[q+Z+T],pe=$*Te-W*be;be=$*be+W*Te,Te=pe,C[q+Z]=ce+Te,A[q+Z]=fe+be,C[q+Z+T]=ce-Te,A[q+Z+T]=fe-be,Z!==_&&(pe=g*$-S*W,W=g*W+S*$,$=pe)}},I.prototype.guessLen13b=function(d,y){var C=Math.max(y,d)|1,A=C&1,w=0;for(C=C/2|0;C;C=C>>>1)w++;return 1<<w+1+A},I.prototype.conjugate=function(d,y,C){if(!(C<=1))for(var A=0;A<C/2;A++){var w=d[A];d[A]=d[C-A-1],d[C-A-1]=w,w=y[A],y[A]=-y[C-A-1],y[C-A-1]=-w}},I.prototype.normalize13b=function(d,y){for(var C=0,A=0;A<y/2;A++){var w=Math.round(d[2*A+1]/y)*8192+Math.round(d[2*A]/y)+C;d[A]=w&67108863,w<67108864?C=0:C=w/67108864|0}return d},I.prototype.convert13b=function(d,y,C,A){for(var w=0,x=0;x<y;x++)w=w+(d[x]|0),C[2*x]=w&8191,w=w>>>13,C[2*x+1]=w&8191,w=w>>>13;for(x=2*y;x<A;++x)C[x]=0;t(w===0),t((w&-8192)===0)},I.prototype.stub=function(d){for(var y=new Array(d),C=0;C<d;C++)y[C]=0;return y},I.prototype.mulp=function(d,y,C){var A=2*this.guessLen13b(d.length,y.length),w=this.makeRBT(A),x=this.stub(A),T=new Array(A),_=new Array(A),g=new Array(A),S=new Array(A),q=new Array(A),$=new Array(A),W=C.words;W.length=A,this.convert13b(d.words,d.length,T,A),this.convert13b(y.words,y.length,S,A),this.transform(T,x,_,g,A,w),this.transform(S,x,q,$,A,w);for(var Z=0;Z<A;Z++){var ce=_[Z]*q[Z]-g[Z]*$[Z];g[Z]=_[Z]*$[Z]+g[Z]*q[Z],_[Z]=ce}return this.conjugate(_,g,A),this.transform(_,g,W,x,A,w),this.conjugate(W,x,A),this.normalize13b(W,A),C.negative=d.negative^y.negative,C.length=d.length+y.length,C.strip()},i.prototype.mul=function(d){var y=new i(null);return y.words=new Array(this.length+d.length),this.mulTo(d,y)},i.prototype.mulf=function(d){var y=new i(null);return y.words=new Array(this.length+d.length),E(this,d,y)},i.prototype.imul=function(d){return this.clone().mulTo(d,this)},i.prototype.imuln=function(d){t(typeof d=="number"),t(d<67108864);for(var y=0,C=0;C<this.length;C++){var A=(this.words[C]|0)*d,w=(A&67108863)+(y&67108863);y>>=26,y+=A/67108864|0,y+=w>>>26,this.words[C]=w&67108863}return y!==0&&(this.words[C]=y,this.length++),this},i.prototype.muln=function(d){return this.clone().imuln(d)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(d){var y=m(d);if(y.length===0)return new i(1);for(var C=this,A=0;A<y.length&&y[A]===0;A++,C=C.sqr());if(++A<y.length)for(var w=C.sqr();A<y.length;A++,w=w.sqr())y[A]!==0&&(C=C.mul(w));return C},i.prototype.iushln=function(d){t(typeof d=="number"&&d>=0);var y=d%26,C=(d-y)/26,A=67108863>>>26-y<<26-y,w;if(y!==0){var x=0;for(w=0;w<this.length;w++){var T=this.words[w]&A,_=(this.words[w]|0)-T<<y;this.words[w]=_|x,x=T>>>26-y}x&&(this.words[w]=x,this.length++)}if(C!==0){for(w=this.length-1;w>=0;w--)this.words[w+C]=this.words[w];for(w=0;w<C;w++)this.words[w]=0;this.length+=C}return this.strip()},i.prototype.ishln=function(d){return t(this.negative===0),this.iushln(d)},i.prototype.iushrn=function(d,y,C){t(typeof d=="number"&&d>=0);var A;y?A=(y-y%26)/26:A=0;var w=d%26,x=Math.min((d-w)/26,this.length),T=67108863^67108863>>>w<<w,_=C;if(A-=x,A=Math.max(0,A),_){for(var g=0;g<x;g++)_.words[g]=this.words[g];_.length=x}if(x!==0)if(this.length>x)for(this.length-=x,g=0;g<this.length;g++)this.words[g]=this.words[g+x];else this.words[0]=0,this.length=1;var S=0;for(g=this.length-1;g>=0&&(S!==0||g>=A);g--){var q=this.words[g]|0;this.words[g]=S<<26-w|q>>>w,S=q&T}return _&&S!==0&&(_.words[_.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(d,y,C){return t(this.negative===0),this.iushrn(d,y,C)},i.prototype.shln=function(d){return this.clone().ishln(d)},i.prototype.ushln=function(d){return this.clone().iushln(d)},i.prototype.shrn=function(d){return this.clone().ishrn(d)},i.prototype.ushrn=function(d){return this.clone().iushrn(d)},i.prototype.testn=function(d){t(typeof d=="number"&&d>=0);var y=d%26,C=(d-y)/26,A=1<<y;if(this.length<=C)return!1;var w=this.words[C];return!!(w&A)},i.prototype.imaskn=function(d){t(typeof d=="number"&&d>=0);var y=d%26,C=(d-y)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(y!==0&&C++,this.length=Math.min(C,this.length),y!==0){var A=67108863^67108863>>>y<<y;this.words[this.length-1]&=A}return this.strip()},i.prototype.maskn=function(d){return this.clone().imaskn(d)},i.prototype.iaddn=function(d){return t(typeof d=="number"),t(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},i.prototype._iaddn=function(d){this.words[0]+=d;for(var y=0;y<this.length&&this.words[y]>=67108864;y++)this.words[y]-=67108864,y===this.length-1?this.words[y+1]=1:this.words[y+1]++;return this.length=Math.max(this.length,y+1),this},i.prototype.isubn=function(d){if(t(typeof d=="number"),t(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var y=0;y<this.length&&this.words[y]<0;y++)this.words[y]+=67108864,this.words[y+1]-=1;return this.strip()},i.prototype.addn=function(d){return this.clone().iaddn(d)},i.prototype.subn=function(d){return this.clone().isubn(d)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(d,y,C){var A=d.length+C,w;this._expand(A);var x,T=0;for(w=0;w<d.length;w++){x=(this.words[w+C]|0)+T;var _=(d.words[w]|0)*y;x-=_&67108863,T=(x>>26)-(_/67108864|0),this.words[w+C]=x&67108863}for(;w<this.length-C;w++)x=(this.words[w+C]|0)+T,T=x>>26,this.words[w+C]=x&67108863;if(T===0)return this.strip();for(t(T===-1),T=0,w=0;w<this.length;w++)x=-(this.words[w]|0)+T,T=x>>26,this.words[w]=x&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(d,y){var C=this.length-d.length,A=this.clone(),w=d,x=w.words[w.length-1]|0,T=this._countBits(x);C=26-T,C!==0&&(w=w.ushln(C),A.iushln(C),x=w.words[w.length-1]|0);var _=A.length-w.length,g;if(y!=="mod"){g=new i(null),g.length=_+1,g.words=new Array(g.length);for(var S=0;S<g.length;S++)g.words[S]=0}var q=A.clone()._ishlnsubmul(w,1,_);q.negative===0&&(A=q,g&&(g.words[_]=1));for(var $=_-1;$>=0;$--){var W=(A.words[w.length+$]|0)*67108864+(A.words[w.length+$-1]|0);for(W=Math.min(W/x|0,67108863),A._ishlnsubmul(w,W,$);A.negative!==0;)W--,A.negative=0,A._ishlnsubmul(w,1,$),A.isZero()||(A.negative^=1);g&&(g.words[$]=W)}return g&&g.strip(),A.strip(),y!=="div"&&C!==0&&A.iushrn(C),{div:g||null,mod:A}},i.prototype.divmod=function(d,y,C){if(t(!d.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var A,w,x;return this.negative!==0&&d.negative===0?(x=this.neg().divmod(d,y),y!=="mod"&&(A=x.div.neg()),y!=="div"&&(w=x.mod.neg(),C&&w.negative!==0&&w.iadd(d)),{div:A,mod:w}):this.negative===0&&d.negative!==0?(x=this.divmod(d.neg(),y),y!=="mod"&&(A=x.div.neg()),{div:A,mod:x.mod}):this.negative&d.negative?(x=this.neg().divmod(d.neg(),y),y!=="div"&&(w=x.mod.neg(),C&&w.negative!==0&&w.isub(d)),{div:x.div,mod:w}):d.length>this.length||this.cmp(d)<0?{div:new i(0),mod:this}:d.length===1?y==="div"?{div:this.divn(d.words[0]),mod:null}:y==="mod"?{div:null,mod:new i(this.modn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new i(this.modn(d.words[0]))}:this._wordDiv(d,y)},i.prototype.div=function(d){return this.divmod(d,"div",!1).div},i.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},i.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},i.prototype.divRound=function(d){var y=this.divmod(d);if(y.mod.isZero())return y.div;var C=y.div.negative!==0?y.mod.isub(d):y.mod,A=d.ushrn(1),w=d.andln(1),x=C.cmp(A);return x<0||w===1&&x===0?y.div:y.div.negative!==0?y.div.isubn(1):y.div.iaddn(1)},i.prototype.modn=function(d){t(d<=67108863);for(var y=(1<<26)%d,C=0,A=this.length-1;A>=0;A--)C=(y*C+(this.words[A]|0))%d;return C},i.prototype.idivn=function(d){t(d<=67108863);for(var y=0,C=this.length-1;C>=0;C--){var A=(this.words[C]|0)+y*67108864;this.words[C]=A/d|0,y=A%d}return this.strip()},i.prototype.divn=function(d){return this.clone().idivn(d)},i.prototype.egcd=function(d){t(d.negative===0),t(!d.isZero());var y=this,C=d.clone();y.negative!==0?y=y.umod(d):y=y.clone();for(var A=new i(1),w=new i(0),x=new i(0),T=new i(1),_=0;y.isEven()&&C.isEven();)y.iushrn(1),C.iushrn(1),++_;for(var g=C.clone(),S=y.clone();!y.isZero();){for(var q=0,$=1;!(y.words[0]&$)&&q<26;++q,$<<=1);if(q>0)for(y.iushrn(q);q-- >0;)(A.isOdd()||w.isOdd())&&(A.iadd(g),w.isub(S)),A.iushrn(1),w.iushrn(1);for(var W=0,Z=1;!(C.words[0]&Z)&&W<26;++W,Z<<=1);if(W>0)for(C.iushrn(W);W-- >0;)(x.isOdd()||T.isOdd())&&(x.iadd(g),T.isub(S)),x.iushrn(1),T.iushrn(1);y.cmp(C)>=0?(y.isub(C),A.isub(x),w.isub(T)):(C.isub(y),x.isub(A),T.isub(w))}return{a:x,b:T,gcd:C.iushln(_)}},i.prototype._invmp=function(d){t(d.negative===0),t(!d.isZero());var y=this,C=d.clone();y.negative!==0?y=y.umod(d):y=y.clone();for(var A=new i(1),w=new i(0),x=C.clone();y.cmpn(1)>0&&C.cmpn(1)>0;){for(var T=0,_=1;!(y.words[0]&_)&&T<26;++T,_<<=1);if(T>0)for(y.iushrn(T);T-- >0;)A.isOdd()&&A.iadd(x),A.iushrn(1);for(var g=0,S=1;!(C.words[0]&S)&&g<26;++g,S<<=1);if(g>0)for(C.iushrn(g);g-- >0;)w.isOdd()&&w.iadd(x),w.iushrn(1);y.cmp(C)>=0?(y.isub(C),A.isub(w)):(C.isub(y),w.isub(A))}var q;return y.cmpn(1)===0?q=A:q=w,q.cmpn(0)<0&&q.iadd(d),q},i.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var y=this.clone(),C=d.clone();y.negative=0,C.negative=0;for(var A=0;y.isEven()&&C.isEven();A++)y.iushrn(1),C.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;C.isEven();)C.iushrn(1);var w=y.cmp(C);if(w<0){var x=y;y=C,C=x}else if(w===0||C.cmpn(1)===0)break;y.isub(C)}while(!0);return C.iushln(A)},i.prototype.invm=function(d){return this.egcd(d).a.umod(d)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(d){return this.words[0]&d},i.prototype.bincn=function(d){t(typeof d=="number");var y=d%26,C=(d-y)/26,A=1<<y;if(this.length<=C)return this._expand(C+1),this.words[C]|=A,this;for(var w=A,x=C;w!==0&&x<this.length;x++){var T=this.words[x]|0;T+=w,w=T>>>26,T&=67108863,this.words[x]=T}return w!==0&&(this.words[x]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(d){var y=d<0;if(this.negative!==0&&!y)return-1;if(this.negative===0&&y)return 1;this.strip();var C;if(this.length>1)C=1;else{y&&(d=-d),t(d<=67108863,"Number is too big");var A=this.words[0]|0;C=A===d?0:A<d?-1:1}return this.negative!==0?-C|0:C},i.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var y=this.ucmp(d);return this.negative!==0?-y|0:y},i.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var y=0,C=this.length-1;C>=0;C--){var A=this.words[C]|0,w=d.words[C]|0;if(A!==w){A<w?y=-1:A>w&&(y=1);break}}return y},i.prototype.gtn=function(d){return this.cmpn(d)===1},i.prototype.gt=function(d){return this.cmp(d)===1},i.prototype.gten=function(d){return this.cmpn(d)>=0},i.prototype.gte=function(d){return this.cmp(d)>=0},i.prototype.ltn=function(d){return this.cmpn(d)===-1},i.prototype.lt=function(d){return this.cmp(d)===-1},i.prototype.lten=function(d){return this.cmpn(d)<=0},i.prototype.lte=function(d){return this.cmp(d)<=0},i.prototype.eqn=function(d){return this.cmpn(d)===0},i.prototype.eq=function(d){return this.cmp(d)===0},i.red=function(d){return new M(d)},i.prototype.toRed=function(d){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(d){return this.red=d,this},i.prototype.forceRed=function(d){return t(!this.red,"Already a number in reduction context"),this._forceRed(d)},i.prototype.redAdd=function(d){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},i.prototype.redIAdd=function(d){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},i.prototype.redSub=function(d){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},i.prototype.redISub=function(d){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},i.prototype.redShl=function(d){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},i.prototype.redMul=function(d){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},i.prototype.redIMul=function(d){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(d){return t(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var N={k256:null,p224:null,p192:null,p25519:null};function D(P,d){this.name=P,this.p=new i(d,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var d=new i(null);return d.words=new Array(Math.ceil(this.n/13)),d},D.prototype.ireduce=function(d){var y=d,C;do this.split(y,this.tmp),y=this.imulK(y),y=y.iadd(this.tmp),C=y.bitLength();while(C>this.n);var A=C<this.n?-1:y.ucmp(this.p);return A===0?(y.words[0]=0,y.length=1):A>0?y.isub(this.p):y.strip!==void 0?y.strip():y._strip(),y},D.prototype.split=function(d,y){d.iushrn(this.n,0,y)},D.prototype.imulK=function(d){return d.imul(this.k)};function F(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(F,D),F.prototype.split=function(d,y){for(var C=4194303,A=Math.min(d.length,9),w=0;w<A;w++)y.words[w]=d.words[w];if(y.length=A,d.length<=9){d.words[0]=0,d.length=1;return}var x=d.words[9];for(y.words[y.length++]=x&C,w=10;w<d.length;w++){var T=d.words[w]|0;d.words[w-10]=(T&C)<<4|x>>>22,x=T}x>>>=22,d.words[w-10]=x,x===0&&d.length>10?d.length-=10:d.length-=9},F.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var y=0,C=0;C<d.length;C++){var A=d.words[C]|0;y+=A*977,d.words[C]=y&67108863,y=A*64+(y/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function U(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(U,D);function L(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(L,D);function B(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(B,D),B.prototype.imulK=function(d){for(var y=0,C=0;C<d.length;C++){var A=(d.words[C]|0)*19+y,w=A&67108863;A>>>=26,d.words[C]=w,y=A}return y!==0&&(d.words[d.length++]=y),d},i._prime=function(d){if(N[d])return N[d];var y;if(d==="k256")y=new F;else if(d==="p224")y=new U;else if(d==="p192")y=new L;else if(d==="p25519")y=new B;else throw new Error("Unknown prime "+d);return N[d]=y,y};function M(P){if(typeof P=="string"){var d=i._prime(P);this.m=d.p,this.prime=d}else t(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}M.prototype._verify1=function(d){t(d.negative===0,"red works only with positives"),t(d.red,"red works only with red numbers")},M.prototype._verify2=function(d,y){t((d.negative|y.negative)===0,"red works only with positives"),t(d.red&&d.red===y.red,"red works only with red numbers")},M.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):d.umod(this.m)._forceRed(this)},M.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},M.prototype.add=function(d,y){this._verify2(d,y);var C=d.add(y);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},M.prototype.iadd=function(d,y){this._verify2(d,y);var C=d.iadd(y);return C.cmp(this.m)>=0&&C.isub(this.m),C},M.prototype.sub=function(d,y){this._verify2(d,y);var C=d.sub(y);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},M.prototype.isub=function(d,y){this._verify2(d,y);var C=d.isub(y);return C.cmpn(0)<0&&C.iadd(this.m),C},M.prototype.shl=function(d,y){return this._verify1(d),this.imod(d.ushln(y))},M.prototype.imul=function(d,y){return this._verify2(d,y),this.imod(d.imul(y))},M.prototype.mul=function(d,y){return this._verify2(d,y),this.imod(d.mul(y))},M.prototype.isqr=function(d){return this.imul(d,d.clone())},M.prototype.sqr=function(d){return this.mul(d,d)},M.prototype.sqrt=function(d){if(d.isZero())return d.clone();var y=this.m.andln(3);if(t(y%2===1),y===3){var C=this.m.add(new i(1)).iushrn(2);return this.pow(d,C)}for(var A=this.m.subn(1),w=0;!A.isZero()&&A.andln(1)===0;)w++,A.iushrn(1);t(!A.isZero());var x=new i(1).toRed(this),T=x.redNeg(),_=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new i(2*g*g).toRed(this);this.pow(g,_).cmp(T)!==0;)g.redIAdd(T);for(var S=this.pow(g,A),q=this.pow(d,A.addn(1).iushrn(1)),$=this.pow(d,A),W=w;$.cmp(x)!==0;){for(var Z=$,ce=0;Z.cmp(x)!==0;ce++)Z=Z.redSqr();t(ce<W);var fe=this.pow(S,new i(1).iushln(W-ce-1));q=q.redMul(fe),S=fe.redSqr(),$=$.redMul(S),W=ce}return q},M.prototype.invm=function(d){var y=d._invmp(this.m);return y.negative!==0?(y.negative=0,this.imod(y).redNeg()):this.imod(y)},M.prototype.pow=function(d,y){if(y.isZero())return new i(1).toRed(this);if(y.cmpn(1)===0)return d.clone();var C=4,A=new Array(1<<C);A[0]=new i(1).toRed(this),A[1]=d;for(var w=2;w<A.length;w++)A[w]=this.mul(A[w-1],d);var x=A[0],T=0,_=0,g=y.bitLength()%26;for(g===0&&(g=26),w=y.length-1;w>=0;w--){for(var S=y.words[w],q=g-1;q>=0;q--){var $=S>>q&1;if(x!==A[0]&&(x=this.sqr(x)),$===0&&T===0){_=0;continue}T<<=1,T|=$,_++,!(_!==C&&(w!==0||q!==0))&&(x=this.mul(x,A[T]),_=0,T=0)}g=26}return x},M.prototype.convertTo=function(d){var y=d.umod(this.m);return y===d?y.clone():y},M.prototype.convertFrom=function(d){var y=d.clone();return y.red=null,y},i.mont=function(d){return new V(d)};function V(P){M.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(V,M),V.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},V.prototype.convertFrom=function(d){var y=this.imod(d.mul(this.rinv));return y.red=null,y},V.prototype.imul=function(d,y){if(d.isZero()||y.isZero())return d.words[0]=0,d.length=1,d;var C=d.imul(y),A=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=C.isub(A).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},V.prototype.mul=function(d,y){if(d.isZero()||y.isZero())return new i(0)._forceRed(this);var C=d.mul(y),A=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=C.isub(A).iushrn(this.shift),x=w;return w.cmp(this.m)>=0?x=w.isub(this.m):w.cmpn(0)<0&&(x=w.iadd(this.m)),x._forceRed(this)},V.prototype.invm=function(d){var y=this.imod(d._invmp(this.m).mul(this.r2));return y._forceRed(this)}})(typeof l1>"u"||l1,j3)});var Jo=we((vse,q3)=>{"use strict";q3.exports=H3;function H3(r,e){if(!r)throw new Error(e||"Assertion failed")}H3.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var u1=we(G3=>{"use strict";var lm=G3;function zF(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var n=0;n<r.length;n++)t[n]=r[n]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var i=r.charCodeAt(n),s=i>>8,o=i&255;s?t.push(s,o):t.push(o)}return t}lm.toArray=zF;function z3(r){return r.length===1?"0"+r:r}lm.zero2=z3;function $3(r){for(var e="",t=0;t<r.length;t++)e+=z3(r[t].toString(16));return e}lm.toHex=$3;lm.encode=function(e,t){return t==="hex"?$3(e):e}});var Wn=we(K3=>{"use strict";var Mi=K3,$F=xs(),GF=Jo(),um=u1();Mi.assert=GF;Mi.toArray=um.toArray;Mi.zero2=um.zero2;Mi.toHex=um.toHex;Mi.encode=um.encode;function KF(r,e,t){var n=new Array(Math.max(r.bitLength(),t)+1),i;for(i=0;i<n.length;i+=1)n[i]=0;var s=1<<e+1,o=r.clone();for(i=0;i<n.length;i++){var a,c=o.andln(s-1);o.isOdd()?(c>(s>>1)-1?a=(s>>1)-c:a=c,o.isubn(a)):a=0,n[i]=a,o.iushrn(1)}return n}Mi.getNAF=KF;function WF(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var n=0,i=0,s;r.cmpn(-n)>0||e.cmpn(-i)>0;){var o=r.andln(3)+n&3,a=e.andln(3)+i&3;o===3&&(o=-1),a===3&&(a=-1);var c;o&1?(s=r.andln(7)+n&7,(s===3||s===5)&&a===2?c=-o:c=o):c=0,t[0].push(c);var l;a&1?(s=e.andln(7)+i&7,(s===3||s===5)&&o===2?l=-a:l=a):l=0,t[1].push(l),2*n===c+1&&(n=1-n),2*i===l+1&&(i=1-i),r.iushrn(1),e.iushrn(1)}return t}Mi.getJSF=WF;function JF(r,e,t){var n="_"+e;r.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=t.call(this)}}Mi.cachedProperty=JF;function YF(r){return typeof r=="string"?Mi.toArray(r,"hex"):r}Mi.parseBytes=YF;function QF(r){return new $F(r,"hex","le")}Mi.intFromLE=QF});var W3=we(()=>{"use strict"});var p1=we((_se,f1)=>{"use strict";var h1;f1.exports=function(e){return h1||(h1=new Yo(null)),h1.generate(e)};function Yo(r){this.rand=r}f1.exports.Rand=Yo;Yo.prototype.generate=function(e){return this._rand(e)};Yo.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Yo.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Yo.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Yo.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(d1=W3(),typeof d1.randomBytes!="function")throw new Error("Not supported");Yo.prototype._rand=function(e){return d1.randomBytes(e)}}catch{}var d1});var hd=we((Ase,J3)=>{"use strict";var uc=xs(),ud=Wn(),hm=ud.getNAF,ZF=ud.getJSF,dm=ud.assert;function Qo(r,e){this.type=r,this.p=new uc(e.p,16),this.red=e.prime?uc.red(e.prime):uc.mont(this.p),this.zero=new uc(0).toRed(this.red),this.one=new uc(1).toRed(this.red),this.two=new uc(2).toRed(this.red),this.n=e.n&&new uc(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}J3.exports=Qo;Qo.prototype.point=function(){throw new Error("Not implemented")};Qo.prototype.validate=function(){throw new Error("Not implemented")};Qo.prototype._fixedNafMul=function(e,t){dm(e.precomputed);var n=e._getDoubles(),i=hm(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];o.push(c)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),m=s;m>0;m--){for(a=0;a<o.length;a++)c=o[a],c===m?h=h.mixedAdd(n.points[a]):c===-m&&(h=h.mixedAdd(n.points[a].neg()));u=u.add(h)}return u.toP()};Qo.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=hm(t,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];dm(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Qo.prototype._wnafMulAdd=function(e,t,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,h,m;for(u=0;u<i;u++){m=t[u];var b=m._getNAFPoints(e);o[u]=b.wnd,a[u]=b.points}for(u=i-1;u>=1;u-=2){var f=u-1,v=u;if(o[f]!==1||o[v]!==1){c[f]=hm(n[f],o[f],this._bitLength),c[v]=hm(n[v],o[v],this._bitLength),l=Math.max(c[f].length,l),l=Math.max(c[v].length,l);continue}var E=[t[f],null,null,t[v]];t[f].y.cmp(t[v].y)===0?(E[1]=t[f].add(t[v]),E[2]=t[f].toJ().mixedAdd(t[v].neg())):t[f].y.cmp(t[v].y.redNeg())===0?(E[1]=t[f].toJ().mixedAdd(t[v]),E[2]=t[f].add(t[v].neg())):(E[1]=t[f].toJ().mixedAdd(t[v]),E[2]=t[f].toJ().mixedAdd(t[v].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],N=ZF(n[f],n[v]);for(l=Math.max(N[0].length,l),c[f]=new Array(l),c[v]=new Array(l),h=0;h<l;h++){var D=N[0][h]|0,F=N[1][h]|0;c[f][h]=I[(D+1)*3+(F+1)],c[v][h]=0,a[f]=E}}var U=this.jpoint(null,null,null),L=this._wnafT4;for(u=l;u>=0;u--){for(var B=0;u>=0;){var M=!0;for(h=0;h<i;h++)L[h]=c[h][u]|0,L[h]!==0&&(M=!1);if(!M)break;B++,u--}if(u>=0&&B++,U=U.dblp(B),u<0)break;for(h=0;h<i;h++){var V=L[h];V!==0&&(V>0?m=a[h][V-1>>1]:V<0&&(m=a[h][-V-1>>1].neg()),m.type==="affine"?U=U.mixedAdd(m):U=U.add(m))}}for(u=0;u<i;u++)a[u]=null;return s?U:U.toP()};function di(r,e){this.curve=r,this.type=e,this.precomputed=null}Qo.BasePoint=di;di.prototype.eq=function(){throw new Error("Not implemented")};di.prototype.validate=function(){return this.curve.validate(this)};Qo.prototype.decodePoint=function(e,t){e=ud.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?dm(e[e.length-1]%2===0):e[0]===7&&dm(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};di.prototype.encodeCompressed=function(e){return this.encode(e,!0)};di.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};di.prototype.encode=function(e,t){return ud.encode(this._encode(t),e)};di.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};di.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};di.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};di.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};di.prototype._getBeta=function(){return null};di.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}});var dd=we((Sse,m1)=>{"use strict";typeof Object.create=="function"?m1.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:m1.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Q3=we((Ise,Y3)=>{"use strict";var XF=Wn(),Vt=xs(),g1=dd(),Rl=hd(),eB=XF.assert;function fi(r){Rl.call(this,"short",r),this.a=new Vt(r.a,16).toRed(this.red),this.b=new Vt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}g1(fi,Rl);Y3.exports=fi;fi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new Vt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new Vt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],eB(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Vt(a.a,16),b:new Vt(a.b,16)}}):o=this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}};fi.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Vt.mont(e),n=new Vt(2).toRed(t).redInvm(),i=n.redNeg(),s=new Vt(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};fi.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Vt(1),o=new Vt(0),a=new Vt(0),c=new Vt(1),l,u,h,m,b,f,v,E=0,I,N;n.cmpn(0)!==0;){var D=i.div(n);I=i.sub(D.mul(n)),N=a.sub(D.mul(s));var F=c.sub(D.mul(o));if(!h&&I.cmp(t)<0)l=v.neg(),u=s,h=I.neg(),m=N;else if(h&&++E===2)break;v=I,i=n,n=I,a=s,s=N,c=o,o=F}b=I.neg(),f=N;var U=h.sqr().add(m.sqr()),L=b.sqr().add(f.sqr());return L.cmp(U)>=0&&(b=l,f=u),h.negative&&(h=h.neg(),m=m.neg()),b.negative&&(b=b.neg(),f=f.neg()),[{a:h,b:m},{a:b,b:f}]};fi.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),l=s.mul(n.b),u=o.mul(i.b),h=e.sub(a).sub(c),m=l.add(u).neg();return{k1:h,k2:m}};fi.prototype.pointFromX=function(e,t){e=new Vt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};fi.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};fi.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),i[o*2]=c,i[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return u};function Vr(r,e,t,n){Rl.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Vt(e,16),this.y=new Vt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}g1(Vr,Rl.BasePoint);fi.prototype.point=function(e,t,n){return new Vr(this,e,t,n)};fi.prototype.pointFromJSON=function(e,t){return Vr.fromJSON(this,e,t)};Vr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Vr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Vr.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Vr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Vr.prototype.isInfinity=function(){return this.inf};Vr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Vr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Vr.prototype.getX=function(){return this.x.fromRed()};Vr.prototype.getY=function(){return this.y.fromRed()};Vr.prototype.mul=function(e){return e=new Vt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Vr.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Vr.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Vr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Vr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};Vr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function tn(r,e,t,n){Rl.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Vt(0)):(this.x=new Vt(e,16),this.y=new Vt(t,16),this.z=new Vt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}g1(tn,Rl.BasePoint);fi.prototype.jpoint=function(e,t,n){return new tn(this,e,t,n)};tn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};tn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};tn.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),h=u.redMul(c),m=i.redMul(u),b=l.redSqr().redIAdd(h).redISub(m).redISub(m),f=l.redMul(m.redISub(b)).redISub(o.redMul(h)),v=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(b,f,v)};tn.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),h=n.redMul(l),m=c.redSqr().redIAdd(u).redISub(h).redISub(h),b=c.redMul(h.redISub(m)).redISub(s.redMul(u)),f=this.z.redMul(a);return this.curve.jpoint(m,b,f)};tn.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(t=0;t<e;t++){var h=o.redSqr(),m=u.redSqr(),b=m.redSqr(),f=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(l)),v=o.redMul(m),E=f.redSqr().redISub(v.redAdd(v)),I=v.redISub(E),N=f.redMul(I);N=N.redIAdd(N).redISub(b);var D=u.redMul(c);t+1<e&&(l=l.redMul(b)),o=E,c=D,u=N}return this.curve.jpoint(o,u.redMul(s),c)};tn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};tn.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,t=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),m=this.y.redSqr(),b=m.redSqr(),f=this.x.redAdd(m).redSqr().redISub(h).redISub(b);f=f.redIAdd(f);var v=h.redAdd(h).redIAdd(h),E=v.redSqr(),I=b.redIAdd(b);I=I.redIAdd(I),I=I.redIAdd(I),e=E.redISub(f).redISub(f),t=v.redMul(f.redISub(e)).redISub(I),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};tn.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=c.redMul(a.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),m=this.y.redSqr(),b=this.x.redMul(m),f=this.x.redSub(h).redMul(this.x.redAdd(h));f=f.redAdd(f).redIAdd(f);var v=b.redIAdd(b);v=v.redIAdd(v);var E=v.redAdd(v);e=f.redSqr().redISub(E),n=this.y.redAdd(this.z).redSqr().redISub(m).redISub(h);var I=m.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),t=f.redMul(v.redISub(e)).redISub(I)}return this.curve.jpoint(e,t,n)};tn.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=t.redAdd(t);l=l.redIAdd(l);var u=l.redMul(a),h=c.redSqr().redISub(u.redAdd(u)),m=u.redISub(h),b=a.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var f=c.redMul(m).redISub(b),v=n.redAdd(n).redMul(i);return this.curve.jpoint(h,f,v)};tn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),h=t.redMul(u);h=h.redIAdd(h),h=h.redIAdd(h);var m=this.x.redMul(c).redISub(h);m=m.redIAdd(m),m=m.redIAdd(m);var b=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var f=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(m,b,f)};tn.prototype.mul=function(e,t){return e=new Vt(e,t),this.curve._wnafMul(this,e)};tn.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};tn.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};tn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};tn.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var eI=we((Pse,X3)=>{"use strict";var Ol=xs(),Z3=dd(),fm=hd(),tB=Wn();function Ml(r){fm.call(this,"mont",r),this.a=new Ol(r.a,16).toRed(this.red),this.b=new Ol(r.b,16).toRed(this.red),this.i4=new Ol(4).toRed(this.red).redInvm(),this.two=new Ol(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Z3(Ml,fm);X3.exports=Ml;Ml.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),s=i.redSqrt();return s.redSqr().cmp(i)===0};function jr(r,e,t){fm.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ol(e,16),this.z=new Ol(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Z3(jr,fm.BasePoint);Ml.prototype.decodePoint=function(e,t){return this.point(tB.toArray(e,t),1)};Ml.prototype.point=function(e,t){return new jr(this,e,t)};Ml.prototype.pointFromJSON=function(e){return jr.fromJSON(this,e)};jr.prototype.precompute=function(){};jr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};jr.fromJSON=function(e,t){return new jr(e,t[0],t[1]||e.one)};jr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};jr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};jr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=t.redSub(i),o=t.redMul(i),a=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};jr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};jr.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(n),c=s.redMul(i),l=t.z.redMul(a.redAdd(c).redSqr()),u=t.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,u)};jr.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),s=this,o=[];t.cmpn(0)!==0;t.iushrn(1))o.push(t.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};jr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};jr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};jr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};jr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};jr.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var nI=we((Tse,rI)=>{"use strict";var rB=Wn(),to=xs(),tI=dd(),pm=hd(),nB=rB.assert;function Es(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,pm.call(this,"edwards",r),this.a=new to(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new to(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new to(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),nB(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}tI(Es,pm);rI.exports=Es;Es.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Es.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Es.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};Es.prototype.pointFromX=function(e,t){e=new to(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)};Es.prototype.pointFromY=function(e,t){e=new to(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)};Es.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(s)===0};function pt(r,e,t,n,i){pm.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new to(e,16),this.y=new to(t,16),this.z=n?new to(n,16):this.curve.one,this.t=i&&new to(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}tI(pt,pm.BasePoint);Es.prototype.pointFromJSON=function(e){return pt.fromJSON(this,e)};Es.prototype.point=function(e,t,n,i){return new pt(this,e,t,n,i)};pt.fromJSON=function(e,t){return new pt(e,t[0],t[1],t[2])};pt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};pt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};pt.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=i.redAdd(t),a=o.redSub(n),c=i.redSub(t),l=s.redMul(a),u=o.redMul(c),h=s.redMul(c),m=a.redMul(o);return this.curve.point(l,u,m,h)};pt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(t);var u=a.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(u.redSub(this.curve.two)),s=u.redMul(a.redSub(n)),o=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),l=u.redSub(c).redISub(c),i=e.redSub(t).redISub(n).redMul(l),s=u.redMul(a.redSub(n)),o=u.redMul(l))}else a=t.redAdd(n),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(t.redISub(n)),o=a.redMul(l);return this.curve.point(i,s,o)};pt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};pt.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),a=s.redSub(i),c=s.redAdd(i),l=n.redAdd(t),u=o.redMul(a),h=c.redMul(l),m=o.redMul(l),b=a.redMul(c);return this.curve.point(u,h,b,m)};pt.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),a=n.redSub(o),c=n.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),u=t.redMul(a).redMul(l),h,m;return this.curve.twisted?(h=t.redMul(c).redMul(s.redSub(this.curve._mulA(i))),m=a.redMul(c)):(h=t.redMul(c).redMul(s.redSub(i)),m=this.curve._mulC(a).redMul(c)),this.curve.point(u,h,m)};pt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};pt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};pt.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};pt.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};pt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};pt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};pt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};pt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};pt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};pt.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};pt.prototype.toP=pt.prototype.normalize;pt.prototype.mixedAdd=pt.prototype.add});var b1=we(iI=>{"use strict";var mm=iI;mm.base=hd();mm.short=Q3();mm.mont=eI();mm.edwards=nI()});var ki=we(lt=>{"use strict";var iB=Jo(),sB=dd();lt.inherits=sB;function oB(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function aB(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var s=r.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):oB(r,i)?(s=65536+((s&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}lt.toArray=aB;function cB(r){for(var e="",t=0;t<r.length;t++)e+=oI(r[t].toString(16));return e}lt.toHex=cB;function sI(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}lt.htonl=sI;function lB(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=sI(i)),t+=aI(i.toString(16))}return t}lt.toHex32=lB;function oI(r){return r.length===1?"0"+r:r}lt.zero2=oI;function aI(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}lt.zero8=aI;function uB(r,e,t,n){var i=t-e;iB(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var c;n==="big"?c=r[a]<<24|r[a+1]<<16|r[a+2]<<8|r[a+3]:c=r[a+3]<<24|r[a+2]<<16|r[a+1]<<8|r[a],s[o]=c>>>0}return s}lt.join32=uB;function hB(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var s=r[n];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}lt.split32=hB;function dB(r,e){return r>>>e|r<<32-e}lt.rotr32=dB;function fB(r,e){return r<<e|r>>>32-e}lt.rotl32=fB;function pB(r,e){return r+e>>>0}lt.sum32=pB;function mB(r,e,t){return r+e+t>>>0}lt.sum32_3=mB;function gB(r,e,t,n){return r+e+t+n>>>0}lt.sum32_4=gB;function bB(r,e,t,n,i){return r+e+t+n+i>>>0}lt.sum32_5=bB;function yB(r,e,t,n){var i=r[e],s=r[e+1],o=n+s>>>0,a=(o<n?1:0)+t+i;r[e]=a>>>0,r[e+1]=o}lt.sum64=yB;function vB(r,e,t,n){var i=e+n>>>0,s=(i<e?1:0)+r+t;return s>>>0}lt.sum64_hi=vB;function wB(r,e,t,n){var i=e+n;return i>>>0}lt.sum64_lo=wB;function xB(r,e,t,n,i,s,o,a){var c=0,l=e;l=l+n>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var u=r+t+i+o+c;return u>>>0}lt.sum64_4_hi=xB;function EB(r,e,t,n,i,s,o,a){var c=e+n+s+a;return c>>>0}lt.sum64_4_lo=EB;function CB(r,e,t,n,i,s,o,a,c,l){var u=0,h=e;h=h+n>>>0,u+=h<e?1:0,h=h+s>>>0,u+=h<s?1:0,h=h+a>>>0,u+=h<a?1:0,h=h+l>>>0,u+=h<l?1:0;var m=r+t+i+o+c+u;return m>>>0}lt.sum64_5_hi=CB;function _B(r,e,t,n,i,s,o,a,c,l){var u=e+n+s+a+l;return u>>>0}lt.sum64_5_lo=_B;function AB(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}lt.rotr64_hi=AB;function SB(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}lt.rotr64_lo=SB;function IB(r,e,t){return r>>>t}lt.shr64_hi=IB;function PB(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}lt.shr64_lo=PB});var kl=we(lI=>{"use strict";var cI=ki(),TB=Jo();function gm(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}lI.BlockHash=gm;gm.prototype.update=function(e,t){if(e=cI.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=cI.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};gm.prototype.digest=function(e){return this.update(this._pad()),TB(this.pending===null),this._digest(e)};gm.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i}});var y1=we(ro=>{"use strict";var NB=ki(),Cs=NB.rotr32;function DB(r,e,t,n){if(r===0)return uI(e,t,n);if(r===1||r===3)return dI(e,t,n);if(r===2)return hI(e,t,n)}ro.ft_1=DB;function uI(r,e,t){return r&e^~r&t}ro.ch32=uI;function hI(r,e,t){return r&e^r&t^e&t}ro.maj32=hI;function dI(r,e,t){return r^e^t}ro.p32=dI;function RB(r){return Cs(r,2)^Cs(r,13)^Cs(r,22)}ro.s0_256=RB;function OB(r){return Cs(r,6)^Cs(r,11)^Cs(r,25)}ro.s1_256=OB;function MB(r){return Cs(r,7)^Cs(r,18)^r>>>3}ro.g0_256=MB;function kB(r){return Cs(r,17)^Cs(r,19)^r>>>10}ro.g1_256=kB});var mI=we((Mse,pI)=>{"use strict";var Fl=ki(),FB=kl(),BB=y1(),v1=Fl.rotl32,fd=Fl.sum32,UB=Fl.sum32_5,LB=BB.ft_1,fI=FB.BlockHash,VB=[1518500249,1859775393,2400959708,3395469782];function _s(){if(!(this instanceof _s))return new _s;fI.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Fl.inherits(_s,fI);pI.exports=_s;_s.blockSize=512;_s.outSize=160;_s.hmacStrength=80;_s.padLength=64;_s.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=v1(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20),h=UB(v1(s,5),LB(u,o,a,c),l,n[i],VB[u]);l=c,c=a,a=v1(o,30),o=s,s=h}this.h[0]=fd(this.h[0],s),this.h[1]=fd(this.h[1],o),this.h[2]=fd(this.h[2],a),this.h[3]=fd(this.h[3],c),this.h[4]=fd(this.h[4],l)};_s.prototype._digest=function(e){return e==="hex"?Fl.toHex32(this.h,"big"):Fl.split32(this.h,"big")}});var w1=we((kse,bI)=>{"use strict";var Bl=ki(),jB=kl(),Ul=y1(),HB=Jo(),Fi=Bl.sum32,qB=Bl.sum32_4,zB=Bl.sum32_5,$B=Ul.ch32,GB=Ul.maj32,KB=Ul.s0_256,WB=Ul.s1_256,JB=Ul.g0_256,YB=Ul.g1_256,gI=jB.BlockHash,QB=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function As(){if(!(this instanceof As))return new As;gI.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=QB,this.W=new Array(64)}Bl.inherits(As,gI);bI.exports=As;As.blockSize=512;As.outSize=256;As.hmacStrength=192;As.padLength=64;As.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=qB(YB(n[i-2]),n[i-7],JB(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],h=this.h[6],m=this.h[7];for(HB(this.k.length===n.length),i=0;i<n.length;i++){var b=zB(m,WB(l),$B(l,u,h),this.k[i],n[i]),f=Fi(KB(s),GB(s,o,a));m=h,h=u,u=l,l=Fi(c,b),c=a,a=o,o=s,s=Fi(b,f)}this.h[0]=Fi(this.h[0],s),this.h[1]=Fi(this.h[1],o),this.h[2]=Fi(this.h[2],a),this.h[3]=Fi(this.h[3],c),this.h[4]=Fi(this.h[4],l),this.h[5]=Fi(this.h[5],u),this.h[6]=Fi(this.h[6],h),this.h[7]=Fi(this.h[7],m)};As.prototype._digest=function(e){return e==="hex"?Bl.toHex32(this.h,"big"):Bl.split32(this.h,"big")}});var wI=we((Fse,vI)=>{"use strict";var x1=ki(),yI=w1();function no(){if(!(this instanceof no))return new no;yI.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}x1.inherits(no,yI);vI.exports=no;no.blockSize=512;no.outSize=224;no.hmacStrength=192;no.padLength=64;no.prototype._digest=function(e){return e==="hex"?x1.toHex32(this.h.slice(0,7),"big"):x1.split32(this.h.slice(0,7),"big")}});var _1=we((Bse,_I)=>{"use strict";var kn=ki(),ZB=kl(),XB=Jo(),Ss=kn.rotr64_hi,Is=kn.rotr64_lo,xI=kn.shr64_hi,EI=kn.shr64_lo,Zo=kn.sum64,E1=kn.sum64_hi,C1=kn.sum64_lo,eU=kn.sum64_4_hi,tU=kn.sum64_4_lo,rU=kn.sum64_5_hi,nU=kn.sum64_5_lo,CI=ZB.BlockHash,iU=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Bi(){if(!(this instanceof Bi))return new Bi;CI.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=iU,this.W=new Array(160)}kn.inherits(Bi,CI);_I.exports=Bi;Bi.blockSize=1024;Bi.outSize=512;Bi.hmacStrength=192;Bi.padLength=128;Bi.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var s=mU(n[i-4],n[i-3]),o=gU(n[i-4],n[i-3]),a=n[i-14],c=n[i-13],l=fU(n[i-30],n[i-29]),u=pU(n[i-30],n[i-29]),h=n[i-32],m=n[i-31];n[i]=eU(s,o,a,c,l,u,h,m),n[i+1]=tU(s,o,a,c,l,u,h,m)}};Bi.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],h=this.h[7],m=this.h[8],b=this.h[9],f=this.h[10],v=this.h[11],E=this.h[12],I=this.h[13],N=this.h[14],D=this.h[15];XB(this.k.length===n.length);for(var F=0;F<n.length;F+=2){var U=N,L=D,B=hU(m,b),M=dU(m,b),V=sU(m,b,f,v,E,I),P=oU(m,b,f,v,E,I),d=this.k[F],y=this.k[F+1],C=n[F],A=n[F+1],w=rU(U,L,B,M,V,P,d,y,C,A),x=nU(U,L,B,M,V,P,d,y,C,A);U=lU(i,s),L=uU(i,s),B=aU(i,s,o,a,c,l),M=cU(i,s,o,a,c,l);var T=E1(U,L,B,M),_=C1(U,L,B,M);N=E,D=I,E=f,I=v,f=m,v=b,m=E1(u,h,w,x),b=C1(h,h,w,x),u=c,h=l,c=o,l=a,o=i,a=s,i=E1(w,x,T,_),s=C1(w,x,T,_)}Zo(this.h,0,i,s),Zo(this.h,2,o,a),Zo(this.h,4,c,l),Zo(this.h,6,u,h),Zo(this.h,8,m,b),Zo(this.h,10,f,v),Zo(this.h,12,E,I),Zo(this.h,14,N,D)};Bi.prototype._digest=function(e){return e==="hex"?kn.toHex32(this.h,"big"):kn.split32(this.h,"big")};function sU(r,e,t,n,i){var s=r&t^~r&i;return s<0&&(s+=4294967296),s}function oU(r,e,t,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function aU(r,e,t,n,i){var s=r&t^r&i^t&i;return s<0&&(s+=4294967296),s}function cU(r,e,t,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function lU(r,e){var t=Ss(r,e,28),n=Ss(e,r,2),i=Ss(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function uU(r,e){var t=Is(r,e,28),n=Is(e,r,2),i=Is(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function hU(r,e){var t=Ss(r,e,14),n=Ss(r,e,18),i=Ss(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function dU(r,e){var t=Is(r,e,14),n=Is(r,e,18),i=Is(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function fU(r,e){var t=Ss(r,e,1),n=Ss(r,e,8),i=xI(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function pU(r,e){var t=Is(r,e,1),n=Is(r,e,8),i=EI(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function mU(r,e){var t=Ss(r,e,19),n=Ss(e,r,29),i=xI(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}function gU(r,e){var t=Is(r,e,19),n=Is(e,r,29),i=EI(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}});var II=we((Use,SI)=>{"use strict";var A1=ki(),AI=_1();function io(){if(!(this instanceof io))return new io;AI.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}A1.inherits(io,AI);SI.exports=io;io.blockSize=1024;io.outSize=384;io.hmacStrength=192;io.padLength=128;io.prototype._digest=function(e){return e==="hex"?A1.toHex32(this.h.slice(0,12),"big"):A1.split32(this.h.slice(0,12),"big")}});var PI=we(Ll=>{"use strict";Ll.sha1=mI();Ll.sha224=wI();Ll.sha256=w1();Ll.sha384=II();Ll.sha512=_1()});var MI=we(OI=>{"use strict";var hc=ki(),bU=kl(),bm=hc.rotl32,TI=hc.sum32,pd=hc.sum32_3,NI=hc.sum32_4,RI=bU.BlockHash;function Ps(){if(!(this instanceof Ps))return new Ps;RI.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}hc.inherits(Ps,RI);OI.ripemd160=Ps;Ps.blockSize=512;Ps.outSize=160;Ps.hmacStrength=192;Ps.padLength=64;Ps.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=n,l=i,u=s,h=o,m=a,b=0;b<80;b++){var f=TI(bm(NI(n,DI(b,i,s,o),e[wU[b]+t],yU(b)),EU[b]),a);n=a,a=o,o=bm(s,10),s=i,i=f,f=TI(bm(NI(c,DI(79-b,l,u,h),e[xU[b]+t],vU(b)),CU[b]),m),c=m,m=h,h=bm(u,10),u=l,l=f}f=pd(this.h[1],s,h),this.h[1]=pd(this.h[2],o,m),this.h[2]=pd(this.h[3],a,c),this.h[3]=pd(this.h[4],n,l),this.h[4]=pd(this.h[0],i,u),this.h[0]=f};Ps.prototype._digest=function(e){return e==="hex"?hc.toHex32(this.h,"little"):hc.split32(this.h,"little")};function DI(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function yU(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function vU(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var wU=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],xU=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],EU=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],CU=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var FI=we((jse,kI)=>{"use strict";var _U=ki(),AU=Jo();function Vl(r,e,t){if(!(this instanceof Vl))return new Vl(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(_U.toArray(e,t))}kI.exports=Vl;Vl.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),AU(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Vl.prototype.update=function(e,t){return this.inner.update(e,t),this};Vl.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var ym=we(BI=>{"use strict";var rn=BI;rn.utils=ki();rn.common=kl();rn.sha=PI();rn.ripemd=MI();rn.hmac=FI();rn.sha1=rn.sha.sha1;rn.sha256=rn.sha.sha256;rn.sha224=rn.sha.sha224;rn.sha384=rn.sha.sha384;rn.sha512=rn.sha.sha512;rn.ripemd160=rn.ripemd.ripemd160});var LI=we((qse,UI)=>{"use strict";UI.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var vm=we(HI=>{"use strict";var I1=HI,Xo=ym(),S1=b1(),SU=Wn(),VI=SU.assert;function jI(r){r.type==="short"?this.curve=new S1.short(r):r.type==="edwards"?this.curve=new S1.edwards(r):this.curve=new S1.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,VI(this.g.validate(),"Invalid curve"),VI(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}I1.PresetCurve=jI;function ea(r,e){Object.defineProperty(I1,r,{configurable:!0,enumerable:!0,get:function(){var t=new jI(e);return Object.defineProperty(I1,r,{configurable:!0,enumerable:!0,value:t}),t}})}ea("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Xo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});ea("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Xo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});ea("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Xo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});ea("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Xo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});ea("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Xo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});ea("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Xo.sha256,gRed:!1,g:["9"]});ea("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Xo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var P1;try{P1=LI()}catch{P1=void 0}ea("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Xo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",P1]})});var $I=we(($se,zI)=>{"use strict";var IU=ym(),dc=u1(),qI=Jo();function ta(r){if(!(this instanceof ta))return new ta(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=dc.toArray(r.entropy,r.entropyEnc||"hex"),t=dc.toArray(r.nonce,r.nonceEnc||"hex"),n=dc.toArray(r.pers,r.persEnc||"hex");qI(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}zI.exports=ta;ta.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};ta.prototype._hmac=function(){return new IU.hmac(this.hash,this.K)};ta.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};ta.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=dc.toArray(e,t),n=dc.toArray(n,i),qI(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};ta.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=dc.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,dc.encode(o,t)}});var KI=we((Gse,GI)=>{"use strict";var PU=xs(),TU=Wn(),T1=TU.assert;function fn(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}GI.exports=fn;fn.fromPublic=function(e,t,n){return t instanceof fn?t:new fn(e,{pub:t,pubEnc:n})};fn.fromPrivate=function(e,t,n){return t instanceof fn?t:new fn(e,{priv:t,privEnc:n})};fn.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};fn.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};fn.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};fn.prototype._importPrivate=function(e,t){this.priv=new PU(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};fn.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?T1(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&T1(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};fn.prototype.derive=function(e){return e.validate()||T1(e.validate(),"public point not validated"),e.mul(this.priv).getX()};fn.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};fn.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)};fn.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var YI=we((Kse,JI)=>{"use strict";var wm=xs(),R1=Wn(),NU=R1.assert;function xm(r,e){if(r instanceof xm)return r;this._importDER(r,e)||(NU(r.r&&r.s,"Signature without r or s"),this.r=new wm(r.r,16),this.s=new wm(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}JI.exports=xm;function DU(){this.place=0}function N1(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4||r[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=r[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function WI(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}xm.prototype._importDER=function(e,t){e=R1.toArray(e,t);var n=new DU;if(e[n.place++]!==48)return!1;var i=N1(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=N1(e,n);if(s===!1||e[n.place]&128)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=N1(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new wm(o),this.s=new wm(c),this.recoveryParam=null,!0};function D1(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}xm.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=WI(t),n=WI(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];D1(i,t.length),i=i.concat(t),i.push(2),D1(i,n.length);var s=i.concat(n),o=[48];return D1(o,s.length),o=o.concat(s),R1.encode(o,e)}});var XI=we((Wse,ZI)=>{"use strict";var Ui=xs(),QI=$I(),RU=Wn(),O1=vm(),OU=p1(),fc=RU.assert,M1=KI(),Em=YI();function pi(r){if(!(this instanceof pi))return new pi(r);typeof r=="string"&&(fc(Object.prototype.hasOwnProperty.call(O1,r),"Unknown curve "+r),r=O1[r]),r instanceof O1.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}ZI.exports=pi;pi.prototype.keyPair=function(e){return new M1(this,e)};pi.prototype.keyFromPrivate=function(e,t){return M1.fromPrivate(this,e,t)};pi.prototype.keyFromPublic=function(e,t){return M1.fromPublic(this,e,t)};pi.prototype.genKeyPair=function(e){e||(e={});for(var t=new QI({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||OU(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Ui(2));;){var s=new Ui(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};pi.prototype._truncateToN=function(e,t,n){var i;if(Ui.isBN(e)||typeof e=="number")e=new Ui(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Ui(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Ui(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};pi.prototype.sign=function(e,t,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Ui.isBN(e)){fc(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),fc(e.length>>>0===e.length);for(var s=0;s<e.length;s++)fc((e[s]&255)===e[s])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,i.msgBitLength),fc(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=t.getPrivate().toArray("be",o),c=e.toArray("be",o);fc(new Ui(c).eq(e),"Can not sign message");for(var l=new QI({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Ui(1)),h=0;;h++){var m=i.k?i.k(h):new Ui(l.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(u)>=0)){var b=this.g.mul(m);if(!b.isInfinity()){var f=b.getX(),v=f.umod(this.n);if(v.cmpn(0)!==0){var E=m.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(E=E.umod(this.n),E.cmpn(0)!==0){var I=(b.getY().isOdd()?1:0)|(f.cmp(v)!==0?2:0);return i.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),I^=1),new Em({r:v,s:E,recoveryParam:I})}}}}}};pi.prototype.verify=function(e,t,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),t=new Em(t,"hex");var o=t.r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(l,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(l,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};pi.prototype.recoverPubKey=function(r,e,t,n){fc((3&t)===t,"The recovery param is more than two bits"),e=new Em(e,n);var i=this.n,s=new Ui(r),o=e.r,a=e.s,c=t&1,l=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(i),h=i.sub(s).mul(u).umod(i),m=a.mul(u).umod(i);return this.g.mulAdd(h,o,m)};pi.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Em(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")}});var n4=we((Jse,r4)=>{"use strict";var md=Wn(),t4=md.assert,e4=md.parseBytes,jl=md.cachedProperty;function Hr(r,e){this.eddsa=r,this._secret=e4(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=e4(e.pub)}Hr.fromPublic=function(e,t){return t instanceof Hr?t:new Hr(e,{pub:t})};Hr.fromSecret=function(e,t){return t instanceof Hr?t:new Hr(e,{secret:t})};Hr.prototype.secret=function(){return this._secret};jl(Hr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});jl(Hr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});jl(Hr,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});jl(Hr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});jl(Hr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});jl(Hr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Hr.prototype.sign=function(e){return t4(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Hr.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Hr.prototype.getSecret=function(e){return t4(this._secret,"KeyPair is public only"),md.encode(this.secret(),e)};Hr.prototype.getPublic=function(e){return md.encode(this.pubBytes(),e)};r4.exports=Hr});var o4=we((Yse,s4)=>{"use strict";var MU=xs(),Cm=Wn(),i4=Cm.assert,_m=Cm.cachedProperty,kU=Cm.parseBytes;function pc(r,e){this.eddsa=r,typeof e!="object"&&(e=kU(e)),Array.isArray(e)&&(i4(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),i4(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof MU&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}_m(pc,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});_m(pc,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});_m(pc,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});_m(pc,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});pc.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};pc.prototype.toHex=function(){return Cm.encode(this.toBytes(),"hex").toUpperCase()};s4.exports=pc});var h4=we((Qse,u4)=>{"use strict";var FU=ym(),BU=vm(),Hl=Wn(),UU=Hl.assert,c4=Hl.parseBytes,l4=n4(),a4=o4();function Fn(r){if(UU(r==="ed25519","only tested with ed25519 so far"),!(this instanceof Fn))return new Fn(r);r=BU[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=FU.sha512}u4.exports=Fn;Fn.prototype.sign=function(e,t){e=c4(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),o=this.encodePoint(s),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),c=i.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})};Fn.prototype.verify=function(e,t,n){if(e=c4(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(t.Rencoded(),i.pubBytes(),e),o=this.g.mul(t.S()),a=t.R().add(i.pub().mul(s));return a.eq(o)};Fn.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Hl.intFromLE(e.digest()).umod(this.curve.n)};Fn.prototype.keyFromPublic=function(e){return l4.fromPublic(this,e)};Fn.prototype.keyFromSecret=function(e){return l4.fromSecret(this,e)};Fn.prototype.makeSignature=function(e){return e instanceof a4?e:new a4(this,e)};Fn.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};Fn.prototype.decodePoint=function(e){e=Hl.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,s=Hl.intFromLE(n);return this.curve.pointFromY(s,i)};Fn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Fn.prototype.decodeInt=function(e){return Hl.intFromLE(e)};Fn.prototype.isPoint=function(e){return e instanceof this.pointClass}});var f4=we(d4=>{"use strict";var mc=d4;mc.version=C3().version;mc.utils=Wn();mc.rand=p1();mc.curve=b1();mc.curves=vm();mc.ec=XI();mc.eddsa=h4()});var $6=we((Roe,z6)=>{"use strict";z6.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var yh=class{},vh=class{},ps=class r{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let n=t.indexOf(":");if(n>0){let i=t.slice(0,n),s=t.slice(n+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,n)=>{this.addHeaderEntry(n,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{this.setHeaderEntries(t,n)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new r;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...n),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let n=e.toLowerCase();this.maybeSetNormalizedName(e,n),this.headers.has(n)?this.headers.get(n).push(t):this.headers.set(n,[t])}setHeaderEntries(e,t){let n=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,n),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var oy=class{encodeKey(e){return w_(e)}encodeValue(e){return w_(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function bD(r,e){let t=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var yD=/%(\d[a-f0-9])/gi,vD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function w_(r){return encodeURIComponent(r).replace(yD,(e,t)=>vD[t]??e)}function zf(r){return`${r}`}var Vo=class r{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new oy,e.fromString){if(e.fromObject)throw new ot(2805,!1);this.map=bD(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let n=e.fromObject[t],i=Array.isArray(n)?n.map(zf):[zf(n)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(n=>{let i=e[n];Array.isArray(i)?i.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new r({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(zf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let n=this.map.get(e.param)||[],i=n.indexOf(zf(e.value));i!==-1&&n.splice(i,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ay=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function wD(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function x_(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function E_(r){return typeof Blob<"u"&&r instanceof Blob}function C_(r){return typeof FormData<"u"&&r instanceof FormData}function xD(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var gh="Content-Type",uy="X-Request-URL",P_="text/plain",T_="application/json",N_=`${T_}, ${P_}, */*`,bh=class r{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,n,i){this.url=t,this.method=e.toUpperCase();let s;if(wD(this.method)||i?(this.body=n!==void 0?n:null,s=i):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ps,this.context??=new ay,!this.params)this.params=new Vo,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||x_(this.body)||E_(this.body)||C_(this.body)||xD(this.body)?this.body:this.body instanceof Vo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||C_(this.body)?null:E_(this.body)?this.body.type||null:x_(this.body)?null:typeof this.body=="string"?P_:this.body instanceof Vo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?T_:null}clone(e={}){let t=e.method||this.method,n=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,b)=>m.set(b,e.setHeaders[b]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((m,b)=>m.set(b,e.setParams[b]),u)),new r(t,n,o,{params:u,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},jo=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(jo||{}),wh=class{headers;status;statusText;url;ok;type;constructor(e,t=200,n="OK"){this.headers=e.headers||new ps,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Gf=class r extends wh{constructor(e={}){super(e)}type=jo.ResponseHeader;clone(e={}){return new r({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ka=class r extends wh{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=jo.Response;clone(e={}){return new r({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fs=class extends wh{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},D_=200,ED=204;function iy(r,e){return{body:e,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var Wa=(()=>{class r{handler;constructor(t){this.handler=t}request(t,n,i={}){let s;if(t instanceof bh)s=t;else{let c;i.headers instanceof ps?c=i.headers:c=new ps(i.headers);let l;i.params&&(i.params instanceof Vo?l=i.params:l=new Vo({fromObject:i.params})),s=new bh(t,n,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=_e(s).pipe(Fa(c=>this.handler.handle(c)));if(t instanceof bh||i.observe==="events")return o;let a=o.pipe(is(c=>c instanceof Ka));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Be(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Be(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Be(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Be(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:new Vo().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,i={}){return this.request("PATCH",t,iy(i,n))}post(t,n,i={}){return this.request("POST",t,iy(i,n))}put(t,n,i={}){return this.request("PUT",t,iy(i,n))}static \u0275fac=function(n){return new(n||r)(Ie(yh))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),CD=/^\)\]\}',?\n/;function __(r){if(r.url)return r.url;let e=uy.toLocaleLowerCase();return r.headers.get(e)}var R_=new Ue(""),sy=(()=>{class r{fetchImpl=K(cy,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t));ngZone=K(Er);handle(t){return new Ab(n=>{let i=new AbortController;return this.doRequest(t,i.signal,n).then(ly,s=>n.error(new fs({error:s}))),()=>i.abort()})}doRequest(t,n,i){return p(this,null,function*(){let s=this.createRequestInit(t),o;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,k({signal:n},s)));_D(b),i.next({type:jo.Sent}),o=yield b}catch(b){i.error(new fs({error:b,status:b.status??0,statusText:b.statusText,url:t.urlWithParams,headers:b.headers}));return}let a=new ps(o.headers),c=o.statusText,l=__(o)??t.urlWithParams,u=o.status,h=null;if(t.reportProgress&&i.next(new Gf({headers:a,status:u,statusText:c,url:l})),o.body){let b=o.headers.get("content-length"),f=[],v=o.body.getReader(),E=0,I,N,D=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>p(this,null,function*(){for(;;){let{done:U,value:L}=yield v.read();if(U)break;if(f.push(L),E+=L.length,t.reportProgress){N=t.responseType==="text"?(N??"")+(I??=new TextDecoder).decode(L,{stream:!0}):void 0;let B=()=>i.next({type:jo.DownloadProgress,total:b?+b:void 0,loaded:E,partialText:N});D?D.run(B):B()}}}));let F=this.concatChunks(f,E);try{let U=o.headers.get(gh)??"";h=this.parseBody(t,F,U)}catch(U){i.error(new fs({error:U,headers:new ps(o.headers),status:o.status,statusText:o.statusText,url:__(o)??t.urlWithParams}));return}}u===0&&(u=h?D_:0),u>=200&&u<300?(i.next(new Ka({body:h,headers:a,status:u,statusText:c,url:l})),i.complete()):i.error(new fs({error:h,headers:a,status:u,statusText:c,url:l}))})}parseBody(t,n,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(n).replace(CD,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(n);case"blob":return new Blob([n],{type:i});case"arraybuffer":return n.buffer}}createRequestInit(t){let n={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>n[s]=o.join(",")),t.headers.has("Accept")||(n.Accept=N_),!t.headers.has(gh)){let s=t.detectContentTypeHeader();s!==null&&(n[gh]=s)}return{body:t.serializeBody(),method:t.method,headers:n,credentials:i}}concatChunks(t,n){let i=new Uint8Array(n),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),cy=class{};function ly(){}function _D(r){r.then(ly,ly)}function AD(r,e){return e(r)}function SD(r,e,t){return(n,i)=>Si(t,()=>e(n,s=>r(s,i)))}var hy=new Ue(""),O_=new Ue(""),ID=new Ue("",{providedIn:"root",factory:()=>!0});var A_=(()=>{class r extends yh{backend;injector;chain=null;pendingTasks=K(Af);contributeToStability=K(ID);constructor(t,n){super(),this.backend=t,this.injector=n}handle(t){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(hy),...this.injector.get(O_,[])]));this.chain=n.reduceRight((i,s)=>SD(i,s,this.injector),AD)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Wc(()=>this.pendingTasks.remove(n)))}else return this.chain(t,n=>this.backend.handle(n))}static \u0275fac=function(n){return new(n||r)(Ie(vh),Ie(as))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})();var PD=/^\)\]\}',?\n/,TD=RegExp(`^${uy}:`,"m");function ND(r){return"responseURL"in r&&r.responseURL?r.responseURL:TD.test(r.getAllResponseHeaders())?r.getResponseHeader(uy):null}var S_=(()=>{class r{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ot(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?Mr(n.\u0275loadImpl()):_e(null)).pipe(Ft(()=>new Ab(s=>{let o=n.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((v,E)=>o.setRequestHeader(v,E.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept",N_),!t.headers.has(gh)){let v=t.detectContentTypeHeader();v!==null&&o.setRequestHeader(gh,v)}if(t.responseType){let v=t.responseType.toLowerCase();o.responseType=v!=="json"?v:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let v=o.statusText||"OK",E=new ps(o.getAllResponseHeaders()),I=ND(o)||t.url;return c=new Gf({headers:E,status:o.status,statusText:v,url:I}),c},u=()=>{let{headers:v,status:E,statusText:I,url:N}=l(),D=null;E!==ED&&(D=typeof o.response>"u"?o.responseText:o.response),E===0&&(E=D?D_:0);let F=E>=200&&E<300;if(t.responseType==="json"&&typeof D=="string"){let U=D;D=D.replace(PD,"");try{D=D!==""?JSON.parse(D):null}catch(L){D=U,F&&(F=!1,D={error:L,text:D})}}F?(s.next(new Ka({body:D,headers:v,status:E,statusText:I,url:N||void 0})),s.complete()):s.error(new fs({error:D,headers:v,status:E,statusText:I,url:N||void 0}))},h=v=>{let{url:E}=l(),I=new fs({error:v,status:o.status||0,statusText:o.statusText||"Unknown Error",url:E||void 0});s.error(I)},m=!1,b=v=>{m||(s.next(l()),m=!0);let E={type:jo.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(E.total=v.total),t.responseType==="text"&&o.responseText&&(E.partialText=o.responseText),s.next(E)},f=v=>{let E={type:jo.UploadProgress,loaded:v.loaded};v.lengthComputable&&(E.total=v.total),s.next(E)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),t.reportProgress&&(o.addEventListener("progress",b),a!==null&&o.upload&&o.upload.addEventListener("progress",f)),o.send(a),s.next({type:jo.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",b),a!==null&&o.upload&&o.upload.removeEventListener("progress",f)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(n){return new(n||r)(Ie(Ff))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),M_=new Ue(""),DD="XSRF-TOKEN",RD=new Ue("",{providedIn:"root",factory:()=>DD}),OD="X-XSRF-TOKEN",MD=new Ue("",{providedIn:"root",factory:()=>OD}),Kf=class{},kD=(()=>{class r{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,n,i){this.doc=t,this.platform=n,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Mf(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(n){return new(n||r)(Ie(Gt),Ie(zs),Ie(RD))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})();function FD(r,e){let t=r.url.toLowerCase();if(!K(M_)||r.method==="GET"||r.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(r);let n=K(Kf).getToken(),i=K(MD);return n!=null&&!r.headers.has(i)&&(r=r.clone({headers:r.headers.set(i,n)})),e(r)}var dy=function(r){return r[r.Interceptors=0]="Interceptors",r[r.LegacyInterceptors=1]="LegacyInterceptors",r[r.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",r[r.NoXsrfProtection=3]="NoXsrfProtection",r[r.JsonpSupport=4]="JsonpSupport",r[r.RequestsMadeViaParent=5]="RequestsMadeViaParent",r[r.Fetch=6]="Fetch",r}(dy||{});function k_(r,e){return{\u0275kind:r,\u0275providers:e}}function F_(...r){let e=[Wa,S_,A_,{provide:yh,useExisting:A_},{provide:vh,useFactory:()=>K(R_,{optional:!0})??K(S_)},{provide:hy,useValue:FD,multi:!0},{provide:M_,useValue:!0},{provide:Kf,useClass:kD}];for(let t of r)e.push(...t.\u0275providers);return os(e)}function B_(r){return k_(dy.Interceptors,r.map(e=>({provide:hy,useValue:e,multi:!0})))}function U_(){return k_(dy.Fetch,[sy,{provide:R_,useExisting:sy},{provide:vh,useExisting:sy}])}var BD=new Ue(""),UD="b",LD="h",VD="s",jD="st",HD="u",qD="rt",$f=new Ue(""),zD=["GET","HEAD"];function $D(r,e){let m=K($f),{isCacheActive:t}=m,n=ah(m,["isCacheActive"]),{transferCache:i,method:s}=r;if(!t||i===!1||s==="POST"&&!n.includePostRequests&&!i||s!=="POST"&&!zD.includes(s)||!n.includeRequestsWithAuthHeaders&&GD(r)||n.filter?.(r)===!1)return e(r);let o=K(Bb);if(K(BD,{optional:!0}))throw new ot(2803,!1);let c=r.url,l=KD(r,c),u=o.get(l,null),h=n.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(h=i.includeHeaders),u){let{[UD]:b,[qD]:f,[LD]:v,[VD]:E,[jD]:I,[HD]:N}=u,D=b;switch(f){case"arraybuffer":D=new TextEncoder().encode(b).buffer;break;case"blob":D=new Blob([b]);break}let F=new ps(v);return _e(new Ka({body:D,headers:F,status:E,statusText:I,url:N}))}return e(r).pipe(xr(b=>{b instanceof Ka}))}function GD(r){return r.headers.has("authorization")||r.headers.has("proxy-authorization")}function I_(r){return[...r.keys()].sort().map(e=>`${e}=${r.getAll(e)}`).join("&")}function KD(r,e){let{params:t,method:n,responseType:i}=r,s=I_(t),o=r.serializeBody();o instanceof URLSearchParams?o=I_(o):typeof o!="string"&&(o="");let a=[n,i,e,o,s].join("|"),c=WD(a);return c}function WD(r){let e=0;for(let t of r)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function L_(r){return[{provide:$f,useFactory:()=>(Jc("NgHttpTransferCache"),k({isCacheActive:!0},r))},{provide:O_,useValue:$D,multi:!0,deps:[Bb,$f]},{provide:Df,multi:!0,useFactory:()=>{let e=K(Ua),t=K($f);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var py=class extends MC{supportsDOMEvents=!0},my=class r extends py{static makeCurrent(){OC(new r)}onAndCancel(e,t,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=QD();return t==null?null:ZD(t)}resetBaseElement(){xh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Mf(document.cookie,e)}},xh=null;function QD(){return xh=xh||document.querySelector("base"),xh?xh.getAttribute("href"):null}function ZD(r){return new URL(r,document.baseURI).pathname}var gy=class{addToWindow(e){Oo.getAngularTestability=(n,i=!0)=>{let s=e.findTestabilityInTree(n,i);if(s==null)throw new ot(5103,!1);return s},Oo.getAllAngularTestabilities=()=>e.getAllTestabilities(),Oo.getAllAngularRootElements=()=>e.getAllRootElements();let t=n=>{let i=Oo.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&n()};i.forEach(a=>{a.whenStable(o)})};Oo.frameworkStabilizers||(Oo.frameworkStabilizers=[]),Oo.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,n){if(t==null)return null;let i=e.getTestability(t);return i??(n?ja().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},XD=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),by=new Ue(""),$_=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,n){this._zone=n,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,i,s){return this._findPluginFor(n).addEventListener(t,n,i,s)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(s=>s.supports(t)),!n)throw new ot(5101,!1);return this._eventNameToPlugin.set(t,n),n}static \u0275fac=function(n){return new(n||r)(Ie(by),Ie(Er))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),Jf=class{_doc;constructor(e){this._doc=e}manager},Wf="ng-app-id";function V_(r){for(let e of r)e.remove()}function j_(r,e){let t=e.createElement("style");return t.textContent=r,t}function eR(r,e,t,n){let i=r.head?.querySelectorAll(`style[${Wf}="${e}"],link[${Wf}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Wf),s instanceof HTMLLinkElement?n.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function yy(r,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",r),t}var G_=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,n,i,s={}){this.doc=t,this.appId=n,this.nonce=i,this.isServer=Kb(s),eR(t,n,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,n){for(let i of t)this.addUsage(i,this.inline,j_);n?.forEach(i=>this.addUsage(i,this.external,yy))}removeStyles(t,n){for(let i of t)this.removeUsage(i,this.inline);n?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,n,i){let s=n.get(t);s?s.usage++:n.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,n){let i=n.get(t);i&&(i.usage--,i.usage<=0&&(V_(i.elements),n.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])V_(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[n,{elements:i}]of this.inline)i.push(this.addElement(t,j_(n,this.doc)));for(let[n,{elements:i}]of this.external)i.push(this.addElement(t,yy(n,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,n){return this.nonce&&n.setAttribute("nonce",this.nonce),this.isServer&&n.setAttribute(Wf,this.appId),t.appendChild(n)}static \u0275fac=function(n){return new(n||r)(Ie(Gt),Ie(kb),Ie(Fb,8),Ie(zs))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),fy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},wy=/%COMP%/g,K_="%COMP%",tR=`_nghost-${K_}`,rR=`_ngcontent-${K_}`,nR=!0,iR=new Ue("",{providedIn:"root",factory:()=>nR});function sR(r){return rR.replace(wy,r)}function oR(r){return tR.replace(wy,r)}function W_(r,e){return e.map(t=>t.replace(wy,r))}var sl=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,n,i,s,o,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=Kb(a),this.defaultRenderer=new Eh(t,o,c,this.platformIsServer,this.tracingService)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===lh.ShadowDom&&(n=de(k({},n),{encapsulation:lh.Emulated}));let i=this.getOrCreateRenderer(t,n);return i instanceof Yf?i.applyToHost(t):i instanceof Ch&&i.applyStyles(),i}getOrCreateRenderer(t,n){let i=this.rendererByCompId,s=i.get(n.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(n.encapsulation){case lh.Emulated:s=new Yf(c,l,n,this.appId,u,o,a,h,this.tracingService);break;case lh.ShadowDom:return new vy(c,l,t,n,o,a,this.nonce,h,this.tracingService);default:s=new Ch(c,l,n,u,o,a,h,this.tracingService);break}i.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(n){return new(n||r)(Ie($_),Ie(G_),Ie(kb),Ie(iR),Ie(Gt),Ie(zs),Ie(Er),Ie(Fb),Ie(lC,8))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),Eh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,n,i,s){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(fy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(H_(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(H_(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){t.remove()}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new ot(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;let s=fy[i];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let i=fy[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(uh.DashCase|uh.Important)?e.style.setProperty(t,n,i&uh.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&uh.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n,i){if(typeof e=="string"&&(e=ja().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let s=this.decoratePreventDefault(n);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function H_(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var vy=class extends Eh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,n,i,s,o,a,c,l){super(e,s,o,c,l),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=W_(i.id,i.styles);for(let m of u){let b=document.createElement("style");a&&b.setAttribute("nonce",a),b.textContent=m,this.shadowRoot.appendChild(b)}let h=i.getExternalStyles?.();if(h)for(let m of h){let b=yy(m,s);a&&b.setAttribute("nonce",a),this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ch=class extends Eh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,n,i,s,o,a,c,l){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?W_(l,n.styles):n.styles,this.styleUrls=n.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Yf=class extends Ch{contentAttr;hostAttr;constructor(e,t,n,i,s,o,a,c,l){let u=i+"-"+n.id;super(e,t,n,s,o,a,c,l,u),this.contentAttr=sR(u),this.hostAttr=oR(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},aR=(()=>{class r extends Jf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,i,s){return t.addEventListener(n,i,s),()=>this.removeEventListener(t,n,i,s)}removeEventListener(t,n,i,s){return t.removeEventListener(n,i,s)}static \u0275fac=function(n){return new(n||r)(Ie(Gt))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),q_=["alt","control","meta","shift"],cR={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lR={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},uR=(()=>{class r extends Jf{constructor(t){super(t)}supports(t){return r.parseEventName(t)!=null}addEventListener(t,n,i,s){let o=r.parseEventName(n),a=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ja().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let n=t.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let s=r._normalizeKey(n.pop()),o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),q_.forEach(l=>{let u=n.indexOf(l);u>-1&&(n.splice(u,1),o+=l+".")}),o+=s,n.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,n){let i=cR[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),q_.forEach(o=>{if(o!==i){let a=lR[o];a(t)&&(s+=o+".")}}),s+=i,s===n)}static eventCallback(t,n,i){return s=>{r.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>n(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(n){return new(n||r)(Ie(Gt))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})();function J_(r,e){return TC(k({rootComponent:r},hR(e)))}function hR(r){return{appProviders:[...Y_,...r?.providers??[]],platformProviders:mR}}function dR(){my.makeCurrent()}function fR(){return new Mb}function pR(){return aC(document),document}var mR=[{provide:zs,useValue:UC},{provide:cC,useValue:dR,multi:!0},{provide:Gt,useFactory:pR,deps:[]}];var gR=[{provide:Pf,useClass:gy,deps:[]},{provide:mC,useClass:Tf,deps:[Er,Vb,Pf]},{provide:Tf,useClass:Tf,deps:[Er,Vb,Pf]}],Y_=[{provide:rC,useValue:"root"},{provide:Mb,useFactory:fR,deps:[]},{provide:by,useClass:aR,multi:!0,deps:[Gt,Er,zs]},{provide:by,useClass:uR,multi:!0,deps:[Gt]},sl,G_,$_,{provide:cs,useExisting:sl},{provide:Ff,useClass:XD,deps:[]},[]],Q_=(()=>{class r{constructor(){}static \u0275fac=function(n){return new(n||r)};static \u0275mod=ls({type:r});static \u0275inj=ss({providers:[...Y_,...gR],imports:[Bt,PC]})}return r})();var Z_=(()=>{class r{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(n){return new(n||r)(Ie(Gt))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Qf=function(r){return r[r.NoHttpTransferCache=0]="NoHttpTransferCache",r[r.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",r[r.I18nSupport=2]="I18nSupport",r[r.EventReplay=3]="EventReplay",r[r.IncrementalHydration=4]="IncrementalHydration",r}(Qf||{});function bR(r,e=[],t={}){return{\u0275kind:r,\u0275providers:e}}function X_(){return bR(Qf.EventReplay,NC())}function eA(...r){let e=[],t=new Set,n=t.has(Qf.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of r)t.add(s),i.length&&e.push(i);return os([[],DC(),t.has(Qf.NoHttpTransferCache)||n?[]:L_({}),e])}var Ne="primary",Uh=Symbol("RouteTitle"),Ay=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function hl(r){return new Ay(r)}function vR(r,e,t){let n=t.path.split("/");if(n.length>r.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<r.length))return null;let i={};for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function wR(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!ms(r[t],e[t]))return!1;return!0}function ms(r,e){let t=r?Sy(r):void 0,n=e?Sy(e):void 0;if(!t||!n||t.length!=n.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!cA(r[i],e[i]))return!1;return!0}function Sy(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function cA(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let t=[...r].sort(),n=[...e].sort();return t.every((i,s)=>n[s]===i)}else return r===e}function lA(r){return r.length>0?r[r.length-1]:null}function qo(r){return z2(r)?r:Nf(r)?Mr(Promise.resolve(r)):_e(r)}var xR={exact:hA,subset:dA},uA={exact:ER,subset:CR,ignored:()=>!0};function tA(r,e,t){return xR[t.paths](r.root,e.root,t.matrixParams)&&uA[t.queryParams](r.queryParams,e.queryParams)&&!(t.fragment==="exact"&&r.fragment!==e.fragment)}function ER(r,e){return ms(r,e)}function hA(r,e,t){if(!Ya(r.segments,e.segments)||!ep(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!r.children[n]||!hA(r.children[n],e.children[n],t))return!1;return!0}function CR(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>cA(r[t],e[t]))}function dA(r,e,t){return fA(r,e,e.segments,t)}function fA(r,e,t,n){if(r.segments.length>t.length){let i=r.segments.slice(0,t.length);return!(!Ya(i,t)||e.hasChildren()||!ep(i,t,n))}else if(r.segments.length===t.length){if(!Ya(r.segments,t)||!ep(r.segments,t,n))return!1;for(let i in e.children)if(!r.children[i]||!dA(r.children[i],e.children[i],n))return!1;return!0}else{let i=t.slice(0,r.segments.length),s=t.slice(r.segments.length);return!Ya(r.segments,i)||!ep(r.segments,i,n)||!r.children[Ne]?!1:fA(r.children[Ne],e,s,n)}}function ep(r,e,t){return e.every((n,i)=>uA[t](r[i].parameters,n.parameters))}var Zs=class{root;queryParams;fragment;_queryParamMap;constructor(e=new st([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=hl(this.queryParams),this._queryParamMap}toString(){return SR.serialize(this)}},st=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tp(this)}},Ja=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=hl(this.parameters),this._parameterMap}toString(){return mA(this)}};function _R(r,e){return Ya(r,e)&&r.every((t,n)=>ms(t.parameters,e[n].parameters))}function Ya(r,e){return r.length!==e.length?!1:r.every((t,n)=>t.path===e[n].path)}function AR(r,e){let t=[];return Object.entries(r.children).forEach(([n,i])=>{n===Ne&&(t=t.concat(e(i,n)))}),Object.entries(r.children).forEach(([n,i])=>{n!==Ne&&(t=t.concat(e(i,n)))}),t}var Zy=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:()=>new Th,providedIn:"root"})}return r})(),Th=class{parse(e){let t=new Py(e);return new Zs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_h(e.root,!0)}`,n=TR(e.queryParams),i=typeof e.fragment=="string"?`#${IR(e.fragment)}`:"";return`${t}${n}${i}`}},SR=new Th;function tp(r){return r.segments.map(e=>mA(e)).join("/")}function _h(r,e){if(!r.hasChildren())return tp(r);if(e){let t=r.children[Ne]?_h(r.children[Ne],!1):"",n=[];return Object.entries(r.children).forEach(([i,s])=>{i!==Ne&&n.push(`${i}:${_h(s,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=AR(r,(n,i)=>i===Ne?[_h(r.children[Ne],!1)]:[`${i}:${_h(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[Ne]!=null?`${tp(r)}/${t[0]}`:`${tp(r)}/(${t.join("//")})`}}function pA(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zf(r){return pA(r).replace(/%3B/gi,";")}function IR(r){return encodeURI(r)}function Iy(r){return pA(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rp(r){return decodeURIComponent(r)}function rA(r){return rp(r.replace(/\+/g,"%20"))}function mA(r){return`${Iy(r.path)}${PR(r.parameters)}`}function PR(r){return Object.entries(r).map(([e,t])=>`;${Iy(e)}=${Iy(t)}`).join("")}function TR(r){let e=Object.entries(r).map(([t,n])=>Array.isArray(n)?n.map(i=>`${Zf(t)}=${Zf(i)}`).join("&"):`${Zf(t)}=${Zf(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var NR=/^[^\/()?;#]+/;function xy(r){let e=r.match(NR);return e?e[0]:""}var DR=/^[^\/()?;=#]+/;function RR(r){let e=r.match(DR);return e?e[0]:""}var OR=/^[^=?&#]+/;function MR(r){let e=r.match(OR);return e?e[0]:""}var kR=/^[^&#]+/;function FR(r){let e=r.match(kR);return e?e[0]:""}var Py=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Ne]=new st(e,t)),n}parseSegment(){let e=xy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ot(4009,!1);return this.capture(e),new Ja(rp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=RR(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let i=xy(this.remaining);i&&(n=i,this.capture(n))}e[rp(t)]=rp(n)}parseQueryParam(e){let t=MR(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let o=FR(this.remaining);o&&(n=o,this.capture(n))}let i=rA(t),s=rA(n);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=xy(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new ot(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ne);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Ne]:new st([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ot(4011,!1)}};function gA(r){return r.segments.length>0?new st([],{[Ne]:r}):r}function bA(r){let e={};for(let[n,i]of Object.entries(r.children)){let s=bA(i);if(n===Ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[n]=s)}let t=new st(r.segments,e);return BR(t)}function BR(r){if(r.numberOfChildren===1&&r.children[Ne]){let e=r.children[Ne];return new st(r.segments.concat(e.segments),e.children)}return r}function Qa(r){return r instanceof Zs}function UR(r,e,t=null,n=null){let i=yA(r);return vA(i,e,t,n)}function yA(r){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new st(s.url,o);return s===r&&(e=a),a}let n=t(r.root),i=gA(n);return e??i}function vA(r,e,t,n){let i=r;for(;i.parent;)i=i.parent;if(e.length===0)return Ey(i,i,i,t,n);let s=LR(e);if(s.toRoot())return Ey(i,i,new st([],{}),t,n);let o=VR(s,i,r),a=o.processChildren?Sh(o.segmentGroup,o.index,s.commands):xA(o.segmentGroup,o.index,s.commands);return Ey(i,o.segmentGroup,a,t,n)}function np(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Nh(r){return typeof r=="object"&&r!=null&&r.outlets}function Ey(r,e,t,n,i){let s={};n&&Object.entries(n).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;r===e?o=t:o=wA(r,e,t);let a=gA(bA(o));return new Zs(a,s,i)}function wA(r,e,t){let n={};return Object.entries(r.children).forEach(([i,s])=>{s===e?n[i]=t:n[i]=wA(s,e,t)}),new st(r.segments,n)}var ip=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&np(n[0]))throw new ot(4003,!1);let i=n.find(Nh);if(i&&i!==lA(n))throw new ot(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LR(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new ip(!0,0,r);let e=0,t=!1,n=r.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ip(t,e,n)}var cl=class{segmentGroup;processChildren;index;constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function VR(r,e,t){if(r.isAbsolute)return new cl(e,!0,0);if(!t)return new cl(e,!1,NaN);if(t.parent===null)return new cl(t,!0,0);let n=np(r.commands[0])?0:1,i=t.segments.length-1+n;return jR(t,i,r.numberOfDoubleDots)}function jR(r,e,t){let n=r,i=e,s=t;for(;s>i;){if(s-=i,n=n.parent,!n)throw new ot(4005,!1);i=n.segments.length}return new cl(n,!1,i-s)}function HR(r){return Nh(r[0])?r[0].outlets:{[Ne]:r}}function xA(r,e,t){if(r??=new st([],{}),r.segments.length===0&&r.hasChildren())return Sh(r,e,t);let n=qR(r,e,t),i=t.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let s=new st(r.segments.slice(0,n.pathIndex),{});return s.children[Ne]=new st(r.segments.slice(n.pathIndex),r.children),Sh(s,0,i)}else return n.match&&i.length===0?new st(r.segments,{}):n.match&&!r.hasChildren()?Ty(r,e,t):n.match?Sh(r,0,i):Ty(r,e,t)}function Sh(r,e,t){if(t.length===0)return new st(r.segments,{});{let n=HR(t),i={};if(Object.keys(n).some(s=>s!==Ne)&&r.children[Ne]&&r.numberOfChildren===1&&r.children[Ne].segments.length===0){let s=Sh(r.children[Ne],e,t);return new st(r.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=xA(r.children[s],e,o))}),Object.entries(r.children).forEach(([s,o])=>{n[s]===void 0&&(i[s]=o)}),new st(r.segments,i)}}function qR(r,e,t){let n=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=t.length)return s;let o=r.segments[i],a=t[n];if(Nh(a))break;let c=`${a}`,l=n<t.length-1?t[n+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!iA(c,l,o))return s;n+=2}else{if(!iA(c,{},o))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function Ty(r,e,t){let n=r.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Nh(s)){let c=zR(s.outlets);return new st(n,c)}if(i===0&&np(t[0])){let c=r.segments[e];n.push(new Ja(c.path,nA(t[0]))),i++;continue}let o=Nh(s)?s.outlets[Ne]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&np(a)?(n.push(new Ja(o,nA(a))),i+=2):(n.push(new Ja(o,{})),i++)}return new st(n,{})}function zR(r){let e={};return Object.entries(r).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=Ty(new st([],{}),0,n))}),e}function nA(r){let e={};return Object.entries(r).forEach(([t,n])=>e[t]=`${n}`),e}function iA(r,e,t){return r==t.path&&ms(e,t.parameters)}var Ih="imperative",en=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(en||{}),ui=class{id;url;constructor(e,t){this.id=e,this.url=t}},Dh=class extends ui{type=en.NavigationStart;navigationTrigger;restoredState;constructor(e,t,n="imperative",i=null){super(e,t),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ho=class extends ui{urlAfterRedirects;type=en.NavigationEnd;constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kn=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(Kn||{}),Ny=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(Ny||{}),Qs=class extends ui{reason;code;type=en.NavigationCancel;constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Za=class extends ui{reason;code;type=en.NavigationSkipped;constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i}},Rh=class extends ui{error;target;type=en.NavigationError;constructor(e,t,n,i){super(e,t),this.error=n,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sp=class extends ui{urlAfterRedirects;state;type=en.RoutesRecognized;constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dy=class extends ui{urlAfterRedirects;state;type=en.GuardsCheckStart;constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ry=class extends ui{urlAfterRedirects;state;shouldActivate;type=en.GuardsCheckEnd;constructor(e,t,n,i,s){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oy=class extends ui{urlAfterRedirects;state;type=en.ResolveStart;constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},My=class extends ui{urlAfterRedirects;state;type=en.ResolveEnd;constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class{route;type=en.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fy=class{route;type=en.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},By=class{snapshot;type=en.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uy=class{snapshot;type=en.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ly=class{snapshot;type=en.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vy=class{snapshot;type=en.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Oh=class{},dl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function $R(r,e){return r.providers&&!r._injector&&(r._injector=fC(r.providers,e,`Route: ${r.path}`)),r._injector??e}function Ri(r){return r.outlet||Ne}function GR(r,e){let t=r.filter(n=>Ri(n)===e);return t.push(...r.filter(n=>Ri(n)!==e)),t}function Lh(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var jy=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Lh(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new dp(this.rootInjector)}},dp=(()=>{class r{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,n){let i=this.getOrCreateContext(t);i.outlet=n,this.contexts.set(t,i)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new jy(this.rootInjector),this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(n){return new(n||r)(Ie(as))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),op=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Hy(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=Hy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=qy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qy(e,this._root).map(t=>t.value)}};function Hy(r,e){if(r===e.value)return e;for(let t of e.children){let n=Hy(r,t);if(n)return n}return null}function qy(r,e){if(r===e.value)return[e];for(let t of e.children){let n=qy(r,t);if(n.length)return n.unshift(e),n}return[]}var Gn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function al(r){let e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}var ap=class extends op{snapshot;constructor(e,t){super(e),this.snapshot=t,Xy(this,e)}toString(){return this.snapshot.toString()}};function EA(r){let e=KR(r),t=new Rn([new Ja("",{})]),n=new Rn({}),i=new Rn({}),s=new Rn({}),o=new Rn(""),a=new Xa(t,n,s,o,i,Ne,r,e.root);return a.snapshot=e.root,new ap(new Gn(a,[]),e)}function KR(r){let e={},t={},n={},i="",s=new ll([],e,n,i,t,Ne,r,null,{});return new lp("",new Gn(s,[]))}var Xa=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,n,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Be(l=>l[Uh]))??_e(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>hl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>hl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cp(r,e,t="emptyOnly"){let n,{routeConfig:i}=r;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:k(k({},e.params),r.params),data:k(k({},e.data),r.data),resolve:k(k(k(k({},r.data),e.data),i?.data),r._resolvedData)}:n={params:k({},r.params),data:k({},r.data),resolve:k(k({},r.data),r._resolvedData??{})},i&&_A(i)&&(n.resolve[Uh]=i.title),n}var ll=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Uh]}constructor(e,t,n,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},lp=class extends op{url;constructor(e,t){super(t),this.url=e,Xy(this,t)}toString(){return CA(this._root)}};function Xy(r,e){e.value._routerState=r,e.children.forEach(t=>Xy(r,t))}function CA(r){let e=r.children.length>0?` { ${r.children.map(CA).join(", ")} } `:"";return`${r.value}${e}`}function Cy(r){if(r.snapshot){let e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,ms(e.queryParams,t.queryParams)||r.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&r.fragmentSubject.next(t.fragment),ms(e.params,t.params)||r.paramsSubject.next(t.params),wR(e.url,t.url)||r.urlSubject.next(t.url),ms(e.data,t.data)||r.dataSubject.next(t.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function zy(r,e){let t=ms(r.params,e.params)&&_R(r.url,e.url),n=!r.parent!=!e.parent;return t&&!n&&(!r.parent||zy(r.parent,e.parent))}function _A(r){return typeof r.title=="string"||r.title===null}var WR=new Ue(""),ec=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ne;activateEvents=new qn;deactivateEvents=new qn;attachEvents=new qn;detachEvents=new qn;routerOutletData=ee(void 0);parentContexts=K(dp);location=K(If);changeDetector=K(hh);inputBinder=K(ev,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:i}=t.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ot(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ot(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ot(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new ot(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new $y(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Ar({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Hn]})}return r})(),$y=class r{route;childContexts;parent;outletData;__ngOutletInjector(e){return new r(this.route,this.childContexts,e,this.outletData)}constructor(e,t,n,i){this.route=e,this.childContexts=t,this.parent=n,this.outletData=i}get(e,t){return e===Xa?this.route:e===dp?this.childContexts:e===WR?this.outletData:this.parent.get(e,t)}},ev=new Ue("");function JR(r,e,t){let n=Mh(r,e._root,t?t._root:void 0);return new ap(n,e)}function Mh(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let i=YR(r,e,t);return new Gn(n,i)}else{if(r.shouldAttach(e.value)){let s=r.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Mh(r,a)),o}}let n=QR(e.value),i=e.children.map(s=>Mh(r,s));return new Gn(n,i)}}function YR(r,e,t){return e.children.map(n=>{for(let i of t.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return Mh(r,n,i);return Mh(r,n)})}function QR(r){return new Xa(new Rn(r.url),new Rn(r.params),new Rn(r.queryParams),new Rn(r.fragment),new Rn(r.data),r.outlet,r.component,r)}var kh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},AA="ngNavigationCancelingError";function up(r,e){let{redirectTo:t,navigationBehaviorOptions:n}=Qa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=SA(!1,Kn.Redirect);return i.url=t,i.navigationBehaviorOptions=n,i}function SA(r,e){let t=new Error(`NavigationCancelingError: ${r||""}`);return t[AA]=!0,t.cancellationCode=e,t}function ZR(r){return IA(r)&&Qa(r.url)}function IA(r){return!!r&&r[AA]}var XR=(r,e,t,n)=>Be(i=>(new Gy(e,i.targetRouterState,i.currentRouterState,t,n).activate(r),i)),Gy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,n,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Cy(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let i=al(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],n),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=al(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,s=al(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let i=al(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],n),this.forwardEvent(new Vy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Uy(e.value.snapshot))}activateRoutes(e,t,n){let i=e.value,s=t?t.value:null;if(Cy(i),i===s)if(i.component){let o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(i.component){let o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,n)}},hp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ul=class{component;route;constructor(e,t){this.component=e,this.route=t}};function eO(r,e,t){let n=r._root,i=e?e._root:null;return Ah(n,i,t,[n.value])}function tO(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function pl(r,e){let t=Symbol(),n=e.get(r,t);return n===t?typeof r=="function"&&!eC(r)?r:e.get(r):n}function Ah(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=al(e);return r.children.forEach(o=>{rO(o,s[o.value.outlet],t,n.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ph(a,t.getContext(o),i)),i}function rO(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=e?e.value:null,a=t?t.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=nO(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new hp(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ah(r,e,a?a.children:null,n,i):Ah(r,e,t,n,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ul(a.outlet.component,o))}else o&&Ph(e,a,i),i.canActivateChecks.push(new hp(n)),s.component?Ah(r,null,a?a.children:null,n,i):Ah(r,null,t,n,i);return i}function nO(r,e,t){if(typeof t=="function")return t(r,e);switch(t){case"pathParamsChange":return!Ya(r.url,e.url);case"pathParamsOrQueryParamsChange":return!Ya(r.url,e.url)||!ms(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zy(r,e)||!ms(r.queryParams,e.queryParams);case"paramsChange":default:return!zy(r,e)}}function Ph(r,e,t){let n=al(r),i=r.value;Object.entries(n).forEach(([s,o])=>{i.component?e?Ph(o,e.children.getContext(s),t):Ph(o,null,t):Ph(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ul(e.outlet.component,i)):t.canDeactivateChecks.push(new ul(null,i)):t.canDeactivateChecks.push(new ul(null,i))}function Vh(r){return typeof r=="function"}function iO(r){return typeof r=="boolean"}function sO(r){return r&&Vh(r.canLoad)}function oO(r){return r&&Vh(r.canActivate)}function aO(r){return r&&Vh(r.canActivateChild)}function cO(r){return r&&Vh(r.canDeactivate)}function lO(r){return r&&Vh(r.canMatch)}function PA(r){return r instanceof $2||r?.name==="EmptyError"}var Xf=Symbol("INITIAL_VALUE");function fl(){return Ft(r=>Pb(r.map(e=>e.pipe(Do(1),Z2(Xf)))).pipe(Be(e=>{for(let t of e)if(t!==!0){if(t===Xf)return Xf;if(t===!1||uO(t))return t}return!0}),is(e=>e!==Xf),Do(1)))}function uO(r){return Qa(r)||r instanceof kh}function hO(r,e){return oi(t=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?_e(de(k({},t),{guardsResult:!0})):dO(o,n,i,r).pipe(oi(a=>a&&iO(a)?fO(n,s,r,e):_e(a)),Be(a=>de(k({},t),{guardsResult:a})))})}function dO(r,e,t,n){return Mr(r).pipe(oi(i=>yO(i.component,i.route,t,e,n)),Ro(i=>i!==!0,!0))}function fO(r,e,t,n){return Mr(e).pipe(Fa(i=>G2(mO(i.route.parent,n),pO(i.route,n),bO(r,i.path,t),gO(r,i.route,t))),Ro(i=>i!==!0,!0))}function pO(r,e){return r!==null&&e&&e(new Ly(r)),_e(!0)}function mO(r,e){return r!==null&&e&&e(new By(r)),_e(!0)}function gO(r,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return _e(!0);let i=n.map(s=>Tb(()=>{let o=Lh(e)??t,a=pl(s,o),c=oO(a)?a.canActivate(e,r):Si(o,()=>a(e,r));return qo(c).pipe(Ro())}));return _e(i).pipe(fl())}function bO(r,e,t){let n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>tO(o)).filter(o=>o!==null).map(o=>Tb(()=>{let a=o.guards.map(c=>{let l=Lh(o.node)??t,u=pl(c,l),h=aO(u)?u.canActivateChild(n,r):Si(l,()=>u(n,r));return qo(h).pipe(Ro())});return _e(a).pipe(fl())}));return _e(s).pipe(fl())}function yO(r,e,t,n,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return _e(!0);let o=s.map(a=>{let c=Lh(e)??i,l=pl(a,c),u=cO(l)?l.canDeactivate(r,e,t,n):Si(c,()=>l(r,e,t,n));return qo(u).pipe(Ro())});return _e(o).pipe(fl())}function vO(r,e,t,n){let i=e.canLoad;if(i===void 0||i.length===0)return _e(!0);let s=i.map(o=>{let a=pl(o,r),c=sO(a)?a.canLoad(e,t):Si(r,()=>a(e,t));return qo(c)});return _e(s).pipe(fl(),TA(n))}function TA(r){return q2(xr(e=>{if(typeof e!="boolean")throw up(r,e)}),Be(e=>e===!0))}function wO(r,e,t,n){let i=e.canMatch;if(!i||i.length===0)return _e(!0);let s=i.map(o=>{let a=pl(o,r),c=lO(a)?a.canMatch(e,t):Si(r,()=>a(e,t));return qo(c)});return _e(s).pipe(fl(),TA(n))}var Fh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Bh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ol(r){return Ai(new Fh(r))}function xO(r){return Ai(new ot(4e3,!1))}function EO(r){return Ai(SA(!1,Kn.GuardRejected))}var Ky=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return _e(n);if(i.numberOfChildren>1||!i.children[Ne])return xO(`${e.redirectTo}`);i=i.children[Ne]}}applyRedirectCommands(e,t,n,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:h,outlet:m,params:b,data:f,title:v}=i,E=Si(s,()=>a({params:b,data:f,queryParams:c,fragment:l,routeConfig:u,url:h,outlet:m,title:v}));if(E instanceof Zs)throw new Bh(E);t=E}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t[0]==="/")throw new Bh(o);return o}applyRedirectCreateUrlTree(e,t,n,i){let s=this.createSegmentGroup(e,t.root,n,i);return new Zs(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);n[i]=t[a]}else n[i]=s}),n}createSegmentGroup(e,t,n,i){let s=this.createSegments(e,t.segments,n,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,n,i)}),new st(s,o)}createSegments(e,t,n,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,n))}findPosParam(e,t,n){let i=n[t.path.substring(1)];if(!i)throw new ot(4001,!1);return i}findOrReturn(e,t){let n=0;for(let i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}},Wy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CO(r,e,t,n,i){let s=NA(r,e,t);return s.matched?(n=$R(e,n),wO(n,e,t,i).pipe(Be(o=>o===!0?s:k({},Wy)))):_e(s)}function NA(r,e,t){if(e.path==="**")return _O(t);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||t.length>0)?k({},Wy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||vR)(t,r,e);if(!i)return k({},Wy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _O(r){return{matched:!0,parameters:r.length>0?lA(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function sA(r,e,t,n){return t.length>0&&IO(r,t,n)?{segmentGroup:new st(e,SO(n,new st(t,r.children))),slicedSegments:[]}:t.length===0&&PO(r,t,n)?{segmentGroup:new st(r.segments,AO(r,t,n,r.children)),slicedSegments:t}:{segmentGroup:new st(r.segments,r.children),slicedSegments:t}}function AO(r,e,t,n){let i={};for(let s of t)if(fp(r,e,s)&&!n[Ri(s)]){let o=new st([],{});i[Ri(s)]=o}return k(k({},n),i)}function SO(r,e){let t={};t[Ne]=e;for(let n of r)if(n.path===""&&Ri(n)!==Ne){let i=new st([],{});t[Ri(n)]=i}return t}function IO(r,e,t){return t.some(n=>fp(r,e,n)&&Ri(n)!==Ne)}function PO(r,e,t){return t.some(n=>fp(r,e,n))}function fp(r,e,t){return(r.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function TO(r,e,t){return e.length===0&&!r.children[t]}var Jy=class{};function NO(r,e,t,n,i,s,o="emptyOnly"){return new Yy(r,e,t,n,i,o,s).recognize()}var DO=31,Yy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,n,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ky(this.urlSerializer,this.urlTree)}noMatchError(e){return new ot(4002,`'${e.segmentGroup}'`)}recognize(){let e=sA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Be(({children:t,rootSnapshot:n})=>{let i=new Gn(n,t),s=new lp("",i),o=UR(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ll([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ne,t).pipe(Be(n=>({children:n,rootSnapshot:t})),ai(n=>{if(n instanceof Bh)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Fh?this.noMatchError(n):n}))}processSegmentGroup(e,t,n,i,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n,s):this.processSegment(e,t,n,n.segments,i,!0,s).pipe(Be(o=>o instanceof Gn?[o]:[]))}processChildren(e,t,n,i){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return Mr(s).pipe(Fa(o=>{let a=n.children[o],c=GR(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Q2((o,a)=>(o.push(...a),o)),Nb(null),Y2(),oi(o=>{if(o===null)return ol(n);let a=DA(o);return RO(a),_e(a)}))}processSegment(e,t,n,i,s,o,a){return Mr(t).pipe(Fa(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,n,i,s,o,a).pipe(ai(l=>{if(l instanceof Fh)return _e(null);throw l}))),Ro(c=>!!c),ai(c=>{if(PA(c))return TO(n,i,s)?_e(new Jy):ol(n);throw c}))}processSegmentAgainstRoute(e,t,n,i,s,o,a,c){return Ri(n)!==o&&(o===Ne||!fp(i,s,n))?ol(i):n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,n,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,n,s,o,c):ol(i)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:m}=NA(t,i,s);if(!c)return ol(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DO&&(this.allowRedirects=!1));let b=new ll(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,oA(i),Ri(i),i.component??i._loadedComponent??null,i,aA(i)),f=cp(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(f.params),b.data=Object.freeze(f.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,b,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(oi(E=>this.processSegment(e,n,t,E.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,n,i,s,o){let a=CO(t,n,i,e,this.urlSerializer);return n.path==="**"&&(t.children={}),a.pipe(Ft(c=>c.matched?(e=n._injector??e,this.getChildConfig(e,n,i).pipe(Ft(({routes:l})=>{let u=n._loadedInjector??e,{parameters:h,consumedSegments:m,remainingSegments:b}=c,f=new ll(m,h,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,oA(n),Ri(n),n.component??n._loadedComponent??null,n,aA(n)),v=cp(f,o,this.paramsInheritanceStrategy);f.params=Object.freeze(v.params),f.data=Object.freeze(v.data);let{segmentGroup:E,slicedSegments:I}=sA(t,m,b,l);if(I.length===0&&E.hasChildren())return this.processChildren(u,l,E,f).pipe(Be(D=>new Gn(f,D)));if(l.length===0&&I.length===0)return _e(new Gn(f,[]));let N=Ri(n)===s;return this.processSegment(u,l,E,I,N?Ne:s,!0,f).pipe(Be(D=>new Gn(f,D instanceof Gn?[D]:[])))}))):ol(t)))}getChildConfig(e,t,n){return t.children?_e({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?_e({routes:t._loadedRoutes,injector:t._loadedInjector}):vO(e,t,n,this.urlSerializer).pipe(oi(i=>i?this.configLoader.loadChildren(e,t).pipe(xr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):EO(t))):_e({routes:[],injector:e})}};function RO(r){r.sort((e,t)=>e.value.outlet===Ne?-1:t.value.outlet===Ne?1:e.value.outlet.localeCompare(t.value.outlet))}function OO(r){let e=r.value.routeConfig;return e&&e.path===""}function DA(r){let e=[],t=new Set;for(let n of r){if(!OO(n)){e.push(n);continue}let i=e.find(s=>n.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...n.children),t.add(i)):e.push(n)}for(let n of t){let i=DA(n.children);e.push(new Gn(n.value,i))}return e.filter(n=>!t.has(n))}function oA(r){return r.data||{}}function aA(r){return r.resolve||{}}function MO(r,e,t,n,i,s){return oi(o=>NO(r,e,t,n,o.extractedUrl,i,s).pipe(Be(({state:a,tree:c})=>de(k({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function kO(r,e){return oi(t=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=t;if(!i.length)return _e(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of RA(c))o.add(l);let a=0;return Mr(o).pipe(Fa(c=>s.has(c)?FO(c,n,r,e):(c.data=cp(c,c.parent,r).resolve,_e(void 0))),xr(()=>a++),Db(1),oi(c=>a===o.size?_e(t):No))})}function RA(r){let e=r.children.map(t=>RA(t)).flat();return[r,...e]}function FO(r,e,t,n){let i=r.routeConfig,s=r._resolve;return i?.title!==void 0&&!_A(i)&&(s[Uh]=i.title),BO(s,r,e,n).pipe(Be(o=>(r._resolvedData=o,r.data=cp(r,r.parent,t).resolve,null)))}function BO(r,e,t,n){let i=Sy(r);if(i.length===0)return _e({});let s={};return Mr(i).pipe(oi(o=>UO(r[o],e,t,n).pipe(Ro(),xr(a=>{if(a instanceof kh)throw up(new Th,a);s[o]=a}))),Db(1),Be(()=>s),ai(o=>PA(o)?No:Ai(o)))}function UO(r,e,t,n){let i=Lh(e)??n,s=pl(r,i),o=s.resolve?s.resolve(e,t):Si(i,()=>s(e,t));return qo(o)}function _y(r){return Ft(e=>{let t=r(e);return t?Mr(t).pipe(Be(()=>e)):_e(e)})}var OA=(()=>{class r{buildTitle(t){let n,i=t.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(s=>s.outlet===Ne);return n}getResolvedTitleForRoute(t){return t.data[Uh]}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:()=>K(LO),providedIn:"root"})}return r})(),LO=(()=>{class r extends OA{title;constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}static \u0275fac=function(n){return new(n||r)(Ie(Z_))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),tv=new Ue("",{providedIn:"root",factory:()=>({})}),VO=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=Ce({type:r,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(n,i){n&1&&le(0,"router-outlet")},dependencies:[ec],encapsulation:2})}return r})();function rv(r){let e=r.children&&r.children.map(rv),t=e?de(k({},r),{children:e}):k({},r);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ne&&(t.component=VO),t}var nv=new Ue(""),jO=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=K($b);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return _e(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=qo(t.loadComponent()).pipe(Be(MA),xr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Wc(()=>{this.componentLoaders.delete(t)})),i=new Ib(n,()=>new si).pipe(Sb());return this.componentLoaders.set(t,i),i}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return _e({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=HO(n,this.compiler,t,this.onLoadEndListener).pipe(Wc(()=>{this.childrenLoaders.delete(n)})),o=new Ib(s,()=>new si).pipe(Sb());return this.childrenLoaders.set(n,o),o}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function HO(r,e,t,n){return qo(r.loadChildren()).pipe(Be(MA),oi(i=>i instanceof dC||Array.isArray(i)?_e(i):Mr(e.compileModuleAsync(i))),Be(i=>{n&&n(r);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(nv,[],{optional:!0,self:!0}).flat()),{routes:o.map(rv),injector:s}}))}function qO(r){return r&&typeof r=="object"&&"default"in r}function MA(r){return qO(r)?r.default:r}var iv=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:()=>K(zO),providedIn:"root"})}return r})(),zO=(()=>{class r{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),$O=new Ue("");var GO=new Ue(""),KO=(()=>{class r{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new si;transitionAbortSubject=new si;configLoader=K(jO);environmentInjector=K(as);urlSerializer=K(Zy);rootContexts=K(dp);location=K(Of);inputBindingEnabled=K(ev,{optional:!0})!==null;titleStrategy=K(OA);options=K(tv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=K(iv);createViewTransition=K($O,{optional:!0});navigationErrorHandler=K(GO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>_e(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new ky(i)),n=i=>this.events.next(new Fy(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(de(k(k({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,i){return this.transitions=new Rn({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ih,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(is(s=>s.id!==0),Be(s=>de(k({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ft(s=>{let o=!1,a=!1;return _e(s).pipe(Ft(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Kn.SupersededByNewNavigation),No;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?de(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let h="";return this.events.next(new Za(c.id,this.urlSerializer.serialize(c.rawUrl),h,Ny.IgnoredSameUrlNavigation)),c.resolve(!1),No}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return _e(c).pipe(Ft(h=>{let m=this.transitions?.getValue();return this.events.next(new Dh(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?No:Promise.resolve(h)}),MO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xr(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=de(k({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new sp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:m,source:b,restoredState:f,extras:v}=c,E=new Dh(h,this.urlSerializer.serialize(m),b,f);this.events.next(E);let I=EA(this.rootComponentType).snapshot;return this.currentTransition=s=de(k({},c),{targetSnapshot:I,urlAfterRedirects:m,extras:de(k({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,_e(s)}else{let h="";return this.events.next(new Za(c.id,this.urlSerializer.serialize(c.extractedUrl),h,Ny.IgnoredByUrlHandlingStrategy)),c.resolve(!1),No}}),xr(c=>{let l=new Dy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Be(c=>(this.currentTransition=s=de(k({},c),{guards:eO(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),hO(this.environmentInjector,c=>this.events.next(c)),xr(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw up(this.urlSerializer,c.guardsResult);let l=new Ry(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),is(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Kn.GuardRejected),!1)),_y(c=>{if(c.guards.canActivateChecks.length)return _e(c).pipe(xr(l=>{let u=new Oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ft(l=>{let u=!1;return _e(l).pipe(kO(this.paramsInheritanceStrategy,this.environmentInjector),xr({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Kn.NoDataFromResolver)}}))}),xr(l=>{let u=new My(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),_y(c=>{let l=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(xr(m=>{u.component=m}),Be(()=>{})));for(let m of u.children)h.push(...l(m));return h};return Pb(l(c.targetSnapshot.root)).pipe(Nb(null),Do(1))}),_y(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?Mr(u).pipe(Be(()=>s)):_e(s)}),Be(c=>{let l=JR(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=de(k({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),xr(()=>{this.events.next(new Oh)}),XR(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Do(1),xr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ho(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),X2(this.transitionAbortSubject.pipe(xr(c=>{throw c}))),Wc(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Kn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ai(c=>{if(a=!0,IA(c))this.events.next(new Qs(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),ZR(c)?this.events.next(new dl(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Rh(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=Si(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof kh){let{message:h,cancellationCode:m}=up(this.urlSerializer,u);this.events.next(new Qs(s.id,this.urlSerializer.serialize(s.extractedUrl),h,m)),this.events.next(new dl(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return No}))}))}cancelNavigationTransition(t,n,i){let s=new Qs(t.id,this.urlSerializer.serialize(t.extractedUrl),n,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function WO(r){return r!==Ih}var JO=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:()=>K(YO),providedIn:"root"})}return r})(),Qy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},YO=(()=>{class r extends Qy{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hs(r)))(i||r)}})();static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),kA=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:()=>K(QO),providedIn:"root"})}return r})(),QO=(()=>{class r extends kA{location=K(Of);urlSerializer=K(Zy);options=K(tv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=K(iv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Zs;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=EA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof Dh)this.stateMemento=this.createStateMemento();else if(t instanceof Za)this.rawUrlTree=n.initialUrl;else if(t instanceof sp){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??i,n)}}else t instanceof Oh?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):t instanceof Qs&&(t.code===Kn.GuardRejected||t.code===Kn.NoDataFromResolver)?this.restoreHistory(n):t instanceof Rh?this.restoreHistory(n,!0):t instanceof Ho&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let i=t instanceof Zs?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl){let s=this.browserPageId,o=k(k({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(i,"",o)}else{let s=k(k({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hs(r)))(i||r)}})();static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ZO(r,e){r.events.pipe(is(t=>t instanceof Ho||t instanceof Qs||t instanceof Rh||t instanceof Za),Be(t=>t instanceof Ho||t instanceof Za?0:(t instanceof Qs?t.code===Kn.Redirect||t.code===Kn.SupersededByNewNavigation:!1)?2:1),is(t=>t!==2),Do(1)).subscribe(()=>{e()})}var XO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jh=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=K(Lb);stateManager=K(kA);options=K(tv,{optional:!0})||{};pendingTasks=K(Af);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=K(KO);urlSerializer=K(Zy);location=K(Of);urlHandlingStrategy=K(iv);_events=new si;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=K(JO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=K(nv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!K(ev,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new H2;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Qs&&n.code!==Kn.Redirect&&n.code!==Kn.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Ho)this.navigated=!0;else if(n instanceof dl){let o=n.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),c=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||WO(i.source)},o);this.scheduleNavigation(a,Ih,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}rM(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ih,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=k({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(rv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=n,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=i?i.snapshot:this.routerState.snapshot.root;h=yA(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return vA(h,t,u,l??null)}navigateByUrl(t,n={skipLocationChange:!1}){let i=Qa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ih,null,n)}navigate(t,n={skipLocationChange:!1}){return tM(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let i;if(n===!0?i=k({},XO):n===!1?i=k({},eM):i=n,Qa(t))return tA(this.currentUrlTree,t,i);let s=this.parseUrl(t);return tA(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((n,[i,s])=>(s!=null&&(n[i]=s),n),{})}scheduleNavigation(t,n,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((h,m)=>{a=h,c=m});let u=this.pendingTasks.add();return ZO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function tM(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new ot(4008,!1)}function rM(r){return!(r instanceof Oh)&&!(r instanceof dl)}var FA=(()=>{class r{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new si;constructor(t,n,i,s,o,a){this.router=t,this.route=n,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ho&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qa(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,n,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||n||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let n=this.href===null?null:uC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(t,n){let i=this.renderer,s=this.el.nativeElement;n!==null?i.setAttribute(s,t,n):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Qa(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(n){return new(n||r)(Ae(jh),Ae(Xa),sC("tabindex"),Ae($s),Ae(Jr),Ae(Gb))};static \u0275dir=Ar({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,i){n&1&&Ee("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&zn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Zc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Zc],replaceUrl:[2,"replaceUrl","replaceUrl",Zc],routerLink:"routerLink"},features:[pC,Hn]})}return r})();var nM=new Ue("");function BA(r,...e){return os([{provide:nv,multi:!0,useValue:r},[],{provide:Xa,useFactory:iM,deps:[jh]},{provide:Df,multi:!0,useFactory:sM},e.map(t=>t.\u0275providers)])}function iM(r){return r.routerState.root}function sM(){let r=K(qs);return e=>{let t=r.get(Ua);if(e!==t.components[0])return;let n=r.get(jh),i=r.get(oM);r.get(aM)===1&&n.initialNavigation(),r.get(cM,null,Ob.Optional)?.setUpPreloading(),r.get(nM,null,Ob.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var oM=new Ue("",{factory:()=>new si}),aM=new Ue("",{providedIn:"root",factory:()=>1});var cM=new Ue("");var uM=["*"],ml=class r{background=ee("filled");baseClasses=$t(()=>this.background()==="filled"?"bg-card p-4 rounded-xl":"p-4 rounded-xl border border-border");get applyBaseClasses(){return this.baseClasses()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["card"]],hostVars:2,hostBindings:function(t,n){t&2&&hs(n.applyBaseClasses)},inputs:{background:[1,"background"]},ngContentSelectors:uM,decls:1,vars:0,template:function(t,n){t&1&&(Mo(),Gs(0))},encapsulation:2,changeDetection:0})};var pp=class r extends ml{get classes(){return`${this.baseClasses()} flex gap-4 items-center`}icon=ee("fi-rr-comment");title=ee("Title");value=ee("Value");valueFontSize=ee("2xl");static \u0275fac=(()=>{let e;return function(n){return(e||(e=Hs(r)))(n||r)}})();static \u0275cmp=Ce({type:r,selectors:[["basic-card"]],hostVars:2,hostBindings:function(t,n){t&2&&hs(n.classes)},inputs:{icon:[1,"icon"],title:[1,"title"],value:[1,"value"],valueFontSize:[1,"valueFontSize"]},features:[us],decls:7,vars:8,consts:[[1,"overflow-hidden"],[1,"text-mutedForeground","text-xs"]],template:function(t,n){t&1&&(j(0,"div"),le(1,"i"),z(),j(2,"div",0)(3,"h2",1),ne(4),z(),j(5,"span"),ne(6),z()()),t&2&&(Y(),Hb("fi ",n.icon()," flex text-3xl"),Y(3),Sr(n.title()),Y(),Hb(`block font-medium overflow-hidden overflow-ellipsis 
    text-`,n.valueFontSize()," whitespace-nowrap"),Y(),Sr(n.value()))},encapsulation:2,changeDetection:0})};var mp=class r{http=K(Wa);url="https://block-explorer-api.testnet.abs.xyz/api?";getTransaction(){let e=new Date().getTime(),t=`${this.url}module=account&action=txlist&page=1&offset=90&sort=desc&endblock=99999999&startblock=0&address=0x3cBE18fE24F227f542B44191385A55Df11d39D06&_=${e}`;return this.http.get(t,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})}getBlocks(){return this.http.get("https://eth.blockscout.com/api/v2/blocks?type=block")}constructor(){}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var gp=class r{constructor(e,t){this.el=e;this.renderer=t}interactiveElement=ee();ngOnInit(){this.interactiveElement()&&this.setTabIndex()}setTabIndex(){let e=this.el.nativeElement;e.hasAttribute("tabindex")||this.renderer.setAttribute(e,"tabindex","0")}handleKeyDown(e){this.interactiveElement()&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.el.nativeElement.click())}static \u0275fac=function(t){return new(t||r)(Ae(Jr),Ae($s))};static \u0275dir=Ar({type:r,selectors:[["","interactiveElement",""]],hostBindings:function(t,n){t&1&&Ee("keydown",function(s){return n.handleKeyDown(s)})},inputs:{interactiveElement:[1,"interactiveElement"]}})};function Wt(r,e){let t=e.animateY?{height:0,minHeight:0,paddingTop:0,marginTop:0,paddingBottom:0,marginBottom:0}:{},n=e.animateX?{width:0,minWidth:0,paddingRight:0,marginRight:0,paddingLeft:0,marginLeft:0}:{};return Wb(r,[HC("void",jC(de(k(k({},t),n),{transform:e.transform||"none",opacity:e.opacity||"0"}))),Jb(":enter, :leave",LC(e.duration?`${e.duration} ease-in-out`:"200ms ease-in-out"))])}function gs(r,e){return Wb(r,[Jb(":leave",[VC([zC(e,qC(),{optional:!0})])])])}var zo=class r{name=ee.required();templateRef;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["data-table-template"]],contentQueries:function(t,n,i){if(t&1&&La(i,hC,5),t&2){let s;kr(s=Fr())&&(n.templateRef=s.first)}},inputs:{name:[1,"name"]},decls:0,vars:0,template:function(t,n){},encapsulation:2})};var gl=class r{constructor(e){this.ngZone=e;this.ngZone.runOutsideAngular(()=>{setInterval(()=>{this.timeNow.set(Date.now())},1e3)})}timeNow=xe(Date.now());getTimeNow(){return this.timeNow.asReadonly()}static \u0275fac=function(t){return new(t||r)(Ie(Er))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var bp=class r{handleSort(e,t){switch(t.forEach(n=>{n!==e&&n.sort!=="unavailable"&&(n.sort="none")}),e.sort){case"none":e.sort="descending";break;case"descending":e.sort="ascending";break;case"ascending":e.sort="none";break;default:e.sort="unavailable";break}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var yp=class r{skeletonRows(e,t){for(var n=[],i=0;i<e;i++){let s={};t.forEach(o=>{s[o.property]="skeleton"}),n.push(s)}return n}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var hM=()=>[Ir,kC,FC,import("./chunk-WDLXNKZL.js").then(r=>r.TruncatePipe),import("./chunk-2JEMFHYH.js").then(r=>r.CopyToClipboardComponent),KC,import("./chunk-MWDZMKST.js").then(r=>r.TimeAgoPipe),import("./chunk-7SIEW6RS.js").then(r=>r.DateFormatPipe)],dM=(r,e)=>({"hover:text-accentForeground focus:text-accentForeground hover:cursor-pointer":r,"text-accentForeground":e}),fM=r=>({"rotate-180":r}),pM=r=>({$implicit:r});function mM(r,e){if(r&1&&le(0,"i",8),r&2){let t=te().$implicit;oe("ngClass",It(2,fM,t.sort==="ascending"))("@slideXSortIcon",void 0)}}function gM(r,e){if(r&1){let t=xt();j(0,"th",6),Ee("click",function(){let i=Ye(t).$implicit,s=te();return Qe(i.sort!=="unavailable"?s.sort(i):null)}),j(1,"div",7)(2,"span"),ne(3),z(),Le(4,mM,1,4,"i",8),z()()}if(r&2){let t=e.$implicit,n=te();oe("interactiveElement",t.sort!=="unavailable")("@slideXTableElement",void 0)("@.disabled",n.firstLoad())("ngClass",Qc(7,dM,t.sort!=="unavailable",t.sort!=="unavailable"&&t.sort!=="none")),zn("aria-sort",t.sort!=="unavailable"?t.sort:null),Y(3),Sr(t.label),Y(),Ke(t.sort!=="unavailable"&&t.sort!=="none"?4:-1)}}function bM(r,e){if(r&1&&(j(0,"span",10),ne(1," A "),z()),r&2){let t=te(4).$index,n=te();oe("@slideXTableElement",void 0)("@.disabled",!n.rowsOnViewport().has(t))}}function yM(r,e){r&1&&vC(0)}function vM(r,e){if(r&1&&(j(0,"div",11),Le(1,yM,1,0,"ng-container",12),z()),r&2){let t=te(2).$implicit,n=te(2),i=n.$implicit,s=n.$index,o=te();oe("@slideXTableElement",void 0)("@.disabled",!o.rowsOnViewport().has(s)),Y(),oe("ngTemplateOutlet",o.templateMap[t.property])("ngTemplateOutletContext",It(4,pM,i[t.property]))}}function wM(r,e){if(r&1&&Le(0,bM,2,2,"span",10)(1,vM,2,6,"div",11),r&2){let t=te(4);Ke(t.loadingData()===!0||t.firstLoad()?0:1)}}function xM(r,e){if(r&1&&(j(0,"span",15),ne(1," A "),z()),r&2){let t=te(5).$index,n=te();oe("@slideXTableElement",void 0)("@.disabled",!n.rowsOnViewport().has(t))}}function EM(r,e){if(r&1&&(j(0,"span",13),ne(1," A "),z(),Le(2,xM,2,2,"span",14)),r&2){let t=te(2).$implicit,n=te(2).$index,i=te();oe("ngClass",t.truncate||t.isTimestamp?"min-w-28":"min-w-44")("@slideXTableElement",void 0)("@.disabled",!i.rowsOnViewport().has(n)),Y(2),oe("ngIf",t.copyToClipboard)}}function CM(r,e){if(r&1&&(ne(0),Va(1,"truncate"),Va(2,"truncate")),r&2){let t=te(4).$implicit,n=te(2).$implicit;St(" ",t.truncate==="middle"?Rf(1,1,n[t.property]):zb(2,3,n[t.property],t.truncate[0],t.truncate[1])," ")}}function _M(r,e){if(r&1&&ne(0),r&2){let t=te(4).$implicit,n=te(2).$implicit;St(" ",n[t.property]," ")}}function AM(r,e){if(r&1){let t=xt();j(0,"a",19),Ee("mouseenter",function(){Ye(t);let i=te(3).$implicit,s=te(2).$implicit,o=te();return Qe(o.setHighlightData(s[i.property]))})("mouseleave",function(){Ye(t);let i=te(6);return Qe(i.clearHighlightData())}),Le(1,CM,3,7)(2,_M,1,1),z()}if(r&2){let t=te(3).$implicit,n=te(2),i=n.$implicit,s=n.$index,o=te();oe("@slideXTableElement",void 0)("@.disabled",!o.rowsOnViewport().has(s))("href",t.href(i[t.property])||null,Sf)("target",t.hrefTarget||"_self")("matTooltip",t.truncate?i[t.property]:null)("ngClass",o.highlightedData()==i[t.property]&&t.highlighData?"border-primary/50 bg-primary/15":"border-transparent"),Y(),Ke(t.truncate?1:2)}}function SM(r,e){if(r&1&&(ne(0),Va(1,"truncate"),Va(2,"truncate")),r&2){let t=te(4).$implicit,n=te(2).$implicit;St(" ",t.truncate==="middle"?Rf(1,1,n[t.property]):zb(2,3,n[t.property],t.truncate[0],t.truncate[1])," ")}}function IM(r,e){if(r&1&&(ne(0),Va(1,"timeAgo")),r&2){let t=te(4).$implicit,n=te(2).$implicit,i=te();St(" ",AC(1,1,n[t.property],i.updatedTime())," ")}}function PM(r,e){if(r&1&&ne(0),r&2){let t=te(4).$implicit,n=te(2).$implicit;St(" ",n[t.property]," ")}}function TM(r,e){if(r&1){let t=xt();j(0,"span",20),Va(1,"dateFormat"),Ee("mouseenter",function(){Ye(t);let i=te(3).$implicit,s=te(2).$implicit,o=te();return Qe(o.setHighlightData(s[i.property]))})("mouseleave",function(){Ye(t);let i=te(6);return Qe(i.clearHighlightData())}),Le(2,SM,3,7)(3,IM,2,4)(4,PM,1,1),z()}if(r&2){let t=te(3).$implicit,n=te(2),i=n.$implicit,s=n.$index,o=te();oe("@slideXTableElement",void 0)("@.disabled",!o.rowsOnViewport().has(s))("matTooltip",t.truncate?i[t.property]:t.isTimestamp?Rf(1,5,i[t.property]):null)("ngClass",o.highlightedData()==i[t.property]&&t.highlighData?"border-primary/50 bg-primary/15":"border-transparent"),Y(2),Ke(t.truncate?2:t.isTimestamp?3:4)}}function NM(r,e){if(r&1&&le(0,"button",18),r&2){let t=te(3).$implicit,n=te(2),i=n.$implicit,s=n.$index,o=te();oe("value",i[t.property])("@slideXTableElement",void 0)("@.disabled",!o.rowsOnViewport().has(s))}}function DM(r,e){if(r&1&&Le(0,AM,3,7,"a",16)(1,TM,5,7,"span",17)(2,NM,1,3,"button",18),r&2){let t=te(2).$implicit;Ke(t.href?0:1),Y(2),Ke(t.copyToClipboard===!0?2:-1)}}function RM(r,e){if(r&1&&(j(0,"div",7),Le(1,EM,3,4)(2,DM,3,2),z()),r&2){let t=te(4);Y(),Ke(t.loadingData()===!0||t.firstLoad()?1:2)}}function OM(r,e){if(r&1&&(j(0,"td",9),Le(1,wM,2,1)(2,RM,3,1,"div",7),z()),r&2){let t=e.$implicit,n=te(2).$index,i=te();oe("@queryAnimationsDataTable",void 0)("@.disabled",!i.rowsOnViewport().has(n)),Y(),Ke(t.useTemplate&&i.templateMap[t.property]?1:2)}}function MM(r,e){if(r&1&&Qr(0,OM,3,3,"td",9,Yr),r&2){let t=te(2);Zr(t.columns())}}function kM(r,e){r&1&&(j(0,"td",9),le(1,"span",21),z())}function FM(r,e){if(r&1&&(j(0,"tr",5),Le(1,MM,2,0)(2,kM,2,0),gC(3,1,hM,null,2),bC(0,-1),z()),r&2){let t=e.$index;zn("data-index",t)}}var vp=class r{updatedTimeService=K(gl);el=K(Jr);tableSortService=K(bp);tableSkeletonService=K(yp);zone=K(Er);columns=ee.required();rows=ee();limit=ee.required();parentTemplates=ee();sorted=Wr();firstLoad=xe(!0);displayedRows=$t(()=>this.handleDisplayedRows());highlightedData=xe(null);updatedTime=this.updatedTimeService.getTimeNow();loadingData=$t(()=>this.rows()?.length===0);rowsOnViewport=xe(new Set);templates;templateMap={};ngAfterViewInit(){this.firstLoad()===!0&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.fillTemplates(),this.zone.run(()=>this.firstLoad.set(!1))},2e3)})}ngOnInit(){typeof window<"u"&&this.setupIntersectionObserver()}sort(e){this.tableSortService.handleSort(e,this.columns()),this.sorted.emit(e)}setHighlightData(e){this.highlightedData.set(e)}clearHighlightData(){this.highlightedData.set(null)}fillTemplates(){this.parentTemplates()&&this.parentTemplates()?.forEach(e=>{this.templateMap[e.name()]=e.templateRef}),this.templates?.forEach(e=>{this.templateMap[e.name()]=e.templateRef})}handleDisplayedRows(){return this.loadingData()?this.tableSkeletonService.skeletonRows(this.limit(),this.columns()):this.rows()?.slice(0,this.limit())||[]}setupIntersectionObserver(){let e=new IntersectionObserver(i=>{i.forEach(s=>{let o=Number(s.target.getAttribute("data-index")||"0");this.rowsOnViewport.update(a=>(s.isIntersecting?a.add(o):a.delete(o),new Set(a)))})});this.el.nativeElement.querySelectorAll("[data-index]").forEach(i=>{e.observe(i)})}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["data-table"]],contentQueries:function(t,n,i){if(t&1&&La(i,zo,4),t&2){let s;kr(s=Fr())&&(n.templates=s)}},inputs:{columns:[1,"columns"],rows:[1,"rows"],limit:[1,"limit"],parentTemplates:[1,"parentTemplates"]},outputs:{sorted:"sorted"},features:[Pi([BC])],decls:9,vars:1,consts:[["table",""],[1,"table-auto","rounded-t-xl","border-collapse","text-left","w-full"],[1,"sticky","top-0"],[1,"bg-card","text-sm","text-mutedForegroundNeutral","whitespace-nowrap"],[1,"py-3","px-2","first:pl-3","last:pr-3","font-semibold","select-none","transition-colors",3,"interactiveElement","ngClass"],[1,"border-b","border-border","last:border-b-0"],[1,"py-3","px-2","first:pl-3","last:pr-3","font-semibold","select-none","transition-colors",3,"click","interactiveElement","ngClass"],[1,"flex","items-center","gap-1"],[1,"fi","fi-rr-caret-down","flex","transition-transform","duration-300",3,"ngClass"],[1,"py-3","px-2","first:pl-3","last:pr-3","max-w"],[1,"inline-block","animate-pulse","bg-muted","text-muted","rounded-md","min-w-28","min-h-7"],[1,"inline-block"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"inline-block","animate-pulse","bg-muted","text-muted","rounded-md","min-h-7",3,"ngClass"],["class","inline-block animate-pulse bg-muted text-muted rounded-md min-w-6 min-h-7",4,"ngIf"],[1,"inline-block","animate-pulse","bg-muted","text-muted","rounded-md","min-w-6","min-h-7"],["rel","noopener noreferrer",1,"gb_a","px-1","rounded","border","border-dashed","transition-all","whitespace-nowrap","min-h-7",3,"href","target","matTooltip","ngClass"],[1,"px-1","rounded","border","border-dashed","transition-all","whitespace-nowrap","min-h-7",3,"matTooltip","ngClass"],["copy-to-clipboard","",3,"value"],["rel","noopener noreferrer",1,"gb_a","px-1","rounded","border","border-dashed","transition-all","whitespace-nowrap","min-h-7",3,"mouseenter","mouseleave","href","target","matTooltip","ngClass"],[1,"px-1","rounded","border","border-dashed","transition-all","whitespace-nowrap","min-h-7",3,"mouseenter","mouseleave","matTooltip","ngClass"],[1,"block","min-h-7"]],template:function(t,n){t&1&&(j(0,"table",1,0)(2,"thead",2)(3,"tr",3),Qr(4,gM,5,10,"th",4,Yr),z()(),j(6,"tbody"),Qr(7,FM,5,1,"tr",5,Yr),z()()),t&2&&(Y(3),oe("@queryAnimationsDataTable",void 0),Y(),Zr(n.columns()),Y(3),Zr(n.displayedRows()))},dependencies:[Bt,Ir,gp,$C,WC],styles:["[_nghost-%COMP%]{display:block;max-width:100%;overflow-x:auto}[_nghost-%COMP%]::-webkit-scrollbar{width:10px;height:10px}[_nghost-%COMP%]::-webkit-scrollbar-track{background:hsla(var(--muted))}[_nghost-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:5px;border:2px solid hsla(var(--muted))}[_nghost-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}[_nghost-%COMP%]::-webkit-scrollbar-corner{background:transparent}"],data:{animation:[Wt("slideXTableElement",{animateX:!0,duration:"400ms",transform:"scale(.1)"}),Wt("slideXSortIcon",{animateX:!0,duration:"200ms",transform:"scale(0) translateX(-30px)"}),gs("queryAnimationsDataTable","@slideXTableElement, @slideXSortIcon")]},changeDetection:0})};var GA=(()=>{class r{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,n){this._renderer=t,this._elementRef=n}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(n){return new(n||r)(Ae($s),Ae(Jr))};static \u0275dir=Ar({type:r})}return r})(),BM=(()=>{class r extends GA{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hs(r)))(i||r)}})();static \u0275dir=Ar({type:r,features:[us]})}return r})(),nc=new Ue("");var UM={provide:nc,useExisting:Ba(()=>Tp),multi:!0};function LM(){let r=ja()?ja().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var VM=new Ue(""),Tp=(()=>{class r extends GA{_compositionMode;_composing=!1;constructor(t,n,i){super(t,n),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!LM())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(n){return new(n||r)(Ae($s),Ae(Jr),Ae(VM,8))};static \u0275dir=Ar({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){n&1&&Ee("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Pi([UM]),us]})}return r})();function $o(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function KA(r){return r!=null&&typeof r.length=="number"}var Kh=new Ue(""),hv=new Ue(""),jM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xp=class{static min(e){return HM(e)}static max(e){return qM(e)}static required(e){return zM(e)}static requiredTrue(e){return $M(e)}static email(e){return GM(e)}static minLength(e){return KM(e)}static maxLength(e){return WM(e)}static pattern(e){return JM(e)}static nullValidator(e){return WA(e)}static compose(e){return eS(e)}static composeAsync(e){return rS(e)}};function HM(r){return e=>{if($o(e.value)||$o(r))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<r?{min:{min:r,actual:e.value}}:null}}function qM(r){return e=>{if($o(e.value)||$o(r))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>r?{max:{max:r,actual:e.value}}:null}}function zM(r){return $o(r.value)?{required:!0}:null}function $M(r){return r.value===!0?null:{required:!0}}function GM(r){return $o(r.value)||jM.test(r.value)?null:{email:!0}}function KM(r){return e=>$o(e.value)||!KA(e.value)?null:e.value.length<r?{minlength:{requiredLength:r,actualLength:e.value.length}}:null}function WM(r){return e=>KA(e.value)&&e.value.length>r?{maxlength:{requiredLength:r,actualLength:e.value.length}}:null}function JM(r){if(!r)return WA;let e,t;return typeof r=="string"?(t="",r.charAt(0)!=="^"&&(t+="^"),t+=r,r.charAt(r.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=r.toString(),e=r),n=>{if($o(n.value))return null;let i=n.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function WA(r){return null}function JA(r){return r!=null}function YA(r){return Nf(r)?Mr(r):r}function QA(r){let e={};return r.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function ZA(r,e){return e.map(t=>t(r))}function YM(r){return!r.validate}function XA(r){return r.map(e=>YM(e)?e:t=>e.validate(t))}function eS(r){if(!r)return null;let e=r.filter(JA);return e.length==0?null:function(t){return QA(ZA(t,e))}}function tS(r){return r!=null?eS(XA(r)):null}function rS(r){if(!r)return null;let e=r.filter(JA);return e.length==0?null:function(t){let n=ZA(t,e).map(YA);return K2(n).pipe(Be(QA))}}function nS(r){return r!=null?rS(XA(r)):null}function UA(r,e){return r===null?[e]:Array.isArray(r)?[...r,e]:[r,e]}function iS(r){return r._rawValidators}function sS(r){return r._rawAsyncValidators}function sv(r){return r?Array.isArray(r)?r:[r]:[]}function Ep(r,e){return Array.isArray(r)?r.includes(e):r===e}function LA(r,e){let t=sv(e);return sv(r).forEach(i=>{Ep(t,i)||t.push(i)}),t}function VA(r,e){return sv(e).filter(t=>!Ep(r,t))}var Cp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tc=class extends Cp{name;get formDirective(){return null}get path(){return null}},rc=class extends Cp{_parent=null;name=null;valueAccessor=null},_p=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},QM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yte=de(k({},QM),{"[class.ng-submitted]":"isSubmitted"}),Np=(()=>{class r extends _p{constructor(t){super(t)}static \u0275fac=function(n){return new(n||r)(Ae(rc,2))};static \u0275dir=Ar({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){n&2&&jb("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[us]})}return r})(),oS=(()=>{class r extends _p{constructor(t){super(t)}static \u0275fac=function(n){return new(n||r)(Ae(tc,10))};static \u0275dir=Ar({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,i){n&2&&jb("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[us]})}return r})();var Hh="VALID",wp="INVALID",bl="PENDING",qh="DISABLED",Go=class{},Ap=class extends Go{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zh=class extends Go{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},$h=class extends Go{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},yl=class extends Go{status;source;constructor(e,t){super(),this.status=e,this.source=t}},ov=class extends Go{source;constructor(e){super(),this.source=e}},av=class extends Go{source;constructor(e){super(),this.source=e}};function dv(r){return(Dp(r)?r.validators:r)||null}function ZM(r){return Array.isArray(r)?tS(r):r||null}function fv(r,e){return(Dp(e)?e.asyncValidators:r)||null}function XM(r){return Array.isArray(r)?nS(r):r||null}function Dp(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function aS(r,e,t){let n=r.controls;if(!(e?Object.keys(n):n).length)throw new ot(1e3,"");if(!n[t])throw new ot(1001,"")}function cS(r,e,t){r._forEachChild((n,i)=>{if(t[i]===void 0)throw new ot(1002,"")})}var vl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fo(this.statusReactive)}set status(e){Fo(()=>this.statusReactive.set(e))}_status=$t(()=>this.statusReactive());statusReactive=xe(void 0);get valid(){return this.status===Hh}get invalid(){return this.status===wp}get pending(){return this.status==bl}get disabled(){return this.status===qh}get enabled(){return this.status!==qh}errors;get pristine(){return Fo(this.pristineReactive)}set pristine(e){Fo(()=>this.pristineReactive.set(e))}_pristine=$t(()=>this.pristineReactive());pristineReactive=xe(!0);get dirty(){return!this.pristine}get touched(){return Fo(this.touchedReactive)}set touched(e){Fo(()=>this.touchedReactive.set(e))}_touched=$t(()=>this.touchedReactive());touchedReactive=xe(!1);get untouched(){return!this.touched}_events=new si;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VA(e,this._rawAsyncValidators))}hasValidator(e){return Ep(this._rawValidators,e)}hasAsyncValidator(e){return Ep(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(de(k({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new $h(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new $h(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(de(k({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new zh(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new zh(!0,n))}markAsPending(e={}){this.status=bl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(de(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qh,this.errors=null,this._forEachChild(i=>{i.disable(de(k({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ap(this.value,n)),this._events.next(new yl(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(de(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hh,this._forEachChild(n=>{n.enable(de(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(de(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hh||this.status===bl)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ap(this.value,t)),this._events.next(new yl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(de(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qh:Hh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=bl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=YA(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,i)=>n&&n._find(i),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new yl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new qn,this.statusChanges=new qn}_calculateStatus(){return this._allControlsDisabled()?qh:this.errors?wp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bl)?bl:this._anyControlsHaveStatus(wp)?wp:Hh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),i=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new zh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new $h(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ZM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=XM(this._rawAsyncValidators)}},Sp=class extends vl{constructor(e,t,n){super(dv(t),fv(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){cS(this,!0,e),Object.keys(e).forEach(n=>{aS(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let i=this.controls[n];i&&i.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,i)=>{n.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,i)=>((n.enabled||this.disabled)&&(t[i]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((i,s)=>{n=t(n,i,s)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var cv=class extends Sp{};var Rp=new Ue("",{providedIn:"root",factory:()=>Op}),Op="always";function lS(r,e){return[...e.path,r]}function lv(r,e,t=Op){pv(r,e),e.valueAccessor.writeValue(r.value),(r.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(r.disabled),tk(r,e),nk(r,e),rk(r,e),ek(r,e)}function jA(r,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Pp(r,e),r&&(e._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Ip(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ek(r,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}function pv(r,e){let t=iS(r);e.validator!==null?r.setValidators(UA(t,e.validator)):typeof t=="function"&&r.setValidators([t]);let n=sS(r);e.asyncValidator!==null?r.setAsyncValidators(UA(n,e.asyncValidator)):typeof n=="function"&&r.setAsyncValidators([n]);let i=()=>r.updateValueAndValidity();Ip(e._rawValidators,i),Ip(e._rawAsyncValidators,i)}function Pp(r,e){let t=!1;if(r!==null){if(e.validator!==null){let i=iS(r);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,r.setValidators(s))}}if(e.asyncValidator!==null){let i=sS(r);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,r.setAsyncValidators(s))}}}let n=()=>{};return Ip(e._rawValidators,n),Ip(e._rawAsyncValidators,n),t}function tk(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&uS(r,e)})}function rk(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&uS(r,e),r.updateOn!=="submit"&&r.markAsTouched()})}function uS(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function nk(r,e){let t=(n,i)=>{e.valueAccessor.writeValue(n),i&&e.viewToModelUpdate(n)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}function ik(r,e){r==null,pv(r,e)}function sk(r,e){return Pp(r,e)}function hS(r,e){if(!r.hasOwnProperty("model"))return!1;let t=r.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ok(r){return Object.getPrototypeOf(r.constructor)===BM}function ak(r,e){r._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function dS(r,e){if(!e)return null;Array.isArray(e);let t,n,i;return e.forEach(s=>{s.constructor===Tp?t=s:ok(s)?n=s:i=s}),i||n||t||null}function ck(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function HA(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function qA(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Gh=class extends vl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,n){super(dv(t),fv(n,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(qA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lk=r=>r instanceof Gh;var uk={provide:rc,useExisting:Ba(()=>mv)},zA=Promise.resolve(),mv=(()=>{class r extends rc{_changeDetectorRef;callSetDisabledState;control=new Gh;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new qn;constructor(t,n,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=dS(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),hS(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){zA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,i=n!==0&&Zc(n);zA.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?lS(t,this._parent):[t]}static \u0275fac=function(n){return new(n||r)(Ae(tc,9),Ae(Kh,10),Ae(hv,10),Ae(nc,10),Ae(hh,8),Ae(Rp,8))};static \u0275dir=Ar({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Pi([uk]),us,Hn]})}return r})(),fS=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275dir=Ar({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return r})();var pS=new Ue("");var hk={provide:tc,useExisting:Ba(()=>gv)},gv=(()=>{class r extends tc{callSetDisabledState;get submitted(){return Fo(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=$t(()=>this._submittedReactive());_submittedReactive=xe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new qn;constructor(t,n,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return lv(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){jA(t.control||null,t,!1),ck(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),ak(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new ov(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new av(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,i=this.form.get(t.path);n!==i&&(jA(n||null,t),lk(i)&&(lv(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);ik(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&sk(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pv(this.form,this),this._oldForm&&Pp(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(n){return new(n||r)(Ae(Kh,10),Ae(hv,10),Ae(Rp,8))};static \u0275dir=Ar({type:r,selectors:[["","formGroup",""]],hostBindings:function(n,i){n&1&&Ee("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Pi([hk]),us,Hn]})}return r})();var dk={provide:rc,useExisting:Ba(()=>bv)},bv=(()=>{class r extends rc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new qn;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,n,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=dS(this,s)}ngOnChanges(t){this._added||this._setUpControl(),hS(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return lS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||r)(Ae(tc,13),Ae(Kh,10),Ae(hv,10),Ae(nc,10),Ae(pS,8))};static \u0275dir=Ar({type:r,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Pi([dk]),us,Hn]})}return r})();var mS=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=ls({type:r});static \u0275inj=ss({})}return r})(),uv=class extends vl{constructor(e,t,n){super(dv(t),fv(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){cS(this,!1,e),e.forEach((n,i)=>{aS(this,!1,i),this.at(i).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((n,i)=>{this.at(i)&&this.at(i).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,i)=>{n.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>n._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function $A(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var gS=(()=>{class r{useNonNullable=!1;get nonNullable(){let t=new r;return t.useNonNullable=!0,t}group(t,n=null){let i=this._reduceControls(t),s={};return $A(n)?s=n:n!==null&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Sp(i,s)}record(t,n=null){let i=this._reduceControls(t);return new cv(i,n)}control(t,n,i){let s={};return this.useNonNullable?($A(n)?s=n:(s.validators=n,s.asyncValidators=i),new Gh(t,de(k({},s),{nonNullable:!0}))):new Gh(t,n,i)}array(t,n,i){let s=t.map(o=>this._createControl(o));return new uv(s,n,i)}_reduceControls(t){let n={};return Object.keys(t).forEach(i=>{n[i]=this._createControl(t[i])}),n}_createControl(t){if(t instanceof Gh)return t;if(t instanceof vl)return t;if(Array.isArray(t)){let n=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(n,i,s)}else return this.control(t)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Mp=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:Rp,useValue:t.callSetDisabledState??Op}]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=ls({type:r});static \u0275inj=ss({imports:[mS]})}return r})(),kp=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:pS,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rp,useValue:t.callSetDisabledState??Op}]}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=ls({type:r});static \u0275inj=ss({imports:[mS]})}return r})();var R=function(r){return r.SEPARATOR="separator",r.PERCENT="percent",r.IP="IP",r.CPF_CNPJ="CPF_CNPJ",r.MONTH="M",r.MONTHS="M0",r.MINUTE="m",r.HOUR="h",r.HOURS="H",r.MINUTES="m0",r.HOURS_HOUR="Hh",r.SECONDS="s0",r.HOURS_MINUTES_SECONDS="Hh:m0:s0",r.EMAIL_MASK="A*@A*.A*",r.HOURS_MINUTES="Hh:m0",r.MINUTES_SECONDS="m0:s0",r.DAYS_MONTHS_YEARS="d0/M0/0000",r.DAYS_MONTHS="d0/M0",r.DAYS="d0",r.DAY="d",r.SECOND="s",r.LETTER_S="S",r.DOT=".",r.COMMA=",",r.CURLY_BRACKETS_LEFT="{",r.CURLY_BRACKETS_RIGHT="}",r.MINUS="-",r.OR="||",r.HASH="#",r.EMPTY_STRING="",r.SYMBOL_STAR="*",r.SYMBOL_QUESTION="?",r.SLASH="/",r.WHITE_SPACE=" ",r.NUMBER_ZERO="0",r.NUMBER_NINE="9",r.BACKSPACE="Backspace",r.DELETE="Delete",r.ARROW_LEFT="ArrowLeft",r.ARROW_UP="ArrowUp",r.DOUBLE_ZERO="00",r}(R||{}),Fp=new Ue("ngx-mask config"),yS=new Ue("new ngx-mask config"),vS=new Ue("initial ngx-mask config"),fk={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showMaskTyped:!1,instantPrefix:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:!1,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:r=>r,outputTransformFn:r=>r,maskFilled:new qn,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},pk=[R.HOURS_MINUTES_SECONDS,R.HOURS_MINUTES,R.MINUTES_SECONDS],mk=[R.PERCENT,R.HOURS_HOUR,R.SECONDS,R.MINUTES,R.SEPARATOR,R.DAYS_MONTHS_YEARS,R.DAYS_MONTHS,R.DAYS,R.MONTHS],gk=(()=>{class r{_config=K(Fp);dropSpecialCharacters=this._config.dropSpecialCharacters;hiddenInput=this._config.hiddenInput;clearIfNotMatch=this._config.clearIfNotMatch;specialCharacters=this._config.specialCharacters;patterns=this._config.patterns;prefix=this._config.prefix;suffix=this._config.suffix;thousandSeparator=this._config.thousandSeparator;decimalMarker=this._config.decimalMarker;customPattern;showMaskTyped=this._config.showMaskTyped;placeHolderCharacter=this._config.placeHolderCharacter;validation=this._config.validation;separatorLimit=this._config.separatorLimit;allowNegativeNumbers=this._config.allowNegativeNumbers;leadZeroDateTime=this._config.leadZeroDateTime;leadZero=this._config.leadZero;apm=this._config.apm;inputTransformFn=this._config.inputTransformFn;outputTransformFn=this._config.outputTransformFn;keepCharacterPositions=this._config.keepCharacterPositions;instantPrefix=this._config.instantPrefix;_shift=new Set;plusOnePosition=!1;maskExpression="";actualValue="";showKeepCharacterExp="";shownMaskExpression="";deletedSpecialCharacter=!1;ipError;cpfCnpjError;applyMask(t,n,i=0,s=!1,o=!1,a=()=>{}){if(!n||typeof t!="string")return R.EMPTY_STRING;let c=0,l="",u=!1,h=!1,m=1,b=!1,f=t,v=i;f.slice(0,this.prefix.length)===this.prefix&&(f=f.slice(this.prefix.length,f.length)),this.suffix&&f.length>0&&(f=this.checkAndRemoveSuffix(f)),f==="("&&this.prefix&&(f="");let E=f.toString().split(R.EMPTY_STRING);if(this.allowNegativeNumbers&&f.slice(c,c+1)===R.MINUS&&(l+=f.slice(c,c+1)),n===R.IP){let B=f.split(R.DOT);this.ipError=this._validIP(B),n="099.099.099.099"}let I=[];for(let B=0;B<f.length;B++)f[B]?.match("\\d")&&I.push(f[B]??R.EMPTY_STRING);if(n===R.CPF_CNPJ&&(this.cpfCnpjError=I.length!==11&&I.length!==14,I.length>11?n="00.000.000/0000-00":n="000.000.000-00"),n.startsWith(R.PERCENT)){if(f.match("[a-z]|[A-Z]")||f.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!o){f=this._stripToDecimal(f);let V=this.getPrecision(n);f=this.checkInputPrecision(f,V,this.decimalMarker)}let B=typeof this.decimalMarker=="string"?this.decimalMarker:R.DOT;if(f.indexOf(B)>0&&!this.percentage(f.substring(0,f.indexOf(B)))){let V=f.substring(0,f.indexOf(B)-1);this.allowNegativeNumbers&&f.slice(c,c+1)===R.MINUS&&!o&&(V=f.substring(0,f.indexOf(B))),f=`${V}${f.substring(f.indexOf(B),f.length)}`}let M="";this.allowNegativeNumbers&&f.slice(c,c+1)===R.MINUS?M=`${R.MINUS}${f.slice(c+1,c+f.length)}`:M=f,this.percentage(M)?l=this._splitPercentZero(f):l=this._splitPercentZero(f.substring(0,f.length-1))}else if(n.startsWith(R.SEPARATOR)){(f.match("[w\u0430-\u044F\u0410-\u042F]")||f.match("[\u0401\u0451\u0410-\u044F]")||f.match("[a-z]|[A-Z]")||f.match(/[-@#!$%\\^&*()_'+|~=`{}\]:";<>.?/]/)||f.match("[^A-Za-z0-9,]"))&&(f=this._stripToDecimal(f));let B=this.getPrecision(n),M=this.decimalMarker;if(Array.isArray(this.decimalMarker)&&(this.actualValue.includes(this.decimalMarker[0])||this.actualValue.includes(this.decimalMarker[1])?M=this.actualValue.includes(this.decimalMarker[0])?this.decimalMarker[0]:this.decimalMarker[1]:M=this.decimalMarker.find(x=>x!==this.thousandSeparator)),o){let{decimalMarkerIndex:x,nonZeroIndex:T}=this._findFirstNonZeroAndDecimalIndex(f,M),_=f[0]===R.MINUS,g=f[0]===R.NUMBER_ZERO,S=f[0]===M,q=f[1]===M;(S&&!T||_&&q&&!T||g&&!x&&!T)&&(f=R.NUMBER_ZERO),x&&T&&_&&v===1&&(x<T||x>T)&&(f=R.MINUS+f.slice(T)),!x&&T&&f.length>T&&(f=_?R.MINUS+f.slice(T):f.slice(T)),x&&T&&v===0&&(x<T&&(f=f.slice(x-1)),x>T&&(f=f.slice(T)))}B===0?f=this.allowNegativeNumbers?f.length>2&&f[0]===R.MINUS&&f[1]===R.NUMBER_ZERO&&f[2]!==this.thousandSeparator&&f[2]!==R.COMMA&&f[2]!==R.DOT?"-"+f.slice(2,f.length):f[0]===R.NUMBER_ZERO&&f.length>1&&f[1]!==this.thousandSeparator&&f[1]!==R.COMMA&&f[1]!==R.DOT?f.slice(1,f.length):f:f.length>1&&f[0]===R.NUMBER_ZERO&&f[1]!==this.thousandSeparator&&f[1]!==R.COMMA&&f[1]!==R.DOT?f.slice(1,f.length):f:(f[0]===M&&f.length>1&&!o&&(f=R.NUMBER_ZERO+f.slice(0,f.length+1),this.plusOnePosition=!0),f[0]===R.NUMBER_ZERO&&f[1]!==M&&f[1]!==this.thousandSeparator&&!o&&(f=f.length>1?f.slice(0,1)+M+f.slice(1,f.length+1):f,this.plusOnePosition=!0),this.allowNegativeNumbers&&!o&&f[0]===R.MINUS&&(f[1]===M||f[1]===R.NUMBER_ZERO)&&(f=f[1]===M&&f.length>2?f.slice(0,1)+R.NUMBER_ZERO+f.slice(1,f.length):f[1]===R.NUMBER_ZERO&&f.length>2&&f[2]!==M?f.slice(0,2)+M+f.slice(2,f.length):f,this.plusOnePosition=!0));let V=this._charToRegExpExpression(this.thousandSeparator),P='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(V,"");if(Array.isArray(this.decimalMarker))for(let x of this.decimalMarker)P=P.replace(this._charToRegExpExpression(x),R.EMPTY_STRING);else P=P.replace(this._charToRegExpExpression(this.decimalMarker),"");let d=new RegExp("["+P+"]");f.match(d)&&(f=f.substring(0,f.length-1)),f=this.checkInputPrecision(f,B,this.decimalMarker);let y=f.replace(new RegExp(V,"g"),"");l=this._formatWithSeparators(y,this.thousandSeparator,this.decimalMarker,B);let C=l.indexOf(R.COMMA)-f.indexOf(R.COMMA),A=l.length-f.length,w=o&&l.length<t.length&&this.separatorLimit;if((l[v-1]===this.thousandSeparator||l[v-this.prefix.length])&&this.prefix&&o)v=v-1;else if(A>0&&l[v]!==this.thousandSeparator||w){h=!0;let x=0;do this._shift.add(v+x),x++;while(x<A)}else l[v-1]===this.thousandSeparator||A===-4||A===-3||l[v]===this.thousandSeparator?(this._shift.clear(),this._shift.add(v-1)):C!==0&&v>0&&!(l.indexOf(R.COMMA)>=v&&v>3)||!(l.indexOf(R.DOT)>=v&&v>3)&&A<=0?(this._shift.clear(),h=!0,m=A,v+=A,this._shift.add(v)):this._shift.clear()}else for(let B=0,M=E[0];B<E.length&&c!==n.length;B++,M=E[B]??R.EMPTY_STRING){let V=R.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(M,n[c]??R.EMPTY_STRING)&&n[c+1]===R.SYMBOL_QUESTION)l+=M,c+=2;else if(n[c+1]===R.SYMBOL_STAR&&u&&this._checkSymbolMask(M,n[c+2]??R.EMPTY_STRING))l+=M,c+=3,u=!1;else if(this._checkSymbolMask(M,n[c]??R.EMPTY_STRING)&&n[c+1]===R.SYMBOL_STAR&&!V)l+=M,u=!0;else if(n[c+1]===R.SYMBOL_QUESTION&&this._checkSymbolMask(M,n[c+2]??R.EMPTY_STRING))l+=M,c+=3;else if(this._checkSymbolMask(M,n[c]??R.EMPTY_STRING)){if(n[c]===R.HOURS&&(this.apm?Number(M)>9:Number(M)>2)){v=this.leadZeroDateTime?v:v+1,c+=1,this._shiftStep(c),B--,this.leadZeroDateTime&&(l+="0");continue}if(n[c]===R.HOUR&&(this.apm?l.length===1&&Number(l)>1||l==="1"&&Number(M)>2||f.slice(c-1,c).length===1&&Number(f.slice(c-1,c))>2||f.slice(c-1,c)==="1"&&Number(M)>2:l==="2"&&Number(M)>3||(l.slice(c-2,c)==="2"||l.slice(c-3,c)==="2"||l.slice(c-4,c)==="2"||l.slice(c-1,c)==="2")&&Number(M)>3&&c>10)){v=v+1,c+=1,B--;continue}if((n[c]===R.MINUTE||n[c]===R.SECOND)&&Number(M)>5){v=this.leadZeroDateTime?v:v+1,c+=1,this._shiftStep(c),B--,this.leadZeroDateTime&&(l+="0");continue}let P=31,d=f[c],y=f[c+1],C=f[c+2],A=f[c-1],w=f[c-2],x=f.slice(c-3,c-1),T=f.slice(c-1,c+1),_=f.slice(c,c+2),g=f.slice(c-2,c);if(n[c]===R.DAY){let S=n.slice(0,2)===R.MONTHS,q=n.slice(0,2)===R.MONTHS&&this.specialCharacters.includes(w);if(Number(M)>3&&this.leadZeroDateTime||!S&&(Number(_)>P||Number(T)>P||this.specialCharacters.includes(y))||(q?Number(T)>P||!this.specialCharacters.includes(d)&&this.specialCharacters.includes(C)||this.specialCharacters.includes(d):Number(_)>P||this.specialCharacters.includes(y)&&!o)){v=this.leadZeroDateTime?v:v+1,c+=1,this._shiftStep(c),B--,this.leadZeroDateTime&&(l+="0");continue}}if(n[c]===R.MONTH){let q=c===0&&(Number(M)>2||Number(_)>12||this.specialCharacters.includes(y)&&!o),$=n.slice(c+2,c+3),W=x.includes($)&&n.includes("d0")&&(this.specialCharacters.includes(w)&&Number(T)>12&&!this.specialCharacters.includes(d)||this.specialCharacters.includes(d)),Z=Number(x)<=P&&!this.specialCharacters.includes(x)&&this.specialCharacters.includes(A)&&(Number(_)>12||this.specialCharacters.includes(y)),ce=Number(_)>12&&c===5||this.specialCharacters.includes(y)&&c===5,fe=Number(x)>P&&!this.specialCharacters.includes(x)&&!this.specialCharacters.includes(g)&&Number(g)>12&&n.includes("d0"),Te=Number(x)<=P&&!this.specialCharacters.includes(x)&&!this.specialCharacters.includes(A)&&Number(T)>12;if(Number(M)>1&&this.leadZeroDateTime||q||W||Te||fe||Z||ce&&!this.leadZeroDateTime){v=this.leadZeroDateTime?v:v+1,c+=1,this._shiftStep(c),B--,this.leadZeroDateTime&&(l+="0");continue}}l+=M,c++}else this.specialCharacters.includes(M)&&n[c]===M?(l+=M,c++):this.specialCharacters.indexOf(n[c]??R.EMPTY_STRING)!==-1?(l+=n[c],c++,this._shiftStep(c),B--):n[c]===R.NUMBER_NINE&&this.showMaskTyped?this._shiftStep(c):this.patterns[n[c]??R.EMPTY_STRING]&&this.patterns[n[c]??R.EMPTY_STRING]?.optional?(E[c]&&n!=="099.099.099.099"&&n!=="000.000.000-00"&&n!=="00.000.000/0000-00"&&!n.match(/^9+\.0+$/)&&!this.patterns[n[c]??R.EMPTY_STRING]?.optional&&(l+=E[c]),n.includes(R.NUMBER_NINE+R.SYMBOL_STAR)&&n.includes(R.NUMBER_ZERO+R.SYMBOL_STAR)&&c++,c++,B--):this.maskExpression[c+1]===R.SYMBOL_STAR&&this._findSpecialChar(this.maskExpression[c+2]??R.EMPTY_STRING)&&this._findSpecialChar(M)===this.maskExpression[c+2]&&u||this.maskExpression[c+1]===R.SYMBOL_QUESTION&&this._findSpecialChar(this.maskExpression[c+2]??R.EMPTY_STRING)&&this._findSpecialChar(M)===this.maskExpression[c+2]&&u?(c+=3,l+=M):this.showMaskTyped&&this.specialCharacters.indexOf(M)<0&&M!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(b=!0)}l[v-1]&&l.length+1===n.length&&this.specialCharacters.indexOf(n[n.length-1]??R.EMPTY_STRING)!==-1&&(l+=n[n.length-1]);let N=v+1;for(;this._shift.has(N);)m++,N++;let D=s&&!n.startsWith(R.SEPARATOR)?c:this._shift.has(v)?m:0;b&&D--,a(D,h),m<0&&this._shift.clear();let F=!1;o&&(F=E.every(B=>this.specialCharacters.includes(B)));let U=`${this.prefix}${F?R.EMPTY_STRING:l}${this.showMaskTyped?"":this.suffix}`;l.length===0&&(U=this.instantPrefix?`${this.prefix}${l}`:`${l}`);let L=f.length===1&&this.specialCharacters.includes(n[0])&&f!==n[0];if(!this._checkSymbolMask(f,n[1])&&L)return"";if(l.includes(R.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(o&&l===R.MINUS)return"";U=`${R.MINUS}${this.prefix}${l.split(R.MINUS).join(R.EMPTY_STRING)}${this.suffix}`}return U}_findDropSpecialChar(t){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(n=>n===t):this._findSpecialChar(t)}_findSpecialChar(t){return this.specialCharacters.find(n=>n===t)}_checkSymbolMask(t,n){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[n]?.pattern&&this.patterns[n]?.pattern.test(t))??!1}_formatWithSeparators=(t,n,i,s)=>{let o=[],a="";if(Array.isArray(i)){let m=new RegExp(i.map(b=>"[\\^$.|?*+()".indexOf(b)>=0?`\\${b}`:b).join("|"));o=t.split(m),a=t.match(m)?.[0]??R.EMPTY_STRING}else o=t.split(i),a=i;let c=o.length>1?`${a}${o[1]}`:R.EMPTY_STRING,l=o[0]??R.EMPTY_STRING,u=this.separatorLimit.replace(/\s/g,R.EMPTY_STRING);u&&+u&&(l[0]===R.MINUS?l=`-${l.slice(1,l.length).slice(0,u.length)}`:l=l.slice(0,u.length));let h=/(\d+)(\d{3})/;for(;n&&h.test(l);)l=l.replace(h,"$1"+n+"$2");return typeof s>"u"?l+c:s===0?l:l+c.substring(0,s+1)};percentage=t=>{let n=t.replace(",","."),i=Number(this.allowNegativeNumbers&&t.includes(R.MINUS)?n.slice(1,t.length):n);return!isNaN(i)&&i>=0&&i<=100};getPrecision=t=>{let n=t.split(R.DOT);return n.length>1?Number(n[n.length-1]):1/0};checkAndRemoveSuffix=t=>{for(let n=this.suffix?.length-1;n>=0;n--){let i=this.suffix.substring(n,this.suffix?.length);if(t.includes(i)&&n!==this.suffix?.length-1&&(n-1<0||!t.includes(this.suffix.substring(n-1,this.suffix?.length))))return t.replace(i,R.EMPTY_STRING)}return t};checkInputPrecision=(t,n,i)=>{let s=t,o=i;if(n<1/0){if(Array.isArray(o)){let u=o.find(h=>h!==this.thousandSeparator);o=u||o[0]}let a=new RegExp(this._charToRegExpExpression(o)+`\\d{${n}}.*$`),c=s.match(a),l=(c&&c[0]?.length)??0;if(l-1>n){let u=l-1-n;s=s.substring(0,s.length-u)}n===0&&this._compareOrIncludes(s[s.length-1],o,this.thousandSeparator)&&(s=s.substring(0,s.length-1))}return s};_stripToDecimal(t){return t.split(R.EMPTY_STRING).filter((n,i)=>{let s=typeof this.decimalMarker=="string"?n===this.decimalMarker:this.decimalMarker.includes(n);return n.match("^-?\\d")||n===this.thousandSeparator||s||n===R.MINUS&&i===0&&this.allowNegativeNumbers}).join(R.EMPTY_STRING)}_charToRegExpExpression(t){return t&&(t===" "?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t){this._shift.add(t+this.prefix.length||0)}_compareOrIncludes(t,n,i){return Array.isArray(n)?n.filter(s=>s!==i).includes(t):t===n}_validIP(t){return!(t.length===4&&!t.some((n,i)=>t.length!==i+1?n===R.EMPTY_STRING||Number(n)>255:n===R.EMPTY_STRING||Number(n.substring(0,3))>255))}_splitPercentZero(t){if(t===R.MINUS&&this.allowNegativeNumbers)return t;let n=typeof this.decimalMarker=="string"?t.indexOf(this.decimalMarker):t.indexOf(R.DOT),i=this.allowNegativeNumbers&&t.includes(R.MINUS)?"-":"";if(n===-1){let s=parseInt(i?t.slice(1,t.length):t,10);return isNaN(s)?R.EMPTY_STRING:`${i}${s}`}else{let s=parseInt(t.replace("-","").substring(0,n),10),o=t.substring(n+1),a=isNaN(s)?"":s.toString(),c=typeof this.decimalMarker=="string"?this.decimalMarker:R.DOT;return a===R.EMPTY_STRING?R.EMPTY_STRING:`${i}${a}${c}${o}`}}_findFirstNonZeroAndDecimalIndex(t,n){let i=null,s=null;for(let o=0;o<t.length;o++){let a=t[o];if(a===n&&i===null&&(i=o),a&&a>="1"&&a<="9"&&s===null&&(s=o),i!==null&&s!==null)break}return{decimalMarkerIndex:i,nonZeroIndex:s}}static \u0275fac=function(n){return new(n||r)};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),yv=(()=>{class r extends gk{isNumberValue=!1;maskIsShown="";selStart=null;selEnd=null;maskChanged=!1;maskExpressionArray=[];triggerOnMaskChange=!1;previousValue="";currentValue="";writingValue=!1;_emitValue=!1;_start;_end;onChange=t=>{};_elementRef=K(Jr,{optional:!0});document=K(Gt);_config=K(Fp);_renderer=K($s,{optional:!0});applyMask(t,n,i=0,s=!1,o=!1,a=()=>{}){if(!n)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():R.EMPTY_STRING,this.maskExpression===R.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||R.HASH)),this.maskExpression===R.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||R.HASH)),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;let c=t&&typeof this.selStart=="number"?t[this.selStart]??R.EMPTY_STRING:R.EMPTY_STRING,l="",u=i;if((this.hiddenInput||t&&t.indexOf(R.SYMBOL_STAR)>=0)&&!this.writingValue){let f=t&&t.length===1?t.split(R.EMPTY_STRING):this.actualValue.split(R.EMPTY_STRING);o&&(f=f.slice(0,i).concat(f.slice(i+1))),this.showMaskTyped&&(t=this.removeMask(t),f=this.removeMask(f.join("")).split(R.EMPTY_STRING)),typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):t!==R.EMPTY_STRING&&f.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(t.length>f.length?f.splice(this.selStart,0,c):t.length<f.length&&(f.length-t.length===1?o?f.splice(this.selStart-1,1):f.splice(t.length-1,1):f.splice(this.selStart,this.selEnd-this.selStart))):f=[],this.showMaskTyped&&!this.hiddenInput&&(l=this.removeMask(t)),this.actualValue.length?f.length<t.length?l=this.shiftTypedSymbols(f.join(R.EMPTY_STRING)):f.length===t.length?l=f.join(R.EMPTY_STRING):l=t:l=t}if(s&&(this.hiddenInput||!this.hiddenInput)&&(l=t),o&&this.specialCharacters.indexOf(this.maskExpression[u]??R.EMPTY_STRING)!==-1&&this.showMaskTyped&&!this.prefix&&(l=this.currentValue),this.deletedSpecialCharacter&&u&&(this.specialCharacters.includes(this.actualValue.slice(u,u+1))?u=u+1:n.slice(u-1,u+1)!==R.MONTHS&&(u=u-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(l=this.removeMask(l)),this.maskChanged?l=t:l=l&&l.length?l:t,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!s&&!this.writingValue){let f=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(f),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}let h=super.applyMask(l,n,u,s,o,a);if(this.actualValue=this.getActualValue(h),this.thousandSeparator===R.DOT&&this.decimalMarker===R.DOT&&(this.decimalMarker=R.COMMA),this.maskExpression.startsWith(R.SEPARATOR)&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(f=>!this._compareOrIncludes(f,this.decimalMarker,this.thousandSeparator))),(h||h==="")&&(this.previousValue=this.currentValue,this.currentValue=h,this._emitValue=this.previousValue!==this.currentValue||this.maskChanged||this.writingValue||this.previousValue===this.currentValue&&s),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(h)):this.formControlResult(h)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?`${this.hideInput(h,this.maskExpression)}${this.maskIsShown.slice(h.length)}`:h;let m=h.length,b=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(R.HOURS)){let f=this._numberSkipedSymbols(h);return`${h}${b.slice(m+f)}`}else if(this.maskExpression===R.IP||this.maskExpression===R.CPF_CNPJ)return`${h}${b}`;return`${h}${b.slice(m)}`}_numberSkipedSymbols(t){let n=/(^|\D)(\d\D)/g,i=n.exec(t),s=0;for(;i!=null;)s+=1,i=n.exec(t);return s}applyValueChanges(t,n,i,s=()=>{}){let o=this._elementRef?.nativeElement;o&&(o.value=this.applyMask(o.value,this.maskExpression,t,n,i,s),o!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,n){return t.split(R.EMPTY_STRING).map((i,s)=>this.patterns&&this.patterns[n[s]??R.EMPTY_STRING]&&this.patterns[n[s]??R.EMPTY_STRING]?.symbol?this.patterns[n[s]??R.EMPTY_STRING]?.symbol:i).join(R.EMPTY_STRING)}getActualValue(t){let n=t.split(R.EMPTY_STRING).filter((i,s)=>{let o=this.maskExpression[s]??R.EMPTY_STRING;return this._checkSymbolMask(i,o)||this.specialCharacters.includes(o)&&i===o});return n.join(R.EMPTY_STRING)===t?n.join(R.EMPTY_STRING):t}shiftTypedSymbols(t){let n="";return(t&&t.split(R.EMPTY_STRING).map((s,o)=>{if(this.specialCharacters.includes(t[o+1]??R.EMPTY_STRING)&&t[o+1]!==this.maskExpression[o+1])return n=s,t[o+1];if(n.length){let a=n;return n=R.EMPTY_STRING,a}return s})||[]).join(R.EMPTY_STRING)}numberToString(t){return!t&&t!==0||this.maskExpression.startsWith(R.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(R.SEPARATOR)&&this.separatorLimit.length>14&&String(t).length>14?String(t):Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${R.MINUS}/`,R.MINUS)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(t){if(this.maskExpression===R.IP)return this._checkForIp(t);if(this.maskExpression===R.CPF_CNPJ)return this._checkForCpfCnpj(t)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let t=this._elementRef?.nativeElement;t&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(this.placeHolderCharacter,R.EMPTY_STRING).length&&(this.formElementProperty=["value",R.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([t,n]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,t,n))}checkDropSpecialCharAmount(t){return t.split(R.EMPTY_STRING).filter(i=>this._findDropSpecialChar(i)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if(t===R.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let n=[];for(let i=0;i<t.length;i++){let s=t[i]??R.EMPTY_STRING;s&&s.match("\\d")&&n.push(s)}return n.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:n.length>3&&n.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:n.length>6&&n.length<=9?this.placeHolderCharacter:(n.length>9&&n.length<=12,"")}_checkForCpfCnpj(t){let n=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,i=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(t===R.HASH)return n;let s=[];for(let o=0;o<t.length;o++){let a=t[o]??R.EMPTY_STRING;a&&a.match("\\d")&&s.push(a)}return s.length<=3?n.slice(s.length,n.length):s.length>3&&s.length<=6?n.slice(s.length+1,n.length):s.length>6&&s.length<=9?n.slice(s.length+2,n.length):s.length>9&&s.length<11?n.slice(s.length+3,n.length):s.length===11?"":s.length===12?t.length===17?i.slice(16,i.length):i.slice(15,i.length):s.length>12&&s.length<=14?i.slice(s.length+4,i.length):""}_getActiveElement(t=this.document){let n=t?.activeElement?.shadowRoot;return n?.activeElement?this._getActiveElement(n):t.activeElement}formControlResult(t){if(this.writingValue&&!t){this.onChange(this.outputTransformFn(null));return}if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))),this.writingValue=!1,this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===t?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(t)))))):this.onChange(this.outputTransformFn(this._toNumber(t)))}_toNumber(t){if(!this.isNumberValue||t===R.EMPTY_STRING||this.maskExpression.startsWith(R.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return t;if(String(t).length>14&&this.maskExpression.startsWith(R.SEPARATOR))return String(t);let n=Number(t);if(this.maskExpression.startsWith(R.SEPARATOR)&&Number.isNaN(n)){let i=String(t).replace(",",".");return Number(i)}return Number.isNaN(n)?t:n}_removeMask(t,n){return this.maskExpression.startsWith(R.PERCENT)&&t.includes(R.DOT)?t:t&&t.replace(this._regExpForRemove(n),R.EMPTY_STRING)}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,R.EMPTY_STRING):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,R.EMPTY_STRING):t}_retrieveSeparatorValue(t){let n=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(i=>this.dropSpecialCharacters.includes(i)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&t.includes(R.WHITE_SPACE)&&this.maskExpression.includes(R.SYMBOL_STAR)&&(n=n.filter(i=>i!==R.WHITE_SPACE)),this._removeMask(t,n)}_regExpForRemove(t){return new RegExp(t.map(n=>`\\${n}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){let n=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(n),R.DOT)}_checkSymbols(t){let n=t;if(n===R.EMPTY_STRING)return n;this.maskExpression.startsWith(R.PERCENT)&&this.decimalMarker===R.COMMA&&(n=n.replace(R.COMMA,R.DOT));let i=this._retrieveSeparatorPrecision(this.maskExpression),s=this.specialCharacters.length===0?this._retrieveSeparatorValue(n):this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(n));return this.isNumberValue&&i?n===this.decimalMarker?null:s.length>14?String(s):this._checkPrecision(this.maskExpression,s):s}_checkPatternForSpace(){for(let t in this.patterns)if(this.patterns[t]&&this.patterns[t]?.hasOwnProperty("pattern")){let n=this.patterns[t]?.pattern.toString(),i=this.patterns[t]?.pattern;if(n?.includes(R.WHITE_SPACE)&&i?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(t){let n=t.match(new RegExp("^separator\\.([^d]*)"));return n?Number(n[1]):null}_checkPrecision(t,n){let i=this.getPrecision(t),s=n;return t.indexOf("2")>0||this.leadZero&&Number(i)>0?(this.decimalMarker===R.COMMA&&this.leadZero&&(s=s.replace(",",".")),this.leadZero?Number(s).toFixed(Number(i)):Number(s).toFixed(2)):this.numberToString(s)}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split(R.EMPTY_STRING).reduce((n,i,s)=>{if(this._start=i===R.CURLY_BRACKETS_LEFT?s:this._start,i!==R.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(i)?n+i:n;this._end=s;let o=Number(t.slice(this._start+1,this._end)),a=new Array(o+1).join(t[this._start-1]);if(t.slice(0,this._start).length>1&&t.includes(R.LETTER_S)){let c=t.slice(0,this._start-1);return c.includes(R.CURLY_BRACKETS_LEFT)?n+a:c+n+a}else return n+a},"")||t}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hs(r)))(i||r)}})();static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})();function bk(){let r=K(vS),e=K(yS);return e instanceof Function?k(k({},r),e()):k(k({},r),e)}function yk(r){return[{provide:yS,useValue:r},{provide:vS,useValue:fk},{provide:Fp,useFactory:bk},yv]}function wS(r){return os(yk(r))}var Bp=(()=>{class r{mask=ee("");specialCharacters=ee([]);patterns=ee({});prefix=ee("");suffix=ee("");thousandSeparator=ee(" ");decimalMarker=ee(".");dropSpecialCharacters=ee(null);hiddenInput=ee(null);showMaskTyped=ee(null);placeHolderCharacter=ee(null);shownMaskExpression=ee(null);clearIfNotMatch=ee(null);validation=ee(null);separatorLimit=ee("");allowNegativeNumbers=ee(null);leadZeroDateTime=ee(null);leadZero=ee(null);triggerOnMaskChange=ee(null);apm=ee(null);inputTransformFn=ee(null);outputTransformFn=ee(null);keepCharacterPositions=ee(null);instantPrefix=ee(null);maskFilled=Wr();_maskValue=xe("");_inputValue=xe("");_position=xe(null);_code=xe("");_maskExpressionArray=xe([]);_justPasted=xe(!1);_isFocused=xe(!1);_isComposing=xe(!1);_maskService=K(yv,{self:!0});document=K(Gt);_config=K(Fp);onChange=t=>{};onTouch=()=>{};ngOnChanges(t){let{mask:n,specialCharacters:i,patterns:s,prefix:o,suffix:a,thousandSeparator:c,decimalMarker:l,dropSpecialCharacters:u,hiddenInput:h,showMaskTyped:m,placeHolderCharacter:b,shownMaskExpression:f,clearIfNotMatch:v,validation:E,separatorLimit:I,allowNegativeNumbers:N,leadZeroDateTime:D,leadZero:F,triggerOnMaskChange:U,apm:L,inputTransformFn:B,outputTransformFn:M,keepCharacterPositions:V,instantPrefix:P}=t;if(n&&(n.currentValue!==n.previousValue&&!n.firstChange&&(this._maskService.maskChanged=!0),n.currentValue&&n.currentValue.split(R.OR).length>1?(this._maskExpressionArray.set(n.currentValue.split(R.OR).sort((d,y)=>d.length-y.length)),this._setMask()):(this._maskExpressionArray.set([]),this._maskValue.set(n.currentValue||R.EMPTY_STRING),this._maskService.maskExpression=this._maskValue())),i){if(!i.currentValue||!Array.isArray(i.currentValue))return;this._maskService.specialCharacters=i.currentValue||[]}if(N&&(this._maskService.allowNegativeNumbers=N.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(d=>d!==R.MINUS))),s&&s.currentValue&&(this._maskService.patterns=s.currentValue),L&&L.currentValue&&(this._maskService.apm=L.currentValue),P&&(this._maskService.instantPrefix=P.currentValue),o&&(this._maskService.prefix=o.currentValue),a&&(this._maskService.suffix=a.currentValue),c&&(this._maskService.thousandSeparator=c.currentValue,c.previousValue&&c.currentValue)){let d=this._maskService.decimalMarker;c.currentValue===this._maskService.decimalMarker&&(this._maskService.decimalMarker=c.currentValue===R.COMMA?R.DOT:R.COMMA),this._maskService.dropSpecialCharacters===!0&&(this._maskService.specialCharacters=this._config.specialCharacters),typeof d=="string"&&typeof this._maskService.decimalMarker=="string"&&(this._inputValue.set(this._inputValue().split(c.previousValue).join("").replace(d,this._maskService.decimalMarker)),this._maskService.actualValue=this._inputValue()),this._maskService.writingValue=!0}l&&(this._maskService.decimalMarker=l.currentValue),u&&(this._maskService.dropSpecialCharacters=u.currentValue),h&&(this._maskService.hiddenInput=h.currentValue,h.previousValue===!0&&h.currentValue===!1&&this._inputValue.set(this._maskService.actualValue)),m&&(this._maskService.showMaskTyped=m.currentValue,m.previousValue===!1&&m.currentValue===!0&&this._isFocused()&&requestAnimationFrame(()=>{this._maskService._elementRef?.nativeElement.click()})),b&&(this._maskService.placeHolderCharacter=b.currentValue),f&&(this._maskService.shownMaskExpression=f.currentValue),v&&(this._maskService.clearIfNotMatch=v.currentValue),E&&(this._maskService.validation=E.currentValue),I&&(this._maskService.separatorLimit=I.currentValue),D&&(this._maskService.leadZeroDateTime=D.currentValue),F&&(this._maskService.leadZero=F.currentValue),U&&(this._maskService.triggerOnMaskChange=U.currentValue),B&&(this._maskService.inputTransformFn=B.currentValue),M&&(this._maskService.outputTransformFn=M.currentValue),V&&(this._maskService.keepCharacterPositions=V.currentValue),this._applyMask()}validate({value:t}){let n=typeof t=="number"?String(t):t,i=this._maskValue();if(!this._maskService.validation||!i)return null;if(this._maskService.ipError)return this._createValidationError(n);if(this._maskService.cpfCnpjError)return this._createValidationError(n);if(i.startsWith(R.SEPARATOR)||mk.includes(i)||this._maskService.clearIfNotMatch)return null;if(pk.includes(i))return this._validateTime(n);if(i===R.EMAIL_MASK)return!/^[^@]+@[^@]+\.[^@]+$/.test(n)&&n?this._createValidationError(n):null;if(n&&n.length>=1){let s=0;if(i.includes(R.CURLY_BRACKETS_LEFT)&&i.includes(R.CURLY_BRACKETS_RIGHT))return i.slice(i.indexOf(R.CURLY_BRACKETS_LEFT)+1,i.indexOf(R.CURLY_BRACKETS_RIGHT))===String(n.length)?null:this._createValidationError(n);if(i.startsWith(R.PERCENT))return null;for(let o in this._maskService.patterns)if(this._maskService.patterns[o]?.optional){if(i.indexOf(o)!==i.lastIndexOf(o)){let a=i.split(R.EMPTY_STRING).filter(c=>c===o).join(R.EMPTY_STRING);s+=a.length}else i.indexOf(o)!==-1&&s++;if(i.indexOf(o)!==-1&&n.length>=i.indexOf(o)||s===i.length)return null}if(i.indexOf(R.SYMBOL_STAR)>1&&n.length<i.indexOf(R.SYMBOL_STAR)||i.indexOf(R.SYMBOL_QUESTION)>1&&n.length<i.indexOf(R.SYMBOL_QUESTION))return this._createValidationError(n);if(i.indexOf(R.SYMBOL_STAR)===-1||i.indexOf(R.SYMBOL_QUESTION)===-1){let o=i.split("*"),a=this._maskService.dropSpecialCharacters?i.length-this._maskService.checkDropSpecialCharAmount(i)-s:this.prefix()?i.length+this.prefix().length-s:i.length-s;if(o.length===1&&n.length<a)return this._createValidationError(n);if(o.length>1){let c=o[o.length-1];if(c&&this._maskService.specialCharacters.includes(c[0])&&String(n).includes(c[0]??"")&&!this.dropSpecialCharacters()){let l=t.split(c[0]);return l[l.length-1].length===c.length-1?null:this._createValidationError(n)}else return(c&&!this._maskService.specialCharacters.includes(c[0])||!c||this._maskService.dropSpecialCharacters)&&n.length>=a-1?null:this._createValidationError(n)}}if(i.indexOf(R.SYMBOL_STAR)===1||i.indexOf(R.SYMBOL_QUESTION)===1)return null}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted.set(!0)}onFocus(){this._isFocused.set(!0)}onModelChange(t){(t===R.EMPTY_STRING||t===null||typeof t>"u")&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(R.EMPTY_STRING))}onInput(t){if(this._isComposing())return;let n=t.target,i=this._maskService.inputTransformFn(n.value);if(n.type!=="number")if(typeof i=="string"||typeof i=="number"){if(n.value=i.toString(),this._inputValue.set(n.value),this._setMask(),!this._maskValue()){this.onChange(n.value);return}let s=n.selectionStart===1?n.selectionStart+this._maskService.prefix.length:n.selectionStart;if(this.showMaskTyped()&&this.keepCharacterPositions()&&this._maskService.placeHolderCharacter.length===1){let l=this.suffix(),u=this.prefix(),h=n.value.slice(s-1,s),m=u.length,b=this._maskService._checkSymbolMask(h,this._maskService.maskExpression[s-1-m]??R.EMPTY_STRING),f=this._maskService._checkSymbolMask(h,this._maskService.maskExpression[s+1-m]??R.EMPTY_STRING),v=this._maskService.selStart===this._maskService.selEnd,E=Number(this._maskService.selStart)-m,I=Number(this._maskService.selEnd)-m,N=this._code()===R.BACKSPACE||this._code()===R.DELETE;if(N){if(!v)this._maskService.selStart===m?this._maskService.actualValue=`${u}${this._maskService.maskIsShown.slice(0,I)}${this._inputValue().split(u).join("")}`:this._maskService.selStart===this._maskService.maskIsShown.length+m?this._maskService.actualValue=`${this._inputValue()}${this._maskService.maskIsShown.slice(E,I)}`:this._maskService.actualValue=`${u}${this._inputValue().split(u).join("").slice(0,E)}${this._maskService.maskIsShown.slice(E,I)}${this._maskService.actualValue.slice(I+m,this._maskService.maskIsShown.length+m)}${l}`;else if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(s-m,s+1-m))&&v)if(E===1&&u)this._maskService.actualValue=`${u}${this._maskService.placeHolderCharacter}${n.value.split(u).join("").split(l).join("")}${l}`,s=s-1;else{let D=n.value.substring(0,s),F=n.value.substring(s);this._maskService.actualValue=`${D}${this._maskService.placeHolderCharacter}${F}`}s=this._code()===R.DELETE?s+1:s}N||(!b&&!f&&v?s=Number(n.selectionStart)-1:this._maskService.specialCharacters.includes(n.value.slice(s,s+1))&&f&&!this._maskService.specialCharacters.includes(n.value.slice(s+1,s+2))?(this._maskService.actualValue=`${n.value.slice(0,s-1)}${n.value.slice(s,s+1)}${h}${n.value.slice(s+2)}`,s=s+1):b?n.value.length===1&&s===1?this._maskService.actualValue=`${u}${h}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${l}`:this._maskService.actualValue=`${n.value.slice(0,s-1)}${h}${n.value.slice(s+1).split(l).join("")}${l}`:u&&n.value.length===1&&s-m===1&&this._maskService._checkSymbolMask(n.value,this._maskService.maskExpression[s-1-m]??R.EMPTY_STRING)&&(this._maskService.actualValue=`${u}${n.value}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${l}`))}let o=0,a=!1;if(this._code()===R.DELETE&&R.SEPARATOR&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue().length>=this._maskService.maskExpression.length-1&&this._code()!==R.BACKSPACE&&this._maskService.maskExpression===R.DAYS_MONTHS_YEARS&&s<10){let l=this._inputValue().slice(s-1,s);n.value=this._inputValue().slice(0,s-1)+l+this._inputValue().slice(s+1)}if(this._maskService.maskExpression===R.DAYS_MONTHS_YEARS&&this.leadZeroDateTime()&&(s<3&&Number(n.value)>31&&Number(n.value)<40||s===5&&Number(n.value.slice(3,5))>12)&&(s=s+2),this._maskService.maskExpression===R.HOURS_MINUTES_SECONDS&&this.apm()&&(this._justPasted()&&n.value.slice(0,2)===R.DOUBLE_ZERO&&(n.value=n.value.slice(1,2)+n.value.slice(2,n.value.length)),n.value=n.value===R.DOUBLE_ZERO?R.NUMBER_ZERO:n.value),this._maskService.applyValueChanges(s,this._justPasted(),this._code()===R.BACKSPACE||this._code()===R.DELETE,(l,u)=>{this._justPasted.set(!1),o=l,a=u}),this._getActiveElement()!==n)return;if(this._maskService.plusOnePosition&&(s=s+1,this._maskService.plusOnePosition=!1),this._maskExpressionArray().length)if(this._code()===R.BACKSPACE){let l=this.specialCharacters().includes(this._maskService.actualValue.slice(s-1,s)),u=this._maskService.removeMask(this._inputValue())?.length===this._maskService.removeMask(this._maskService.maskExpression)?.length,h=this.specialCharacters().includes(this._maskService.actualValue.slice(s,s+1));u&&!h?s=n.selectionStart+1:s=l?s-1:s}else s=n.selectionStart===1?n.selectionStart+this._maskService.prefix.length:n.selectionStart;this._position.set(this._position()===1&&this._inputValue().length===1?null:this._position());let c=this._position()?this._inputValue().length+s+o:s+(this._code()===R.BACKSPACE&&!a?0:o);c>this._getActualInputLength()&&(c=n.value===this._maskService.decimalMarker&&n.value.length===1?this._getActualInputLength()+1:this._getActualInputLength()),c<0&&(c=0),n.setSelectionRange(c,c),this._position.set(null)}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof i);else{if(!this._maskValue()){this.onChange(n.value);return}this._maskService.applyValueChanges(n.value.length,this._justPasted(),this._code()===R.BACKSPACE||this._code()===R.DELETE)}}onCompositionStart(){this._isComposing.set(!0)}onCompositionEnd(t){this._isComposing.set(!1),this._justPasted.set(!0),this.onInput(t)}onBlur(t){if(this._maskValue()){let n=t.target;if(this._maskService.leadZero&&n.value.length>0&&typeof this._maskService.decimalMarker=="string"){let i=this._maskService.maskExpression,s=this._maskService.decimalMarker,o=this._maskService.suffix,a=Number(this._maskService.maskExpression.slice(i.length-1,i.length));if(a>0){n.value=o?n.value.split(o).join(""):n.value;let c=n.value.split(s)[1];n.value=n.value.includes(s)?n.value+R.NUMBER_ZERO.repeat(a-c.length)+o:n.value+s+R.NUMBER_ZERO.repeat(a)+o,this._maskService.actualValue=n.value}}this._maskService.clearIfNotMatchFn()}this._isFocused.set(!1),this.onTouch()}onClick(t){if(!this._maskValue())return;let n=t.target,i=0,s=0;n!==null&&n.selectionStart!==null&&n.selectionStart===n.selectionEnd&&n.selectionStart>this._maskService.prefix.length&&t.keyCode!==38&&this._maskService.showMaskTyped&&!this.keepCharacterPositions()&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),n.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===n.value?(n.focus(),n.setSelectionRange(i,s)):n.selectionStart>this._maskService.actualValue.length&&n.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));let o=n&&(n.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:n.value);if(n&&n.value!==o&&(n.value=o),n&&n.type!=="number"&&(n.selectionStart||n.selectionEnd)<=this._maskService.prefix.length){let a=this._maskService.maskExpression.match(new RegExp(`^[${this._maskService.specialCharacters.map(c=>`\\${c}`).join("")}]+`))?.[0].length||0;n.selectionStart=this._maskService.prefix.length+a;return}n&&n.selectionEnd>this._getActualInputLength()&&(n.selectionEnd=this._getActualInputLength())}onKeyDown(t){if(!this._maskValue())return;if(this._isComposing()){t.key==="Enter"&&this.onCompositionEnd(t);return}this._code.set(t.code?t.code:t.key);let n=t.target;if(this._inputValue.set(n.value),this._setMask(),n.type!=="number"){if(t.key===R.ARROW_UP&&t.preventDefault(),t.key===R.ARROW_LEFT||t.key===R.BACKSPACE||t.key===R.DELETE){if(t.key===R.BACKSPACE&&n.value.length===0&&(n.selectionStart=n.selectionEnd),t.key===R.BACKSPACE&&n.selectionStart!==0){let s=this.prefix().length,o=this.specialCharacters().length?this.specialCharacters():this._config.specialCharacters;if(s>1&&n.selectionStart<=s)n.setSelectionRange(s,n.selectionEnd);else if(this._inputValue().length!==n.selectionStart&&n.selectionStart!==1)for(;o.includes((this._inputValue()[n.selectionStart-1]??R.EMPTY_STRING).toString())&&(s>=1&&n.selectionStart>s||s===0);)n.setSelectionRange(n.selectionStart-1,n.selectionEnd)}this.checkSelectionOnDeletion(n),this._maskService.prefix.length&&n.selectionStart<=this._maskService.prefix.length&&n.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();let i=n.selectionStart;t.key===R.BACKSPACE&&!n.readOnly&&i===0&&n.selectionEnd===n.value.length&&n.value.length!==0&&(this._position.set(this._maskService.prefix?this._maskService.prefix.length:0),this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position()))}this.suffix()&&this.suffix().length>1&&this._inputValue().length-this.suffix().length<n.selectionStart?n.setSelectionRange(this._inputValue().length-this.suffix().length,this._inputValue().length):(t.code==="KeyA"&&t.ctrlKey||t.code==="KeyA"&&t.metaKey)&&(n.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=n.selectionStart,this._maskService.selEnd=n.selectionEnd}}writeValue(t){return p(this,null,function*(){let n=t,i=this.inputTransformFn();if(typeof n=="object"&&n!==null&&"value"in n&&("disable"in n&&this.setDisabledState(!!n.disable),n=n.value),n!==null&&(n=i?i(n):n),typeof n=="string"||typeof n=="number"||n===null||typeof n>"u"){(n===null||typeof n>"u"||n==="")&&(this._maskService.currentValue="",this._maskService.previousValue="");let s=n;if(typeof s=="number"||this._maskValue().startsWith(R.SEPARATOR)){s=String(s);let o=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(s=this._maskService.decimalMarker!==o?s.replace(o,this._maskService.decimalMarker):s),this._maskService.leadZero&&s&&this.mask()&&this.dropSpecialCharacters()!==!1&&(s=this._maskService._checkPrecision(this._maskService.maskExpression,s)),(this._maskService.decimalMarker===R.COMMA||Array.isArray(this._maskService.decimalMarker)&&this._maskService.thousandSeparator===R.DOT)&&(s=s.toString().replace(R.DOT,R.COMMA)),this.mask()?.startsWith(R.SEPARATOR)&&this.leadZero()&&requestAnimationFrame(()=>{this._maskService.applyMask(s?.toString()??"",this._maskService.maskExpression)}),this._maskService.isNumberValue=!0}(typeof s!="string"||n===null||typeof n>"u")&&(s=""),this._inputValue.set(s),this._setMask(),s&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(typeof i!="function"&&(this._maskService.writingValue=!0),this._maskService.formElementProperty=["value",this._maskService.applyMask(s,this._maskService.maskExpression)],typeof i!="function"&&(this._maskService.writingValue=!1)):this._maskService.formElementProperty=["value",s],this._inputValue.set(s)}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof n)})}registerOnChange(t){this._maskService.onChange=this.onChange=t}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){let n=t?.activeElement?.shadowRoot;return n?.activeElement?this._getActiveElement(n):t.activeElement}checkSelectionOnDeletion(t){let n=this.prefix().length,i=this.suffix().length,s=this._inputValue().length;t.selectionStart=Math.min(Math.max(n,t.selectionStart),s-i),t.selectionEnd=Math.min(Math.max(n,t.selectionEnd),s-i)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue()||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue(),this._maskService.maskExpression)]}_validateTime(t){let n=this._maskValue().split(R.EMPTY_STRING).filter(i=>i!==":").length;return t&&(+(t[t.length-1]??-1)==0&&t.length<n||t.length<=n-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue(),actualValue:t}}}_setMask(){this._maskExpressionArray().some(t=>{if(t.split(R.EMPTY_STRING).some(i=>this._maskService.specialCharacters.includes(i))&&this._inputValue()&&this._areAllCharactersInEachStringSame(this._maskExpressionArray())||t.includes(R.CURLY_BRACKETS_LEFT)){let i=this._maskService.removeMask(this._inputValue())?.length<=this._maskService.removeMask(t)?.length;if(i){let s=t.includes(R.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(t):t;return this._maskValue.set(s),this._maskService.maskExpression=s,i}else{let s=this._maskExpressionArray()[this._maskExpressionArray().length-1]??R.EMPTY_STRING,o=s.includes(R.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(s):s;this._maskValue.set(o),this._maskService.maskExpression=o}}else{let i=this._maskService.removeMask(t),s=this._maskService.removeMask(this._inputValue())?.split(R.EMPTY_STRING).every((o,a)=>{let c=i.charAt(a);return this._maskService._checkSymbolMask(o,c)});if(s||this._justPasted())return this._maskValue.set(t),this._maskService.maskExpression=t,s}})}_areAllCharactersInEachStringSame(t){let n=this._maskService.specialCharacters;function i(o){let a=new RegExp(`[${n.map(c=>`\\${c}`).join("")}]`,"g");return o.replace(a,"")}return t.map(i).every(o=>new Set(o).size===1)}static \u0275fac=function(n){return new(n||r)};static \u0275dir=Ar({type:r,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(n,i){n&1&&Ee("paste",function(){return i.onPaste()})("focus",function(o){return i.onFocus(o)})("ngModelChange",function(o){return i.onModelChange(o)})("input",function(o){return i.onInput(o)})("compositionstart",function(o){return i.onCompositionStart(o)})("compositionend",function(o){return i.onCompositionEnd(o)})("blur",function(o){return i.onBlur(o)})("click",function(o){return i.onClick(o)})("keydown",function(o){return i.onKeyDown(o)})},inputs:{mask:[1,"mask"],specialCharacters:[1,"specialCharacters"],patterns:[1,"patterns"],prefix:[1,"prefix"],suffix:[1,"suffix"],thousandSeparator:[1,"thousandSeparator"],decimalMarker:[1,"decimalMarker"],dropSpecialCharacters:[1,"dropSpecialCharacters"],hiddenInput:[1,"hiddenInput"],showMaskTyped:[1,"showMaskTyped"],placeHolderCharacter:[1,"placeHolderCharacter"],shownMaskExpression:[1,"shownMaskExpression"],clearIfNotMatch:[1,"clearIfNotMatch"],validation:[1,"validation"],separatorLimit:[1,"separatorLimit"],allowNegativeNumbers:[1,"allowNegativeNumbers"],leadZeroDateTime:[1,"leadZeroDateTime"],leadZero:[1,"leadZero"],triggerOnMaskChange:[1,"triggerOnMaskChange"],apm:[1,"apm"],inputTransformFn:[1,"inputTransformFn"],outputTransformFn:[1,"outputTransformFn"],keepCharacterPositions:[1,"keepCharacterPositions"],instantPrefix:[1,"instantPrefix"]},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[Pi([{provide:nc,useExisting:r,multi:!0},{provide:Kh,useExisting:r,multi:!0},yv]),Hn]})}return r})();var bs=class r{renderer;eventSignal=xe(null);constructor(e){this.renderer=e.createRenderer(null,null),this.registerClickEventListener(),this.registerKeyboardEventListener()}registerClickEventListener(){this.renderer.listen("document","click",e=>{this.eventSignal.set(e)})}registerKeyboardEventListener(){this.renderer.listen("document","keydown",e=>{this.eventSignal.set(e)})}get event$(){return this.eventSignal.asReadonly()}static \u0275fac=function(t){return new(t||r)(Ie(cs))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var vk=["pageSelector"],wk=["pageSelectorInput"],Wh=r=>({"paginator__item--active":r});function xk(r,e){r&1&&le(0,"i",4)}function Ek(r,e){r&1&&le(0,"i",5)}function Ck(r,e){if(r&1){let t=xt();j(0,"div",11,0)(2,"div",12)(3,"h2"),ne(4,"Select Page:"),z(),j(5,"input",13,1),EC("ngModelChange",function(i){Ye(t);let s=te();return xC(s.pageSelectorInputValue,i)||(s.pageSelectorInputValue=i),Qe(i)}),Ee("input",function(){Ye(t);let i=ko(6),s=te();return Qe(s.onPageSelectorInputChange(i.value,i))})("keydown.enter",function(){Ye(t);let i=ko(6),s=te();return Qe(s.onSelectSpecificPage(i.value))}),z()(),j(7,"button",14),Ee("click",function(){Ye(t);let i=ko(6),s=te();return Qe(s.onSelectSpecificPage(i.value))}),le(8,"i",15),z()()}if(r&2){let t=te();oe("@selectorPopIn",void 0),Y(5),oe("placeholder","1-"+t.limit()),wC("ngModel",t.pageSelectorInputValue)}}var Jh=class r{elementRef=K(Jr);documentListener=K(bs);limit=ee(1);initialPageIndex=ee(1);getCurrentPage=Wr();disabled=ee(!1);documentEvent=this.documentListener.event$;constructor(){$n(()=>{let e=this.documentEvent();e&&this.handleDocumentEvent(e)})}firstButtonValue=$t(()=>this.getButtonValue(-1));secondButtonValue=$t(()=>this.getButtonValue(0));thirdButtonValue=$t(()=>this.getButtonValue(1));currentPage=xe(this.initialPageIndex());secondToLastPage=this.limit()-1;showPageSelector=xe(!1);pageSelectorInputValue="";pageSelectorElementRef;pageSelectorInputElementRef;ngOnChanges(e){e.initialPageIndex&&this.selectPage(this.initialPageIndex())}selectPage(e){this.disabled()===!1&&(this.currentPage.set(e),this.getCurrentPage.emit(this.currentPage()))}onPageSelected(e){e<1||e>this.limit()||this.selectPage(e)}onPreviousPage(){this.currentPage()>1&&this.selectPage(this.currentPage()-1)}onNextPage(){this.currentPage()<this.limit()&&this.selectPage(this.currentPage()+1)}getButtonValue(e){return this.currentPage()<=2||this.limit()===3&&this.currentPage()===3?2+e:this.currentPage()>=this.limit()-1?this.limit()-2+e:this.currentPage()+e}closePageSelector(){this.showPageSelector.set(!1),this.pageSelectorInputValue=""}openPageSelector(){this.limit()>=3&&(this.showPageSelector.set(!0),setTimeout(()=>{this.pageSelectorInputElementRef.nativeElement.focus()},100))}togglePageSelector(){this.showPageSelector()?this.closePageSelector():this.openPageSelector()}onSelectSpecificPage(e){let t=parseInt(e,10);t>this.limit()||t<1||isNaN(t)||(this.selectPage(t),this.closePageSelector())}onPageSelectorInputChange(e,t){let n=parseInt(e,10);if(isNaN(n)){this.pageSelectorInputValue=e;return}n>this.limit()?(this.pageSelectorInputValue=this.limit().toString(),t.value=this.limit().toString()):n<1?(this.pageSelectorInputValue="1",t.value="1"):this.pageSelectorInputValue=e}handleDocumentEvent(e){if(this.showPageSelector()===!0){let t=this.elementRef.nativeElement;if(e instanceof MouseEvent&&!t.contains(e.target)){this.closePageSelector();return}e instanceof KeyboardEvent&&e.key==="Escape"&&this.closePageSelector()}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["paginator"]],viewQuery:function(t,n){if(t&1&&(Ii(vk,5),Ii(wk,5)),t&2){let i;kr(i=Fr())&&(n.pageSelectorElementRef=i.first),kr(i=Fr())&&(n.pageSelectorInputElementRef=i.first)}},inputs:{limit:[1,"limit"],initialPageIndex:[1,"initialPageIndex"],disabled:[1,"disabled"]},outputs:{getCurrentPage:"getCurrentPage"},features:[Hn],decls:17,vars:28,consts:[["pageSelector",""],["pageSelectorInput",""],[1,"paginator"],[1,"paginator__prev",3,"click","disabled"],[1,"fi","fi-rr-angle-small-left"],[1,"fi","fi-rr-angle-double-small-left"],[1,"paginator__item",3,"click","disabled","ngClass"],[1,"paginator__item","paginator__item--selector",3,"click","ngClass","disabled"],[1,"fi","fi-rr-search","flex","justify-center"],[1,"paginator__next",3,"click","disabled"],[1,"fi","fi-rr-angle-small-right"],[1,"select"],[1,"select__header"],["type","tel","mask","0000",3,"ngModelChange","input","keydown.enter","placeholder","ngModel"],[3,"click"],[1,"fi","fi-br-angle-double-small-right","flex"]],template:function(t,n){t&1&&(j(0,"div",2)(1,"button",3),Ee("click",function(){return n.currentPage()<10?n.onPreviousPage():n.selectPage(1)}),Le(2,xk,1,0,"i",4)(3,Ek,1,0,"i",5),z(),j(4,"button",6),Ee("click",function(){return n.onPageSelected(n.firstButtonValue())}),ne(5),z(),j(6,"button",6),Ee("click",function(){return n.onPageSelected(n.secondButtonValue())}),ne(7),z(),j(8,"button",6),Ee("click",function(){return n.onPageSelected(n.thirdButtonValue())}),ne(9),z(),j(10,"button",7),Ee("click",function(){return n.togglePageSelector()}),le(11,"i",8),z(),j(12,"button",6),Ee("click",function(){return n.onPageSelected(n.limit())}),ne(13),z(),j(14,"button",9),Ee("click",function(){return n.onNextPage()}),le(15,"i",10),z()(),Le(16,Ck,9,3,"div",11)),t&2&&(Y(),oe("disabled",n.currentPage()===1||n.disabled()),Y(),Ke(n.currentPage()<10?2:3),Y(2),oe("disabled",n.disabled())("ngClass",It(18,Wh,n.firstButtonValue()===n.currentPage())),Y(),St(" ",n.firstButtonValue()," "),Y(),oe("disabled",n.secondButtonValue()>n.limit()||n.disabled())("ngClass",It(20,Wh,n.secondButtonValue()===n.currentPage())),Y(),St(" ",n.secondButtonValue()," "),Y(),oe("disabled",n.thirdButtonValue()>n.limit()||n.disabled())("ngClass",It(22,Wh,n.thirdButtonValue()===n.currentPage())),Y(),St(" ",n.thirdButtonValue()," "),Y(),oe("ngClass",It(24,Wh,n.showPageSelector()===!0))("disabled",n.limit()<=3||n.disabled()),Y(2),oe("disabled",n.disabled())("ngClass",It(26,Wh,n.limit()===n.currentPage())),Y(),St(" ",n.limit()," "),Y(),oe("disabled",n.currentPage()===n.limit()||n.disabled()),Y(2),Ke(n.showPageSelector()?16:-1))},dependencies:[Bt,Ir,Bp,Mp,Tp,Np,mv],styles:["[_nghost-%COMP%]{display:inline-block;position:relative}.paginator[_ngcontent-%COMP%]{display:flex;align-items:stretch;justify-content:center;color:hsla(var(--muted-foreground));position:relative;z-index:2}.paginator__item[_ngcontent-%COMP%], .paginator__prev[_ngcontent-%COMP%], .paginator__next[_ngcontent-%COMP%]{font-weight:500;padding-block:.3rem;background-color:hsla(var(--muted));transition:all .15s ease-in-out}.paginator__item[_ngcontent-%COMP%]   .fi[_ngcontent-%COMP%], .paginator__prev[_ngcontent-%COMP%]   .fi[_ngcontent-%COMP%], .paginator__next[_ngcontent-%COMP%]   .fi[_ngcontent-%COMP%]{display:flex}.paginator__item[_ngcontent-%COMP%]:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active), .paginator__prev[_ngcontent-%COMP%]:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active), .paginator__next[_ngcontent-%COMP%]:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active){background-color:hsla(var(--accent));border-color:hsla(var(--border));color:hsla(var(--accent-foreground))}.paginator__item[_ngcontent-%COMP%]:has(+.paginator__item:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active),+.paginator__prev:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active),+.paginator__next:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active)), .paginator__prev[_ngcontent-%COMP%]:has(+.paginator__item:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active),+.paginator__prev:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active),+.paginator__next:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active)), .paginator__next[_ngcontent-%COMP%]:has(+.paginator__item:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active),+.paginator__prev:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active),+.paginator__next:hover:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active)){border-right-color:hsla(var(--border))}.paginator__item[_ngcontent-%COMP%]:active:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active), .paginator__prev[_ngcontent-%COMP%]:active:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active), .paginator__next[_ngcontent-%COMP%]:active:not(.paginator__item--active,:disabled,.paginator__prev--active,.paginator__next--active){background-color:hsla(var(--primary));color:hsla(var(--accent-foreground));transition:background-color ease-out .1s}.paginator__item[_ngcontent-%COMP%]:disabled, .paginator__prev[_ngcontent-%COMP%]:disabled, .paginator__next[_ngcontent-%COMP%]:disabled{cursor:default;border-color:hsla(var(--border));color:hsla(var(--muted-foreground),.5)}.paginator__item[_ngcontent-%COMP%]{min-width:2rem;font-size:.7rem;border-left:0}.paginator__item--selector[_ngcontent-%COMP%]{color:hsla(var(--primary))}.paginator__item--active[_ngcontent-%COMP%]{background-color:hsla(var(--primary));color:hsla(var(--accent-foreground))}.paginator__item--active[_ngcontent-%COMP%]:disabled{background-color:hsla(var(--primary),.5)}.paginator__item--selector[_ngcontent-%COMP%]:disabled{opacity:1;border-color:hsla(var(--border));border-right-color:hsla(var(--border))}.paginator__prev[_ngcontent-%COMP%]{border-radius:.5rem 0 0 .5rem}.paginator__next[_ngcontent-%COMP%]{border-radius:0 .5rem .5rem 0;border-left:0}.paginator__prev[_ngcontent-%COMP%], .paginator__next[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-width:2.2rem;color:hsla(var(--primary))}.select[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);right:50%;transform:translate(50%);display:flex;align-items:center;z-index:10;background-color:hsla(var(--muted));border-radius:.5rem;font-size:.75rem;z-index:1}.select__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.3rem .15rem .3rem .7rem;gap:.3rem}.select__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{white-space:nowrap}.select__header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:2.5rem;background-color:transparent;text-align:center;color:hsla(var(--primary-light))}.select__header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.select__header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:hsla(var(--muted-foreground-neutral))}.select[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.2rem .4rem;align-self:stretch;background-color:hsla(var(--muted));color:hsla(var(--primary));border-radius:0 .5rem .5rem 0;transition:all .15s ease-in-out}.select[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:hsla(var(--accent));color:hsla(var(--accent-foreground))}.select[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:hsla(var(--primary));color:hsla(var(--accent-foreground))}"],data:{animation:[Wt("selectorPopIn",{animateX:!0,duration:"200ms",transform:"scale(.5) translate(-100%, -50%)"})]},changeDetection:0})};var _k=["DropdownButton"],Ak=["DropdownMenu"],Sk=r=>({transform:r}),Ik=r=>({"dropdown__item--active":r});function Pk(r,e){if(r&1){let t=xt();j(0,"li",6),Ee("click",function(){let i=Ye(t).$implicit,s=te(2);return Qe(s.onclickItem(i))})("keydown",function(i){let s=Ye(t).$implicit,o=te(2);return Qe(o.onKeyDownItem(i,s))}),ne(1),z()}if(r&2){let t=e.$implicit,n=e.$index;oe("ngClass",It(3,Ik,t.isActive))("tabIndex",n+1),Y(),St(" ",t.name," ")}}function Tk(r,e){if(r&1&&(j(0,"ul",4,1),Qr(2,Pk,2,5,"li",5,Yr),z()),r&2){let t=te(),n=ko(1);oe("@slideDropdown",void 0)("id",t.dropdownMenuId()),zn("aria-labelledby",n.id),Y(2),Zr(t.items())}}var Up=class r{constructor(e,t){this.documentListener=e;this.el=t;$n(()=>{let n=e.event$();n instanceof MouseEvent&&this.onClickOutside(n)}),$n(()=>this.setLabelOnItemSelected())}label=ee("Dropdown Name");labelAfterSelect=ee();items=ee.required();dropdownId=ee.required();disabled=ee(!1);clickedItem=Wr();displayedLabel=xe(this.label());isExpanded=xe(!1);dropdown;dropdownMenu;dropdownElement;dropdownMenuId=$t(()=>`${this.dropdownId()}-menu`);ngAfterViewInit(){this.displayedLabel.set(this.label()),this.dropdownElement=this.dropdown.nativeElement}toggleDropDown(){this.isExpanded()?this.closeDropDown():this.openDropDown()}openDropDown(){this.disabled()||(this.isExpanded.set(!0),setTimeout(()=>{this.dropdownMenu.nativeElement.querySelector(".dropdown__item").focus()},100))}closeDropDown(){this.isExpanded.set(!1),this.dropdownElement.focus()}onKeyDownItem(e,t){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.onclickItem(t))}onclickItem(e){this.disabled()||(this.clickedItem.emit(e),this.closeDropDown())}setLabelOnItemSelected(){let e=this.items().find(t=>t.isActive);e&&this.labelAfterSelect()?this.displayedLabel.set(this.labelAfterSelect()):e&&this.displayedLabel.set(e.name)}onClickOutside(e){this.isExpanded()==!0&&(!e.target.contains(this.el.nativeElement)||this.closeDropDown())}static \u0275fac=function(t){return new(t||r)(Ae(bs),Ae(Jr))};static \u0275cmp=Ce({type:r,selectors:[["dropdown-selection"]],viewQuery:function(t,n){if(t&1&&(Ii(_k,5),Ii(Ak,5)),t&2){let i;kr(i=Fr())&&(n.dropdown=i.first),kr(i=Fr())&&(n.dropdownMenu=i.first)}},hostAttrs:[1,"dropdown"],inputs:{label:[1,"label"],labelAfterSelect:[1,"labelAfterSelect"],items:[1,"items"],dropdownId:[1,"dropdownId"],disabled:[1,"disabled"]},outputs:{clickedItem:"clickedItem"},decls:5,vars:9,consts:[["DropdownButton",""],["DropdownMenu",""],["type","button","aria-haspopup","true",1,"dropdown__button",3,"click","disabled","id"],[1,"dropdown__arrow-down",3,"ngStyle"],["role","menu",1,"dropdown__list",3,"id"],["role","menuitem",1,"dropdown__item",3,"ngClass","tabIndex"],["role","menuitem",1,"dropdown__item",3,"click","keydown","ngClass","tabIndex"]],template:function(t,n){if(t&1){let i=xt();j(0,"button",2,0),Ee("click",function(){return Ye(i),Qe(n.toggleDropDown())}),ne(2),le(3,"span",3),z(),Le(4,Tk,4,3,"ul",4)}t&2&&(oe("disabled",n.disabled())("id",n.dropdownId()),zn("aria-expanded",n.isExpanded())("aria-controls",n.dropdownMenuId()),Y(2),St(" ",n.displayedLabel()," "),Y(),oe("ngStyle",It(7,Sk,n.isExpanded()?"rotate(225deg)":"rotate(45deg)")),Y(),Ke(n.isExpanded()?4:-1))},dependencies:[Bt,Ir,Xc],styles:['.dropdown[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.dropdown__button[_ngcontent-%COMP%]{line-height:1;display:flex;align-items:center;justify-content:space-between;background-color:hsla(var(--muted));padding:.85em 1em;border-radius:var(--radius);color:hsla(var(--muted-foreground));font-size:1em;height:100%;width:100%;transition:all .15s ease-in-out}.dropdown__button[_ngcontent-%COMP%]:hover:not(:disabled){cursor:pointer;background-color:hsla(var(--accent));color:hsla(var(--accent-foreground))}.dropdown__button[_ngcontent-%COMP%]:hover:not(:disabled)   .dropdown__arrow-down[_ngcontent-%COMP%]{border-color:hsla(var(--accent-foreground))}.dropdown__button[_ngcontent-%COMP%]:disabled{color:hsla(var(--muted-foreground),.5);cursor:not-allowed}.dropdown__button[_ngcontent-%COMP%]:disabled   .dropdown__arrow-down[_ngcontent-%COMP%]{border-color:hsla(var(--muted-foreground),.5)}.dropdown__arrow-down[_ngcontent-%COMP%]{border:solid hsla(var(--muted-foreground));border-width:0 1px 1px 0;display:inline-block;padding:3px;margin-bottom:3px;box-shadow:1px 1px #0000001a;margin-left:.5em;transition:transform .25s ease-in-out}.dropdown__list[_ngcontent-%COMP%]{position:absolute;right:0;top:calc(100% + 5px);min-width:100%;min-height:100%;padding:.4em;list-style:none;border-radius:var(--radius);background-color:hsla(var(--muted));z-index:10;box-shadow:0 5px 6px -2px #00000035;overflow:hidden}.dropdown__item[_ngcontent-%COMP%]{cursor:pointer;font-size:.92em;border-radius:calc(var(--radius) / 1.2);color:hsla(var(--muted-foreground-neutral));padding-block:.5em;padding-left:2em;padding-right:.5em;position:relative;transition:background-color .15s ease-in-out}.dropdown__item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.25em}.dropdown__item[_ngcontent-%COMP%]:hover, .dropdown__item[_ngcontent-%COMP%]:focus{background-color:hsla(var(--accent));color:hsla(var(--accent-foreground))}.dropdown__item[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;position:absolute;left:.5em;width:5px;height:8px;border-width:0 1px 1px 0;border-style:solid;transform-origin:bottom left;transform:scale(0) rotate(90deg);transition:transform .15s ease-in-out}.dropdown__item--active[_ngcontent-%COMP%]:before{transform:scale(1) rotate(45deg)}',"[_nghost-%COMP%]{position:relative}"],data:{animation:[Wt("slideDropdown",{duration:"200ms",animateY:!0,transform:"scale(.8) translateY(-10px)"})]},changeDetection:0})};function Nk(r,e){if(r&1){let t=xt();j(0,"button",8),Ee("click",function(){let i=Ye(t).$implicit,s=te(2);return Qe(s.activateItem(i))}),ne(1),z()}if(r&2){let t=e.$implicit;oe("ngClass",t.active?"text-accentForeground":"text-mutedForeground"),Y(),St(" ",t.label," ")}}function Dk(r,e){if(r&1&&Qr(0,Nk,2,2,"button",7,Yr),r&2){let t=te();Zr(t.tableList())}}var Lp=class r{sorted=Wr();limit=xe(10);tableList=ee.required();currentTable=xe(null);loadingTable=$t(()=>this.currentTable()?.dataTableRow.length===0);dropdownItems=$t(()=>[{name:"10 rows",isActive:this.limit()===10,value:10},{name:"25 rows",isActive:this.limit()===25,value:25},{name:"50 rows",isActive:this.limit()===50,value:50},{name:"100 rows",isActive:this.limit()===100,value:100}]);templates;ngOnInit(){this.setActiveItem()}ngOnChanges(e){(e.tableList||e.limit)&&this.setActiveItem()}activateItem(e){this.tableList()?.forEach(t=>t.active=!1),e.active=!0,this.setActiveItem()}setActiveItem(){let e=this.tableList()?.find(i=>i.active);e||(this.tableList()[0].active=!0,e=this.tableList().find(i=>i.active));let t=e.loadData;this.currentTable.set(de(k({},e),{dataTableRow:[]}));let n=0;this.limit.update(i=>(n=i,10)),t.subscribe({next:i=>{let s=de(k({},e),{dataTableRow:i});this.currentTable()?.key===s.key&&(this.currentTable.set(s),setTimeout(()=>{this.limit.set(n)},500))}})}onPageSelected(e){let t=this.tableList()?.find(n=>n.active);t&&t.page&&(t.page.currentPage=e)}onDropdownItemClicked(e){let t=e.value;typeof t=="number"&&this.limit.set(t)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["custom-table"]],contentQueries:function(t,n,i){if(t&1&&La(i,zo,4),t&2){let s;kr(s=Fr())&&(n.templates=s)}},inputs:{tableList:[1,"tableList"]},outputs:{sorted:"sorted"},features:[Hn],decls:9,vars:11,consts:[[1,"flex","gap-1","mb-2"],[1,"bg-card","rounded-t-dft","p-3","flex","justify-between","items-center","flex-wrap","gap-2"],[1,"text-lg","font-semibold","text-mutedForeground","text-nowrap"],[3,"getCurrentPage","limit","initialPageIndex","disabled"],[3,"columns","rows","limit","parentTemplates"],[1,"bg-card","rounded-b-dft","p-3","flex","justify-between","items-center","flex-wrap","gap-2"],["dropdownId","transactionsTable","label","Manage rows",1,"text-xs","font-normal","min-w-[7.2rem]",3,"clickedItem","items","disabled"],[1,"py-1","px-3","rounded-md","font-medium","transition-colors","hover:bg-accent","hover:text-accentForeground",3,"ngClass"],[1,"py-1","px-3","rounded-md","font-medium","transition-colors","hover:bg-accent","hover:text-accentForeground",3,"click","ngClass"]],template:function(t,n){t&1&&(j(0,"div",0),Le(1,Dk,2,0),z(),j(2,"div",1)(3,"h1",2),ne(4),z(),j(5,"paginator",3),Ee("getCurrentPage",function(s){return n.onPageSelected(s)}),z()(),le(6,"data-table",4),j(7,"div",5)(8,"dropdown-selection",6),Ee("clickedItem",function(s){return n.onDropdownItemClicked(s)}),z()()),t&2&&(Y(),Ke(n.tableList().length>1?1:-1),Y(3),Sr(n.currentTable().title),Y(),oe("limit",n.currentTable().page.totalPages||0)("initialPageIndex",n.currentTable().page.currentPage)("disabled",n.loadingTable()),Y(),oe("columns",n.currentTable().dataTableColumns)("rows",n.currentTable().dataTableRow)("limit",n.limit())("parentTemplates",n.templates),Y(2),oe("items",n.dropdownItems())("disabled",n.loadingTable()))},dependencies:[vp,Bt,Ir,Jh,Up],encapsulation:2,changeDetection:0})};function Rk(r,e){if(r&1&&(j(0,"span"),ne(1),z()),r&2){let t=e.$implicit;Y(),St("xdd",t,"")}}function Ok(r,e){if(r&1&&(j(0,"span"),ne(1),z()),r&2){let t=e.$implicit;Y(),St("height",t,"")}}var Vp=class r{userDataService=K(mp);updatedTimeService=K(gl);transactions$=this.userDataService.getTransaction();blocks$=this.userDataService.getBlocks();transactionsData=[];blocksData={};updatedTime=this.updatedTimeService.getTimeNow();transactionColumns=[{label:"Block Number",property:"blockNumber",sort:"none",useTemplate:!0},{label:"Time",property:"timeStamp",isTimestamp:!0,sort:"none"},{label:"From",property:"from",sort:"none",truncate:"middle",copyToClipboard:!0,highlighData:!0,href:e=>`https://etherscan.io/address/${e}`,hrefTarget:"_blank"},{label:"To",property:"to",sort:"unavailable",truncate:"middle",copyToClipboard:!0,highlighData:!0,href:e=>`https://etherscan.io/address/${e}`,hrefTarget:"_blank"}];blocksColumns=[{label:"Block Number",property:"height",sort:"none",useTemplate:!0},{label:"Time",property:"timestamp",isTimestamp:!0,sort:"none"},{label:"Hash",property:"hash",sort:"none",truncate:"middle",copyToClipboard:!0,highlighData:!0,href:e=>`https://etherscan.io/block/${e}`,hrefTarget:"_blank"}];tableList=[{label:"Transactions",title:"Recent Transactions",active:!0,key:"transactions",dataTableColumns:this.transactionColumns,dataTableRow:[],loadData:this.transactions$.pipe(Be(e=>e.result),Rb(1)),page:{currentPage:1,totalPages:50}},{label:"Blocks",title:"Recent Blocks",key:"blocks",dataTableColumns:this.blocksColumns,dataTableRow:[],loadData:this.blocks$.pipe(Be(e=>e.items),Rb(1)),page:{currentPage:1,totalPages:25}}];static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["dashboard-page"]],hostAttrs:[1,"page-container","space-y-8","block"],decls:49,vars:1,consts:[[1,"flex","flex-col","gap-8"],[1,"flex","flex-col","sm:flex-row","gap-2"],[1,"grid","grid-cols-2","gap-2","flex-1"],["icon","fi-rr-usd-circle","title","Total Balance","value","$2.540"],["icon","fi-rr-exchange","title","Total Transactions","value","22.647"],["icon","fi-rr-tax-alt","title","Total Fees","value","$553,43"],["icon","fi-rr-nft-square","title","Total NFTs","value","$433,50\u2248"],["icon","fi-rr-wallet-buyer","title","Wallet Address","value","0xC98e86927D9752586da1081c8dD9a41450232Deb","valueFontSize","base",1,"col-span-2"],[1,"flex-1","rounded-xl","bg-card","flex","items-center","justify-center"],[1,"text-6xl","text-mutedForeground"],[1,"flex","gap-2","flex-wrap"],["background","transparent",1,"flex","gap-4","items-center","flex-1","min-w-max"],[1,"text-mutedForeground","text-4xl","fi","fi-tr-chart-mixed","flex"],[1,"flex","flex-col","text-lg"],[1,"font-medium"],[1,"flex","items-center","gap-1","text-green-400","text-sm"],[1,"fi","fi-rr-angle-small-up","flex","text-xs"],[1,"text-mutedForeground","text-4xl","fi","fi-tr-diamond","flex"],[1,"text-mutedForegroundNeutral","text-sm"],[1,"text-mutedForeground","text-4xl","fi","fi-ts-hourglass-start","flex"],[3,"tableList"],["name","blockNumber"],["name","height"]],template:function(t,n){t&1&&(j(0,"section",0)(1,"div",1)(2,"div",2),le(3,"basic-card",3)(4,"basic-card",4)(5,"basic-card",5)(6,"basic-card",6)(7,"basic-card",7),z(),j(8,"div",8)(9,"h1",9),ne(10,"graph"),z()()(),j(11,"div",10)(12,"card",11),le(13,"i",12),j(14,"div",13)(15,"h2",14),ne(16,"Last 30 Days"),z(),j(17,"div",15)(18,"span"),ne(19,"$127,65 "),j(20,"small"),ne(21,"(+0.47%)"),z()(),le(22,"i",16),z()()(),j(23,"card",11),le(24,"i",17),j(25,"div",13)(26,"h2",14),ne(27,"Biggest Position"),z(),j(28,"div",18)(29,"span"),ne(30,"Ethereum "),j(31,"small"),ne(32,"0.675(77.4%)"),z()()()()(),j(33,"card",11),le(34,"i",19),j(35,"div",13)(36,"h2",14),ne(37,"Blockchain Age"),z(),j(38,"div",18)(39,"span"),ne(40,"Registered on "),j(41,"small"),ne(42,"Feb 05 2017"),z()()()()()()(),j(43,"section")(44,"custom-table",20)(45,"data-table-template",21),Le(46,Rk,2,1,"ng-template"),z(),j(47,"data-table-template",22),Le(48,Ok,2,1,"ng-template"),z()()()),t&2&&(Y(44),oe("tableList",n.tableList))},dependencies:[pp,Bt,Lp,ml,zo],encapsulation:2,changeDetection:0})};var Ko=class r{constructor(e){this.rendererFactory=e;this.renderer=e.createRenderer(null,null),typeof window<"u"&&(this.checkMobileScreenSize(),this.renderer.listen("window","resize",()=>this.checkMobileScreenSize()))}smallScreen=xe(!1);sidebarCollapsed=xe(!0);renderer;get isSmallScreen$(){return this.smallScreen.asReadonly()}get isSidebarCollapsed$(){return this.sidebarCollapsed.asReadonly()}checkMobileScreenSize(){this.smallScreen.set(window.innerWidth<640)}toggleSidebar(){this.sidebarCollapsed.update(e=>!e)}collapseSidebar(){this.sidebarCollapsed.set(!0)}expandSidebar(){this.sidebarCollapsed.set(!1)}static \u0275fac=function(t){return new(t||r)(Ie(cs))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var kk=(r,e,t,n)=>({"mr-1":r,"mr-4":e,"bg-accent/80":t,"text-accentForeground":n});function Fk(r,e){if(r&1){let t=xt();j(0,"button",5),Ee("click",function(){Ye(t);let i=te().$implicit;return Qe(i.collapsed=!i.collapsed)}),le(1,"i",6),z()}if(r&2){let t=te().$implicit;Y(),oe("ngClass",t.collapsed?"rotate-180":"")}}function Bk(r,e){if(r&1){let t=xt();j(0,"button",7),Ee("click",function(){Ye(t);let i=te().$implicit;return Qe(i.collapsed=!i.collapsed)}),j(1,"span",8),ne(2),z(),le(3,"i",9),z()}if(r&2){let t=te().$implicit;Y(2),Sr(t.label),Y(),oe("ngClass",t.collapsed?"rotate-180":"")}}function Uk(r,e){}function Lk(r,e){if(r&1){let t=xt();j(0,"li",11),Ee("keydown",function(i){let s=Ye(t).$implicit,o=te(3);return Qe(o.onKeyPressed(i,s.route))}),le(1,"i",12),j(2,"a",13),ne(3),z()()}if(r&2){let t=e.$implicit,n=te(3);oe("ngClass",_C(4,kk,n.isCollapsed,!n.isCollapsed,n.currentRoute().includes(t.route),n.currentRoute().includes(t.route)))("routerLink",t.route),Y(),oe("ngClass",n.currentRoute().includes(t.route)?t.icon.active:t.icon.inactive),Y(2),Sr(t.name)}}function Vk(r,e){if(r&1&&(j(0,"ul",3),Qr(1,Lk,4,9,"li",10,Yr),z()),r&2){let t=te().$implicit;oe("@navbarItemCollapseExpand",void 0),Y(),Zr(t.items)}}function jk(r,e){if(r&1&&(Le(0,Fk,2,1,"button",1)(1,Bk,4,2,"button",2)(2,Uk,0,0)(3,Vk,3,1,"ul",3),le(4,"hr",4)),r&2){let t=e.$implicit,n=te();Ke(n.isCollapsed?0:1),Y(2),Ke(t.collapsed?2:3),Y(2),oe("ngClass",n.isCollapsed?"mx-2":"mx-5")}}var jp=class r{constructor(e){this.router=e}pageLayoutService=K(Ko);sidebarSections=ee();isAutoExpanded=!1;navbarTimeoutId;currentRoute=xe("");get smallScreen(){return this.pageLayoutService.isSmallScreen$()}get isCollapsed(){return this.pageLayoutService.isSidebarCollapsed$()}ngOnInit(){this.currentRoute.set(this.router.url),this.router.events.subscribe(()=>{this.currentRoute.set(this.router.url)})}onMouseEnterSidebar(){this.navbarTimeoutId=setTimeout(()=>{this.autoExpandSidebar()},700)}onMouseLeaveSidebar(){this.navbarTimeoutId&&(clearTimeout(this.navbarTimeoutId),this.isAutoExpanded&&this.autoCollapseSidebar())}collapseSidebar(){this.pageLayoutService.collapseSidebar()}expandSidebar(){this.pageLayoutService.expandSidebar()}autoExpandSidebar(){this.expandSidebar(),this.isAutoExpanded=!0}autoCollapseSidebar(){this.collapseSidebar(),this.isAutoExpanded=!1}toggleSidebar(){this.isCollapsed?this.expandSidebar():this.collapseSidebar()}changeRoute(e){this.router.navigate([e])}onKeyPressed(e,t){(e.code==="Enter"||e.code==="Space")&&(this.changeRoute(t),e.preventDefault())}get hostClasses(){let e="fixed bottom-0 transition-all duration-300 overflow-hidden bg-mutedDark h-[calc(100%_-_4rem)]",t=this.isCollapsed?"w-16":"w-64";return`${e} ${t}`}onMouseEnter(){this.isCollapsed&&this.onMouseEnterSidebar()}onMouseLeave(){this.onMouseLeaveSidebar()}static \u0275fac=function(t){return new(t||r)(Ae(jh))};static \u0275cmp=Ce({type:r,selectors:[["sidebar"]],hostVars:3,hostBindings:function(t,n){t&1&&Ee("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),t&2&&(Yc("@navbarSlideInOut",void 0),hs(n.hostClasses))},inputs:{sidebarSections:[1,"sidebarSections"]},decls:3,vars:0,consts:[[1,"py-4"],[1,"px-4","mb-2","w-full","flex","items-center","justify-center","text-mutedForeground","hover:text-foreground","cursor-pointer","transition-colors"],[1,"px-5","mb-2","w-full","flex","items-center","justify-between","text-mutedForeground","hover:text-foreground","cursor-pointer","transition-colors"],[1,"flex","flex-col","gap-1","overflow-hidden"],[1,"border-border","my-2",3,"ngClass"],[1,"px-4","mb-2","w-full","flex","items-center","justify-center","text-mutedForeground","hover:text-foreground","cursor-pointer","transition-colors",3,"click"],[1,"fi","fi-rr-caret-down","flex","text-lg","transition-transform",3,"ngClass"],[1,"px-5","mb-2","w-full","flex","items-center","justify-between","text-mutedForeground","hover:text-foreground","cursor-pointer","transition-colors",3,"click"],[1,"uppercase","font-semibold","whitespace-nowrap","text-sm"],[1,"fi","fi-rr-caret-down","flex","transition-transform",3,"ngClass"],["role","link",1,"pr-4","pl-5","py-2","rounded-r-2xl","flex","gap-3","items-center","cursor-pointer","hover:bg-accent","hover:text-accentForeground","transition-all",3,"ngClass","routerLink"],["role","link",1,"pr-4","pl-5","py-2","rounded-r-2xl","flex","gap-3","items-center","cursor-pointer","hover:bg-accent","hover:text-accentForeground","transition-all",3,"keydown","ngClass","routerLink"],[1,"fi","flex","text-[1.4rem]",3,"ngClass"],[1,"text-base","overflow-hidden","overflow-ellipsis","whitespace-nowrap"]],template:function(t,n){t&1&&(j(0,"div",0),Qr(1,jk,5,3,null,null,Yr),z()),t&2&&(Y(),Zr(n.sidebarSections()))},dependencies:[Bt,Ir,FA],styles:["[_nghost-%COMP%]{z-index:100}"],data:{animation:[Wt("navbarItemCollapseExpand",{duration:"250ms",animateY:!0,transform:"scale(.9)"}),Wt("navbarSlideInOut",{duration:"250ms",animateX:!0,opacity:"1"})]},changeDetection:0})};var kS=dn(Ha()),Jp=dn(Cl());var Oi=class{};var Av=class extends Oi{constructor(e){super()}},MS=Jp.FIVE_SECONDS,ic={pulse:"heartbeat_pulse"},Wp=class r extends Av{constructor(e){super(e),this.events=new kS.EventEmitter,this.interval=MS,this.interval=e?.interval||MS}static init(e){return p(this,null,function*(){let t=new r(e);return yield t.init(),t})}init(){return p(this,null,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return p(this,null,function*(){this.intervalRef=setInterval(()=>this.pulse(),(0,Jp.toMiliseconds)(this.interval))})}pulse(){this.events.emit(ic.pulse)}};var h9=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,d9=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,f9=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function p9(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){m9(r);return}return e}function m9(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function ed(r,e={}){if(typeof r!="string")return r;let t=r.trim();if(r[0]==='"'&&r.endsWith('"')&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){let n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!f9.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(h9.test(r)||d9.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,p9)}return JSON.parse(r)}catch(n){if(e.strict)throw n;return r}}function g9(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function Pr(r,...e){try{return g9(r(...e))}catch(t){return Promise.reject(t)}}function b9(r){let e=typeof r;return r===null||e!=="object"&&e!=="function"}function y9(r){let e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function td(r){if(b9(r))return String(r);if(y9(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return td(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}var Sv="base64:";function FS(r){return typeof r=="string"?r:Sv+w9(r)}function BS(r){return typeof r!="string"||!r.startsWith(Sv)?r:v9(r.slice(Sv.length))}function v9(r){return globalThis.Buffer?Buffer.from(r,"base64"):Uint8Array.from(globalThis.atob(r),e=>e.codePointAt(0))}function w9(r){return globalThis.Buffer?Buffer.from(r).toString("base64"):globalThis.btoa(String.fromCodePoint(...r))}function Cn(r){return r&&r.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function US(...r){return Cn(r.join(":"))}function rd(r){return r=Cn(r),r?r+":":""}function LS(r,e){if(e===void 0)return!0;let t=0,n=r.indexOf(":");for(;n>-1;)t++,n=r.indexOf(":",n+1);return t<=e}function VS(r,e){return e?r.startsWith(e)&&r[r.length-1]!=="$":r[r.length-1]!=="$"}var x9="memory",E9=()=>{let r=new Map;return{name:x9,getInstance:()=>r,hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return[...r.keys()]},clear(){r.clear()},dispose(){r.clear()}}};function qS(r={}){let e={mounts:{"":r.driver||E9()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=u=>{for(let h of e.mountpoints)if(u.startsWith(h))return{base:h,relativeKey:u.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,h)=>e.mountpoints.filter(m=>m.startsWith(u)||h&&u.startsWith(m)).map(m=>({relativeBase:u.length>m.length?u.slice(m.length):void 0,mountpoint:m,driver:e.mounts[m]})),i=(u,h)=>{if(e.watching){h=Cn(h);for(let m of e.watchListeners)m(u,h)}},s=()=>p(this,null,function*(){if(!e.watching){e.watching=!0;for(let u in e.mounts)e.unwatch[u]=yield jS(e.mounts[u],i,u)}}),o=()=>p(this,null,function*(){if(e.watching){for(let u in e.unwatch)yield e.unwatch[u]();e.unwatch={},e.watching=!1}}),a=(u,h,m)=>{let b=new Map,f=v=>{let E=b.get(v.base);return E||(E={driver:v.driver,base:v.base,items:[]},b.set(v.base,E)),E};for(let v of u){let E=typeof v=="string",I=Cn(E?v:v.key),N=E?void 0:v.value,D=E||!v.options?h:k(k({},h),v.options),F=t(I);f(F).items.push({key:I,value:N,relativeKey:F.relativeKey,options:D})}return Promise.all([...b.values()].map(v=>m(v))).then(v=>v.flat())},c={hasItem(u,h={}){u=Cn(u);let{relativeKey:m,driver:b}=t(u);return Pr(b.hasItem,m,h)},getItem(u,h={}){u=Cn(u);let{relativeKey:m,driver:b}=t(u);return Pr(b.getItem,m,h).then(f=>ed(f))},getItems(u,h={}){return a(u,h,m=>m.driver.getItems?Pr(m.driver.getItems,m.items.map(b=>({key:b.relativeKey,options:b.options})),h).then(b=>b.map(f=>({key:US(m.base,f.key),value:ed(f.value)}))):Promise.all(m.items.map(b=>Pr(m.driver.getItem,b.relativeKey,b.options).then(f=>({key:b.key,value:ed(f)})))))},getItemRaw(u,h={}){u=Cn(u);let{relativeKey:m,driver:b}=t(u);return b.getItemRaw?Pr(b.getItemRaw,m,h):Pr(b.getItem,m,h).then(f=>BS(f))},setItem(b,f){return p(this,arguments,function*(u,h,m={}){if(h===void 0)return c.removeItem(u);u=Cn(u);let{relativeKey:v,driver:E}=t(u);E.setItem&&(yield Pr(E.setItem,v,td(h),m),E.watch||i("update",u))})},setItems(u,h){return p(this,null,function*(){yield a(u,h,m=>p(this,null,function*(){if(m.driver.setItems)return Pr(m.driver.setItems,m.items.map(b=>({key:b.relativeKey,value:td(b.value),options:b.options})),h);m.driver.setItem&&(yield Promise.all(m.items.map(b=>Pr(m.driver.setItem,b.relativeKey,td(b.value),b.options))))}))})},setItemRaw(b,f){return p(this,arguments,function*(u,h,m={}){if(h===void 0)return c.removeItem(u,m);u=Cn(u);let{relativeKey:v,driver:E}=t(u);if(E.setItemRaw)yield Pr(E.setItemRaw,v,h,m);else if(E.setItem)yield Pr(E.setItem,v,FS(h),m);else return;E.watch||i("update",u)})},removeItem(m){return p(this,arguments,function*(u,h={}){typeof h=="boolean"&&(h={removeMeta:h}),u=Cn(u);let{relativeKey:b,driver:f}=t(u);f.removeItem&&(yield Pr(f.removeItem,b,h),(h.removeMeta||h.removeMata)&&(yield Pr(f.removeItem,b+"$",h)),f.watch||i("remove",u))})},getMeta(m){return p(this,arguments,function*(u,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),u=Cn(u);let{relativeKey:b,driver:f}=t(u),v=Object.create(null);if(f.getMeta&&Object.assign(v,yield Pr(f.getMeta,b,h)),!h.nativeOnly){let E=yield Pr(f.getItem,b+"$",h).then(I=>ed(I));E&&typeof E=="object"&&(typeof E.atime=="string"&&(E.atime=new Date(E.atime)),typeof E.mtime=="string"&&(E.mtime=new Date(E.mtime)),Object.assign(v,E))}return v})},setMeta(u,h,m={}){return this.setItem(u+"$",h,m)},removeMeta(u,h={}){return this.removeItem(u+"$",h)},getKeys(m){return p(this,arguments,function*(u,h={}){u=rd(u);let b=n(u,!0),f=[],v=[],E=!0;for(let N of b){N.driver.flags?.maxDepth||(E=!1);let D=yield Pr(N.driver.getKeys,N.relativeBase,h);for(let F of D){let U=N.mountpoint+Cn(F);f.some(L=>U.startsWith(L))||v.push(U)}f=[N.mountpoint,...f.filter(F=>!F.startsWith(N.mountpoint))]}let I=h.maxDepth!==void 0&&!E;return v.filter(N=>(!I||LS(N,h.maxDepth))&&VS(N,u))})},clear(m){return p(this,arguments,function*(u,h={}){u=rd(u),yield Promise.all(n(u,!1).map(b=>p(this,null,function*(){if(b.driver.clear)return Pr(b.driver.clear,b.relativeBase,h);if(b.driver.removeItem){let f=yield b.driver.getKeys(b.relativeBase||"",h);return Promise.all(f.map(v=>b.driver.removeItem(v,h)))}})))})},dispose(){return p(this,null,function*(){yield Promise.all(Object.values(e.mounts).map(u=>HS(u)))})},watch(u){return p(this,null,function*(){return yield s(),e.watchListeners.push(u),()=>p(this,null,function*(){e.watchListeners=e.watchListeners.filter(h=>h!==u),e.watchListeners.length===0&&(yield o())})})},unwatch(){return p(this,null,function*(){e.watchListeners=[],yield o()})},mount(u,h){if(u=rd(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((m,b)=>b.length-m.length)),e.mounts[u]=h,e.watching&&Promise.resolve(jS(h,i,u)).then(m=>{e.unwatch[u]=m}).catch(console.error),c},unmount(u,h=!0){return p(this,null,function*(){u=rd(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),h&&(yield HS(e.mounts[u])),e.mountpoints=e.mountpoints.filter(m=>m!==u),delete e.mounts[u])})},getMount(u=""){u=Cn(u)+":";let h=t(u);return{driver:h.driver,base:h.base}},getMounts(u="",h={}){return u=Cn(u),n(u,h.parents).map(b=>({driver:b.driver,base:b.mountpoint}))},keys:(u,h={})=>c.getKeys(u,h),get:(u,h={})=>c.getItem(u,h),set:(u,h,m={})=>c.setItem(u,h,m),has:(u,h={})=>c.hasItem(u,h),del:(u,h={})=>c.removeItem(u,h),remove:(u,h={})=>c.removeItem(u,h)};return c}function jS(r,e,t){return r.watch?r.watch((n,i)=>e(n,t+i)):()=>{}}function HS(r){return p(this,null,function*(){typeof r.dispose=="function"&&(yield Pr(r.dispose))})}function sc(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function Pv(r,e){let t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);let n=sc(t);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}var Iv;function nd(){return Iv||(Iv=Pv("keyval-store","keyval")),Iv}function Tv(r,e=nd()){return e("readonly",t=>sc(t.get(r)))}function zS(r,e,t=nd()){return t("readwrite",n=>(n.put(e,r),sc(n.transaction)))}function $S(r,e=nd()){return e("readwrite",t=>(t.delete(r),sc(t.transaction)))}function GS(r=nd()){return r("readwrite",e=>(e.clear(),sc(e.transaction)))}function C9(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},sc(r.transaction)}function KS(r=nd()){return r("readonly",e=>{if(e.getAllKeys)return sc(e.getAllKeys());let t=[];return C9(e,n=>t.push(n.key)).then(()=>t)})}var _9="idb-keyval",A9=(r={})=>{let e=r.base&&r.base.length>0?`${r.base}:`:"",t=s=>e+s,n;return r.dbName&&r.storeName&&(n=Pv(r.dbName,r.storeName)),{name:_9,options:r,hasItem(s){return p(this,null,function*(){return!(typeof(yield Tv(t(s),n))>"u")})},getItem(s){return p(this,null,function*(){return(yield Tv(t(s),n))??null})},setItem(s,o){return zS(t(s),o,n)},removeItem(s){return $S(t(s),n)},getKeys(){return KS(n)},clear(){return GS(n)}}},S9="WALLET_CONNECT_V2_INDEXED_DB",I9="keyvaluestorage",Dv=class{constructor(){this.indexedDb=qS({driver:A9({dbName:S9,storeName:I9})})}getKeys(){return p(this,null,function*(){return this.indexedDb.getKeys()})}getEntries(){return p(this,null,function*(){return(yield this.indexedDb.getItems(yield this.indexedDb.getKeys())).map(e=>[e.key,e.value])})}getItem(e){return p(this,null,function*(){let t=yield this.indexedDb.getItem(e);if(t!==null)return t})}setItem(e,t){return p(this,null,function*(){yield this.indexedDb.setItem(e,Ks(t))})}removeItem(e){return p(this,null,function*(){yield this.indexedDb.removeItem(e)})}},Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yp={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){let t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Nv<"u"&&Nv.localStorage?Yp.exports=Nv.localStorage:typeof window<"u"&&window.localStorage?Yp.exports=window.localStorage:Yp.exports=new e})();function P9(r){var e;return[r[0],ds((e=r[1])!=null?e:"")]}var Rv=class{constructor(){this.localStorage=Yp.exports}getKeys(){return p(this,null,function*(){return Object.keys(this.localStorage)})}getEntries(){return p(this,null,function*(){return Object.entries(this.localStorage).map(P9)})}getItem(e){return p(this,null,function*(){let t=this.localStorage.getItem(e);if(t!==null)return ds(t)})}setItem(e,t){return p(this,null,function*(){this.localStorage.setItem(e,Ks(t))})}removeItem(e){return p(this,null,function*(){this.localStorage.removeItem(e)})}},T9="wc_storage_version",WS=1,N9=(r,e,t)=>p(void 0,null,function*(){let n=T9,i=yield e.getItem(n);if(i&&i>=WS){t(e);return}let s=yield r.getKeys();if(!s.length){t(e);return}let o=[];for(;s.length;){let a=s.shift();if(!a)continue;let c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){let l=yield r.getItem(a);yield e.setItem(a,l),o.push(a)}}yield e.setItem(n,WS),t(e),D9(r,o)}),D9=(r,e)=>p(void 0,null,function*(){e.length&&e.forEach(t=>p(void 0,null,function*(){yield r.removeItem(t)}))}),Qp=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};let e=new Rv;this.storage=e;try{let t=new Dv;N9(e,t,this.setInitialized)}catch{this.initialized=!0}}getKeys(){return p(this,null,function*(){return yield this.initialize(),this.storage.getKeys()})}getEntries(){return p(this,null,function*(){return yield this.initialize(),this.storage.getEntries()})}getItem(e){return p(this,null,function*(){return yield this.initialize(),this.storage.getItem(e)})}setItem(e,t){return p(this,null,function*(){return yield this.initialize(),this.storage.setItem(e,t)})}removeItem(e){return p(this,null,function*(){return yield this.initialize(),this.storage.removeItem(e)})}initialize(){return p(this,null,function*(){this.initialized||(yield new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)}))})}};var JS=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))},R9=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}();var O9=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}();var M9=function(){function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return r}();var k9=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}();var F9=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}();var B9=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,U9=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,YS=3,L9=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",B9]],QS=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function XS(r){return r?ZS(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new F9:typeof navigator<"u"?ZS(navigator.userAgent):H9()}function V9(r){return r!==""&&L9.reduce(function(e,t){var n=t[0],i=t[1];if(e)return e;var s=i.exec(r);return!!s&&[n,s]},!1)}function ZS(r){var e=V9(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new k9;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<YS&&(i=JS(JS([],i,!0),q9(YS-i.length),!0)):i=[];var s=i.join("."),o=j9(r),a=U9.exec(r);return a&&a[1]?new M9(t,s,o,a[1]):new R9(t,s,o)}function j9(r){for(var e=0,t=QS.length;e<t;e++){var n=QS[e],i=n[0],s=n[1],o=s.exec(r);if(o)return i}return null}function H9(){var r=typeof process<"u"&&process.version;return r?new O9(process.version.slice(1)):null}function q9(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}function t7(r){if(r.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<r.length;l++){let u=r.charAt(l),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=l}let t=r.length,n=r.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,h=0,m=0,b=l.length;for(;m!==b&&l[m]===0;)m++,u++;let f=(b-m)*s+1>>>0,v=new Uint8Array(f);for(;m!==b;){let N=l[m],D=0;for(let F=f-1;(N!==0||D<h)&&F!==-1;F--,D++)N+=256*v[F]>>>0,v[F]=N%t>>>0,N=N/t>>>0;if(N!==0)throw new Error("Non-zero carry");h=D,m++}let E=f-h;for(;E!==f&&v[E]===0;)E++;let I=n.repeat(u);for(;E<f;++E)I+=r.charAt(v[E]);return I}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,h=0,m=0;for(;l[u]===n;)h++,u++;let b=(l.length-u)*i+1>>>0,f=new Uint8Array(b);for(;l[u];){let N=e[l.charCodeAt(u)];if(N===255)return;let D=0;for(let F=b-1;(N!==0||D<m)&&F!==-1;F--,D++)N+=t*f[F]>>>0,f[F]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=D,u++}let v=b-m;for(;v!==b&&f[v]===0;)v++;let E=new Uint8Array(h+(b-v)),I=h;for(;v!==b;)E[I++]=f[v++];return E}function c(l){let u=a(l);if(u)return u;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var r3=t7;var r7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",em=r3(r7);function id(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function sd(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));let t=id(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}var Bv={};Nn(Bv,{identity:()=>c7});function n7(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var a=r.length,c=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var v=0,E=0,I=0,N=f.length;I!==N&&f[I]===0;)I++,v++;for(var D=(N-I)*u+1>>>0,F=new Uint8Array(D);I!==N;){for(var U=f[I],L=0,B=D-1;(U!==0||L<E)&&B!==-1;B--,L++)U+=256*F[B]>>>0,F[B]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");E=L,I++}for(var M=D-E;M!==D&&F[M]===0;)M++;for(var V=c.repeat(v);M<D;++M)V+=r.charAt(F[M]);return V}function m(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var v=0;if(f[v]!==" "){for(var E=0,I=0;f[v]===c;)E++,v++;for(var N=(f.length-v)*l+1>>>0,D=new Uint8Array(N);f[v];){var F=t[f.charCodeAt(v)];if(F===255)return;for(var U=0,L=N-1;(F!==0||U<I)&&L!==-1;L--,U++)F+=a*D[L]>>>0,D[L]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");I=U,v++}if(f[v]!==" "){for(var B=N-I;B!==N&&D[B]===0;)B++;for(var M=new Uint8Array(E+(N-B)),V=E;B!==N;)M[V++]=D[B++];return M}}}function b(f){var v=m(f);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:m,decode:b}}var i7=n7,s7=i7,n3=s7;var pie=new Uint8Array(0);var i3=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Xs=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var s3=r=>new TextEncoder().encode(r),o3=r=>new TextDecoder().decode(r);var Ov=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Mv=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return c3(this,e)}},kv=class{constructor(e){this.decoders=e}or(e){return c3(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},c3=(r,e)=>new kv(k(k({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e})),Fv=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ov(e,t,n),this.decoder=new Mv(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Al=({name:r,prefix:e,encode:t,decode:n})=>new Fv(r,e,t,n),Wo=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=n3(t,e);return Al({prefix:r,name:e,encode:n,decode:s=>Xs(i(s))})},o7=(r,e,t,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=r.length;for(;r[s-1]==="=";)--s;let o=new Uint8Array(s*t/8|0),a=0,c=0,l=0;for(let u=0;u<s;++u){let h=i[r[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},a7=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,s="",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,s+=e[i&a>>o];if(o&&(s+=e[i&a<<t-o]),n)for(;s.length*t&7;)s+="=";return s},Lt=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Al({prefix:e,name:r,encode(i){return a7(i,n,t)},decode(i){return o7(i,n,t,r)}});var c7=Al({prefix:"\0",name:"identity",encode:r=>o3(r),decode:r=>s3(r)});var Uv={};Nn(Uv,{base2:()=>l7});var l7=Lt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Lv={};Nn(Lv,{base8:()=>u7});var u7=Lt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vv={};Nn(Vv,{base10:()=>h7});var h7=Wo({prefix:"9",name:"base10",alphabet:"0123456789"});var jv={};Nn(jv,{base16:()=>d7,base16upper:()=>f7});var d7=Lt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f7=Lt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hv={};Nn(Hv,{base32:()=>Sl,base32hex:()=>b7,base32hexpad:()=>v7,base32hexpadupper:()=>w7,base32hexupper:()=>y7,base32pad:()=>m7,base32padupper:()=>g7,base32upper:()=>p7,base32z:()=>x7});var Sl=Lt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),p7=Lt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),m7=Lt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),g7=Lt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),b7=Lt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),y7=Lt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),v7=Lt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),w7=Lt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x7=Lt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var qv={};Nn(qv,{base36:()=>E7,base36upper:()=>C7});var E7=Wo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),C7=Wo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zv={};Nn(zv,{base58btc:()=>ys,base58flickr:()=>_7});var ys=Wo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_7=Wo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $v={};Nn($v,{base64:()=>A7,base64pad:()=>S7,base64url:()=>I7,base64urlpad:()=>P7});var A7=Lt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),S7=Lt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),I7=Lt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),P7=Lt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Gv={};Nn(Gv,{base256emoji:()=>O7});var l3=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),T7=l3.reduce((r,e,t)=>(r[t]=e,r),[]),N7=l3.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function D7(r){return r.reduce((e,t)=>(e+=T7[t],e),"")}function R7(r){let e=[];for(let t of r){let n=N7[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var O7=Al({prefix:"\u{1F680}",name:"base256emoji",encode:D7,decode:R7});var Yv={};Nn(Yv,{sha256:()=>Z7,sha512:()=>X7});var M7=d3,u3=128,k7=127,F7=~k7,B7=Math.pow(2,31);function d3(r,e,t){e=e||[],t=t||0;for(var n=t;r>=B7;)e[t++]=r&255|u3,r/=128;for(;r&F7;)e[t++]=r&255|u3,r>>>=7;return e[t]=r|0,d3.bytes=t-n+1,e}var U7=Kv,L7=128,h3=127;function Kv(r,n){var t=0,n=n||0,i=0,s=n,o,a=r.length;do{if(s>=a)throw Kv.bytes=0,new RangeError("Could not decode varint");o=r[s++],t+=i<28?(o&h3)<<i:(o&h3)*Math.pow(2,i),i+=7}while(o>=L7);return Kv.bytes=s-n,t}var V7=Math.pow(2,7),j7=Math.pow(2,14),H7=Math.pow(2,21),q7=Math.pow(2,28),z7=Math.pow(2,35),$7=Math.pow(2,42),G7=Math.pow(2,49),K7=Math.pow(2,56),W7=Math.pow(2,63),J7=function(r){return r<V7?1:r<j7?2:r<H7?3:r<q7?4:r<z7?5:r<$7?6:r<G7?7:r<K7?8:r<W7?9:10},Y7={encode:M7,decode:U7,encodingLength:J7},Q7=Y7,od=Q7;var ad=(r,e=0)=>[od.decode(r,e),od.decode.bytes],Il=(r,e,t=0)=>(od.encode(r,e,t),e),Pl=r=>od.encodingLength(r);var ac=(r,e)=>{let t=e.byteLength,n=Pl(r),i=n+Pl(t),s=new Uint8Array(i+t);return Il(r,s,0),Il(t,s,n),s.set(e,i),new Tl(r,t,e,s)},f3=r=>{let e=Xs(r),[t,n]=ad(e),[i,s]=ad(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Tl(t,i,o,e)},p3=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&i3(r.bytes,e.bytes),Tl=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Jv=({name:r,code:e,encode:t})=>new Wv(r,e,t),Wv=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ac(this.code,t):t.then(n=>ac(this.code,n))}else throw Error("Unknown type, must be binary type")}};var g3=r=>e=>p(void 0,null,function*(){return new Uint8Array(yield crypto.subtle.digest(r,e))}),Z7=Jv({name:"sha2-256",code:18,encode:g3("SHA-256")}),X7=Jv({name:"sha2-512",code:19,encode:g3("SHA-512")});var Qv={};Nn(Qv,{identity:()=>rF});var b3=0,eF="identity",y3=Xs,tF=r=>ac(b3,y3(r)),rF={code:b3,name:eF,encode:y3,digest:tF};var Bie=new TextEncoder,Uie=new TextDecoder;var im=class r{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:nm,byteLength:nm,code:rm,version:rm,multihash:rm,bytes:rm,_baseCache:nm,asCID:nm})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==ld)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==cF)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=ac(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&p3(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return oF(t,i,e||ys.encoder);default:return aF(t,i,e||Sl.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return uF(/^0\.0/,hF),!!(e&&(e[w3]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:s}=e;return new r(t,n,i,s||v3(t,n,i.bytes))}else if(e!=null&&e[w3]===!0){let{version:t,multihash:n,code:i}=e,s=f3(n);return r.create(t,i,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==ld)throw new Error(`Version 0 CID must use dag-pb (code: ${ld}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=v3(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,ld,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=Xs(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let s=i.subarray(t.multihashSize-t.digestSize),o=new Tl(t.multihashCode,t.digestSize,s,i);return[t.version===0?r.createV0(o):r.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[h,m]=ad(e.subarray(t));return t+=m,h},i=n(),s=ld;if(i===18?(i=0,t=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=t,a=n(),c=n(),l=t+c,u=l-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:u,size:l}}static parse(e,t){let[n,i]=sF(e,t),s=r.decode(i);return s._baseCache.set(n,e),s}},sF=(r,e)=>{switch(r[0]){case"Q":{let t=e||ys;return[ys.prefix,t.decode(`${ys.prefix}${r}`)]}case ys.prefix:{let t=e||ys;return[ys.prefix,t.decode(r)]}case Sl.prefix:{let t=e||Sl;return[Sl.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},oF=(r,e,t)=>{let{prefix:n}=t;if(n!==ys.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let s=t.encode(r).slice(1);return e.set(n,s),s}else return i},aF=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let s=t.encode(r);return e.set(n,s),s}else return i},ld=112,cF=18,v3=(r,e,t)=>{let n=Pl(r),i=n+Pl(e),s=new Uint8Array(i+t.byteLength);return Il(r,s,0),Il(e,s,n),s.set(t,i),s},w3=Symbol.for("@ipld/js-cid/CID"),rm={writable:!1,configurable:!1,enumerable:!0},nm={writable:!1,enumerable:!1,configurable:!1},lF="0.0.0-dev",uF=(r,e)=>{if(r.test(lF))console.warn(e);else throw new Error(e)},hF=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Zv=k(k(k(k(k(k(k(k(k(k({},Bv),Uv),Lv),Vv),jv),Hv),qv),zv),$v),Gv),Gie=k(k({},Yv),Qv);function E3(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var x3=E3("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Xv=E3("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=id(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),dF=k({utf8:x3,"utf-8":x3,hex:Zv.base16,latin1:Xv,ascii:Xv,binary:Xv},Zv),sm=dF;function On(r,e="utf8"){let t=sm[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function Ur(r,e="utf8"){let t=sm[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var p4={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Am=class r{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:n,onTimeout:i}){return r.instance||(r.instance=new l_({projectId:e,chainId:t,enableLogger:n,onTimeout:i})),r.instance}};var Sm={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},mi=JC({providers:k({},Sm),providerIds:k({},Sm)}),Ve={state:mi,subscribeKey(r,e){return ZC(mi,r,e)},subscribeProviders(r){return YC(mi.providers,()=>r(mi.providers))},setProvider(r,e){e&&(mi.providers[r]=QC(e))},getProvider(r){return mi.providers[r]},setProviderId(r,e){e&&(mi.providerIds[r]=e)},getProviderId(r){if(r)return mi.providerIds[r]},reset(){mi.providers=k({},Sm),mi.providerIds=k({},Sm)},resetChain(r){mi.providers[r]=void 0,mi.providerIds[r]=void 0}};var mo=dn(Ha());var b4=dn(Ha()),LU=Object.defineProperty,VU=(r,e,t)=>e in r?LU(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,m4=(r,e,t)=>VU(r,typeof e!="symbol"?e+"":e,t),Im=class extends Oi{constructor(e){super(),this.opts=e,m4(this,"protocol","wc"),m4(this,"version",2)}};var jU=Object.defineProperty,HU=(r,e,t)=>e in r?jU(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qU=(r,e,t)=>HU(r,typeof e!="symbol"?e+"":e,t),Pm=class extends Oi{constructor(e,t){super(),this.core=e,this.logger=t,qU(this,"records",new Map)}},Tm=class{constructor(e,t){this.logger=e,this.core=t}},Nm=class extends Oi{constructor(e,t){super(),this.relayer=e,this.logger=t}},Dm=class extends Oi{constructor(e){super()}},Rm=class{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}};var Om=class extends Oi{constructor(e,t){super(),this.relayer=e,this.logger=t}};var Mm=class extends Oi{constructor(e,t){super(),this.core=e,this.logger=t}};var km=class{constructor(e,t,n){this.core=e,this.logger=t,this.store=n}},Fm=class{constructor(e,t){this.projectId=e,this.logger=t}},Bm=class{constructor(e,t,n){this.core=e,this.logger=t,this.telemetryEnabled=n}},zU=Object.defineProperty,$U=(r,e,t)=>e in r?zU(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g4=(r,e,t)=>$U(r,typeof e!="symbol"?e+"":e,t);var Um=class{constructor(e){this.opts=e,g4(this,"protocol","wc"),g4(this,"version",2)}};var Lm=class{constructor(e){this.client=e}};var me=dn(Cl());var F4=dn(Cl());function GU(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function B4(r,...e){if(!GU(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function y4(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function KU(r,e){B4(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var ql=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var k1=r=>new DataView(r.buffer,r.byteOffset,r.byteLength);function WU(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function U4(r){return typeof r=="string"&&(r=WU(r)),B4(r),r}var q1=class{clone(){return this._cloneInto()}};function JU(r){let e=n=>r().update(U4(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function L4(r=32){if(ql&&typeof ql.getRandomValues=="function")return ql.getRandomValues(new Uint8Array(r));if(ql&&typeof ql.randomBytes=="function")return ql.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function YU(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}var z1=class extends q1{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=k1(this.buffer)}update(e){y4(this);let{view:t,buffer:n,blockLen:i}=this;e=U4(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let c=k1(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){y4(this),KU(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;YU(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=k1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}},Vm=BigInt(2**32-1),$1=BigInt(32);function V4(r,e=!1){return e?{h:Number(r&Vm),l:Number(r>>$1&Vm)}:{h:Number(r>>$1&Vm)|0,l:Number(r&Vm)|0}}function QU(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){let{h:s,l:o}=V4(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}var ZU=(r,e)=>BigInt(r>>>0)<<$1|BigInt(e>>>0),XU=(r,e,t)=>r>>>t,eL=(r,e,t)=>r<<32-t|e>>>t,tL=(r,e,t)=>r>>>t|e<<32-t,rL=(r,e,t)=>r<<32-t|e>>>t,nL=(r,e,t)=>r<<64-t|e>>>t-32,iL=(r,e,t)=>r>>>t-32|e<<64-t,sL=(r,e)=>e,oL=(r,e)=>r,aL=(r,e,t)=>r<<t|e>>>32-t,cL=(r,e,t)=>e<<t|r>>>32-t,lL=(r,e,t)=>e<<t-32|r>>>64-t,uL=(r,e,t)=>r<<t-32|e>>>64-t;function hL(r,e,t,n){let i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}var dL=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),fL=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,pL=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),mL=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,gL=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),bL=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,Re={fromBig:V4,split:QU,toBig:ZU,shrSH:XU,shrSL:eL,rotrSH:tL,rotrSL:rL,rotrBH:nL,rotrBL:iL,rotr32H:sL,rotr32L:oL,rotlSH:aL,rotlSL:cL,rotlBH:lL,rotlBL:uL,add:hL,add3L:dL,add3H:fL,add4L:pL,add4H:mL,add5H:bL,add5L:gL},[yL,vL]=Re.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),ra=new Uint32Array(80),na=new Uint32Array(80),G1=class extends z1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:m,Gh:b,Gl:f,Hh:v,Hl:E}=this;return[e,t,n,i,s,o,a,c,l,u,h,m,b,f,v,E]}set(e,t,n,i,s,o,a,c,l,u,h,m,b,f,v,E){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=b|0,this.Gl=f|0,this.Hh=v|0,this.Hl=E|0}process(e,t){for(let D=0;D<16;D++,t+=4)ra[D]=e.getUint32(t),na[D]=e.getUint32(t+=4);for(let D=16;D<80;D++){let F=ra[D-15]|0,U=na[D-15]|0,L=Re.rotrSH(F,U,1)^Re.rotrSH(F,U,8)^Re.shrSH(F,U,7),B=Re.rotrSL(F,U,1)^Re.rotrSL(F,U,8)^Re.shrSL(F,U,7),M=ra[D-2]|0,V=na[D-2]|0,P=Re.rotrSH(M,V,19)^Re.rotrBH(M,V,61)^Re.shrSH(M,V,6),d=Re.rotrSL(M,V,19)^Re.rotrBL(M,V,61)^Re.shrSL(M,V,6),y=Re.add4L(B,d,na[D-7],na[D-16]),C=Re.add4H(y,L,P,ra[D-7],ra[D-16]);ra[D]=C|0,na[D]=y|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:m,Fh:b,Fl:f,Gh:v,Gl:E,Hh:I,Hl:N}=this;for(let D=0;D<80;D++){let F=Re.rotrSH(h,m,14)^Re.rotrSH(h,m,18)^Re.rotrBH(h,m,41),U=Re.rotrSL(h,m,14)^Re.rotrSL(h,m,18)^Re.rotrBL(h,m,41),L=h&b^~h&v,B=m&f^~m&E,M=Re.add5L(N,U,B,vL[D],na[D]),V=Re.add5H(M,I,F,L,yL[D],ra[D]),P=M|0,d=Re.rotrSH(n,i,28)^Re.rotrBH(n,i,34)^Re.rotrBH(n,i,39),y=Re.rotrSL(n,i,28)^Re.rotrBL(n,i,34)^Re.rotrBL(n,i,39),C=n&s^n&a^s&a,A=i&o^i&c^o&c;I=v|0,N=E|0,v=b|0,E=f|0,b=h|0,f=m|0,{h,l:m}=Re.add(l|0,u|0,V|0,P|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;let w=Re.add3L(P,y,A);n=Re.add3H(w,V,d,C),i=w|0}({h:n,l:i}=Re.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Re.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Re.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Re.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:m}=Re.add(this.Eh|0,this.El|0,h|0,m|0),{h:b,l:f}=Re.add(this.Fh|0,this.Fl|0,b|0,f|0),{h:v,l:E}=Re.add(this.Gh|0,this.Gl|0,v|0,E|0),{h:I,l:N}=Re.add(this.Hh|0,this.Hl|0,I|0,N|0),this.set(n,i,s,o,a,c,l,u,h,m,b,f,v,E,I,N)}roundClean(){ra.fill(0),na.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},wL=JU(()=>new G1);var nw=BigInt(0),j4=BigInt(1),xL=BigInt(2);function iw(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function sw(r){if(!iw(r))throw new Error("Uint8Array expected")}function F1(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}var EL=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function ow(r){sw(r);let e="";for(let t=0;t<r.length;t++)e+=EL[r[t]];return e}function H4(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?nw:BigInt("0x"+r)}var so={_0:48,_9:57,A:65,F:70,a:97,f:102};function v4(r){if(r>=so._0&&r<=so._9)return r-so._0;if(r>=so.A&&r<=so.F)return r-(so.A-10);if(r>=so.a&&r<=so.f)return r-(so.a-10)}function q4(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){let o=v4(r.charCodeAt(s)),a=v4(r.charCodeAt(s+1));if(o===void 0||a===void 0){let c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function CL(r){return H4(ow(r))}function qm(r){return sw(r),H4(ow(Uint8Array.from(r).reverse()))}function z4(r,e){return q4(r.toString(16).padStart(e*2,"0"))}function K1(r,e){return z4(r,e).reverse()}function oo(r,e,t){let n;if(typeof e=="string")try{n=q4(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(iw(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function w4(...r){let e=0;for(let n=0;n<r.length;n++){let i=r[n];sw(i),e+=i.length}let t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let s=r[n];t.set(s,i),i+=s.length}return t}var B1=r=>typeof r=="bigint"&&nw<=r;function _L(r,e,t){return B1(r)&&B1(e)&&B1(t)&&e<=r&&r<t}function gd(r,e,t,n){if(!_L(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function AL(r){let e;for(e=0;r>nw;r>>=j4,e+=1);return e}var SL=r=>(xL<<BigInt(r-1))-j4,IL={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||iw(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function aw(r,e,t={}){let n=(i,s,o)=>{let a=IL[s];if(typeof a!="function")throw new Error("invalid validator function");let c=r[i];if(!(o&&c===void 0)&&!a(c,r))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(let[i,s]of Object.entries(e))n(i,s,!1);for(let[i,s]of Object.entries(t))n(i,s,!0);return r}function x4(r){let e=new WeakMap;return(t,...n)=>{let i=e.get(t);if(i!==void 0)return i;let s=r(t,...n);return e.set(t,s),s}}var qr=BigInt(0),Jt=BigInt(1),gc=BigInt(2),PL=BigInt(3),W1=BigInt(4),E4=BigInt(5),C4=BigInt(8);function Tr(r,e){let t=r%e;return t>=qr?t:e+t}function TL(r,e,t){if(e<qr)throw new Error("invalid exponent, negatives unsupported");if(t<=qr)throw new Error("invalid modulus");if(t===Jt)return qr;let n=Jt;for(;e>qr;)e&Jt&&(n=n*r%t),r=r*r%t,e>>=Jt;return n}function Ts(r,e,t){let n=r;for(;e-- >qr;)n*=n,n%=t;return n}function _4(r,e){if(r===qr)throw new Error("invert: expected non-zero number");if(e<=qr)throw new Error("invert: expected positive modulus, got "+e);let t=Tr(r,e),n=e,i=qr,s=Jt;for(;t!==qr;){let o=n/t,a=n%t,c=i-s*o;n=t,t=a,i=s,s=c}if(n!==Jt)throw new Error("invert: does not exist");return Tr(i,e)}function NL(r){let e=(r-Jt)/gc,t,n,i;for(t=r-Jt,n=0;t%gc===qr;t/=gc,n++);for(i=gc;i<r&&TL(i,e,r)!==r-Jt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){let o=(r+Jt)/W1;return function(a,c){let l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}let s=(t+Jt)/gc;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),t),u=o.pow(a,s),h=o.pow(a,t);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let m=1;for(let f=o.sqr(h);m<c&&!o.eql(f,o.ONE);m++)f=o.sqr(f);let b=o.pow(l,Jt<<BigInt(c-m-1));l=o.sqr(b),u=o.mul(u,b),h=o.mul(h,l),c=m}return u}}function DL(r){if(r%W1===PL){let e=(r+Jt)/W1;return function(t,n){let i=t.pow(n,e);if(!t.eql(t.sqr(i),n))throw new Error("Cannot find square root");return i}}if(r%C4===E4){let e=(r-E4)/C4;return function(t,n){let i=t.mul(n,gc),s=t.pow(i,e),o=t.mul(n,s),a=t.mul(t.mul(o,gc),s),c=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(c),n))throw new Error("Cannot find square root");return c}}return NL(r)}var RL=(r,e)=>(Tr(r,e)&Jt)===Jt,OL=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ML(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=OL.reduce((n,i)=>(n[i]="function",n),e);return aw(r,t)}function kL(r,e,t){if(t<qr)throw new Error("invalid exponent, negatives unsupported");if(t===qr)return r.ONE;if(t===Jt)return e;let n=r.ONE,i=e;for(;t>qr;)t&Jt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Jt;return n}function FL(r,e){let t=new Array(e.length),n=e.reduce((s,o,a)=>r.is0(o)?s:(t[a]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,a)=>r.is0(o)?s:(t[a]=r.mul(s,t[a]),r.mul(s,o)),i),t}function $4(r,e){let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function G4(r,e,t=!1,n={}){if(r<=qr)throw new Error("invalid field: expected ORDER > 0, got "+r);let{nBitLength:i,nByteLength:s}=$4(r,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o,a=Object.freeze({ORDER:r,isLE:t,BITS:i,BYTES:s,MASK:SL(i),ZERO:qr,ONE:Jt,create:c=>Tr(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return qr<=c&&c<r},is0:c=>c===qr,isOdd:c=>(c&Jt)===Jt,neg:c=>Tr(-c,r),eql:(c,l)=>c===l,sqr:c=>Tr(c*c,r),add:(c,l)=>Tr(c+l,r),sub:(c,l)=>Tr(c-l,r),mul:(c,l)=>Tr(c*l,r),pow:(c,l)=>kL(a,c,l),div:(c,l)=>Tr(c*_4(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_4(c,r),sqrt:n.sqrt||(c=>(o||(o=DL(r)),o(a,c))),invertBatch:c=>FL(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?K1(c,s):z4(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return t?qm(c):CL(c)}});return Object.freeze(a)}var A4=BigInt(0),jm=BigInt(1);function U1(r,e){let t=e.negate();return r?t:e}function K4(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function L1(r,e){K4(r,e);let t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function BL(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function UL(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}var V1=new WeakMap,W4=new WeakMap;function j1(r){return W4.get(r)||1}function LL(r,e){return{constTimeNegate:U1,hasPrecomputes(t){return j1(t)!==1},unsafeLadder(t,n,i=r.ZERO){let s=t;for(;n>A4;)n&jm&&(i=i.add(s)),s=s.double(),n>>=jm;return i},precomputeWindow(t,n){let{windows:i,windowSize:s}=L1(n,e),o=[],a=t,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(t,n,i){let{windows:s,windowSize:o}=L1(t,e),a=r.ZERO,c=r.BASE,l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let m=0;m<s;m++){let b=m*o,f=Number(i&l);i>>=h,f>o&&(f-=u,i+=jm);let v=b,E=b+Math.abs(f)-1,I=m%2!==0,N=f<0;f===0?c=c.add(U1(I,n[v])):a=a.add(U1(N,n[E]))}return{p:a,f:c}},wNAFUnsafe(t,n,i,s=r.ZERO){let{windows:o,windowSize:a}=L1(t,e),c=BigInt(2**t-1),l=2**t,u=BigInt(t);for(let h=0;h<o;h++){let m=h*a;if(i===A4)break;let b=Number(i&c);if(i>>=u,b>a&&(b-=l,i+=jm),b===0)continue;let f=n[m+Math.abs(b)-1];b<0&&(f=f.negate()),s=s.add(f)}return s},getPrecomputes(t,n,i){let s=V1.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&V1.set(n,i(s))),s},wNAFCached(t,n,i){let s=j1(t);return this.wNAF(s,this.getPrecomputes(s,t,i),n)},wNAFCachedUnsafe(t,n,i,s){let o=j1(t);return o===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),n,s)},setWindowSize(t,n){K4(n,e),W4.set(t,n),V1.delete(t)}}}function VL(r,e,t,n){if(BL(t,r),UL(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");let i=r.ZERO,s=AL(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o,u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let b=0;b<n.length;b++){let f=n[b],v=Number(f>>BigInt(h)&BigInt(a));c[v]=c[v].add(t[b])}let m=i;for(let b=c.length-1,f=i;b>0;b--)f=f.add(c[b]),m=m.add(f);if(u=u.add(m),h!==0)for(let b=0;b<o;b++)u=u.double()}return u}function jL(r){return ML(r.Fp),aw(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(de(k(k({},$4(r.n,r.nBitLength)),r),{p:r.Fp.ORDER}))}var Li=BigInt(0),Bn=BigInt(1),Hm=BigInt(2),HL=BigInt(8),qL={zip215:!0};function zL(r){let e=jL(r);return aw(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze(k({},e))}function $L(r){let e=zL(r),{Fp:t,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=Hm<<BigInt(a*8)-Bn,u=t.create,h=G4(e.n,e.nBitLength),m=e.uvRatio||((w,x)=>{try{return{isValid:!0,value:t.sqrt(w*t.inv(x))}}catch{return{isValid:!1,value:Li}}}),b=e.adjustScalarBytes||(w=>w),f=e.domain||((w,x,T)=>{if(F1("phflag",T),x.length||T)throw new Error("Contexts/pre-hash are not supported");return w});function v(w,x){gd("coordinate "+w,x,Li,l)}function E(w){if(!(w instanceof D))throw new Error("ExtendedPoint expected")}let I=x4((w,x)=>{let{ex:T,ey:_,ez:g}=w,S=w.is0();x==null&&(x=S?HL:t.inv(g));let q=u(T*x),$=u(_*x),W=u(g*x);if(S)return{x:Li,y:Bn};if(W!==Bn)throw new Error("invZ was invalid");return{x:q,y:$}}),N=x4(w=>{let{a:x,d:T}=e;if(w.is0())throw new Error("bad point: ZERO");let{ex:_,ey:g,ez:S,et:q}=w,$=u(_*_),W=u(g*g),Z=u(S*S),ce=u(Z*Z),fe=u($*x),Te=u(Z*u(fe+W)),be=u(ce+u(T*u($*W)));if(Te!==be)throw new Error("bad point: equation left != right (1)");let pe=u(_*g),Nt=u(S*q);if(pe!==Nt)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(x,T,_,g){this.ex=x,this.ey=T,this.ez=_,this.et=g,v("x",x),v("y",T),v("z",_),v("t",g),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof D)throw new Error("extended point not allowed");let{x:T,y:_}=x||{};return v("x",T),v("y",_),new D(T,_,Bn,u(T*_))}static normalizeZ(x){let T=t.invertBatch(x.map(_=>_.ez));return x.map((_,g)=>_.toAffine(T[g])).map(D.fromAffine)}static msm(x,T){return VL(D,h,x,T)}_setWindowSize(x){L.setWindowSize(this,x)}assertValidity(){N(this)}equals(x){E(x);let{ex:T,ey:_,ez:g}=this,{ex:S,ey:q,ez:$}=x,W=u(T*$),Z=u(S*g),ce=u(_*$),fe=u(q*g);return W===Z&&ce===fe}is0(){return this.equals(D.ZERO)}negate(){return new D(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:x}=e,{ex:T,ey:_,ez:g}=this,S=u(T*T),q=u(_*_),$=u(Hm*u(g*g)),W=u(x*S),Z=T+_,ce=u(u(Z*Z)-S-q),fe=W+q,Te=fe-$,be=W-q,pe=u(ce*Te),Nt=u(fe*be),je=u(ce*be),Me=u(Te*fe);return new D(pe,Nt,Me,je)}add(x){E(x);let{a:T,d:_}=e,{ex:g,ey:S,ez:q,et:$}=this,{ex:W,ey:Z,ez:ce,et:fe}=x;if(T===BigInt(-1)){let ih=u((S-g)*(Z+W)),Et=u((S+g)*(Z-W)),wt=u(Et-ih);if(wt===Li)return this.double();let sh=u(q*Hm*fe),Ct=u($*Hm*ce),_t=Ct+sh,oh=Et+ih,At=Ct-sh,Ot=u(_t*wt),Cf=u(oh*At),Mt=u(_t*At),kt=u(wt*oh);return new D(Ot,Cf,kt,Mt)}let Te=u(g*W),be=u(S*Z),pe=u($*_*fe),Nt=u(q*ce),je=u((g+S)*(W+Z)-Te-be),Me=Nt-pe,Tn=Nt+pe,Je=u(be-T*Te),ct=u(je*Me),ka=u(Tn*Je),Dt=u(je*Je),Rt=u(Me*Tn);return new D(ct,ka,Rt,Dt)}subtract(x){return this.add(x.negate())}wNAF(x){return L.wNAFCached(this,x,D.normalizeZ)}multiply(x){let T=x;gd("scalar",T,Bn,n);let{p:_,f:g}=this.wNAF(T);return D.normalizeZ([_,g])[0]}multiplyUnsafe(x,T=D.ZERO){let _=x;return gd("scalar",_,Li,n),_===Li?U:this.is0()||_===Bn?this:L.wNAFCachedUnsafe(this,_,D.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return L.unsafeLadder(this,n).is0()}toAffine(x){return I(this,x)}clearCofactor(){let{h:x}=e;return x===Bn?this:this.multiplyUnsafe(x)}static fromHex(x,T=!1){let{d:_,a:g}=e,S=t.BYTES;x=oo("pointHex",x,S),F1("zip215",T);let q=x.slice(),$=x[S-1];q[S-1]=$&-129;let W=qm(q),Z=T?l:t.ORDER;gd("pointHex.y",W,Li,Z);let ce=u(W*W),fe=u(ce-Bn),Te=u(_*ce-g),{isValid:be,value:pe}=m(fe,Te);if(!be)throw new Error("Point.fromHex: invalid y coordinate");let Nt=(pe&Bn)===Bn,je=($&128)!==0;if(!T&&pe===Li&&je)throw new Error("Point.fromHex: x=0 and x_0=1");return je!==Nt&&(pe=u(-pe)),D.fromAffine({x:pe,y:W})}static fromPrivateKey(x){return V(x).point}toRawBytes(){let{x,y:T}=this.toAffine(),_=K1(T,t.BYTES);return _[_.length-1]|=x&Bn?128:0,_}toHex(){return ow(this.toRawBytes())}}D.BASE=new D(e.Gx,e.Gy,Bn,u(e.Gx*e.Gy)),D.ZERO=new D(Li,Bn,Bn,Li);let{BASE:F,ZERO:U}=D,L=LL(D,a*8);function B(w){return Tr(w,n)}function M(w){return B(qm(w))}function V(w){let x=t.BYTES;w=oo("private key",w,x);let T=oo("hashed private key",s(w),2*x),_=b(T.slice(0,x)),g=T.slice(x,2*x),S=M(_),q=F.multiply(S),$=q.toRawBytes();return{head:_,prefix:g,scalar:S,point:q,pointBytes:$}}function P(w){return V(w).pointBytes}function d(w=new Uint8Array,...x){let T=w4(...x);return M(s(f(T,oo("context",w),!!i)))}function y(w,x,T={}){w=oo("message",w),i&&(w=i(w));let{prefix:_,scalar:g,pointBytes:S}=V(x),q=d(T.context,_,w),$=F.multiply(q).toRawBytes(),W=d(T.context,$,S,w),Z=B(q+W*g);gd("signature.s",Z,Li,n);let ce=w4($,K1(Z,t.BYTES));return oo("result",ce,t.BYTES*2)}let C=qL;function A(w,x,T,_=C){let{context:g,zip215:S}=_,q=t.BYTES;w=oo("signature",w,2*q),x=oo("message",x),T=oo("publicKey",T,q),S!==void 0&&F1("zip215",S),i&&(x=i(x));let $=qm(w.slice(q,2*q)),W,Z,ce;try{W=D.fromHex(T,S),Z=D.fromHex(w.slice(0,q),S),ce=F.multiplyUnsafe($)}catch{return!1}if(!S&&W.isSmallOrder())return!1;let fe=d(g,Z.toRawBytes(),W.toRawBytes(),x);return Z.add(W.multiplyUnsafe(fe)).subtract(ce).clearCofactor().equals(D.ZERO)}return F._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:y,verify:A,ExtendedPoint:D,utils:{getExtendedPublicKey:V,randomPrivateKey:()=>o(t.BYTES),precompute(w=8,x=D.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);var cw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),S4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);var GL=BigInt(1),I4=BigInt(2);BigInt(3);var KL=BigInt(5),WL=BigInt(8);function JL(r){let e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=cw,o=r*r%s*r%s,a=Ts(o,I4,s)*o%s,c=Ts(a,GL,s)*r%s,l=Ts(c,KL,s)*c%s,u=Ts(l,e,s)*l%s,h=Ts(u,t,s)*u%s,m=Ts(h,n,s)*h%s,b=Ts(m,i,s)*m%s,f=Ts(b,i,s)*m%s,v=Ts(f,e,s)*l%s;return{pow_p_5_8:Ts(v,I4,s)*r%s,b2:o}}function YL(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function QL(r,e){let t=cw,n=Tr(e*e*e,t),i=Tr(n*n*e,t),s=JL(r*i).pow_p_5_8,o=Tr(r*n*s,t),a=Tr(e*o*o,t),c=o,l=Tr(o*S4,t),u=a===r,h=a===Tr(-r,t),m=a===Tr(-r*S4,t);return u&&(o=c),(h||m)&&(o=l),RL(o,t)&&(o=Tr(-o,t)),{isValid:u||h,value:o}}var ZL=G4(cw,void 0,!0),XL={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ZL,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:WL,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:wL,randomBytes:L4,adjustScalarBytes:YL,uvRatio:QL},J4=$L(XL),eV="EdDSA",tV="JWT",zm=".",Gm="base64url",Y4="utf8",Q4="utf8",rV=":",nV="did",iV="key",P4="base58btc",sV="z",oV="K36";var aV=32;function lw(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Z4(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lw(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function X4(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));let t=Z4(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return lw(t)}function cV(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var a=r.length,c=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var v=0,E=0,I=0,N=f.length;I!==N&&f[I]===0;)I++,v++;for(var D=(N-I)*u+1>>>0,F=new Uint8Array(D);I!==N;){for(var U=f[I],L=0,B=D-1;(U!==0||L<E)&&B!==-1;B--,L++)U+=256*F[B]>>>0,F[B]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");E=L,I++}for(var M=D-E;M!==D&&F[M]===0;)M++;for(var V=c.repeat(v);M<D;++M)V+=r.charAt(F[M]);return V}function m(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var v=0;if(f[v]!==" "){for(var E=0,I=0;f[v]===c;)E++,v++;for(var N=(f.length-v)*l+1>>>0,D=new Uint8Array(N);f[v];){var F=t[f.charCodeAt(v)];if(F===255)return;for(var U=0,L=N-1;(F!==0||U<I)&&L!==-1;L--,U++)F+=a*D[L]>>>0,D[L]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");I=U,v++}if(f[v]!==" "){for(var B=N-I;B!==N&&D[B]===0;)B++;for(var M=new Uint8Array(E+(N-B)),V=E;B!==N;)M[V++]=D[B++];return M}}}function b(f){var v=m(f);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:m,decode:b}}var lV=cV,uV=lV,e8=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},hV=r=>new TextEncoder().encode(r),dV=r=>new TextDecoder().decode(r),J1=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Y1=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return t8(this,e)}},Q1=class{constructor(e){this.decoders=e}or(e){return t8(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},t8=(r,e)=>new Q1(k(k({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e})),Z1=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new J1(e,t,n),this.decoder=new Y1(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Km=({name:r,prefix:e,encode:t,decode:n})=>new Z1(r,e,t,n),bd=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=uV(t,e);return Km({prefix:r,name:e,encode:n,decode:s=>e8(i(s))})},fV=(r,e,t,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=r.length;for(;r[s-1]==="=";)--s;let o=new Uint8Array(s*t/8|0),a=0,c=0,l=0;for(let u=0;u<s;++u){let h=i[r[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},pV=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,s="",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,s+=e[i&a>>o];if(o&&(s+=e[i&a<<t-o]),n)for(;s.length*t&7;)s+="=";return s},nn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Km({prefix:e,name:r,encode(i){return pV(i,n,t)},decode(i){return fV(i,n,t,r)}}),mV=Km({prefix:"\0",name:"identity",encode:r=>dV(r),decode:r=>hV(r)}),gV=Object.freeze({__proto__:null,identity:mV}),bV=nn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),yV=Object.freeze({__proto__:null,base2:bV}),vV=nn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),wV=Object.freeze({__proto__:null,base8:vV}),xV=bd({prefix:"9",name:"base10",alphabet:"0123456789"}),EV=Object.freeze({__proto__:null,base10:xV}),CV=nn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_V=nn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),AV=Object.freeze({__proto__:null,base16:CV,base16upper:_V}),SV=nn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IV=nn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),PV=nn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),TV=nn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),NV=nn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),DV=nn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),RV=nn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),OV=nn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),MV=nn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),kV=Object.freeze({__proto__:null,base32:SV,base32upper:IV,base32pad:PV,base32padupper:TV,base32hex:NV,base32hexupper:DV,base32hexpad:RV,base32hexpadupper:OV,base32z:MV}),FV=bd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BV=bd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),UV=Object.freeze({__proto__:null,base36:FV,base36upper:BV}),LV=bd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),VV=bd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),jV=Object.freeze({__proto__:null,base58btc:LV,base58flickr:VV}),HV=nn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qV=nn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zV=nn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$V=nn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),GV=Object.freeze({__proto__:null,base64:HV,base64pad:qV,base64url:zV,base64urlpad:$V}),r8=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),KV=r8.reduce((r,e,t)=>(r[t]=e,r),[]),WV=r8.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function JV(r){return r.reduce((e,t)=>(e+=KV[t],e),"")}function YV(r){let e=[];for(let t of r){let n=WV[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var QV=Km({prefix:"\u{1F680}",name:"base256emoji",encode:JV,decode:YV}),ZV=Object.freeze({__proto__:null,base256emoji:QV}),XV=n8,T4=128,ej=127,tj=~ej,rj=Math.pow(2,31);function n8(r,e,t){e=e||[],t=t||0;for(var n=t;r>=rj;)e[t++]=r&255|T4,r/=128;for(;r&tj;)e[t++]=r&255|T4,r>>>=7;return e[t]=r|0,n8.bytes=t-n+1,e}var nj=X1,ij=128,N4=127;function X1(r,n){var t=0,n=n||0,i=0,s=n,o,a=r.length;do{if(s>=a)throw X1.bytes=0,new RangeError("Could not decode varint");o=r[s++],t+=i<28?(o&N4)<<i:(o&N4)*Math.pow(2,i),i+=7}while(o>=ij);return X1.bytes=s-n,t}var sj=Math.pow(2,7),oj=Math.pow(2,14),aj=Math.pow(2,21),cj=Math.pow(2,28),lj=Math.pow(2,35),uj=Math.pow(2,42),hj=Math.pow(2,49),dj=Math.pow(2,56),fj=Math.pow(2,63),pj=function(r){return r<sj?1:r<oj?2:r<aj?3:r<cj?4:r<lj?5:r<uj?6:r<hj?7:r<dj?8:r<fj?9:10},mj={encode:XV,decode:nj,encodingLength:pj},i8=mj,D4=(r,e,t=0)=>(i8.encode(r,e,t),e),R4=r=>i8.encodingLength(r),ew=(r,e)=>{let t=e.byteLength,n=R4(r),i=n+R4(t),s=new Uint8Array(i+t);return D4(r,s,0),D4(t,s,n),s.set(e,i),new tw(r,t,e,s)},tw=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}},s8=({name:r,code:e,encode:t})=>new rw(r,e,t),rw=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ew(this.code,t):t.then(n=>ew(this.code,n))}else throw Error("Unknown type, must be binary type")}},o8=r=>e=>p(void 0,null,function*(){return new Uint8Array(yield crypto.subtle.digest(r,e))}),gj=s8({name:"sha2-256",code:18,encode:o8("SHA-256")}),bj=s8({name:"sha2-512",code:19,encode:o8("SHA-512")}),yj=Object.freeze({__proto__:null,sha256:gj,sha512:bj}),a8=0,vj="identity",c8=e8,wj=r=>ew(a8,c8(r)),xj={code:a8,name:vj,encode:c8,digest:wj},Ej=Object.freeze({__proto__:null,identity:xj});new TextEncoder,new TextDecoder;var O4=k(k(k(k(k(k(k(k(k(k({},gV),yV),wV),EV),AV),kV),UV),jV),GV),ZV);k(k({},yj),Ej);function l8(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var M4=l8("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),H1=l8("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Z4(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),u8=k({utf8:M4,"utf-8":M4,hex:O4.base16,latin1:H1,ascii:H1,binary:H1},O4);function Wm(r,e="utf8"){let t=u8[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function zl(r,e="utf8"){let t=u8[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lw(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function k4(r){return ds(Wm(zl(r,Gm),Y4))}function $m(r){return Wm(zl(Ks(r),Y4),Gm)}function uw(r){let e=zl(oV,P4),t=sV+Wm(X4([e,r]),P4);return[nV,iV,t].join(rV)}function Cj(r){return Wm(r,Gm)}function _j(r){return zl(r,Gm)}function Aj(r){return zl([$m(r.header),$m(r.payload)].join(zm),Q4)}function Sj(r){return[$m(r.header),$m(r.payload),Cj(r.signature)].join(zm)}function yd(r){let e=r.split(zm),t=k4(e[0]),n=k4(e[1]),i=_j(e[2]),s=zl(e.slice(0,2).join(zm),Q4);return{header:t,payload:n,signature:i,data:s}}function hw(r=L4(aV)){let e=J4.getPublicKey(r);return{secretKey:X4([r,e]),publicKey:e}}function h8(s,o,a,c){return p(this,arguments,function*(r,e,t,n,i=(0,F4.fromMiliseconds)(Date.now())){let l={alg:eV,typ:tV},u=uw(n.publicKey),h=i+t,m={iss:u,sub:r,aud:e,iat:i,exp:h},b=Aj({header:l,payload:m}),f=J4.sign(b,n.secretKey.slice(0,32));return Sj({header:l,payload:m,signature:f})})}var co=dn(Cl()),lo=dn(Zp()),U8=dn(t3());function d8(r){let e=h_(`0x${r.substring(4)}`).substring(26);return d_(`0x${e}`)}function p8(t){return p(this,arguments,function*({hash:r,signature:e}){let n=ty(r)?r:ny(r),{secp256k1:i}=yield import("./chunk-JNFWVETK.js");return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){let{r:u,s:h,v:m,yParity:b}=e,f=Number(b??m),v=f8(f);return new i.Signature(ry(u),ry(h)).addRecoveryBit(v)}let a=ty(e)?e:ny(e),c=u_(`0x${a.slice(130)}`),l=f8(c);return i.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(l)})().recoverPublicKey(n.substring(2)).toHex(!1)}`})}function f8(r){if(r===0||r===1)return r;if(r===27)return 0;if(r===28)return 1;throw new Error("Invalid yParityOrV value")}function dw(t){return p(this,arguments,function*({hash:r,signature:e}){return d8(yield p8({hash:r,signature:e}))})}var L8=dn(f4());var Pj=":";function la(r){let[e,t]=r.split(Pj);return{namespace:e,reference:t}}function V8(r,e){return r.includes(":")?[r]:e.chains||[]}var Tj="ReactNative",Un={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};var Nj="js";function _d(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function uo(){return!(0,lo.getDocument)()&&!!(0,lo.getNavigator)()&&navigator.product===Tj}function j8(){return uo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function H8(){return uo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ql(){return!_d()&&!!(0,lo.getNavigator)()&&!!(0,lo.getDocument)()}function Ad(){return uo()?Un.reactNative:_d()?Un.node:Ql()?Un.browser:Un.unknown}function Pw(){var r;try{return uo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function Dj(r,e){let t=new URLSearchParams(r);for(let n of Object.keys(e).sort())if(e.hasOwnProperty(n)){let i=e[n];i!==void 0&&t.set(n,i)}return t.toString()}function eg(){return(0,U8.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function Rj(){if(Ad()===Un.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){let{OS:t,Version:n}=global.Platform;return[t,n].join("-")}let r=XS();if(r===null)return"unknown";let e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function Oj(){var r;let e=Ad();return e===Un.browser?[e,((r=(0,lo.getLocation)())==null?void 0:r.host)||"unknown"].join(":"):e}function Tw(r,e,t){let n=Rj(),i=Oj();return[[r,e].join("-"),[Nj,t].join("-"),n,i].join("/")}function q8({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){let l=t.split("?"),u=Tw(r,e,n),h={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},m=Dj(l[1]||"",h);return l[0]+"?"+m}function bc(r,e){return r.filter(t=>e.includes(t)).length===r.length}function tg(r){return Object.fromEntries(r.entries())}function rg(r){return new Map(Object.entries(r))}function ho(r=co.FIVE_MINUTES,e){let t=(0,co.toMiliseconds)(r||co.FIVE_MINUTES),n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{let l=new Error(e);o=Promise.reject(l),c(l)},t),n=a,i=c})}}function fo(r,e,t){return new Promise((n,i)=>p(this,null,function*(){let s=setTimeout(()=>i(new Error(t)),e);try{let o=yield r;n(o)}catch(o){i(o)}clearTimeout(s)}))}function z8(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function $8(r){return z8("topic",r)}function G8(r){return z8("id",r)}function ng(r){let[e,t]=r.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")n.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))n.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return n}function Yt(r,e){return(0,co.fromMiliseconds)((e||Date.now())+(0,co.toMiliseconds)(r))}function Ds(r){return Date.now()>=(0,co.toMiliseconds)(r)}function Xe(r,e){return`${r}${e?`:${e}`:""}`}function Sd(r=[],e=[]){return[...new Set([...r,...e])]}function K8(n){return p(this,arguments,function*({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;let s=typeof t=="string"?JSON.parse(t):t,o=s?.href;if(typeof o!="string")return;let a=Mj(o,r,e),c=Ad();if(c===Un.browser){if(!((i=(0,lo.getDocument)())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}kj(a)}else c===Un.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&(yield global.Linking.openURL(a))}catch(s){console.error(s)}})}function Mj(r,e,t){let n=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let i=`${r}`;if(r.startsWith("https://t.me")){let s=r.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Uj(n,!0)}`}else i=`${i}/wc?${n}`;return i}function kj(r){let e="_self";Bj()?e="_top":(Fj()||r.startsWith("https://")||r.startsWith("http://"))&&(e="_blank"),window.open(r,e,"noreferrer noopener")}function W8(r,e){return p(this,null,function*(){let t="";try{if(Ql()&&(t=localStorage.getItem(e),t))return t;t=yield r.getItem(e)}catch(n){console.error(n)}return t})}function Nw(r,e){if(!r.includes(e))return null;let t=r.split(/([&,?,=])/),n=t.indexOf(e);return t[n+2]}function Dw(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{let e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function Id(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function Fj(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Bj(){try{return window.self!==window.top}catch{return!1}}function Uj(r,e=!1){let t=Buffer.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function J8(r){return Buffer.from(r,"base64").toString("utf-8")}function Y8(r){return new Promise(e=>setTimeout(e,r))}function xd(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Lj(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ig(r,...e){if(!Lj(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Rw(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");xd(r.outputLen),xd(r.blockLen)}function Wl(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Q8(r,e){ig(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}var Jm=BigInt(2**32-1),m8=BigInt(32);function Vj(r,e=!1){return e?{h:Number(r&Jm),l:Number(r>>m8&Jm)}:{h:Number(r>>m8&Jm)|0,l:Number(r&Jm)|0}}function jj(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){let{h:s,l:o}=Vj(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}var Hj=(r,e,t)=>r<<t|e>>>32-t,qj=(r,e,t)=>e<<t|r>>>32-t,zj=(r,e,t)=>e<<t-32|r>>>64-t,$j=(r,e,t)=>r<<t-32|e>>>64-t,$l=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Gj(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function fw(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ns(r,e){return r<<32-e|r>>>e}var g8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Kj(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function b8(r){for(let e=0;e<r.length;e++)r[e]=Kj(r[e])}function Wj(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function Jl(r){return typeof r=="string"&&(r=Wj(r)),ig(r),r}var Ed=class{clone(){return this._cloneInto()}};function Z8(r){let e=n=>r().update(Jl(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Pd(r=32){if($l&&typeof $l.getRandomValues=="function")return $l.getRandomValues(new Uint8Array(r));if($l&&typeof $l.randomBytes=="function")return $l.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}var X8=[],e6=[],t6=[],Jj=BigInt(0),vd=BigInt(1),Yj=BigInt(2),Qj=BigInt(7),Zj=BigInt(256),Xj=BigInt(113);for(let r=0,e=vd,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],X8.push(2*(5*n+t)),e6.push((r+1)*(r+2)/2%64);let i=Jj;for(let s=0;s<7;s++)e=(e<<vd^(e>>Qj)*Xj)%Zj,e&Yj&&(i^=vd<<(vd<<BigInt(s))-vd);t6.push(i)}var[eH,tH]=jj(t6,!0),y8=(r,e,t)=>t>32?zj(r,e,t):Hj(r,e,t),v8=(r,e,t)=>t>32?$j(r,e,t):qj(r,e,t);function rH(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=y8(l,u,1)^t[a],m=v8(l,u,1)^t[a+1];for(let b=0;b<50;b+=10)r[o+b]^=h,r[o+b+1]^=m}let i=r[2],s=r[3];for(let o=0;o<24;o++){let a=e6[o],c=y8(i,s,a),l=v8(i,s,a),u=X8[o];i=r[u],s=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=eH[n],r[1]^=tH[n]}t.fill(0)}var vw=class r extends Ed{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,xd(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Gj(this.state)}keccak(){g8||b8(this.state32),rH(this.state32,this.rounds),g8||b8(this.state32),this.posOut=0,this.pos=0}update(e){Wl(this);let{blockLen:t,state:n}=this;e=Jl(e);let i=e.length;for(let s=0;s<i;){let o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Wl(this,!1),ig(e),this.finish();let t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return xd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Q8(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new r(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}},nH=(r,e,t)=>Z8(()=>new vw(e,r,t)),iH=nH(1,136,256/8),sH="https://rpc.walletconnect.org/v1";function r6(r){let e=`Ethereum Signed Message:
${r.length}`,t=new TextEncoder().encode(e+r);return"0x"+Buffer.from(iH(t)).toString("hex")}function oH(r,e,t,n,i,s){return p(this,null,function*(){switch(t.t){case"eip191":return yield aH(r,e,t.s);case"eip1271":return yield cH(r,e,t.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}})}function aH(r,e,t){return p(this,null,function*(){return(yield dw({hash:r6(e),signature:t})).toLowerCase()===r.toLowerCase()})}function cH(r,e,t,n,i,s){return p(this,null,function*(){let o=la(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{let a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=t.substring(2),h=r6(e).substring(2),m=a+h+c+l+u,b=yield fetch(`${s||sH}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:lH(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:m},"latest"]})}),{result:f}=yield b.json();return f?f.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}})}function lH(){return Date.now()+Math.floor(Math.random()*1e3)}function n6(r){let e=atob(r),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);let n=t[0];if(n===0)throw new Error("No signatures found");let i=1+n*64;if(t.length<i)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");let s=Buffer.from(r,"base64").slice(1,65);return em.encode(s)}var uH=Object.defineProperty,hH=Object.defineProperties,dH=Object.getOwnPropertyDescriptors,w8=Object.getOwnPropertySymbols,fH=Object.prototype.hasOwnProperty,pH=Object.prototype.propertyIsEnumerable,x8=(r,e,t)=>e in r?uH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mH=(r,e)=>{for(var t in e||(e={}))fH.call(e,t)&&x8(r,t,e[t]);if(w8)for(var t of w8(e))pH.call(e,t)&&x8(r,t,e[t]);return r},gH=(r,e)=>hH(r,dH(e)),bH="did:pkh:",Ow=r=>r?.split(":"),yH=r=>{let e=r&&Ow(r);if(e)return r.includes(bH)?e[3]:e[1]},sg=r=>{let e=r&&Ow(r);if(e)return e[2]+":"+e[3]},Td=r=>{let e=r&&Ow(r);if(e)return e.pop()};function Mw(r){return p(this,null,function*(){let{cacao:e,projectId:t}=r,{s:n,p:i}=e,s=kw(i,i.iss),o=Td(i.iss);return yield oH(o,s,n,sg(i.iss),t)})}var kw=(r,e)=>{let t=`${r.domain} wants you to sign in with your Ethereum account:`,n=Td(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=r.statement||void 0,s=`URI: ${r.aud||r.uri}`,o=`Version: ${r.version}`,a=`Chain ID: ${yH(e)}`,c=`Nonce: ${r.nonce}`,l=`Issued At: ${r.iat}`,u=r.exp?`Expiration Time: ${r.exp}`:void 0,h=r.nbf?`Not Before: ${r.nbf}`:void 0,m=r.requestId?`Request ID: ${r.requestId}`:void 0,b=r.resources?`Resources:${r.resources.map(v=>`
- ${v}`).join("")}`:void 0,f=Nd(r.resources);if(f){let v=Cd(f);i=AH(i,v)}return[t,n,"",i,"",s,o,a,c,l,u,h,m,b].filter(v=>v!=null).join(`
`)};function vH(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function wH(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function yc(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");let e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{let n=r.att[t];if(Array.isArray(n))throw new Error(`Resource must be an object: ${t}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(n).forEach(i=>{let s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function xH(r,e,t,n={}){return t?.sort((i,s)=>i.localeCompare(s)),{att:{[r]:EH(e,t,n)}}}function EH(r,e,t={}){e=e?.sort((i,s)=>i.localeCompare(s));let n=e.map(i=>({[`${r}/${i}`]:[t]}));return Object.assign({},...n)}function i6(r){return yc(r),`urn:recap:${vH(r).replace(/=/g,"")}`}function Cd(r){let e=wH(r.replace("urn:recap:",""));return yc(e),e}function s6(r,e,t){let n=xH(r,e,t);return i6(n)}function CH(r){return r&&r.includes("urn:recap:")}function o6(r,e){let t=Cd(r),n=Cd(e),i=_H(t,n);return i6(i)}function _H(r,e){yc(r),yc(e);let t=Object.keys(r.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return t.forEach(i=>{var s,o;Object.keys(((s=r.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=gH(mH({},n.att[i]),{[a]:((c=r.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function AH(r="",e){yc(e);let t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;let n=[],i=0;Object.keys(e.att).forEach(a=>{let c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,m)=>h.action.localeCompare(m.action));let l={};c.forEach(h=>{l[h.ability]||(l[h.ability]=[]),l[h.ability].push(h.action)});let u=Object.keys(l).map(h=>(i++,`(${i}) '${h}': '${l[h].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});let s=n.join(" "),o=`${t}${s}`;return`${r?r+" ":""}${o}`}function Fw(r){var e;let t=Cd(r);yc(t);let n=(e=t.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function Bw(r){let e=Cd(r);yc(e);let t=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&t.push(i[0].chains)})}),[...new Set(t.flat())]}function Nd(r){if(!r)return;let e=r?.[r.length-1];return CH(e)?e:void 0}function pw(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function a6(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Jn(r,...e){if(!a6(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function E8(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function SH(r,e){Jn(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function C8(r){if(typeof r!="boolean")throw new Error(`boolean expected, not ${r}`)}var oa=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),IH=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),PH=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!PH)throw new Error("Non little-endian hardware is not supported");function TH(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function ww(r){if(typeof r=="string")r=TH(r);else if(a6(r))r=xw(r);else throw new Error("Uint8Array expected, got "+typeof r);return r}function NH(r,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(r,e)}function DH(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}var RH=(r,e)=>{function t(n,...i){if(Jn(n),r.nonceLength!==void 0){let l=i[0];if(!l)throw new Error("nonce / iv required");r.varSizeNonce?Jn(l):Jn(l,r.nonceLength)}let s=r.tagLength;s&&i[1]!==void 0&&Jn(i[1]);let o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Jn(u)}},c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Jn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Jn(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(t,r),t};function _8(r,e,t=!0){if(e===void 0)return new Uint8Array(r);if(e.length!==r)throw new Error("invalid output length, expected "+r+", got: "+e.length);if(t&&!OH(e))throw new Error("invalid output, must be aligned");return e}function A8(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}function OH(r){return r.byteOffset%4===0}function xw(r){return Uint8Array.from(r)}function Yl(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}var c6=r=>Uint8Array.from(r.split("").map(e=>e.charCodeAt(0))),MH=c6("expand 16-byte k"),kH=c6("expand 32-byte k"),FH=oa(MH),BH=oa(kH);function Ze(r,e){return r<<e|r>>>32-e}function Ew(r){return r.byteOffset%4===0}var Ym=64,UH=16,l6=2**32-1,S8=new Uint32Array;function LH(r,e,t,n,i,s,o,a){let c=i.length,l=new Uint8Array(Ym),u=oa(l),h=Ew(i)&&Ew(s),m=h?oa(i):S8,b=h?oa(s):S8;for(let f=0;f<c;o++){if(r(e,t,n,u,o,a),o>=l6)throw new Error("arx: counter overflow");let v=Math.min(Ym,c-f);if(h&&v===Ym){let E=f/4;if(f%4!==0)throw new Error("arx: invalid block position");for(let I=0,N;I<UH;I++)N=E+I,b[N]=m[N]^u[I];f+=Ym;continue}for(let E=0,I;E<v;E++)I=f+E,s[I]=i[I]^l[E];f+=v}}function VH(r,e){let{allowShortKeys:t,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=NH({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof r!="function")throw new Error("core must be a function");return pw(i),pw(o),C8(s),C8(t),(a,c,l,u,h=0)=>{Jn(a),Jn(c),Jn(l);let m=l.length;if(u===void 0&&(u=new Uint8Array(m)),Jn(u),pw(h),h<0||h>=l6)throw new Error("arx: counter overflow");if(u.length<m)throw new Error(`arx: output (${u.length}) is shorter than data (${m})`);let b=[],f=a.length,v,E;if(f===32)b.push(v=xw(a)),E=BH;else if(f===16&&t)v=new Uint8Array(32),v.set(a),v.set(a,16),E=FH,b.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${f}`);Ew(c)||b.push(c=xw(c));let I=oa(v);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(E,I,oa(c.subarray(0,16)),I),c=c.subarray(16)}let N=16-i;if(N!==c.length)throw new Error(`arx: nonce must be ${N} or 16 bytes`);if(N!==12){let F=new Uint8Array(12);F.set(c,s?0:12-c.length),c=F,b.push(c)}let D=oa(c);return LH(r,E,I,D,l,u,h,o),Yl(...b),u}}var sn=(r,e)=>r[e++]&255|(r[e++]&255)<<8,Cw=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ww(e),Jn(e,32);let t=sn(e,0),n=sn(e,2),i=sn(e,4),s=sn(e,6),o=sn(e,8),a=sn(e,10),c=sn(e,12),l=sn(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=sn(e,16+2*u)}process(e,t,n=!1){let i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],h=o[4],m=o[5],b=o[6],f=o[7],v=o[8],E=o[9],I=sn(e,t+0),N=sn(e,t+2),D=sn(e,t+4),F=sn(e,t+6),U=sn(e,t+8),L=sn(e,t+10),B=sn(e,t+12),M=sn(e,t+14),V=s[0]+(I&8191),P=s[1]+((I>>>13|N<<3)&8191),d=s[2]+((N>>>10|D<<6)&8191),y=s[3]+((D>>>7|F<<9)&8191),C=s[4]+((F>>>4|U<<12)&8191),A=s[5]+(U>>>1&8191),w=s[6]+((U>>>14|L<<2)&8191),x=s[7]+((L>>>11|B<<5)&8191),T=s[8]+((B>>>8|M<<8)&8191),_=s[9]+(M>>>5|i),g=0,S=g+V*a+P*(5*E)+d*(5*v)+y*(5*f)+C*(5*b);g=S>>>13,S&=8191,S+=A*(5*m)+w*(5*h)+x*(5*u)+T*(5*l)+_*(5*c),g+=S>>>13,S&=8191;let q=g+V*c+P*a+d*(5*E)+y*(5*v)+C*(5*f);g=q>>>13,q&=8191,q+=A*(5*b)+w*(5*m)+x*(5*h)+T*(5*u)+_*(5*l),g+=q>>>13,q&=8191;let $=g+V*l+P*c+d*a+y*(5*E)+C*(5*v);g=$>>>13,$&=8191,$+=A*(5*f)+w*(5*b)+x*(5*m)+T*(5*h)+_*(5*u),g+=$>>>13,$&=8191;let W=g+V*u+P*l+d*c+y*a+C*(5*E);g=W>>>13,W&=8191,W+=A*(5*v)+w*(5*f)+x*(5*b)+T*(5*m)+_*(5*h),g+=W>>>13,W&=8191;let Z=g+V*h+P*u+d*l+y*c+C*a;g=Z>>>13,Z&=8191,Z+=A*(5*E)+w*(5*v)+x*(5*f)+T*(5*b)+_*(5*m),g+=Z>>>13,Z&=8191;let ce=g+V*m+P*h+d*u+y*l+C*c;g=ce>>>13,ce&=8191,ce+=A*a+w*(5*E)+x*(5*v)+T*(5*f)+_*(5*b),g+=ce>>>13,ce&=8191;let fe=g+V*b+P*m+d*h+y*u+C*l;g=fe>>>13,fe&=8191,fe+=A*c+w*a+x*(5*E)+T*(5*v)+_*(5*f),g+=fe>>>13,fe&=8191;let Te=g+V*f+P*b+d*m+y*h+C*u;g=Te>>>13,Te&=8191,Te+=A*l+w*c+x*a+T*(5*E)+_*(5*v),g+=Te>>>13,Te&=8191;let be=g+V*v+P*f+d*b+y*m+C*h;g=be>>>13,be&=8191,be+=A*u+w*l+x*c+T*a+_*(5*E),g+=be>>>13,be&=8191;let pe=g+V*E+P*v+d*f+y*b+C*m;g=pe>>>13,pe&=8191,pe+=A*h+w*u+x*l+T*c+_*a,g+=pe>>>13,pe&=8191,g=(g<<2)+g|0,g=g+S|0,S=g&8191,g=g>>>13,q+=g,s[0]=S,s[1]=q,s[2]=$,s[3]=W,s[4]=Z,s[5]=ce,s[6]=fe,s[7]=Te,s[8]=be,s[9]=pe}finalize(){let{h:e,pad:t}=this,n=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+t[a]|0)+(o>>>16)|0,e[a]=o&65535;Yl(n)}update(e){E8(this);let{buffer:t,blockLen:n}=this;e=ww(e);let i=e.length;for(let s=0;s<i;){let o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}t.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Yl(this.h,this.r,this.buffer,this.pad)}digestInto(e){E8(this),SH(e,this),this.finished=!0;let{buffer:t,h:n}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}};function jH(r){let e=(n,i)=>r(i).update(ww(n)).digest(),t=r(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}var HH=jH(r=>new Cw(r));function qH(r,e,t,n,i,s=20){let o=r[0],a=r[1],c=r[2],l=r[3],u=e[0],h=e[1],m=e[2],b=e[3],f=e[4],v=e[5],E=e[6],I=e[7],N=i,D=t[0],F=t[1],U=t[2],L=o,B=a,M=c,V=l,P=u,d=h,y=m,C=b,A=f,w=v,x=E,T=I,_=N,g=D,S=F,q=U;for(let W=0;W<s;W+=2)L=L+P|0,_=Ze(_^L,16),A=A+_|0,P=Ze(P^A,12),L=L+P|0,_=Ze(_^L,8),A=A+_|0,P=Ze(P^A,7),B=B+d|0,g=Ze(g^B,16),w=w+g|0,d=Ze(d^w,12),B=B+d|0,g=Ze(g^B,8),w=w+g|0,d=Ze(d^w,7),M=M+y|0,S=Ze(S^M,16),x=x+S|0,y=Ze(y^x,12),M=M+y|0,S=Ze(S^M,8),x=x+S|0,y=Ze(y^x,7),V=V+C|0,q=Ze(q^V,16),T=T+q|0,C=Ze(C^T,12),V=V+C|0,q=Ze(q^V,8),T=T+q|0,C=Ze(C^T,7),L=L+d|0,q=Ze(q^L,16),x=x+q|0,d=Ze(d^x,12),L=L+d|0,q=Ze(q^L,8),x=x+q|0,d=Ze(d^x,7),B=B+y|0,_=Ze(_^B,16),T=T+_|0,y=Ze(y^T,12),B=B+y|0,_=Ze(_^B,8),T=T+_|0,y=Ze(y^T,7),M=M+C|0,g=Ze(g^M,16),A=A+g|0,C=Ze(C^A,12),M=M+C|0,g=Ze(g^M,8),A=A+g|0,C=Ze(C^A,7),V=V+P|0,S=Ze(S^V,16),w=w+S|0,P=Ze(P^w,12),V=V+P|0,S=Ze(S^V,8),w=w+S|0,P=Ze(P^w,7);let $=0;n[$++]=o+L|0,n[$++]=a+B|0,n[$++]=c+M|0,n[$++]=l+V|0,n[$++]=u+P|0,n[$++]=h+d|0,n[$++]=m+y|0,n[$++]=b+C|0,n[$++]=f+A|0,n[$++]=v+w|0,n[$++]=E+x|0,n[$++]=I+T|0,n[$++]=N+_|0,n[$++]=D+g|0,n[$++]=F+S|0,n[$++]=U+q|0}var zH=VH(qH,{counterRight:!1,counterLength:4,allowShortKeys:!1}),$H=new Uint8Array(16),I8=(r,e)=>{r.update(e);let t=e.length%16;t&&r.update($H.subarray(t))},GH=new Uint8Array(32);function P8(r,e,t,n,i){let s=r(e,t,GH),o=HH.create(s);i&&I8(o,i),I8(o,n);let a=new Uint8Array(16),c=IH(a);A8(c,0,BigInt(i?i.length:0),!0),A8(c,8,BigInt(n.length),!0),o.update(a);let l=o.digest();return Yl(s,a),l}var KH=r=>(e,t,n)=>({encrypt(i,s){let o=i.length;s=_8(o+16,s,!1),s.set(i);let a=s.subarray(0,-16);r(e,t,a,a,1);let c=P8(r,e,t,a,n);return s.set(c,o),Yl(c),s},decrypt(i,s){s=_8(i.length-16,s,!1);let o=i.subarray(0,-16),a=i.subarray(-16),c=P8(r,e,t,o,n);if(!DH(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),r(e,t,s,s,1),Yl(c),s}}),u6=RH({blockSize:64,nonceLength:12,tagLength:16},KH(zH)),Zm=class extends Ed{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Rw(e);let n=Jl(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Wl(this),this.iHash.update(e),this}digestInto(e){Wl(this),ig(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Uw=(r,e,t)=>new Zm(r,e).update(t).digest();Uw.create=(r,e)=>new Zm(r,e);function WH(r,e,t){return Rw(r),t===void 0&&(t=new Uint8Array(r.outputLen)),Uw(r,Jl(t),Jl(e))}var mw=new Uint8Array([0]),T8=new Uint8Array;function JH(r,e,t,n=32){if(Rw(r),xd(n),n>255*r.outputLen)throw new Error("Length should be <= 255*HashLen");let i=Math.ceil(n/r.outputLen);t===void 0&&(t=T8);let s=new Uint8Array(i*r.outputLen),o=Uw.create(r,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)mw[0]=l+1,a.update(l===0?T8:c).update(t).update(mw).digestInto(c),s.set(c,r.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),mw.fill(0),s.slice(0,n)}var YH=(r,e,t,n,i)=>JH(r,WH(r,e,t),n,i);function QH(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}function ZH(r,e,t){return r&e^~r&t}function XH(r,e,t){return r&e^r&t^e&t}var _w=class extends Ed{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fw(this.buffer)}update(e){Wl(this);let{view:t,buffer:n,blockLen:i}=this;e=Jl(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let c=fw(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wl(this),Q8(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;QH(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=fw(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}},eq=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ia=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sa=new Uint32Array(64),Aw=class extends _w{constructor(){super(64,32,8,!1),this.A=ia[0]|0,this.B=ia[1]|0,this.C=ia[2]|0,this.D=ia[3]|0,this.E=ia[4]|0,this.F=ia[5]|0,this.G=ia[6]|0,this.H=ia[7]|0}get(){let{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,n,i,s,o,a,c]}set(e,t,n,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)sa[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){let m=sa[h-15],b=sa[h-2],f=Ns(m,7)^Ns(m,18)^m>>>3,v=Ns(b,17)^Ns(b,19)^b>>>10;sa[h]=v+sa[h-7]+f+sa[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){let m=Ns(a,6)^Ns(a,11)^Ns(a,25),b=u+m+ZH(a,c,l)+eq[h]+sa[h]|0,f=(Ns(n,2)^Ns(n,13)^Ns(n,22))+XH(n,i,s)|0;u=l,l=c,c=a,a=o+b|0,o=s,s=i,i=n,n=b+f|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){sa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},og=Z8(()=>new Aw);var h6=BigInt(0);function Lw(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function d6(r){if(!Lw(r))throw new Error("Uint8Array expected")}var tq=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function rq(r){d6(r);let e="";for(let t=0;t<r.length;t++)e+=tq[r[t]];return e}function nq(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?h6:BigInt("0x"+r)}var ao={_0:48,_9:57,A:65,F:70,a:97,f:102};function N8(r){if(r>=ao._0&&r<=ao._9)return r-ao._0;if(r>=ao.A&&r<=ao.F)return r-(ao.A-10);if(r>=ao.a&&r<=ao.f)return r-(ao.a-10)}function f6(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){let o=N8(r.charCodeAt(s)),a=N8(r.charCodeAt(s+1));if(o===void 0||a===void 0){let c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function D8(r){return d6(r),nq(rq(Uint8Array.from(r).reverse()))}function iq(r,e){return f6(r.toString(16).padStart(e*2,"0"))}function sq(r,e){return iq(r,e).reverse()}function R8(r,e,t){let n;if(typeof e=="string")try{n=f6(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(Lw(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}var gw=r=>typeof r=="bigint"&&h6<=r;function oq(r,e,t){return gw(r)&&gw(e)&&gw(t)&&e<=r&&r<t}function O8(r,e,t,n){if(!oq(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}var aq={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Lw(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function cq(r,e,t={}){let n=(i,s,o)=>{let a=aq[s];if(typeof a!="function")throw new Error("invalid validator function");let c=r[i];if(!(o&&c===void 0)&&!a(c,r))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(let[i,s]of Object.entries(e))n(i,s,!1);for(let[i,s]of Object.entries(t))n(i,s,!0);return r}var Kl=BigInt(0),Qm=BigInt(1);function p6(r,e){let t=r%e;return t>=Kl?t:e+t}function lq(r,e,t){if(e<Kl)throw new Error("invalid exponent, negatives unsupported");if(t<=Kl)throw new Error("invalid modulus");if(t===Qm)return Kl;let n=Qm;for(;e>Kl;)e&Qm&&(n=n*r%t),r=r*r%t,e>>=Qm;return n}function Vi(r,e,t){let n=r;for(;e-- >Kl;)n*=n,n%=t;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);var Gl=BigInt(0),bw=BigInt(1);function uq(r){return cq(r,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(k({},r))}function hq(r){let e=uq(r),{P:t}=e,n=N=>p6(N,t),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(N=>N),c=e.powPminus2||(N=>lq(N,t-BigInt(2),t));function l(N,D,F){let U=n(N*(D-F));return D=n(D-U),F=n(F+U),[D,F]}let u=(e.a-BigInt(2))/BigInt(4);function h(N,D){O8("u",N,Gl,t),O8("scalar",D,Gl,t);let F=D,U=N,L=bw,B=Gl,M=N,V=bw,P=Gl,d;for(let C=BigInt(i-1);C>=Gl;C--){let A=F>>C&bw;P^=A,d=l(P,L,M),L=d[0],M=d[1],d=l(P,B,V),B=d[0],V=d[1],P=A;let w=L+B,x=n(w*w),T=L-B,_=n(T*T),g=x-_,S=M+V,q=M-V,$=n(q*w),W=n(S*T),Z=$+W,ce=$-W;M=n(Z*Z),V=n(U*n(ce*ce)),L=n(x*_),B=n(g*(x+n(u*g)))}d=l(P,L,M),L=d[0],M=d[1],d=l(P,B,V),B=d[0],V=d[1];let y=c(B);return n(L*y)}function m(N){return sq(n(N),s)}function b(N){let D=R8("u coordinate",N,s);return o===32&&(D[31]&=127),D8(D)}function f(N){let D=R8("scalar",N),F=D.length;if(F!==s&&F!==o){let U=""+s+" or "+o;throw new Error("invalid scalar, expected "+U+" bytes, got "+F)}return D8(a(D))}function v(N,D){let F=b(D),U=f(N),L=h(F,U);if(L===Gl)throw new Error("invalid private or public key received");return m(L)}let E=m(e.Gu);function I(N){return v(N,E)}return{scalarMult:v,scalarMultBase:I,getSharedSecret:(N,D)=>v(N,D),getPublicKey:N=>I(N),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:E}}var Sw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);var dq=BigInt(1),M8=BigInt(2),fq=BigInt(3),pq=BigInt(5);BigInt(8);function mq(r){let e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=Sw,o=r*r%s*r%s,a=Vi(o,M8,s)*o%s,c=Vi(a,dq,s)*r%s,l=Vi(c,pq,s)*c%s,u=Vi(l,e,s)*l%s,h=Vi(u,t,s)*u%s,m=Vi(h,n,s)*h%s,b=Vi(m,i,s)*m%s,f=Vi(b,i,s)*m%s,v=Vi(f,e,s)*l%s;return{pow_p_5_8:Vi(v,M8,s)*r%s,b2:o}}function gq(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}var Iw=hq({P:Sw,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:r=>{let e=Sw,{pow_p_5_8:t,b2:n}=mq(r);return p6(Vi(t,fq,e)*n,e)},adjustScalarBytes:gq,randomBytes:Pd}),m6="base10",on="base16",Rs="base64pad",Zl="base64url",Dd="utf8",g6=0,ji=1,Xl=2,bq=0,k8=1,wd=12,Vw=32;function b6(){let r=Iw.utils.randomPrivateKey(),e=Iw.getPublicKey(r);return{privateKey:Ur(r,on),publicKey:Ur(e,on)}}function ag(){let r=Pd(Vw);return Ur(r,on)}function y6(r,e){let t=Iw.getSharedSecret(On(r,on),On(e,on)),n=YH(og,t,void 0,void 0,Vw);return Ur(n,on)}function eu(r){let e=og(On(r,on));return Ur(e,on)}function gi(r){let e=og(On(r,Dd));return Ur(e,on)}function v6(r){return On(`${r}`,m6)}function aa(r){return Number(Ur(r,m6))}function w6(r){let e=v6(typeof r.type<"u"?r.type:g6);if(aa(e)===ji&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let t=typeof r.senderPublicKey<"u"?On(r.senderPublicKey,on):void 0,n=typeof r.iv<"u"?On(r.iv,on):Pd(wd),i=On(r.symKey,on),s=u6(i,n).encrypt(On(r.message,Dd));return _6({type:e,sealed:s,iv:n,senderPublicKey:t,encoding:r.encoding})}function x6(r){let e=On(r.symKey,on),{sealed:t,iv:n}=tu(r),i=u6(e,n).decrypt(t);if(i===null)throw new Error("Failed to decrypt");return Ur(i,Dd)}function E6(r,e){let t=v6(Xl),n=Pd(wd),i=On(r,Dd);return _6({type:t,sealed:i,iv:n,encoding:e})}function C6(r,e){let{sealed:t}=tu({encoded:r,encoding:e});return Ur(t,Dd)}function _6(r){let{encoding:e=Rs}=r;if(aa(r.type)===Xl)return Ur(sd([r.type,r.sealed]),e);if(aa(r.type)===ji){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ur(sd([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return Ur(sd([r.type,r.iv,r.sealed]),e)}function tu(r){let{encoded:e,encoding:t=Rs}=r,n=On(e,t),i=n.slice(bq,k8),s=k8;if(aa(i)===ji){let l=s+Vw,u=l+wd,h=n.slice(s,l),m=n.slice(l,u),b=n.slice(u);return{type:i,sealed:b,iv:m,senderPublicKey:h}}if(aa(i)===Xl){let l=n.slice(s),u=Pd(wd);return{type:i,sealed:l,iv:u}}let o=s+wd,a=n.slice(s,o),c=n.slice(o);return{type:i,sealed:c,iv:a}}function A6(r,e){let t=tu({encoded:r,encoding:e?.encoding});return jw({type:aa(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Ur(t.senderPublicKey,on):void 0,receiverPublicKey:e?.receiverPublicKey})}function jw(r){let e=r?.type||g6;if(e===ji){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Hw(r){return r.type===ji&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function qw(r){return r.type===Xl}function yq(r){return new L8.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function vq(r){let e=r.replace(/-/g,"+").replace(/_/g,"/"),t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function wq(r){return Buffer.from(vq(r),"base64")}function S6(r,e){let[t,n,i]=r.split("."),s=wq(i);if(s.length!==64)throw new Error("Invalid signature length");let o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${t}.${n}`,l=og(c),u=yq(e),h=Ur(l,on);if(!u.verify(h,{r:o,s:a}))throw new Error("Invalid signature");return yd(r).payload}var xq="irn";function Rd(r){return r?.relay||{protocol:xq}}function ru(r){let e=p4[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}function Eq(r,e="-"){let t={},n="relay"+e;return Object.keys(r).forEach(i=>{if(i.startsWith(n)){let s=i.replace(n,""),o=r[i];t[s]=o}}),t}function zw(r){if(!r.includes("wc:")){let l=J8(r);l!=null&&l.includes("wc:")&&(r=l)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;let e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,n=r.substring(0,e),i=r.substring(e+1,t).split("@"),s=typeof t<"u"?r.substring(t):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});let c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Cq(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Eq(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Cq(r){return r.startsWith("//")?r.substring(2):r}function _q(r,e="-"){let t="relay",n={};return Object.keys(r).forEach(i=>{let s=i,o=t+e+s;r[s]&&(n[o]=r[s])}),n}function $w(r){let e=new URLSearchParams,t=_q(r.relay);Object.keys(t).sort().forEach(i=>{e.set(i,t[i])}),e.set("symKey",r.symKey),r.expiryTimestamp&&e.set("expiryTimestamp",r.expiryTimestamp.toString()),r.methods&&e.set("methods",r.methods.join(","));let n=e.toString();return`${r.protocol}:${r.topic}@${r.version}?${n}`}function Od(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function nu(r){let e=[];return r.forEach(t=>{let[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}function Aq(r){let e=[];return Object.values(r).forEach(t=>{e.push(...nu(t.accounts))}),e}function Sq(r,e){let t=[];return Object.values(r).forEach(n=>{nu(n.accounts).includes(e)&&t.push(...n.methods)}),t}function Iq(r,e){let t=[];return Object.values(r).forEach(n=>{nu(n.accounts).includes(e)&&t.push(...n.events)}),t}function cg(r){return r.includes(":")}function iu(r){return cg(r)?r.split(":")[0]:r}function Pq(r){let e={};return r?.forEach(t=>{var n;let[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(t),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function Gw(r,e){e=e.map(n=>n.replace("did:pkh:",""));let t=Pq(e);for(let[n,i]of Object.entries(t))i.methods?i.methods=Sd(i.methods,r):i.methods=r,i.events=["chainChanged","accountsChanged"];return t}var Tq={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Nq={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function re(r,e){let{message:t,code:n}=Nq[r];return{message:e?`${t} ${e}`:t,code:n}}function it(r,e){let{message:t,code:n}=Tq[r];return{message:e?`${t} ${e}`:t,code:n}}function po(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function vc(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Nr(r){return typeof r>"u"}function jt(r,e){return e&&Nr(r)?!0:typeof r=="string"&&!!r.trim().length}function Kw(r,e){return e&&Nr(r)?!0:typeof r=="number"&&!isNaN(r)}function I6(r,e){let{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),i=Object.keys(t),s=!0;return bc(i,n)?(n.forEach(o=>{let{accounts:a,methods:c,events:l}=r.namespaces[o],u=nu(a),h=t[o];(!bc(V8(o,h),u)||!bc(h.methods,c)||!bc(h.events,l))&&(s=!1)}),s):!1}function Xm(r){return jt(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function Dq(r){if(jt(r,!1)&&r.includes(":")){let e=r.split(":");if(e.length===3){let t=e[0]+":"+e[1];return!!e[2]&&Xm(t)}}return!1}function P6(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(jt(r,!1)){if(e(r))return!0;let t=J8(r);return e(t)}}catch{}return!1}function T6(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function N6(r){return r?.topic}function D6(r,e){let t=null;return jt(r?.publicKey,!1)||(t=re("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function F8(r){let e=!0;return po(r)?r.length&&(e=r.every(t=>jt(t,!1))):e=!1,e}function Rq(r,e,t){let n=null;return po(e)&&e.length?e.forEach(i=>{n||Xm(i)||(n=it("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Xm(r)||(n=it("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Oq(r,e,t){let n=null;return Object.entries(r).forEach(([i,s])=>{if(n)return;let o=Rq(i,V8(i,s),`${e} ${t}`);o&&(n=o)}),n}function Mq(r,e){let t=null;return po(r)?r.forEach(n=>{t||Dq(n)||(t=it("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=it("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function kq(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;let i=Mq(n?.accounts,`${e} namespace`);i&&(t=i)}),t}function Fq(r,e){let t=null;return F8(r?.methods)?F8(r?.events)||(t=it("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=it("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function R6(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;let i=Fq(n,`${e}, namespace`);i&&(t=i)}),t}function O6(r,e,t){let n=null;if(r&&vc(r)){let i=R6(r,e);i&&(n=i);let s=Oq(r,e,t);s&&(n=s)}else n=re("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}function lg(r,e){let t=null;if(r&&vc(r)){let n=R6(r,e);n&&(t=n);let i=kq(r,e);i&&(t=i)}else t=re("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Ww(r){return jt(r.protocol,!0)}function M6(r,e){let t=!1;return e&&!r?t=!0:r&&po(r)&&r.length&&r.forEach(n=>{t=Ww(n)}),t}function k6(r){return typeof r=="number"}function pn(r){return typeof r<"u"&&typeof r!==null}function F6(r){return!(!r||typeof r!="object"||!r.code||!Kw(r.code,!1)||!r.message||!jt(r.message,!1))}function B6(r){return!(Nr(r)||!jt(r.method,!1))}function U6(r){return!(Nr(r)||Nr(r.result)&&Nr(r.error)||!Kw(r.id,!1)||!jt(r.jsonrpc,!1))}function L6(r){return!(Nr(r)||!jt(r.name,!1))}function Jw(r,e){return!(!Xm(e)||!Aq(r).includes(e))}function V6(r,e,t){return jt(t,!1)?Sq(r,e).includes(t):!1}function j6(r,e,t){return jt(t,!1)?Iq(r,e).includes(t):!1}function Yw(r,e,t){let n=null,i=Bq(r),s=Uq(e),o=Object.keys(i),a=Object.keys(s),c=B8(Object.keys(r)),l=B8(Object.keys(e)),u=c.filter(h=>!l.includes(h));return u.length&&(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),bc(o,a)||(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||n)return;let m=nu(e[h].accounts);m.includes(h)||(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${m.toString()}`))}),o.forEach(h=>{n||(bc(i[h].methods,s[h].methods)?bc(i[h].events,s[h].events)||(n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${h}`)):n=re("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${h}`))}),n}function Bq(r){let e={};return Object.keys(r).forEach(t=>{var n;t.includes(":")?e[t]=r[t]:(n=r[t].chains)==null||n.forEach(i=>{e[i]={methods:r[t].methods,events:r[t].events}})}),e}function B8(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Uq(r){let e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:nu(r[t].accounts)?.forEach(i=>{e[i]={accounts:r[t].accounts.filter(s=>s.includes(`${i}:`)),methods:r[t].methods,events:r[t].events}})}),e}function H6(r,e){return Kw(r,!1)&&r<=e.max&&r>=e.min}function Qw(){let r=Ad();return new Promise(e=>{switch(r){case Un.browser:e(Lq());break;case Un.reactNative:e(Vq());break;case Un.node:e(jq());break;default:e(!0)}})}function Lq(){return Ql()&&navigator?.onLine}function Vq(){return p(this,null,function*(){return uo()&&typeof global<"u"&&global!=null&&global.NetInfo?(yield global==null?void 0:global.NetInfo.fetch())?.isConnected:!0})}function jq(){return!0}function q6(r){switch(Ad()){case Un.browser:Hq(r);break;case Un.reactNative:qq(r);break;case Un.node:break}}function Hq(r){!uo()&&Ql()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function qq(r){uo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>r(e?.isConnected))}var yw={},ca=class{static get(e){return yw[e]}static set(e,t){yw[e]=t}static delete(e){delete yw[e]}};var W6=dn(Ha());var zq=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:$6(),$q=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",G6=r=>r.split("?")[0],K6=10,Gq=zq(),ug=class{constructor(e){if(this.url=e,this.events=new W6.EventEmitter,this.registering=!1,!Yb(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return p(this,arguments,function*(e=this.url){yield this.register(e)})}close(){return p(this,null,function*(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})})}send(e){return p(this,null,function*(){typeof this.socket>"u"&&(this.socket=yield this.register());try{this.socket.send(Ks(e))}catch(t){this.onError(e.id,t)}})}register(e=this.url){if(!Yb(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{let i=(0,za.isReactNative)()?void 0:{rejectUnauthorized:!r_(e)},s=new Gq(e,[],i);$q()?s.onerror=o=>{let a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),t(s)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t=typeof e.data=="string"?ds(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let n=this.parseError(t),i=n.message||n.toString(),s=tl(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return t_(e,G6(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>K6&&this.events.setMaxListeners(K6)}emitError(e){let t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${G6(this.url)}`));return this.events.emit("register_error",t),t}};var vP=dn(Zp());var wP="wc",xP=2,fg="core",ks=`${wP}@2:${fg}:`,Kq={name:fg,logger:"error"},Wq={database:":memory:"},Jq="crypto",J6="client_ed25519_seed",Yq=me.ONE_DAY,Qq="keychain",Zq="0.3",Xq="messages",ez="0.3",Y6=me.SIX_HOURS,tz="publisher",Rx="irn",rz="error",EP="wss://relay.walletconnect.org",nz="relayer",Dr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},iz="_subscription",bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},sz=.1;var rx="2.19.1";var gt={link_mode:"link_mode",relay:"relay"},dg={inbound:"inbound",outbound:"outbound"},oz="0.3",az="WALLETCONNECT_CLIENT_ID",Q6="WALLETCONNECT_LINK_MODE_APPS",Qn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"};var cz="subscription",lz="0.3",Woe=me.FIVE_SECONDS*1e3,uz="pairing",hz="0.3";var Md={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},ua={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Hi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},dz="history",fz="0.3",pz="expirer",Zn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},mz="0.3";var gz="verify-api",bz="https://verify.walletconnect.com",CP="https://verify.walletconnect.org",ou=CP,yz=`${ou}/v3`,vz=[bz,CP],wz="echo",xz="https://echo.walletconnect.com";var zi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ms={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},yi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ha={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},da={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},au={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Ez=.1,Cz="event-client",_z=86400,Az="https://pulse.walletconnect.org/batch";function Sz(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var a=r.length,c=r.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var v=0,E=0,I=0,N=f.length;I!==N&&f[I]===0;)I++,v++;for(var D=(N-I)*u+1>>>0,F=new Uint8Array(D);I!==N;){for(var U=f[I],L=0,B=D-1;(U!==0||L<E)&&B!==-1;B--,L++)U+=256*F[B]>>>0,F[B]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");E=L,I++}for(var M=D-E;M!==D&&F[M]===0;)M++;for(var V=c.repeat(v);M<D;++M)V+=r.charAt(F[M]);return V}function m(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var v=0;if(f[v]!==" "){for(var E=0,I=0;f[v]===c;)E++,v++;for(var N=(f.length-v)*l+1>>>0,D=new Uint8Array(N);f[v];){var F=t[f.charCodeAt(v)];if(F===255)return;for(var U=0,L=N-1;(F!==0||U<I)&&L!==-1;L--,U++)F+=a*D[L]>>>0,D[L]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");I=U,v++}if(f[v]!==" "){for(var B=N-I;B!==N&&D[B]===0;)B++;for(var M=new Uint8Array(E+(N-B)),V=E;B!==N;)M[V++]=D[B++];return M}}}function b(f){var v=m(f);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:m,decode:b}}var Iz=Sz,Pz=Iz,_P=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Tz=r=>new TextEncoder().encode(r),Nz=r=>new TextDecoder().decode(r),nx=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},ix=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AP(this,e)}},sx=class{constructor(e){this.decoders=e}or(e){return AP(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},AP=(r,e)=>new sx(k(k({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e})),ox=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new nx(e,t,n),this.decoder=new ix(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},pg=({name:r,prefix:e,encode:t,decode:n})=>new ox(r,e,t,n),Ld=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Pz(t,e);return pg({prefix:r,name:e,encode:n,decode:s=>_P(i(s))})},Dz=(r,e,t,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=r.length;for(;r[s-1]==="=";)--s;let o=new Uint8Array(s*t/8|0),a=0,c=0,l=0;for(let u=0;u<s;++u){let h=i[r[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,a+=t,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Rz=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,s="",o=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],o+=8;o>t;)o-=t,s+=e[i&a>>o];if(o&&(s+=e[i&a<<t-o]),n)for(;s.length*t&7;)s+="=";return s},ln=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>pg({prefix:e,name:r,encode(i){return Rz(i,n,t)},decode(i){return Dz(i,n,t,r)}}),Oz=pg({prefix:"\0",name:"identity",encode:r=>Nz(r),decode:r=>Tz(r)}),Mz=Object.freeze({__proto__:null,identity:Oz}),kz=ln({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Fz=Object.freeze({__proto__:null,base2:kz}),Bz=ln({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Uz=Object.freeze({__proto__:null,base8:Bz}),Lz=Ld({prefix:"9",name:"base10",alphabet:"0123456789"}),Vz=Object.freeze({__proto__:null,base10:Lz}),jz=ln({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hz=ln({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qz=Object.freeze({__proto__:null,base16:jz,base16upper:Hz}),zz=ln({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$z=ln({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gz=ln({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kz=ln({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wz=ln({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Jz=ln({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yz=ln({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qz=ln({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zz=ln({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Xz=Object.freeze({__proto__:null,base32:zz,base32upper:$z,base32pad:Gz,base32padupper:Kz,base32hex:Wz,base32hexupper:Jz,base32hexpad:Yz,base32hexpadupper:Qz,base32z:Zz}),e$=Ld({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),t$=Ld({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),r$=Object.freeze({__proto__:null,base36:e$,base36upper:t$}),n$=Ld({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i$=Ld({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),s$=Object.freeze({__proto__:null,base58btc:n$,base58flickr:i$}),o$=ln({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),a$=ln({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),c$=ln({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),l$=ln({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),u$=Object.freeze({__proto__:null,base64:o$,base64pad:a$,base64url:c$,base64urlpad:l$}),SP=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),h$=SP.reduce((r,e,t)=>(r[t]=e,r),[]),d$=SP.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function f$(r){return r.reduce((e,t)=>(e+=h$[t],e),"")}function p$(r){let e=[];for(let t of r){let n=d$[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var m$=pg({prefix:"\u{1F680}",name:"base256emoji",encode:f$,decode:p$}),g$=Object.freeze({__proto__:null,base256emoji:m$}),b$=IP,Z6=128,y$=127,v$=~y$,w$=Math.pow(2,31);function IP(r,e,t){e=e||[],t=t||0;for(var n=t;r>=w$;)e[t++]=r&255|Z6,r/=128;for(;r&v$;)e[t++]=r&255|Z6,r>>>=7;return e[t]=r|0,IP.bytes=t-n+1,e}var x$=ax,E$=128,X6=127;function ax(r,n){var t=0,n=n||0,i=0,s=n,o,a=r.length;do{if(s>=a)throw ax.bytes=0,new RangeError("Could not decode varint");o=r[s++],t+=i<28?(o&X6)<<i:(o&X6)*Math.pow(2,i),i+=7}while(o>=E$);return ax.bytes=s-n,t}var C$=Math.pow(2,7),_$=Math.pow(2,14),A$=Math.pow(2,21),S$=Math.pow(2,28),I$=Math.pow(2,35),P$=Math.pow(2,42),T$=Math.pow(2,49),N$=Math.pow(2,56),D$=Math.pow(2,63),R$=function(r){return r<C$?1:r<_$?2:r<A$?3:r<S$?4:r<I$?5:r<P$?6:r<T$?7:r<N$?8:r<D$?9:10},O$={encode:b$,decode:x$,encodingLength:R$},PP=O$,eP=(r,e,t=0)=>(PP.encode(r,e,t),e),tP=r=>PP.encodingLength(r),cx=(r,e)=>{let t=e.byteLength,n=tP(r),i=n+tP(t),s=new Uint8Array(i+t);return eP(r,s,0),eP(t,s,n),s.set(e,i),new lx(r,t,e,s)},lx=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}},TP=({name:r,code:e,encode:t})=>new ux(r,e,t),ux=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?cx(this.code,t):t.then(n=>cx(this.code,n))}else throw Error("Unknown type, must be binary type")}},NP=r=>e=>p(void 0,null,function*(){return new Uint8Array(yield crypto.subtle.digest(r,e))}),M$=TP({name:"sha2-256",code:18,encode:NP("SHA-256")}),k$=TP({name:"sha2-512",code:19,encode:NP("SHA-512")}),F$=Object.freeze({__proto__:null,sha256:M$,sha512:k$}),DP=0,B$="identity",RP=_P,U$=r=>cx(DP,RP(r)),L$={code:DP,name:B$,encode:RP,digest:U$},V$=Object.freeze({__proto__:null,identity:L$});new TextEncoder,new TextDecoder;var rP=k(k(k(k(k(k(k(k(k(k({},Mz),Fz),Uz),Vz),qz),Xz),r$),s$),u$),g$);k(k({},F$),V$);function j$(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function OP(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var nP=OP("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Zw=OP("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=j$(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),H$=k({utf8:nP,"utf-8":nP,hex:rP.base16,latin1:Zw,ascii:Zw,binary:Zw},rP);function q$(r,e="utf8"){let t=H$[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var z$=Object.defineProperty,$$=(r,e,t)=>e in r?z$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Os=(r,e,t)=>$$(r,typeof e!="symbol"?e+"":e,t),hx=class{constructor(e,t){this.core=e,this.logger=t,Os(this,"keychain",new Map),Os(this,"name",Qq),Os(this,"version",Zq),Os(this,"initialized",!1),Os(this,"storagePrefix",ks),Os(this,"init",()=>p(this,null,function*(){if(!this.initialized){let n=yield this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}})),Os(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Os(this,"set",(n,i)=>p(this,null,function*(){this.isInitialized(),this.keychain.set(n,i),yield this.persist()})),Os(this,"get",n=>{this.isInitialized();let i=this.keychain.get(n);if(typeof i>"u"){let{message:s}=re("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),Os(this,"del",n=>p(this,null,function*(){this.isInitialized(),this.keychain.delete(n),yield this.persist()})),this.core=e,this.logger=Xr(t,this.name)}get context(){return vn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setKeyChain(e){return p(this,null,function*(){yield this.core.storage.setItem(this.storageKey,tg(e))})}getKeyChain(){return p(this,null,function*(){let e=yield this.core.storage.getItem(this.storageKey);return typeof e<"u"?rg(e):void 0})}persist(){return p(this,null,function*(){yield this.setKeyChain(this.keychain)})}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}},G$=Object.defineProperty,K$=(r,e,t)=>e in r?G$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,an=(r,e,t)=>K$(r,typeof e!="symbol"?e+"":e,t),dx=class{constructor(e,t,n){this.core=e,this.logger=t,an(this,"name",Jq),an(this,"keychain"),an(this,"randomSessionIdentifier",ag()),an(this,"initialized",!1),an(this,"init",()=>p(this,null,function*(){this.initialized||(yield this.keychain.init(),this.initialized=!0)})),an(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),an(this,"getClientId",()=>p(this,null,function*(){this.isInitialized();let i=yield this.getClientSeed(),s=hw(i);return uw(s.publicKey)})),an(this,"generateKeyPair",()=>{this.isInitialized();let i=b6();return this.setPrivateKey(i.publicKey,i.privateKey)}),an(this,"signJWT",i=>p(this,null,function*(){this.isInitialized();let s=yield this.getClientSeed(),o=hw(s),a=this.randomSessionIdentifier;return yield h8(a,i,Yq,o)})),an(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();let a=this.getPrivateKey(i),c=y6(a,s);return this.setSymKey(c,o)}),an(this,"setSymKey",(i,s)=>p(this,null,function*(){this.isInitialized();let o=s||eu(i);return yield this.keychain.set(o,i),o})),an(this,"deleteKeyPair",i=>p(this,null,function*(){this.isInitialized(),yield this.keychain.del(i)})),an(this,"deleteSymKey",i=>p(this,null,function*(){this.isInitialized(),yield this.keychain.del(i)})),an(this,"encode",(i,s,o)=>p(this,null,function*(){this.isInitialized();let a=jw(o),c=Ks(s);if(qw(a))return E6(c,o?.encoding);if(Hw(a)){let m=a.senderPublicKey,b=a.receiverPublicKey;i=yield this.generateSharedKey(m,b)}let l=this.getSymKey(i),{type:u,senderPublicKey:h}=a;return w6({type:u,symKey:l,message:c,senderPublicKey:h,encoding:o?.encoding})})),an(this,"decode",(i,s,o)=>p(this,null,function*(){this.isInitialized();let a=A6(s,o);if(qw(a)){let c=C6(s,o?.encoding);return ds(c)}if(Hw(a)){let c=a.receiverPublicKey,l=a.senderPublicKey;i=yield this.generateSharedKey(c,l)}try{let c=this.getSymKey(i),l=x6({symKey:c,encoded:s,encoding:o?.encoding});return ds(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${yield this.getClientId()}'`),this.logger.error(c)}})),an(this,"getPayloadType",(i,s=Rs)=>{let o=tu({encoded:i,encoding:s});return aa(o.type)}),an(this,"getPayloadSenderPublicKey",(i,s=Rs)=>{let o=tu({encoded:i,encoding:s});return o.senderPublicKey?Ur(o.senderPublicKey,on):void 0}),this.core=e,this.logger=Xr(t,this.name),this.keychain=n||new hx(this.core,this.logger)}get context(){return vn(this.logger)}setPrivateKey(e,t){return p(this,null,function*(){return yield this.keychain.set(e,t),e})}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){return p(this,null,function*(){let e="";try{e=this.keychain.get(J6)}catch{e=ag(),yield this.keychain.set(J6,e)}return q$(e,"base16")})}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}},W$=Object.defineProperty,J$=Object.defineProperties,Y$=Object.getOwnPropertyDescriptors,iP=Object.getOwnPropertySymbols,Q$=Object.prototype.hasOwnProperty,Z$=Object.prototype.propertyIsEnumerable,fx=(r,e,t)=>e in r?W$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,X$=(r,e)=>{for(var t in e||(e={}))Q$.call(e,t)&&fx(r,t,e[t]);if(iP)for(var t of iP(e))Z$.call(e,t)&&fx(r,t,e[t]);return r},eG=(r,e)=>J$(r,Y$(e)),Yn=(r,e,t)=>fx(r,typeof e!="symbol"?e+"":e,t),px=class extends Tm{constructor(e,t){super(e,t),this.logger=e,this.core=t,Yn(this,"messages",new Map),Yn(this,"messagesWithoutClientAck",new Map),Yn(this,"name",Xq),Yn(this,"version",ez),Yn(this,"initialized",!1),Yn(this,"storagePrefix",ks),Yn(this,"init",()=>p(this,null,function*(){if(!this.initialized){this.logger.trace("Initialized");try{let n=yield this.getRelayerMessages();typeof n<"u"&&(this.messages=n);let i=yield this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}})),Yn(this,"set",(n,i,s)=>p(this,null,function*(){this.isInitialized();let o=gi(i),a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===dg.inbound){let c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,eG(X$({},c),{[o]:i}))}return yield this.persist(),o})),Yn(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),Yn(this,"getWithoutAck",n=>{this.isInitialized();let i={};for(let s of n){let o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Yn(this,"has",(n,i)=>{this.isInitialized();let s=this.get(n),o=gi(i);return typeof s[o]<"u"}),Yn(this,"ack",(n,i)=>p(this,null,function*(){this.isInitialized();let s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;let o=gi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),yield this.persist()})),Yn(this,"del",n=>p(this,null,function*(){this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),yield this.persist()})),this.logger=Xr(e,this.name),this.core=t}get context(){return vn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}setRelayerMessages(e){return p(this,null,function*(){yield this.core.storage.setItem(this.storageKey,tg(e))})}setRelayerMessagesWithoutClientAck(e){return p(this,null,function*(){yield this.core.storage.setItem(this.storageKeyWithoutClientAck,tg(e))})}getRelayerMessages(){return p(this,null,function*(){let e=yield this.core.storage.getItem(this.storageKey);return typeof e<"u"?rg(e):void 0})}getRelayerMessagesWithoutClientAck(){return p(this,null,function*(){let e=yield this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?rg(e):void 0})}persist(){return p(this,null,function*(){yield this.setRelayerMessages(this.messages),yield this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)})}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}},tG=Object.defineProperty,rG=Object.defineProperties,nG=Object.getOwnPropertyDescriptors,sP=Object.getOwnPropertySymbols,iG=Object.prototype.hasOwnProperty,sG=Object.prototype.propertyIsEnumerable,mx=(r,e,t)=>e in r?tG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hg=(r,e)=>{for(var t in e||(e={}))iG.call(e,t)&&mx(r,t,e[t]);if(sP)for(var t of sP(e))sG.call(e,t)&&mx(r,t,e[t]);return r},Xw=(r,e)=>rG(r,nG(e)),qi=(r,e,t)=>mx(r,typeof e!="symbol"?e+"":e,t),gx=class extends Nm{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,qi(this,"events",new mo.EventEmitter),qi(this,"name",tz),qi(this,"queue",new Map),qi(this,"publishTimeout",(0,me.toMiliseconds)(me.ONE_MINUTE)),qi(this,"initialPublishTimeout",(0,me.toMiliseconds)(me.ONE_SECOND*15)),qi(this,"needsTransportRestart",!1),qi(this,"publish",(n,i,s)=>p(this,null,function*(){var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});let a=s?.ttl||Y6,c=Rd(s),l=s?.prompt||!1,u=s?.tag||0,h=s?.id||Uo().toString(),m={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:h,attestation:s?.attestation,tvf:s?.tvf}},b=`Failed to publish payload, please try again. id:${h} tag:${u}`;try{let f=new Promise(v=>p(this,null,function*(){let E=({id:N})=>{m.opts.id===N&&(this.removeRequestFromQueue(N),this.relayer.events.removeListener(Dr.publish,E),v(m))};this.relayer.events.on(Dr.publish,E);let I=fo(new Promise((N,D)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:h,attestation:s?.attestation,tvf:s?.tvf}).then(N).catch(F=>{this.logger.warn(F,F?.message),D(F)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${u}`);try{yield I,this.events.removeListener(Dr.publish,E)}catch(N){this.queue.set(h,Xw(hg({},m),{attempt:1})),this.logger.warn(N,N?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:h,topic:n,message:i,opts:s}}),yield fo(f,this.publishTimeout,b)}catch(f){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(f),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw f}finally{this.queue.delete(h)}})),qi(this,"on",(n,i)=>{this.events.on(n,i)}),qi(this,"once",(n,i)=>{this.events.once(n,i)}),qi(this,"off",(n,i)=>{this.events.off(n,i)}),qi(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Xr(t,this.name),this.registerEventListeners()}get context(){return vn(this.logger)}rpcPublish(e){return p(this,null,function*(){var t,n,i,s;let{topic:o,message:a,ttl:c=Y6,prompt:l,tag:u,id:h,attestation:m,tvf:b}=e,f={method:ru(Rd().protocol).publish,params:hg({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:m},b),id:h};Nr((t=f.params)==null?void 0:t.prompt)&&((n=f.params)==null||delete n.prompt),Nr((i=f.params)==null?void 0:i.tag)&&((s=f.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});let v=yield this.relayer.request(f);return this.relayer.events.emit(Dr.publish,e),this.logger.debug("Successfully Published Payload"),v})}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((e,t)=>p(this,null,function*(){let n=e.attempt+1;this.queue.set(t,Xw(hg({},e),{attempt:n}));let{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),yield this.rpcPublish(Xw(hg({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(ic.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Dr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Dr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}},oG=Object.defineProperty,aG=(r,e,t)=>e in r?oG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,su=(r,e,t)=>aG(r,typeof e!="symbol"?e+"":e,t),bx=class{constructor(){su(this,"map",new Map),su(this,"set",(e,t)=>{let n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])}),su(this,"get",e=>this.map.get(e)||[]),su(this,"exists",(e,t)=>this.get(e).includes(t)),su(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let n=this.get(e);if(!this.exists(e,t))return;let i=n.filter(s=>s!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),su(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}},cG=Object.defineProperty,lG=Object.defineProperties,uG=Object.getOwnPropertyDescriptors,oP=Object.getOwnPropertySymbols,hG=Object.prototype.hasOwnProperty,dG=Object.prototype.propertyIsEnumerable,yx=(r,e,t)=>e in r?cG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kd=(r,e)=>{for(var t in e||(e={}))hG.call(e,t)&&yx(r,t,e[t]);if(oP)for(var t of oP(e))dG.call(e,t)&&yx(r,t,e[t]);return r},ex=(r,e)=>lG(r,uG(e)),ut=(r,e,t)=>yx(r,typeof e!="symbol"?e+"":e,t),vx=class extends Om{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ut(this,"subscriptions",new Map),ut(this,"topicMap",new bx),ut(this,"events",new mo.EventEmitter),ut(this,"name",cz),ut(this,"version",lz),ut(this,"pending",new Map),ut(this,"cached",[]),ut(this,"initialized",!1),ut(this,"storagePrefix",ks),ut(this,"subscribeTimeout",(0,me.toMiliseconds)(me.ONE_MINUTE)),ut(this,"initialSubscribeTimeout",(0,me.toMiliseconds)(me.ONE_SECOND*15)),ut(this,"clientId"),ut(this,"batchSubscribeTopicsLimit",500),ut(this,"init",()=>p(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),yield this.restore()),this.initialized=!0})),ut(this,"subscribe",(n,i)=>p(this,null,function*(){this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{let s=Rd(i),o={topic:n,relay:s,transportType:i?.transportType};this.pending.set(n,o);let a=yield this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}})),ut(this,"unsubscribe",(n,i)=>p(this,null,function*(){this.isInitialized(),typeof i?.id<"u"?yield this.unsubscribeById(n,i.id,i):yield this.unsubscribeByTopic(n,i)})),ut(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),ut(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),ut(this,"on",(n,i)=>{this.events.on(n,i)}),ut(this,"once",(n,i)=>{this.events.once(n,i)}),ut(this,"off",(n,i)=>{this.events.off(n,i)}),ut(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),ut(this,"start",()=>p(this,null,function*(){yield this.onConnect()})),ut(this,"stop",()=>p(this,null,function*(){yield this.onDisconnect()})),ut(this,"restart",()=>p(this,null,function*(){yield this.restore(),yield this.onRestart()})),ut(this,"checkPending",()=>p(this,null,function*(){if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;let n=[];this.pending.forEach(i=>{n.push(i)}),yield this.batchSubscribe(n)})),ut(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ic.pulse,()=>p(this,null,function*(){yield this.checkPending()})),this.events.on(Qn.created,n=>p(this,null,function*(){let i=Qn.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),yield this.persist()})),this.events.on(Qn.deleted,n=>p(this,null,function*(){let i=Qn.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),yield this.persist()}))}),this.relayer=e,this.logger=Xr(t,this.name),this.clientId=""}get context(){return vn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(e,t){return p(this,null,function*(){let n=this.topicMap.get(e);yield Promise.all(n.map(i=>p(this,null,function*(){return yield this.unsubscribeById(e,i,t)})))})}unsubscribeById(e,t,n){return p(this,null,function*(){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{let i=Rd(n);yield this.restartToComplete({topic:e,id:t,relay:i}),yield this.rpcUnsubscribe(e,t,i);let s=it("USER_DISCONNECTED",`${this.name}, ${e}`);yield this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}})}rpcSubscribe(e,t,n){return p(this,null,function*(){var i;(!n||n?.transportType===gt.relay)&&(yield this.restartToComplete({topic:e,id:e,relay:t}));let s={method:ru(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});let o=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{let a=yield this.getSubscriptionId(e);if(n?.transportType===gt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},(0,me.toMiliseconds)(me.ONE_SECOND)),a;let c=new Promise(u=>p(this,null,function*(){let h=m=>{m.topic===e&&(this.events.removeListener(Qn.created,h),u(m.id))};this.events.on(Qn.created,h);try{let m=yield fo(new Promise((b,f)=>{this.relayer.request(s).catch(v=>{this.logger.warn(v,v?.message),f(v)}).then(b)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Qn.created,h),u(m)}catch{}})),l=yield fo(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Dr.connection_stalled),o)throw a}return null})}rpcBatchSubscribe(e){return p(this,null,function*(){if(!e.length)return;let t=e[0].relay,n={method:ru(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{yield yield fo(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Dr.connection_stalled)}})}rpcBatchFetchMessages(e){return p(this,null,function*(){if(!e.length)return;let t=e[0].relay,n={method:ru(t.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=yield yield fo(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Dr.connection_stalled)}return i})}rpcUnsubscribe(e,t,n){let i={method:ru(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,ex(kd({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,kd({},t)),this.pending.delete(t.topic)})}onUnsubscribe(e,t,n){return p(this,null,function*(){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),yield this.relayer.messages.del(e)})}setRelayerSubscriptions(e){return p(this,null,function*(){yield this.relayer.core.storage.setItem(this.storageKey,e)})}getRelayerSubscriptions(){return p(this,null,function*(){return yield this.relayer.core.storage.getItem(this.storageKey)})}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,kd({},t)),this.topicMap.set(t.topic,e),this.events.emit(Qn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Qn.deleted,ex(kd({},n),{reason:t}))}persist(){return p(this,null,function*(){yield this.setRelayerSubscriptions(this.values),this.events.emit(Qn.sync)})}onRestart(){return p(this,null,function*(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<t;n++){let i=e.splice(0,this.batchSubscribeTopicsLimit);yield this.batchSubscribe(i)}}this.events.emit(Qn.resubscribed)})}restore(){return p(this,null,function*(){try{let e=yield this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}})}batchSubscribe(e){return p(this,null,function*(){e.length&&(yield this.rpcBatchSubscribe(e),this.onBatchSubscribe(yield Promise.all(e.map(t=>p(this,null,function*(){return ex(kd({},t),{id:yield this.getSubscriptionId(t.topic)})})))))})}batchFetchMessages(e){return p(this,null,function*(){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let t=yield this.rpcBatchFetchMessages(e);t&&t.messages&&(yield Y8((0,me.toMiliseconds)(me.ONE_SECOND)),yield this.relayer.handleBatchMessageEvents(t.messages))})}onConnect(){return p(this,null,function*(){yield this.restart(),this.reset()})}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(e){return p(this,null,function*(){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),yield this.relayer.transportOpen())})}getClientId(){return p(this,null,function*(){return this.clientId||(this.clientId=yield this.relayer.core.crypto.getClientId()),this.clientId})}getSubscriptionId(e){return p(this,null,function*(){return gi(e+(yield this.getClientId()))})}},fG=Object.defineProperty,aP=Object.getOwnPropertySymbols,pG=Object.prototype.hasOwnProperty,mG=Object.prototype.propertyIsEnumerable,wx=(r,e,t)=>e in r?fG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cP=(r,e)=>{for(var t in e||(e={}))pG.call(e,t)&&wx(r,t,e[t]);if(aP)for(var t of aP(e))mG.call(e,t)&&wx(r,t,e[t]);return r},et=(r,e,t)=>wx(r,typeof e!="symbol"?e+"":e,t),xx=class extends Dm{constructor(e){super(e),et(this,"protocol","wc"),et(this,"version",2),et(this,"core"),et(this,"logger"),et(this,"events",new mo.EventEmitter),et(this,"provider"),et(this,"messages"),et(this,"subscriber"),et(this,"publisher"),et(this,"name",nz),et(this,"transportExplicitlyClosed",!1),et(this,"initialized",!1),et(this,"connectionAttemptInProgress",!1),et(this,"relayUrl"),et(this,"projectId"),et(this,"packageName"),et(this,"bundleId"),et(this,"hasExperiencedNetworkDisruption",!1),et(this,"pingTimeout"),et(this,"heartBeatTimeout",(0,me.toMiliseconds)(me.THIRTY_SECONDS+me.FIVE_SECONDS)),et(this,"reconnectTimeout"),et(this,"connectPromise"),et(this,"reconnectInProgress",!1),et(this,"requestsInFlight",[]),et(this,"connectTimeout",(0,me.toMiliseconds)(me.ONE_SECOND*15)),et(this,"request",t=>p(this,null,function*(){var n,i;this.logger.debug("Publishing Request Payload");let s=t.id||Uo().toString();yield this.toEstablishConnection();try{this.logger.trace({id:s,method:t.method,topic:(n=t.params)==null?void 0:n.topic},"relayer.request - publishing...");let o=`${s}:${((i=t.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);let a=yield this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}})),et(this,"resetPingTimeout",()=>{_d()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(t=this.provider)==null?void 0:t.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),et(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),et(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(Dr.connect)}),et(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),et(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(Dr.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),et(this,"registerProviderListeners",()=>{this.provider.on(bi.payload,this.onPayloadHandler),this.provider.on(bi.connect,this.onConnectHandler),this.provider.on(bi.disconnect,this.onDisconnectHandler),this.provider.on(bi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Xr(e.logger,this.name):(0,qa.default)(Bo({level:e.logger||rz})),this.messages=new px(this.logger,e.core),this.subscriber=new vx(this,this.logger),this.publisher=new gx(this,this.logger),this.relayUrl=e?.relayUrl||EP,this.projectId=e.projectId,j8()?this.packageName=Pw():H8()&&(this.bundleId=Pw()),this.provider={}}init(){return p(this,null,function*(){if(this.logger.trace("Initialized"),this.registerEventListeners(),yield Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{yield this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}})}get context(){return vn(this.logger)}get connected(){var e,t,n;return((n=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,t,n;return((n=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}publish(e,t,n){return p(this,null,function*(){this.isInitialized(),yield this.publisher.publish(e,t,n),yield this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:gt.relay},dg.outbound)})}subscribe(e,t){return p(this,null,function*(){var n,i,s;this.isInitialized(),(!(t!=null&&t.transportType)||t?.transportType==="relay")&&(yield this.toEstablishConnection());let o=typeof((n=t?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=t?.internal)==null?void 0:i.throwOnFailedPublish,a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c,l=u=>{u.topic===e&&(this.subscriber.off(Qn.created,l),c())};return yield Promise.all([new Promise(u=>{c=u,this.subscriber.on(Qn.created,l)}),new Promise((u,h)=>p(this,null,function*(){a=(yield this.subscriber.subscribe(e,cP({internal:{throwOnFailedPublish:o}},t)).catch(m=>{o&&h(m)}))||a,u()}))]),a})}unsubscribe(e,t){return p(this,null,function*(){this.isInitialized(),yield this.subscriber.unsubscribe(e,t)})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportDisconnect(){return p(this,null,function*(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?yield fo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()})}transportClose(){return p(this,null,function*(){this.transportExplicitlyClosed=!0,yield this.transportDisconnect()})}transportOpen(e){return p(this,null,function*(){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),yield this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((t,n)=>p(this,null,function*(){yield this.connect(e).then(t).catch(n).finally(()=>{this.connectPromise=void 0})})),yield this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)})}restartTransport(e){return p(this,null,function*(){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,yield this.confirmOnlineStateOrThrow(),yield this.transportClose(),yield this.transportOpen())})}confirmOnlineStateOrThrow(){return p(this,null,function*(){if(!(yield Qw()))throw new Error("No internet connection detected. Please restart your network and try again.")})}handleBatchMessageEvents(e){return p(this,null,function*(){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(let n of t)try{yield this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)})}onLinkMessageEvent(e,t){return p(this,null,function*(){let{topic:n}=e;if(!t.sessionExists){let i=Yt(me.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};yield this.core.pairing.pairings.set(n,s)}this.events.emit(Dr.message,e),yield this.recordMessageEvent(e,dg.inbound)})}connect(e){return p(this,null,function*(){yield this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,yield this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),yield this.createProvider(),yield new Promise((n,i)=>p(this,null,function*(){let s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(bi.disconnect,s),yield fo(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(bi.disconnect,s),clearTimeout(this.reconnectTimeout)}),yield new Promise((o,a)=>p(this,null,function*(){let c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(bi.disconnect,c),yield this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(bi.disconnect,c)})})),this.hasExperiencedNetworkDisruption=!1,n()}))}catch(n){yield this.subscriber.stop();let i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}yield new Promise(n=>setTimeout(n,(0,me.toMiliseconds)(t*1))),t++}})}startPingTimeout(){var e,t,n,i,s;if(_d())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}createProvider(){return p(this,null,function*(){this.provider.connection&&this.unregisterProviderListeners();let e=yield this.core.crypto.signJWT(this.relayUrl);this.provider=new wn(new ug(q8({sdkVersion:rx,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()})}recordMessageEvent(e,t){return p(this,null,function*(){let{topic:n,message:i}=e;yield this.messages.set(n,i,t)})}shouldIgnoreMessageEvent(e){return p(this,null,function*(){let{topic:t,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!(yield this.subscriber.isKnownTopic(t)))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let i=this.messages.has(t,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i})}onProviderPayload(e){return p(this,null,function*(){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),dh(e)){if(!e.method.endsWith(iz))return;let t=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=t.data,a={topic:n,message:i,publishedAt:s,transportType:gt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(cP({type:"event",event:t.id},a)),this.events.emit(t.id,a),yield this.acknowledgePayload(e),yield this.onMessageEvent(a)}else fh(e)&&this.events.emit(Dr.message_ack,e)})}onMessageEvent(e){return p(this,null,function*(){(yield this.shouldIgnoreMessageEvent(e))||(yield this.recordMessageEvent(e,dg.inbound),this.events.emit(Dr.message,e))})}acknowledgePayload(e){return p(this,null,function*(){let t=Lo(e.id,!0);yield this.provider.connection.send(t)})}unregisterProviderListeners(){this.provider.off(bi.payload,this.onPayloadHandler),this.provider.off(bi.connect,this.onConnectHandler),this.provider.off(bi.disconnect,this.onDisconnectHandler),this.provider.off(bi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}registerEventListeners(){return p(this,null,function*(){let e=yield Qw();q6(t=>p(this,null,function*(){e!==t&&(e=t,t?yield this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,yield this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))})}onProviderDisconnect(){return p(this,null,function*(){clearTimeout(this.pingTimeout),this.events.emit(Dr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,yield this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(()=>p(this,null,function*(){yield this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,me.toMiliseconds)(sz)))))})}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}toEstablishConnection(){return p(this,null,function*(){yield this.confirmOnlineStateOrThrow(),!this.connected&&(yield this.connect())})}};function gG(){}function lP(r){if(!r||typeof r!="object")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(r)==="[object Object]":!1}function uP(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function hP(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var bG="[object RegExp]",yG="[object String]",vG="[object Number]",wG="[object Boolean]",dP="[object Arguments]",xG="[object Symbol]",EG="[object Date]",CG="[object Map]",_G="[object Set]",AG="[object Array]",SG="[object Function]",IG="[object ArrayBuffer]",tx="[object Object]",PG="[object Error]",TG="[object DataView]",NG="[object Uint8Array]",DG="[object Uint8ClampedArray]",RG="[object Uint16Array]",OG="[object Uint32Array]",MG="[object BigUint64Array]",kG="[object Int8Array]",FG="[object Int16Array]",BG="[object Int32Array]",UG="[object BigInt64Array]",LG="[object Float32Array]",VG="[object Float64Array]";function jG(r,e){return r===e||Number.isNaN(r)&&Number.isNaN(e)}function HG(r,e,t){return Bd(r,e,void 0,void 0,void 0,void 0,t)}function Bd(r,e,t,n,i,s,o){let a=o(r,e,t,n,i,s);if(a!==void 0)return a;if(typeof r==typeof e)switch(typeof r){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return r===e;case"number":return r===e||Object.is(r,e);case"function":return r===e;case"object":return Ud(r,e,s,o)}return Ud(r,e,s,o)}function Ud(r,e,t,n){if(Object.is(r,e))return!0;let i=hP(r),s=hP(e);if(i===dP&&(i=tx),s===dP&&(s=tx),i!==s)return!1;switch(i){case yG:return r.toString()===e.toString();case vG:{let c=r.valueOf(),l=e.valueOf();return jG(c,l)}case wG:case EG:case xG:return Object.is(r.valueOf(),e.valueOf());case bG:return r.source===e.source&&r.flags===e.flags;case SG:return r===e}t=t??new Map;let o=t.get(r),a=t.get(e);if(o!=null&&a!=null)return o===e;t.set(r,e),t.set(e,r);try{switch(i){case CG:{if(r.size!==e.size)return!1;for(let[c,l]of r.entries())if(!e.has(c)||!Bd(l,e.get(c),c,r,e,t,n))return!1;return!0}case _G:{if(r.size!==e.size)return!1;let c=Array.from(r.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){let h=c[u],m=l.findIndex(b=>Bd(h,b,void 0,r,e,t,n));if(m===-1)return!1;l.splice(m,1)}return!0}case AG:case NG:case DG:case RG:case OG:case MG:case kG:case FG:case BG:case UG:case LG:case VG:{if(typeof Buffer<"u"&&Buffer.isBuffer(r)!==Buffer.isBuffer(e)||r.length!==e.length)return!1;for(let c=0;c<r.length;c++)if(!Bd(r[c],e[c],c,r,e,t,n))return!1;return!0}case IG:return r.byteLength!==e.byteLength?!1:Ud(new Uint8Array(r),new Uint8Array(e),t,n);case TG:return r.byteLength!==e.byteLength||r.byteOffset!==e.byteOffset?!1:Ud(new Uint8Array(r),new Uint8Array(e),t,n);case PG:return r.name===e.name&&r.message===e.message;case tx:{if(!(Ud(r.constructor,e.constructor,t,n)||lP(r)&&lP(e)))return!1;let c=[...Object.keys(r),...uP(r)],l=[...Object.keys(e),...uP(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){let h=c[u],m=r[h];if(!Object.hasOwn(e,h))return!1;let b=e[h];if(!Bd(m,b,h,r,e,t,n))return!1}return!0}default:return!1}}finally{t.delete(r),t.delete(e)}}function qG(r,e){return HG(r,e,gG)}var zG=Object.defineProperty,fP=Object.getOwnPropertySymbols,$G=Object.prototype.hasOwnProperty,GG=Object.prototype.propertyIsEnumerable,Ex=(r,e,t)=>e in r?zG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pP=(r,e)=>{for(var t in e||(e={}))$G.call(e,t)&&Ex(r,t,e[t]);if(fP)for(var t of fP(e))GG.call(e,t)&&Ex(r,t,e[t]);return r},Ln=(r,e,t)=>Ex(r,typeof e!="symbol"?e+"":e,t),Fs=class extends Rm{constructor(e,t,n,i=ks,s=void 0){super(e,t,n,i),this.core=e,this.logger=t,this.name=n,Ln(this,"map",new Map),Ln(this,"version",oz),Ln(this,"cached",[]),Ln(this,"initialized",!1),Ln(this,"getKey"),Ln(this,"storagePrefix",ks),Ln(this,"recentlyDeleted",[]),Ln(this,"recentlyDeletedLimit",200),Ln(this,"init",()=>p(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),yield this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Nr(o)?this.map.set(this.getKey(o),o):T6(o)?this.map.set(o.id,o):N6(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)})),Ln(this,"set",(o,a)=>p(this,null,function*(){this.isInitialized(),this.map.has(o)?yield this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),yield this.persist())})),Ln(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ln(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>qG(a[c],o[c]))):this.values)),Ln(this,"update",(o,a)=>p(this,null,function*(){this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});let c=pP(pP({},this.getData(o)),a);this.map.set(o,c),yield this.persist()})),Ln(this,"delete",(o,a)=>p(this,null,function*(){this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),yield this.persist())})),this.logger=Xr(t,this.name),this.storagePrefix=i,this.getKey=s}get context(){return vn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}setDataStore(e){return p(this,null,function*(){yield this.core.storage.setItem(this.storageKey,e)})}getDataStore(){return p(this,null,function*(){return yield this.core.storage.getItem(this.storageKey)})}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:i}=re("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}let{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}persist(){return p(this,null,function*(){yield this.setDataStore(this.values)})}restore(){return p(this,null,function*(){try{let e=yield this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}})}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}},KG=Object.defineProperty,WG=(r,e,t)=>e in r?KG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qe=(r,e,t)=>WG(r,typeof e!="symbol"?e+"":e,t),Cx=class{constructor(e,t){this.core=e,this.logger=t,qe(this,"name",uz),qe(this,"version",hz),qe(this,"events",new mo.default),qe(this,"pairings"),qe(this,"initialized",!1),qe(this,"storagePrefix",ks),qe(this,"ignoredPayloadTypes",[ji]),qe(this,"registeredMethods",[]),qe(this,"init",()=>p(this,null,function*(){this.initialized||(yield this.pairings.init(),yield this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),qe(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),qe(this,"create",n=>p(this,null,function*(){this.isInitialized();let i=ag(),s=yield this.core.crypto.setSymKey(i),o=Yt(me.FIVE_MINUTES),a={protocol:Rx},c={topic:s,expiry:o,relay:a,active:!1,methods:n?.methods},l=$w({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(ua.create,c),this.core.expirer.set(s,o),yield this.pairings.set(s,c),yield this.core.relayer.subscribe(s,{transportType:n?.transportType}),{topic:s,uri:l}})),qe(this,"pair",n=>p(this,null,function*(){this.isInitialized();let i=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[zi.pairing_started]}});this.isValidPair(n,i);let{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=zw(n.uri);i.props.properties.topic=s,i.addTrace(zi.pairing_uri_validation_success),i.addTrace(zi.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(zi.existing_pairing),u.active)throw i.setError(Ms.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(zi.pairing_not_expired)}let h=c||Yt(me.FIVE_MINUTES),m={topic:s,relay:a,expiry:h,active:!1,methods:l};this.core.expirer.set(s,h),yield this.pairings.set(s,m),i.addTrace(zi.store_new_pairing),n.activatePairing&&(yield this.activate({topic:s})),this.events.emit(ua.create,m),i.addTrace(zi.emit_inactive_pairing),this.core.crypto.keychain.has(s)||(yield this.core.crypto.setSymKey(o,s)),i.addTrace(zi.subscribing_pairing_topic);try{yield this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Ms.no_internet_connection)}try{yield this.core.relayer.subscribe(s,{relay:a})}catch(b){throw i.setError(Ms.subscribe_pairing_topic_failure),b}return i.addTrace(zi.subscribe_pairing_topic_success),m})),qe(this,"activate",i=>p(this,[i],function*({topic:n}){this.isInitialized();let s=Yt(me.FIVE_MINUTES);this.core.expirer.set(n,s),yield this.pairings.update(n,{active:!0,expiry:s})})),qe(this,"ping",n=>p(this,null,function*(){this.isInitialized(),yield this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:i}=n;if(this.pairings.keys.includes(i)){let s=yield this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ho();this.events.once(Xe("pairing_ping",s),({error:l})=>{l?c(l):a()}),yield o()}})),qe(this,"updateExpiry",s=>p(this,[s],function*({topic:n,expiry:i}){this.isInitialized(),yield this.pairings.update(n,{expiry:i})})),qe(this,"updateMetadata",s=>p(this,[s],function*({topic:n,metadata:i}){this.isInitialized(),yield this.pairings.update(n,{peerMetadata:i})})),qe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),qe(this,"disconnect",n=>p(this,null,function*(){this.isInitialized(),yield this.isValidDisconnect(n);let{topic:i}=n;this.pairings.keys.includes(i)&&(yield this.sendRequest(i,"wc_pairingDelete",it("USER_DISCONNECTED")),yield this.deletePairing(i))})),qe(this,"formatUriFromPairing",n=>{this.isInitialized();let{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return $w({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),qe(this,"sendRequest",(n,i,s)=>p(this,null,function*(){let o=Ti(i,s),a=yield this.core.crypto.encode(n,o),c=Md[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id})),qe(this,"sendResult",(n,i,s)=>p(this,null,function*(){let o=Lo(n,s),a=yield this.core.crypto.encode(i,o),c=(yield this.core.history.get(i,n)).request.method,l=Md[c].res;yield this.core.relayer.publish(i,a,l),yield this.core.history.resolve(o)})),qe(this,"sendError",(n,i,s)=>p(this,null,function*(){let o=tl(n,s),a=yield this.core.crypto.encode(i,o),c=(yield this.core.history.get(i,n)).request.method,l=Md[c]?Md[c].res:Md.unregistered_method.res;yield this.core.relayer.publish(i,a,l),yield this.core.history.resolve(o)})),qe(this,"deletePairing",(n,i)=>p(this,null,function*(){yield this.core.relayer.unsubscribe(n),yield Promise.all([this.pairings.delete(n,it("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])})),qe(this,"cleanup",()=>p(this,null,function*(){let n=this.pairings.getAll().filter(i=>Ds(i.expiry));yield Promise.all(n.map(i=>this.deletePairing(i.topic)))})),qe(this,"onRelayEventRequest",n=>p(this,null,function*(){let{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return yield this.onPairingPingRequest(i,s);case"wc_pairingDelete":return yield this.onPairingDeleteRequest(i,s);default:return yield this.onUnknownRpcMethodRequest(i,s)}})),qe(this,"onRelayEventResponse",n=>p(this,null,function*(){let{topic:i,payload:s}=n,o=(yield this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}})),qe(this,"onPairingPingRequest",(n,i)=>p(this,null,function*(){let{id:s}=i;try{this.isValidPing({topic:n}),yield this.sendResult(s,n,!0),this.events.emit(ua.ping,{id:s,topic:n})}catch(o){yield this.sendError(s,n,o),this.logger.error(o)}})),qe(this,"onPairingPingResponse",(n,i)=>{let{id:s}=i;setTimeout(()=>{Ni(i)?this.events.emit(Xe("pairing_ping",s),{}):ci(i)&&this.events.emit(Xe("pairing_ping",s),{error:i.error})},500)}),qe(this,"onPairingDeleteRequest",(n,i)=>p(this,null,function*(){let{id:s}=i;try{this.isValidDisconnect({topic:n}),yield this.deletePairing(n),this.events.emit(ua.delete,{id:s,topic:n})}catch(o){yield this.sendError(s,n,o),this.logger.error(o)}})),qe(this,"onUnknownRpcMethodRequest",(n,i)=>p(this,null,function*(){let{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;let a=it("WC_METHOD_UNSUPPORTED",o);yield this.sendError(s,n,a),this.logger.error(a)}catch(a){yield this.sendError(s,n,a),this.logger.error(a)}})),qe(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(it("WC_METHOD_UNSUPPORTED",n))}),qe(this,"isValidPair",(n,i)=>{var s;if(!pn(n)){let{message:a}=re("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Ms.malformed_pairing_uri),new Error(a)}if(!P6(n.uri)){let{message:a}=re("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Ms.malformed_pairing_uri),new Error(a)}let o=zw(n?.uri);if(!((s=o?.relay)!=null&&s.protocol)){let{message:a}=re("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Ms.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){let{message:a}=re("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Ms.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&(0,me.toMiliseconds)(o?.expiryTimestamp)<Date.now()){i.setError(Ms.pairing_expired);let{message:a}=re("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),qe(this,"isValidPing",n=>p(this,null,function*(){if(!pn(n)){let{message:s}=re("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}let{topic:i}=n;yield this.isValidPairingTopic(i)})),qe(this,"isValidDisconnect",n=>p(this,null,function*(){if(!pn(n)){let{message:s}=re("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}let{topic:i}=n;yield this.isValidPairingTopic(i)})),qe(this,"isValidPairingTopic",n=>p(this,null,function*(){if(!jt(n,!1)){let{message:i}=re("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){let{message:i}=re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Ds(this.pairings.get(n).expiry)){yield this.deletePairing(n);let{message:i}=re("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}})),this.core=e,this.logger=Xr(t,this.name),this.pairings=new Fs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return vn(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Dr.message,e=>p(this,null,function*(){let{topic:t,message:n,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==gt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{let s=yield this.core.crypto.decode(t,n);dh(s)?(this.core.history.set(t,s),yield this.onRelayEventRequest({topic:t,payload:s})):fh(s)&&(yield this.core.history.resolve(s),yield this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id)),yield this.core.relayer.messages.ack(t,n)}catch(s){this.logger.error(s)}}))}registerExpirerEvents(){this.core.expirer.on(Zn.expired,e=>p(this,null,function*(){let{topic:t}=ng(e.target);t&&this.pairings.keys.includes(t)&&(yield this.deletePairing(t,!0),this.events.emit(ua.expire,{topic:t}))}))}},JG=Object.defineProperty,YG=(r,e,t)=>e in r?JG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cn=(r,e,t)=>YG(r,typeof e!="symbol"?e+"":e,t),_x=class extends Pm{constructor(e,t){super(e,t),this.core=e,this.logger=t,cn(this,"records",new Map),cn(this,"events",new mo.EventEmitter),cn(this,"name",dz),cn(this,"version",fz),cn(this,"cached",[]),cn(this,"initialized",!1),cn(this,"storagePrefix",ks),cn(this,"init",()=>p(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),yield this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),cn(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;let o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Yt(me.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Hi.created,o)}),cn(this,"resolve",n=>p(this,null,function*(){if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;let i=yield this.getRecord(n.id);typeof i.response>"u"&&(i.response=ci(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(Hi.updated,i))})),cn(this,"get",(n,i)=>p(this,null,function*(){return this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),yield this.getRecord(i)})),cn(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Hi.deleted,s)}}),this.persist()}),cn(this,"exists",(n,i)=>p(this,null,function*(){return this.isInitialized(),this.records.has(i)?(yield this.getRecord(i)).topic===n:!1})),cn(this,"on",(n,i)=>{this.events.on(n,i)}),cn(this,"once",(n,i)=>{this.events.once(n,i)}),cn(this,"off",(n,i)=>{this.events.off(n,i)}),cn(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Xr(t,this.name)}get context(){return vn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;let n={topic:t.topic,request:Ti(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}setJsonRpcRecords(e){return p(this,null,function*(){yield this.core.storage.setItem(this.storageKey,e)})}getJsonRpcRecords(){return p(this,null,function*(){return yield this.core.storage.getItem(this.storageKey)})}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}persist(){return p(this,null,function*(){yield this.setJsonRpcRecords(this.values),this.events.emit(Hi.sync)})}restore(){return p(this,null,function*(){try{let e=yield this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}})}registerEventListeners(){this.events.on(Hi.created,e=>{let t=Hi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Hi.updated,e=>{let t=Hi.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Hi.deleted,e=>{let t=Hi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(ic.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,me.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Hi.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}},QG=Object.defineProperty,ZG=(r,e,t)=>e in r?QG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mn=(r,e,t)=>ZG(r,typeof e!="symbol"?e+"":e,t),Ax=class extends Mm{constructor(e,t){super(e,t),this.core=e,this.logger=t,mn(this,"expirations",new Map),mn(this,"events",new mo.EventEmitter),mn(this,"name",pz),mn(this,"version",mz),mn(this,"cached",[]),mn(this,"initialized",!1),mn(this,"storagePrefix",ks),mn(this,"init",()=>p(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),yield this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),mn(this,"has",n=>{try{let i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),mn(this,"set",(n,i)=>{this.isInitialized();let s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Zn.created,{target:s,expiration:o})}),mn(this,"get",n=>{this.isInitialized();let i=this.formatTarget(n);return this.getExpiration(i)}),mn(this,"del",n=>{if(this.isInitialized(),this.has(n)){let i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Zn.deleted,{target:i,expiration:s})}}),mn(this,"on",(n,i)=>{this.events.on(n,i)}),mn(this,"once",(n,i)=>{this.events.once(n,i)}),mn(this,"off",(n,i)=>{this.events.off(n,i)}),mn(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Xr(t,this.name)}get context(){return vn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return $8(e);if(typeof e=="number")return G8(e);let{message:t}=re("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}setExpirations(e){return p(this,null,function*(){yield this.core.storage.setItem(this.storageKey,e)})}getExpirations(){return p(this,null,function*(){return yield this.core.storage.getItem(this.storageKey)})}persist(){return p(this,null,function*(){yield this.setExpirations(this.values),this.events.emit(Zn.sync)})}restore(){return p(this,null,function*(){try{let e=yield this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:t}=re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}})}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:n}=re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return t}checkExpiry(e,t){let{expiry:n}=t;(0,me.toMiliseconds)(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Zn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(ic.pulse,()=>this.checkExpirations()),this.events.on(Zn.created,e=>{let t=Zn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Zn.expired,e=>{let t=Zn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Zn.deleted,e=>{let t=Zn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}},XG=Object.defineProperty,eK=(r,e,t)=>e in r?XG(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cr=(r,e,t)=>eK(r,typeof e!="symbol"?e+"":e,t),Sx=class extends km{constructor(e,t,n){super(e,t,n),this.core=e,this.logger=t,this.store=n,Cr(this,"name",gz),Cr(this,"abortController"),Cr(this,"isDevEnv"),Cr(this,"verifyUrlV3",yz),Cr(this,"storagePrefix",ks),Cr(this,"version",xP),Cr(this,"publicKey"),Cr(this,"fetchPromise"),Cr(this,"init",()=>p(this,null,function*(){var i;this.isDevEnv||(this.publicKey=yield this.store.getItem(this.storeKey),this.publicKey&&(0,me.toMiliseconds)((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),yield this.removePublicKey()))})),Cr(this,"register",i=>p(this,null,function*(){if(!Ql()||this.isDevEnv)return;let s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{let l=(0,vP.getDocument)(),u=this.startAbortTimer(me.ONE_SECOND*5),h=yield new Promise((m,b)=>{let f=()=>{window.removeEventListener("message",E),l.body.removeChild(v),b("attestation aborted")};this.abortController.signal.addEventListener("abort",f);let v=l.createElement("iframe");v.src=c,v.style.display="none",v.addEventListener("error",f,{signal:this.abortController.signal});let E=I=>{if(I.data&&typeof I.data=="string")try{let N=JSON.parse(I.data);if(N.type==="verify_attestation"){if(yd(N.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(v),this.abortController.signal.removeEventListener("abort",f),window.removeEventListener("message",E),m(N.attestation===null?"":N.attestation)}}catch(N){this.logger.warn(N)}};l.body.appendChild(v),window.addEventListener("message",E,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(l){this.logger.warn(l)}return""})),Cr(this,"resolve",i=>p(this,null,function*(){if(this.isDevEnv)return"";let{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(yd(s).payload.id!==a)return;let l=yield this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;let c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)})),Cr(this,"fetchAttestation",(i,s)=>p(this,null,function*(){this.logger.debug(`resolving attestation: ${i} from url: ${s}`);let o=this.startAbortTimer(me.ONE_SECOND*5),a=yield fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?yield a.json():void 0})),Cr(this,"getVerifyUrl",i=>{let s=i||ou;return vz.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${ou}`),s=ou),s}),Cr(this,"fetchPublicKey",()=>p(this,null,function*(){try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let i=this.startAbortTimer(me.FIVE_SECONDS),s=yield fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),yield s.json()}catch(i){this.logger.warn(i)}})),Cr(this,"persistPublicKey",i=>p(this,null,function*(){this.logger.debug("persisting public key to local storage",i),yield this.store.setItem(this.storeKey,i),this.publicKey=i})),Cr(this,"removePublicKey",()=>p(this,null,function*(){this.logger.debug("removing verify v2 public key from storage"),yield this.store.removeItem(this.storeKey),this.publicKey=void 0})),Cr(this,"isValidJwtAttestation",i=>p(this,null,function*(){let s=yield this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}let o=yield this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}})),Cr(this,"getPublicKey",()=>p(this,null,function*(){return this.publicKey?this.publicKey:yield this.fetchAndPersistPublicKey()})),Cr(this,"fetchAndPersistPublicKey",()=>p(this,null,function*(){if(this.fetchPromise)return yield this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(s=>p(this,null,function*(){let o=yield this.fetchPublicKey();o&&(yield this.persistPublicKey(o),s(o))}));let i=yield this.fetchPromise;return this.fetchPromise=void 0,i})),Cr(this,"validateAttestation",(i,s)=>{let o=S6(i,s.publicKey),a={hasExpired:(0,me.toMiliseconds)(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Xr(t,this.name),this.abortController=new AbortController,this.isDevEnv=Id(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return vn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,me.toMiliseconds)(e))}},tK=Object.defineProperty,rK=(r,e,t)=>e in r?tK(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mP=(r,e,t)=>rK(r,typeof e!="symbol"?e+"":e,t),Ix=class extends Fm{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,mP(this,"context",wz),mP(this,"registerDeviceToken",n=>p(this,null,function*(){let{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${xz}/${this.projectId}/clients`;yield fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})})),this.logger=Xr(t,this.context)}},nK=Object.defineProperty,gP=Object.getOwnPropertySymbols,iK=Object.prototype.hasOwnProperty,sK=Object.prototype.propertyIsEnumerable,Px=(r,e,t)=>e in r?nK(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fd=(r,e)=>{for(var t in e||(e={}))iK.call(e,t)&&Px(r,t,e[t]);if(gP)for(var t of gP(e))sK.call(e,t)&&Px(r,t,e[t]);return r},zr=(r,e,t)=>Px(r,typeof e!="symbol"?e+"":e,t),Tx=class extends Bm{constructor(e,t,n=!0){super(e,t,n),this.core=e,this.logger=t,zr(this,"context",Cz),zr(this,"storagePrefix",ks),zr(this,"storageVersion",Ez),zr(this,"events",new Map),zr(this,"shouldPersist",!1),zr(this,"init",()=>p(this,null,function*(){if(!Id())try{let i={eventId:Dw(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:yield this.core.crypto.getClientId(),user_agent:Tw(this.core.relayer.protocol,this.core.relayer.version,rx)}}};yield this.sendEvent([i])}catch(i){this.logger.warn(i)}})),zr(this,"createEvent",i=>{let{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=Dw(),u=this.core.projectId||"",h=Date.now(),m=Fd({eventId:l,timestamp:h,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,m),this.shouldPersist=!0),m}),zr(this,"getEvent",i=>{let{eventId:s,topic:o}=i;if(s)return this.events.get(s);let a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Fd(Fd({},a),this.setMethods(a.eventId))}),zr(this,"deleteEvent",i=>{let{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),zr(this,"setEventListeners",()=>{this.core.heartbeat.on(ic.pulse,()=>p(this,null,function*(){this.shouldPersist&&(yield this.persist()),this.events.forEach(i=>{(0,me.fromMiliseconds)(Date.now())-(0,me.fromMiliseconds)(i.timestamp)>_z&&(this.events.delete(i.eventId),this.shouldPersist=!0)})}))}),zr(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),zr(this,"addTrace",(i,s)=>{let o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),zr(this,"setError",(i,s)=>{let o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),zr(this,"persist",()=>p(this,null,function*(){yield this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),zr(this,"restore",()=>p(this,null,function*(){try{let i=(yield this.core.storage.getItem(this.storageKey))||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Fd(Fd({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}})),zr(this,"submit",()=>p(this,null,function*(){if(!this.telemetryEnabled||this.events.size===0)return;let i=[];for(let[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((yield this.sendEvent(i)).ok)for(let s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}})),zr(this,"sendEvent",i=>p(this,null,function*(){let s=this.getAppDomain()?"":"&sp=desktop";return yield fetch(`${Az}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${rx}${s}`,{method:"POST",body:JSON.stringify(i)})})),zr(this,"getAppDomain",()=>eg().url),this.logger=Xr(t,this.context),this.telemetryEnabled=n,n?this.restore().then(()=>p(this,null,function*(){yield this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}},oK=Object.defineProperty,bP=Object.getOwnPropertySymbols,aK=Object.prototype.hasOwnProperty,cK=Object.prototype.propertyIsEnumerable,Nx=(r,e,t)=>e in r?oK(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,yP=(r,e)=>{for(var t in e||(e={}))aK.call(e,t)&&Nx(r,t,e[t]);if(bP)for(var t of bP(e))cK.call(e,t)&&Nx(r,t,e[t]);return r},mt=(r,e,t)=>Nx(r,typeof e!="symbol"?e+"":e,t),Dx=class r extends Im{constructor(e){var t;super(e),mt(this,"protocol",wP),mt(this,"version",xP),mt(this,"name",fg),mt(this,"relayUrl"),mt(this,"projectId"),mt(this,"customStoragePrefix"),mt(this,"events",new mo.EventEmitter),mt(this,"logger"),mt(this,"heartbeat"),mt(this,"relayer"),mt(this,"crypto"),mt(this,"storage"),mt(this,"history"),mt(this,"expirer"),mt(this,"pairing"),mt(this,"verify"),mt(this,"echoClient"),mt(this,"linkModeSupportedApps"),mt(this,"eventClient"),mt(this,"initialized",!1),mt(this,"logChunkController"),mt(this,"on",(o,a)=>this.events.on(o,a)),mt(this,"once",(o,a)=>this.events.once(o,a)),mt(this,"off",(o,a)=>this.events.off(o,a)),mt(this,"removeListener",(o,a)=>this.events.removeListener(o,a)),mt(this,"dispatchEnvelope",({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;let l={topic:o,message:a,publishedAt:Date.now(),transportType:gt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||EP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let n=Bo({level:typeof e?.logger=="string"&&e.logger?e.logger:Kq.logger,name:fg}),{logger:i,chunkLoggerController:s}=e_({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=()=>p(this,null,function*(){var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:yield this.crypto.getClientId()}))})),this.logger=Xr(i,this.name),this.heartbeat=new Wp,this.crypto=new dx(this,this.logger,e?.keychain),this.history=new _x(this,this.logger),this.expirer=new Ax(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Qp(yP(yP({},Wq),e?.storageOptions)),this.relayer=new xx({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Cx(this,this.logger),this.verify=new Sx(this,this.logger,this.storage),this.echoClient=new Ix(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Tx(this,this.logger,e?.telemetryEnabled)}static init(e){return p(this,null,function*(){let t=new r(e);yield t.initialize();let n=yield t.crypto.getClientId();return yield t.storage.setItem(az,n),t})}get context(){return vn(this.logger)}start(){return p(this,null,function*(){this.initialized||(yield this.initialize())})}getLogsBlob(){return p(this,null,function*(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:yield this.crypto.getClientId()})})}addLinkModeSupportedApp(e){return p(this,null,function*(){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),yield this.storage.setItem(Q6,this.linkModeSupportedApps))})}initialize(){return p(this,null,function*(){this.logger.trace("Initialized");try{yield this.crypto.init(),yield this.history.init(),yield this.expirer.init(),yield this.relayer.init(),yield this.heartbeat.init(),yield this.pairing.init(),this.linkModeSupportedApps=(yield this.storage.getItem(Q6))||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}})}},MP=Dx;var Fe=dn(Cl());var bg=dn(Ha());var LP="wc",VP=2,jP="client",$x=`${LP}@${VP}:${jP}:`,Ox={name:jP,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"};var kP="WALLETCONNECT_DEEPLINK_CHOICE";var lK="proposal";var FP="Proposal expired",uK="session",cu=Fe.SEVEN_DAYS,hK="engine",$r={wc_sessionPropose:{req:{ttl:Fe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Fe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Fe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Fe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Fe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Fe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Fe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Fe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Fe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Fe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Fe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Fe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Fe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Fe.FIVE_MINUTES,prompt:!1,tag:1119}}},Mx={min:Fe.FIVE_MINUTES,max:Fe.SEVEN_DAYS},Bs={idle:"IDLE",active:"ACTIVE"},BP={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},dK="request",fK=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],pK="wc";var mK="auth",gK="authKeys",bK="pairingTopics",yK="requests",yg=`${pK}@${1.5}:${mK}:`,mg=`${yg}:PUB_KEY`,vK=Object.defineProperty,wK=Object.defineProperties,xK=Object.getOwnPropertyDescriptors,UP=Object.getOwnPropertySymbols,EK=Object.prototype.hasOwnProperty,CK=Object.prototype.propertyIsEnumerable,Fx=(r,e,t)=>e in r?vK(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ht=(r,e)=>{for(var t in e||(e={}))EK.call(e,t)&&Fx(r,t,e[t]);if(UP)for(var t of UP(e))CK.call(e,t)&&Fx(r,t,e[t]);return r},_n=(r,e)=>wK(r,xK(e)),J=(r,e,t)=>Fx(r,typeof e!="symbol"?e+"":e,t),Bx=class extends Lm{constructor(e){super(e),J(this,"name",hK),J(this,"events",new bg.default),J(this,"initialized",!1),J(this,"requestQueue",{state:Bs.idle,queue:[]}),J(this,"sessionRequestQueue",{state:Bs.idle,queue:[]}),J(this,"requestQueueDelay",Fe.ONE_SECOND),J(this,"expectedPairingMethodMap",new Map),J(this,"recentlyDeletedMap",new Map),J(this,"recentlyDeletedLimit",200),J(this,"relayMessageCache",[]),J(this,"pendingSessions",new Map),J(this,"init",()=>p(this,null,function*(){this.initialized||(yield this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),yield this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys($r)}),this.initialized=!0,setTimeout(()=>p(this,null,function*(){yield this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,Fe.toMiliseconds)(this.requestQueueDelay)))})),J(this,"connect",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();let n=_n(ht({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});yield this.isValidConnect(n);let{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n,u=i,h,m=!1;try{if(u){let L=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=L.active}}catch(L){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),L}if(!u||!m){let{topic:L,uri:B}=yield this.client.core.pairing.create();u=L,h=B}if(!u){let{message:L}=re("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(L)}let b=yield this.client.core.crypto.generateKeyPair(),f=$r.wc_sessionPropose.req.ttl||Fe.FIVE_MINUTES,v=Yt(f),E=_n(ht(ht({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:Rx}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:v,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Ws()}),I=Xe("session_connect",E.id),{reject:N,resolve:D,done:F}=ho(f,FP),U=({id:L})=>{L===E.id&&(this.client.events.off("proposal_expire",U),this.pendingSessions.delete(E.id),this.events.emit(I,{error:{message:FP,code:0}}))};return this.client.events.on("proposal_expire",U),this.events.once(I,({error:L,session:B})=>{this.client.events.off("proposal_expire",U),L?N(L):B&&D(B)}),yield this.sendRequest({topic:u,method:"wc_sessionPropose",params:E,throwOnFailedPublish:!0,clientRpcId:E.id}),yield this.setProposal(E.id,E),{uri:h,approval:F}})),J(this,"pair",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{return yield this.client.core.pairing.pair(t)}catch(n){throw this.client.logger.error("pair() failed"),n}})),J(this,"approve",t=>p(this,null,function*(){var n,i,s;let o=this.client.core.eventClient.createEvent({properties:{topic:(n=t?.id)==null?void 0:n.toString(),trace:[yi.session_approve_started]}});try{this.isInitialized(),yield this.confirmOnlineStateOrThrow()}catch(V){throw o.setError(ha.no_internet_connection),V}try{yield this.isValidProposalId(t?.id)}catch(V){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),o.setError(ha.proposal_not_found),V}try{yield this.isValidApprove(t)}catch(V){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ha.session_approve_namespace_validation_failure),V}let{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:m}=t,b=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});let{pairingTopic:f,proposer:v,requiredNamespaces:E,optionalNamespaces:I}=b,N=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:f});N||(N=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:yi.session_approve_started,properties:{topic:f,trace:[yi.session_approve_started,yi.session_namespaces_validation_success]}}));let D=yield this.client.core.crypto.generateKeyPair(),F=v.publicKey,U=yield this.client.core.crypto.generateSharedKey(D,F),L=ht(ht(ht({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:D,metadata:this.client.metadata},expiry:Yt(cu)},u&&{sessionProperties:u}),h&&{scopedProperties:h}),m&&{sessionConfig:m}),B=gt.relay;N.addTrace(yi.subscribing_session_topic);try{yield this.client.core.relayer.subscribe(U,{transportType:B})}catch(V){throw N.setError(ha.subscribe_session_topic_failure),V}N.addTrace(yi.subscribe_session_topic_success);let M=_n(ht({},L),{topic:U,requiredNamespaces:E,optionalNamespaces:I,pairingTopic:f,acknowledged:!1,self:L.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:D,transportType:gt.relay});yield this.client.session.set(U,M),N.addTrace(yi.store_session);try{N.addTrace(yi.publishing_session_settle),yield this.sendRequest({topic:U,method:"wc_sessionSettle",params:L,throwOnFailedPublish:!0}).catch(V=>{throw N?.setError(ha.session_settle_publish_failure),V}),N.addTrace(yi.session_settle_publish_success),N.addTrace(yi.publishing_session_approve),yield this.sendResult({id:a,topic:f,result:{relay:{protocol:c??"irn"},responderPublicKey:D},throwOnFailedPublish:!0}).catch(V=>{throw N?.setError(ha.session_approve_publish_failure),V}),N.addTrace(yi.session_approve_publish_success)}catch(V){throw this.client.logger.error(V),this.client.session.delete(U,it("USER_DISCONNECTED")),yield this.client.core.relayer.unsubscribe(U),V}return this.client.core.eventClient.deleteEvent({eventId:N.eventId}),yield this.client.core.pairing.updateMetadata({topic:f,metadata:v.metadata}),yield this.client.proposal.delete(a,it("USER_DISCONNECTED")),yield this.client.core.pairing.activate({topic:f}),yield this.setExpiry(U,Yt(cu)),{topic:U,acknowledged:()=>Promise.resolve(this.client.session.get(U))}})),J(this,"reject",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidReject(t)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}let{id:n,reason:i}=t,s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(yield this.sendError({id:n,topic:s,error:i,rpcOpts:$r.wc_sessionPropose.reject}),yield this.client.proposal.delete(n,it("USER_DISCONNECTED")))})),J(this,"update",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidUpdate(t)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}let{topic:n,namespaces:i}=t,{done:s,resolve:o,reject:a}=ho(),c=Ws(),l=Uo().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Xe("session_update",c),({error:h})=>{h?a(h):o()}),yield this.client.session.update(n,{namespaces:i}),yield this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(h=>{this.client.logger.error(h),this.client.session.update(n,{namespaces:u}),a(h)}),{acknowledged:s}})),J(this,"extend",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidExtend(t)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}let{topic:n}=t,i=Ws(),{done:s,resolve:o,reject:a}=ho();return this.events.once(Xe("session_extend",i),({error:c})=>{c?a(c):o()}),yield this.setExpiry(n,Yt(cu)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}})),J(this,"request",t=>p(this,null,function*(){this.isInitialized();try{yield this.isValidRequest(t)}catch(I){throw this.client.logger.error("request() -> isValidRequest() failed"),I}let{chainId:n,request:i,topic:s,expiry:o=$r.wc_sessionRequest.req.ttl}=t,a=this.client.session.get(s);a?.transportType===gt.relay&&(yield this.confirmOnlineStateOrThrow());let c=Ws(),l=Uo().toString(),{done:u,resolve:h,reject:m}=ho(o,"Request expired. Please try again.");this.events.once(Xe("session_request",c),({error:I,result:N})=>{I?m(I):h(N)});let b="wc_sessionRequest",f=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(f)return yield this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:b,params:{request:_n(ht({},i),{expiryTimestamp:Yt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:f}).catch(I=>m(I)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),yield u();let v={request:_n(ht({},i),{expiryTimestamp:Yt(o)}),chainId:n},E=this.shouldSetTVF(b,v);return yield Promise.all([new Promise(I=>p(this,null,function*(){yield this.sendRequest(ht({clientRpcId:c,relayRpcId:l,topic:s,method:b,params:v,expiry:o,throwOnFailedPublish:!0},E&&{tvf:this.getTVFParams(c,v)})).catch(N=>m(N)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),I()})),new Promise(I=>p(this,null,function*(){var N;if(!((N=a.sessionConfig)!=null&&N.disableDeepLink)){let D=yield W8(this.client.core.storage,kP);yield K8({id:c,topic:s,wcDeepLink:D})}I()})),u()]).then(I=>I[2])})),J(this,"respond",t=>p(this,null,function*(){this.isInitialized(),yield this.isValidRespond(t);let{topic:n,response:i}=t,{id:s}=i,o=this.client.session.get(n);o.transportType===gt.relay&&(yield this.confirmOnlineStateOrThrow());let a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ni(i)?yield this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):ci(i)&&(yield this.sendError({id:s,topic:n,error:i.error,appLink:a})),this.cleanupAfterResponse(t)})),J(this,"ping",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidPing(t)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}let{topic:n}=t;if(this.client.session.keys.includes(n)){let i=Ws(),s=Uo().toString(),{done:o,resolve:a,reject:c}=ho();this.events.once(Xe("session_ping",i),({error:l})=>{l?c(l):a()}),yield Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),yield this.client.core.pairing.ping({topic:n}))})),J(this,"emit",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow(),yield this.isValidEmit(t);let{topic:n,event:i,chainId:s}=t,o=Uo().toString(),a=Ws();yield this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})})),J(this,"disconnect",t=>p(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow(),yield this.isValidDisconnect(t);let{topic:n}=t;if(this.client.session.keys.includes(n))yield this.sendRequest({topic:n,method:"wc_sessionDelete",params:it("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))yield this.client.core.pairing.disconnect({topic:n});else{let{message:i}=re("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}})),J(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(n=>I6(n,t)))),J(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),J(this,"authenticate",(t,n)=>p(this,null,function*(){var i;this.isInitialized(),this.isValidAuthenticate(t);let s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?gt.link_mode:gt.relay;o===gt.relay&&(yield this.confirmOnlineStateOrThrow());let{chains:a,statement:c="",uri:l,domain:u,nonce:h,type:m,exp:b,nbf:f,methods:v=[],expiry:E}=t,I=[...t.resources||[]],{topic:N,uri:D}=yield this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:N,uri:D}});let F=yield this.client.core.crypto.generateKeyPair(),U=eu(F);if(yield Promise.all([this.client.auth.authKeys.set(mg,{responseTopic:U,publicKey:F}),this.client.auth.pairingTopics.set(U,{topic:U,pairingTopic:N})]),yield this.client.core.relayer.subscribe(U,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${N}`),v.length>0){let{namespace:g}=la(a[0]),S=s6(g,"request",v);Nd(I)&&(S=o6(S,I.pop())),I.push(S)}let L=E&&E>$r.wc_sessionAuthenticate.req.ttl?E:$r.wc_sessionAuthenticate.req.ttl,B={authPayload:{type:m??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:h,iat:new Date().toISOString(),exp:b,nbf:f,resources:I},requester:{publicKey:F,metadata:this.client.metadata},expiryTimestamp:Yt(L)},M={eip155:{chains:a,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},V={requiredNamespaces:{},optionalNamespaces:M,relays:[{protocol:"irn"}],pairingTopic:N,proposer:{publicKey:F,metadata:this.client.metadata},expiryTimestamp:Yt($r.wc_sessionPropose.req.ttl),id:Ws()},{done:P,resolve:d,reject:y}=ho(L,"Request expired"),C=Ws(),A=Xe("session_connect",V.id),w=Xe("session_request",C),x=q=>p(this,[q],function*({error:g,session:S}){this.events.off(w,T),g?y(g):S&&d({session:S})}),T=g=>p(this,null,function*(){var S,q,$;if(yield this.deletePendingAuthRequest(C,{message:"fulfilled",code:0}),g.error){let pe=it("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return g.error.code===pe.code?void 0:(this.events.off(A,x),y(g.error.message))}yield this.deleteProposal(V.id),this.events.off(A,x);let{cacaos:W,responder:Z}=g.result,ce=[],fe=[];for(let pe of W){(yield Mw({cacao:pe,projectId:this.client.core.projectId}))||(this.client.logger.error(pe,"Signature verification failed"),y(it("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:Nt}=pe,je=Nd(Nt.resources),Me=[sg(Nt.iss)],Tn=Td(Nt.iss);if(je){let Je=Fw(je),ct=Bw(je);ce.push(...Je),Me.push(...ct)}for(let Je of Me)fe.push(`${Je}:${Tn}`)}let Te=yield this.client.core.crypto.generateSharedKey(F,Z.publicKey),be;ce.length>0&&(be={topic:Te,acknowledged:!0,self:{publicKey:F,metadata:this.client.metadata},peer:Z,controller:Z.publicKey,expiry:Yt(cu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:N,namespaces:Gw([...new Set(ce)],[...new Set(fe)]),transportType:o},yield this.client.core.relayer.subscribe(Te,{transportType:o}),yield this.client.session.set(Te,be),N&&(yield this.client.core.pairing.updateMetadata({topic:N,metadata:Z.metadata})),be=this.client.session.get(Te)),(S=this.client.metadata.redirect)!=null&&S.linkMode&&(q=Z.metadata.redirect)!=null&&q.linkMode&&($=Z.metadata.redirect)!=null&&$.universal&&n&&(this.client.core.addLinkModeSupportedApp(Z.metadata.redirect.universal),this.client.session.update(Te,{transportType:gt.link_mode})),d({auths:W,session:be})});this.events.once(A,x),this.events.once(w,T);let _;try{if(s){let g=Ti("wc_sessionAuthenticate",B,C);this.client.core.history.set(N,g);let S=yield this.client.core.crypto.encode("",g,{type:Xl,encoding:Zl});_=Od(n,N,S)}else yield Promise.all([this.sendRequest({topic:N,method:"wc_sessionAuthenticate",params:B,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:C}),this.sendRequest({topic:N,method:"wc_sessionPropose",params:V,expiry:$r.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:V.id})])}catch(g){throw this.events.off(A,x),this.events.off(w,T),g}return yield this.setProposal(V.id,V),yield this.setAuthRequest(C,{request:_n(ht({},B),{verifyContext:{}}),pairingTopic:N,transportType:o}),{uri:_??D,response:P}})),J(this,"approveSessionAuthenticate",t=>p(this,null,function*(){let{id:n,auths:i}=t,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[da.authenticated_session_approve_started]}});try{this.isInitialized()}catch(E){throw s.setError(au.no_internet_connection),E}let o=this.getPendingAuthRequest(n);if(!o)throw s.setError(au.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);let a=o.transportType||gt.relay;a===gt.relay&&(yield this.confirmOnlineStateOrThrow());let c=o.requester.publicKey,l=yield this.client.core.crypto.generateKeyPair(),u=eu(c),h={type:ji,receiverPublicKey:c,senderPublicKey:l},m=[],b=[];for(let E of i){if(!(yield Mw({cacao:E,projectId:this.client.core.projectId}))){s.setError(au.invalid_cacao);let U=it("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw yield this.sendError({id:n,topic:u,error:U,encodeOpts:h}),new Error(U.message)}s.addTrace(da.cacaos_verified);let{p:I}=E,N=Nd(I.resources),D=[sg(I.iss)],F=Td(I.iss);if(N){let U=Fw(N),L=Bw(N);m.push(...U),D.push(...L)}for(let U of D)b.push(`${U}:${F}`)}let f=yield this.client.core.crypto.generateSharedKey(l,c);s.addTrace(da.create_authenticated_session_topic);let v;if(m?.length>0){v={topic:f,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Yt(cu),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Gw([...new Set(m)],[...new Set(b)]),transportType:a},s.addTrace(da.subscribing_authenticated_session_topic);try{yield this.client.core.relayer.subscribe(f,{transportType:a})}catch(E){throw s.setError(au.subscribe_authenticated_session_topic_failure),E}s.addTrace(da.subscribe_authenticated_session_topic_success),yield this.client.session.set(f,v),s.addTrace(da.store_authenticated_session),yield this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(da.publishing_authenticated_session_approve);try{yield this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(E){throw s.setError(au.authenticated_session_approve_publish_failure),E}return yield this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),yield this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:v}})),J(this,"rejectSessionAuthenticate",t=>p(this,null,function*(){this.isInitialized();let{id:n,reason:i}=t,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===gt.relay&&(yield this.confirmOnlineStateOrThrow());let o=s.requester.publicKey,a=yield this.client.core.crypto.generateKeyPair(),c=eu(o),l={type:ji,receiverPublicKey:o,senderPublicKey:a};yield this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:$r.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),yield this.client.auth.requests.delete(n,{message:"rejected",code:0}),yield this.client.proposal.delete(n,it("USER_DISCONNECTED"))})),J(this,"formatAuthMessage",t=>{this.isInitialized();let{request:n,iss:i}=t;return kw(n,i)}),J(this,"processRelayMessageCache",()=>{setTimeout(()=>p(this,null,function*(){if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{let t=this.relayMessageCache.shift();t&&(yield this.onRelayMessage(t))}catch(t){this.client.logger.error(t)}}),50)}),J(this,"cleanupDuplicatePairings",t=>p(this,null,function*(){if(t.pairingTopic)try{let n=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===t.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),yield Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}})),J(this,"deleteSession",t=>p(this,null,function*(){var n;let{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=t,{self:c}=this.client.session.get(i);yield this.client.core.relayer.unsubscribe(i),yield this.client.session.delete(i,it("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&(yield this.client.core.crypto.deleteKeyPair(c.publicKey)),this.client.core.crypto.keychain.has(i)&&(yield this.client.core.crypto.deleteSymKey(i)),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(kP).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,it("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Bs.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})})),J(this,"deleteProposal",(t,n)=>p(this,null,function*(){if(n)try{let i=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(ha.proposal_expired)}catch{}yield Promise.all([this.client.proposal.delete(t,it("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")})),J(this,"deletePendingSessionRequest",(t,n,i=!1)=>p(this,null,function*(){yield Promise.all([this.client.pendingRequest.delete(t,n),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==t),i&&(this.sessionRequestQueue.state=Bs.idle,this.client.events.emit("session_request_expire",{id:t}))})),J(this,"deletePendingAuthRequest",(t,n,i=!1)=>p(this,null,function*(){yield Promise.all([this.client.auth.requests.delete(t,n),i?Promise.resolve():this.client.core.expirer.del(t)])})),J(this,"setExpiry",(t,n)=>p(this,null,function*(){this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,n),yield this.client.session.update(t,{expiry:n}))})),J(this,"setProposal",(t,n)=>p(this,null,function*(){this.client.core.expirer.set(t,Yt($r.wc_sessionPropose.req.ttl)),yield this.client.proposal.set(t,n)})),J(this,"setAuthRequest",(t,n)=>p(this,null,function*(){let{request:i,pairingTopic:s,transportType:o=gt.relay}=n;this.client.core.expirer.set(t,i.expiryTimestamp),yield this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})})),J(this,"setPendingSessionRequest",t=>p(this,null,function*(){let{id:n,topic:i,params:s,verifyContext:o}=t,a=s.request.expiryTimestamp||Yt($r.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),yield this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})})),J(this,"sendRequest",t=>p(this,null,function*(){let{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:h}=t,m=Ti(i,s,c),b,f=!!u;try{let I=f?Zl:Rs;b=yield this.client.core.crypto.encode(n,m,{encoding:I})}catch(I){throw yield this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),I}let v;if(fK.includes(i)){let I=gi(JSON.stringify(m)),N=gi(b);v=yield this.client.core.verify.register({id:N,decryptedId:I})}let E=$r[i].req;if(E.attestation=v,o&&(E.ttl=o),a&&(E.id=a),this.client.core.history.set(n,m),f){let I=Od(u,n,b);yield global.Linking.openURL(I,this.client.name)}else{let I=$r[i].req;o&&(I.ttl=o),a&&(I.id=a),I.tvf=_n(ht({},h),{correlationId:m.id}),l?(I.internal=_n(ht({},I.internal),{throwOnFailedPublish:!0}),yield this.client.core.relayer.publish(n,b,I)):this.client.core.relayer.publish(n,b,I).catch(N=>this.client.logger.error(N))}return m.id})),J(this,"sendResult",t=>p(this,null,function*(){let{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=t,l=Lo(n,s),u,h=c&&typeof(global==null?void 0:global.Linking)<"u";try{let f=h?Zl:Rs;u=yield this.client.core.crypto.encode(i,l,_n(ht({},a||{}),{encoding:f}))}catch(f){throw yield this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),f}let m,b;try{m=yield this.client.core.history.get(i,n);let f=m.request;try{this.shouldSetTVF(f.method,f.params)&&(b=this.getTVFParams(n,f.params,s))}catch(v){this.client.logger.warn("sendResult() -> getTVFParams() failed",v)}}catch(f){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),f}if(h){let f=Od(c,i,u);yield global.Linking.openURL(f,this.client.name)}else{let f=m.request.method,v=$r[f].res;v.tvf=_n(ht({},b),{correlationId:n}),o?(v.internal=_n(ht({},v.internal),{throwOnFailedPublish:!0}),yield this.client.core.relayer.publish(i,u,v)):this.client.core.relayer.publish(i,u,v).catch(E=>this.client.logger.error(E))}yield this.client.core.history.resolve(l)})),J(this,"sendError",t=>p(this,null,function*(){let{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=t,l=tl(n,s),u,h=c&&typeof(global==null?void 0:global.Linking)<"u";try{let b=h?Zl:Rs;u=yield this.client.core.crypto.encode(i,l,_n(ht({},o||{}),{encoding:b}))}catch(b){throw yield this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),b}let m;try{m=yield this.client.core.history.get(i,n)}catch(b){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),b}if(h){let b=Od(c,i,u);yield global.Linking.openURL(b,this.client.name)}else{let b=m.request.method,f=a||$r[b].res;this.client.core.relayer.publish(i,u,f)}yield this.client.core.history.resolve(l)})),J(this,"cleanup",()=>p(this,null,function*(){let t=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Ds(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Ds(i.expiryTimestamp)&&n.push(i.id)}),yield Promise.all([...t.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])})),J(this,"onProviderMessageEvent",t=>p(this,null,function*(){!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):yield this.onRelayMessage(t)})),J(this,"onRelayEventRequest",t=>p(this,null,function*(){this.requestQueue.queue.push(t),yield this.processRequestsQueue()})),J(this,"processRequestsQueue",()=>p(this,null,function*(){if(this.requestQueue.state===Bs.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Bs.active;let t=this.requestQueue.queue.shift();if(t)try{yield this.processRequest(t)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Bs.idle})),J(this,"processRequest",t=>p(this,null,function*(){let{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=t,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return yield this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return yield this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return yield this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return yield this.onSessionExtendRequest(n,i);case"wc_sessionPing":return yield this.onSessionPingRequest(n,i);case"wc_sessionDelete":return yield this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return yield this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return yield this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return yield this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}})),J(this,"onRelayEventResponse",t=>p(this,null,function*(){let{topic:n,payload:i,transportType:s}=t,o=(yield this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}})),J(this,"onRelayEventUnknownPayload",t=>{let{topic:n}=t,{message:i}=re("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),J(this,"shouldIgnorePairingRequest",t=>{let{topic:n,requestMethod:i}=t,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),J(this,"onSessionProposeRequest",t=>p(this,null,function*(){let{topic:n,payload:i,attestation:s,encryptedId:o}=t,{params:a,id:c}=i;try{let l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(Ms.proposal_listener_not_found)),this.isValidConnect(ht({},i.params));let u=a.expiryTimestamp||Yt($r.wc_sessionPropose.req.ttl),h=ht({id:c,pairingTopic:n,expiryTimestamp:u},a);yield this.setProposal(c,h);let m=yield this.getVerifyContext({attestationId:s,hash:gi(JSON.stringify(i)),encryptedId:o,metadata:h.proposer.metadata});l?.addTrace(zi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:m})}catch(l){yield this.sendError({id:c,topic:n,error:l,rpcOpts:$r.wc_sessionPropose.autoReject}),this.client.logger.error(l)}})),J(this,"onSessionProposeResponse",(t,n,i)=>p(this,null,function*(){let{id:s}=n;if(Ni(n)){let{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});let a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});let c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});let l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});let u=yield this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:t,proposalId:s,publicKey:c});let h=yield this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),yield this.client.core.pairing.activate({topic:t})}else if(ci(n)){yield this.client.proposal.delete(s,it("USER_DISCONNECTED"));let o=Xe("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}})),J(this,"onSessionSettleRequest",(t,n)=>p(this,null,function*(){let{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);let{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:h,sessionConfig:m}=n.params,b=[...this.pendingSessions.values()].find(E=>E.sessionTopic===t);if(!b)return this.client.logger.error(`Pending session not found for topic ${t}`);let f=this.client.proposal.get(b.proposalId),v=_n(ht(ht(ht({topic:t,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:b.pairingTopic,requiredNamespaces:f.requiredNamespaces,optionalNamespaces:f.optionalNamespaces,controller:a.publicKey,self:{publicKey:b.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),h&&{scopedProperties:h}),m&&{sessionConfig:m}),{transportType:gt.relay});yield this.client.session.set(v.topic,v),yield this.setExpiry(v.topic,v.expiry),yield this.client.core.pairing.updateMetadata({topic:b.pairingTopic,metadata:v.peer.metadata}),this.client.events.emit("session_connect",{session:v}),this.events.emit(Xe("session_connect",b.proposalId),{session:v}),this.pendingSessions.delete(b.proposalId),this.deleteProposal(b.proposalId,!1),this.cleanupDuplicatePairings(v),yield this.sendResult({id:n.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(o){yield this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}})),J(this,"onSessionSettleResponse",(t,n)=>p(this,null,function*(){let{id:i}=n;Ni(n)?(yield this.client.session.update(t,{acknowledged:!0}),this.events.emit(Xe("session_approve",i),{})):ci(n)&&(yield this.client.session.delete(t,it("USER_DISCONNECTED")),this.events.emit(Xe("session_approve",i),{error:n.error}))})),J(this,"onSessionUpdateRequest",(t,n)=>p(this,null,function*(){let{params:i,id:s}=n;try{let o=`${t}_session_update`,a=ca.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:t,error:it("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ht({topic:t},i));try{ca.set(o,s),yield this.client.session.update(t,{namespaces:i.namespaces}),yield this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0})}catch(c){throw ca.delete(o),c}this.client.events.emit("session_update",{id:s,topic:t,params:i})}catch(o){yield this.sendError({id:s,topic:t,error:o}),this.client.logger.error(o)}})),J(this,"isRequestOutOfSync",(t,n)=>n.toString().slice(0,-3)<t.toString().slice(0,-3)),J(this,"onSessionUpdateResponse",(t,n)=>{let{id:i}=n,s=Xe("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ni(n)?this.events.emit(Xe("session_update",i),{}):ci(n)&&this.events.emit(Xe("session_update",i),{error:n.error})}),J(this,"onSessionExtendRequest",(t,n)=>p(this,null,function*(){let{id:i}=n;try{this.isValidExtend({topic:t}),yield this.setExpiry(t,Yt(cu)),yield this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(s){yield this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}})),J(this,"onSessionExtendResponse",(t,n)=>{let{id:i}=n,s=Xe("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ni(n)?this.events.emit(Xe("session_extend",i),{}):ci(n)&&this.events.emit(Xe("session_extend",i),{error:n.error})}),J(this,"onSessionPingRequest",(t,n)=>p(this,null,function*(){let{id:i}=n;try{this.isValidPing({topic:t}),yield this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(s){yield this.sendError({id:i,topic:t,error:s}),this.client.logger.error(s)}})),J(this,"onSessionPingResponse",(t,n)=>{let{id:i}=n,s=Xe("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Ni(n)?this.events.emit(Xe("session_ping",i),{}):ci(n)&&this.events.emit(Xe("session_ping",i),{error:n.error})},500)}),J(this,"onSessionDeleteRequest",(t,n)=>p(this,null,function*(){let{id:i}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Dr.publish,()=>p(this,null,function*(){s(yield this.deleteSession({topic:t,id:i}))}))}),this.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:it("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}})),J(this,"onSessionRequest",t=>p(this,null,function*(){var n,i,s;let{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=t,{id:h,params:m}=a;try{yield this.isValidRequest(ht({topic:o},m));let b=this.client.session.get(o),f=yield this.getVerifyContext({attestationId:c,hash:gi(JSON.stringify(Ti("wc_sessionRequest",m,h))),encryptedId:l,metadata:b.peer.metadata,transportType:u}),v={id:h,topic:o,params:m,verifyContext:f};yield this.setPendingSessionRequest(v),u===gt.link_mode&&(n=b.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=b.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(b){yield this.sendError({id:h,topic:o,error:b}),this.client.logger.error(b)}})),J(this,"onSessionRequestResponse",(t,n)=>{let{id:i}=n,s=Xe("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ni(n)?this.events.emit(Xe("session_request",i),{result:n.result}):ci(n)&&this.events.emit(Xe("session_request",i),{error:n.error})}),J(this,"onSessionEventRequest",(t,n)=>p(this,null,function*(){let{id:i,params:s}=n;try{let o=`${t}_session_event_${s.event.name}`,a=ca.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ht({topic:t},s)),this.client.events.emit("session_event",{id:i,topic:t,params:s}),ca.set(o,i)}catch(o){yield this.sendError({id:i,topic:t,error:o}),this.client.logger.error(o)}})),J(this,"onSessionAuthenticateResponse",(t,n)=>{let{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:n}),Ni(n)?this.events.emit(Xe("session_request",i),{result:n.result}):ci(n)&&this.events.emit(Xe("session_request",i),{error:n.error})}),J(this,"onSessionAuthenticateRequest",t=>p(this,null,function*(){var n;let{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=t;try{let{requester:l,authPayload:u,expiryTimestamp:h}=s.params,m=yield this.getVerifyContext({attestationId:o,hash:gi(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),b={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:m,expiryTimestamp:h};yield this.setAuthRequest(s.id,{request:b,pairingTopic:i,transportType:c}),c===gt.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:m})}catch(l){this.client.logger.error(l);let u=s.params.requester.publicKey,h=yield this.client.core.crypto.generateKeyPair(),m=this.getAppLinkIfEnabled(s.params.requester.metadata,c),b={type:ji,receiverPublicKey:u,senderPublicKey:h};yield this.sendError({id:s.id,topic:i,error:l,encodeOpts:b,rpcOpts:$r.wc_sessionAuthenticate.autoReject,appLink:m})}})),J(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),J(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Bs.idle,this.processSessionRequestQueue()},(0,Fe.toMiliseconds)(this.requestQueueDelay))}),J(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:n})=>{let i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===t&&s.request.method==="wc_sessionRequest").forEach(s=>{let o=s.request.id,a=Xe("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Xe("session_request",s.request.id),{error:n})})}),J(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Bs.active){this.client.logger.info("session request queue is already active.");return}let t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Bs.active,this.emitSessionRequest(t)}catch(n){this.client.logger.error(n)}}),J(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),J(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;let n=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);n&&this.onSessionProposeRequest({topic:t.topic,payload:Ti("wc_sessionPropose",_n(ht({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),J(this,"isValidConnect",t=>p(this,null,function*(){if(!pn(t)){let{message:l}=re("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(l)}let{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=t;if(Nr(n)||(yield this.isValidPairingTopic(n)),!M6(c,!0)){let{message:l}=re("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Nr(i)&&vc(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Nr(s)&&vc(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Nr(o)||this.validateSessionProps(o,"sessionProperties"),!Nr(a)){this.validateSessionProps(a,"scopedProperties");let l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}})),J(this,"validateNamespaces",(t,n)=>{let i=O6(t,"connect()",n);if(i)throw new Error(i.message)}),J(this,"isValidApprove",t=>p(this,null,function*(){if(!pn(t))throw new Error(re("MISSING_OR_INVALID",`approve() params: ${t}`).message);let{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=t;this.checkRecentlyDeleted(n),yield this.isValidProposalId(n);let c=this.client.proposal.get(n),l=lg(i,"approve()");if(l)throw new Error(l.message);let u=Yw(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!jt(s,!0)){let{message:h}=re("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}if(Nr(o)||this.validateSessionProps(o,"sessionProperties"),!Nr(a)){this.validateSessionProps(a,"scopedProperties");let h=new Set(Object.keys(i));if(!Object.keys(a).every(m=>h.has(m)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}})),J(this,"isValidReject",t=>p(this,null,function*(){if(!pn(t)){let{message:s}=re("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}let{id:n,reason:i}=t;if(this.checkRecentlyDeleted(n),yield this.isValidProposalId(n),!F6(i)){let{message:s}=re("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}})),J(this,"isValidSessionSettleRequest",t=>{if(!pn(t)){let{message:l}=re("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(l)}let{relay:n,controller:i,namespaces:s,expiry:o}=t;if(!Ww(n)){let{message:l}=re("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}let a=D6(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);let c=lg(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ds(o)){let{message:l}=re("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),J(this,"isValidUpdate",t=>p(this,null,function*(){if(!pn(t)){let{message:c}=re("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(c)}let{topic:n,namespaces:i}=t;this.checkRecentlyDeleted(n),yield this.isValidSessionTopic(n);let s=this.client.session.get(n),o=lg(i,"update()");if(o)throw new Error(o.message);let a=Yw(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)})),J(this,"isValidExtend",t=>p(this,null,function*(){if(!pn(t)){let{message:i}=re("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}let{topic:n}=t;this.checkRecentlyDeleted(n),yield this.isValidSessionTopic(n)})),J(this,"isValidRequest",t=>p(this,null,function*(){if(!pn(t)){let{message:c}=re("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(c)}let{topic:n,request:i,chainId:s,expiry:o}=t;this.checkRecentlyDeleted(n),yield this.isValidSessionTopic(n);let{namespaces:a}=this.client.session.get(n);if(!Jw(a,s)){let{message:c}=re("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!B6(i)){let{message:c}=re("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!V6(a,s,i.method)){let{message:c}=re("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!H6(o,Mx)){let{message:c}=re("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Mx.min} and ${Mx.max}`);throw new Error(c)}})),J(this,"isValidRespond",t=>p(this,null,function*(){var n;if(!pn(t)){let{message:o}=re("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}let{topic:i,response:s}=t;try{yield this.isValidSessionTopic(i)}catch(o){throw(n=t?.response)!=null&&n.id&&this.cleanupAfterResponse(t),o}if(!U6(s)){let{message:o}=re("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}})),J(this,"isValidPing",t=>p(this,null,function*(){if(!pn(t)){let{message:i}=re("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}let{topic:n}=t;yield this.isValidSessionOrPairingTopic(n)})),J(this,"isValidEmit",t=>p(this,null,function*(){if(!pn(t)){let{message:a}=re("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(a)}let{topic:n,event:i,chainId:s}=t;yield this.isValidSessionTopic(n);let{namespaces:o}=this.client.session.get(n);if(!Jw(o,s)){let{message:a}=re("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!L6(i)){let{message:a}=re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!j6(o,s,i.name)){let{message:a}=re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}})),J(this,"isValidDisconnect",t=>p(this,null,function*(){if(!pn(t)){let{message:i}=re("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}let{topic:n}=t;yield this.isValidSessionOrPairingTopic(n)})),J(this,"isValidAuthenticate",t=>{let{chains:n,uri:i,domain:s,nonce:o}=t;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!jt(i,!1))throw new Error("uri is required parameter");if(!jt(s,!1))throw new Error("domain is required parameter");if(!jt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>la(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:a}=la(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),J(this,"getVerifyContext",t=>p(this,null,function*(){let{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=t,c={verified:{verifyUrl:o.verifyUrl||ou,validation:"UNKNOWN",origin:o.url||""}};try{if(a===gt.link_mode){let u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}let l=yield this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c})),J(this,"validateSessionProps",(t,n)=>{Object.values(t).forEach((i,s)=>{if(i==null){let{message:o}=re("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(t)[s]}`);throw new Error(o)}})}),J(this,"getPendingAuthRequest",t=>{let n=this.client.auth.requests.get(t);return typeof n=="object"?n:void 0}),J(this,"addToRecentlyDeleted",(t,n)=>{if(this.recentlyDeletedMap.set(t,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0,s=this.recentlyDeletedLimit/2;for(let o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),J(this,"checkRecentlyDeleted",t=>{let n=this.recentlyDeletedMap.get(t);if(n){let{message:i}=re("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${t}`);throw new Error(i)}}),J(this,"isLinkModeEnabled",(t,n)=>{var i,s,o,a,c,l,u,h,m;return!t||n!==gt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=t?.redirect)==null?void 0:u.universal)!==void 0&&((h=t?.redirect)==null?void 0:h.universal)!==""&&((m=t?.redirect)==null?void 0:m.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),J(this,"getAppLinkIfEnabled",(t,n)=>{var i;return this.isLinkModeEnabled(t,n)?(i=t?.redirect)==null?void 0:i.universal:void 0}),J(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;let n=Nw(t,"topic")||"",i=decodeURIComponent(Nw(t,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:gt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),J(this,"registerLinkModeListeners",()=>p(this,null,function*(){var t;if(Id()||uo()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){let n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);let i=yield n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}})),J(this,"shouldSetTVF",(t,n)=>{if(!n||t!=="wc_sessionRequest")return!1;let{request:i}=n;return Object.keys(BP).includes(i.method)}),J(this,"getTVFParams",(t,n,i)=>{var s,o;try{let a=n.request.method,c=this.extractTxHashesFromResult(a,i);return _n(ht({correlationId:t,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),J(this,"isValidContractData",t=>{var n;if(!t)return!1;try{let i=t?.data||((n=t?.[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;let s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),J(this,"extractTxHashesFromResult",(t,n)=>{try{let i=BP[t];if(typeof n=="string")return[n];let s=n[i.key];if(po(s))return t==="solana_signAllTransactions"?s.map(o=>n6(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}processPendingMessageEvents(){return p(this,null,function*(){try{let e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(let[n,i]of Object.entries(t))for(let s of i)try{yield this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}})}isInitialized(){if(!this.initialized){let{message:e}=re("NOT_INITIALIZED",this.name);throw new Error(e)}}confirmOnlineStateOrThrow(){return p(this,null,function*(){yield this.client.core.relayer.confirmOnlineStateOrThrow()})}registerRelayerEvents(){this.client.core.relayer.on(Dr.message,e=>{this.onProviderMessageEvent(e)})}onRelayMessage(e){return p(this,null,function*(){let{topic:t,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(mg)?this.client.auth.authKeys.get(mg):{responseTopic:void 0,publicKey:void 0};try{let a=yield this.client.core.crypto.decode(t,n,{receiverPublicKey:o,encoding:s===gt.link_mode?Zl:Rs});dh(a)?(this.client.core.history.set(t,a),yield this.onRelayEventRequest({topic:t,payload:a,attestation:i,transportType:s,encryptedId:gi(n)})):fh(a)?(yield this.client.core.history.resolve(a),yield this.onRelayEventResponse({topic:t,payload:a,transportType:s}),this.client.core.history.delete(t,a.id)):yield this.onRelayEventUnknownPayload({topic:t,payload:a,transportType:s}),yield this.client.core.relayer.messages.ack(t,n)}catch(a){this.client.logger.error(a)}})}registerExpirerEvents(){this.client.core.expirer.on(Zn.expired,e=>p(this,null,function*(){let{topic:t,id:n}=ng(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return yield this.deletePendingSessionRequest(n,re("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return yield this.deletePendingAuthRequest(n,re("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(yield this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):n&&(yield this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))}))}registerPairingEvents(){this.client.core.pairing.events.on(ua.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ua.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!jt(e,!1)){let{message:t}=re("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ds(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=re("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){return p(this,null,function*(){if(!jt(e,!1)){let{message:t}=re("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=re("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ds(this.client.session.get(e).expiry)){yield this.deleteSession({topic:e});let{message:t}=re("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=re("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw yield this.deleteSession({topic:e}),new Error(t)}})}isValidSessionOrPairingTopic(e){return p(this,null,function*(){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))yield this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(jt(e,!1)){let{message:t}=re("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{let{message:t}=re("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}})}isValidProposalId(e){return p(this,null,function*(){if(!k6(e)){let{message:t}=re("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=re("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ds(this.client.proposal.get(e).expiryTimestamp)){yield this.deleteProposal(e);let{message:t}=re("EXPIRED",`proposal id: ${e}`);throw new Error(t)}})}},Ux=class extends Fs{constructor(e,t){super(e,t,lK,$x),this.core=e,this.logger=t}},Lx=class extends Fs{constructor(e,t){super(e,t,uK,$x),this.core=e,this.logger=t}},Vx=class extends Fs{constructor(e,t){super(e,t,dK,$x,n=>n.id),this.core=e,this.logger=t}},jx=class extends Fs{constructor(e,t){super(e,t,gK,yg,()=>mg),this.core=e,this.logger=t}},Hx=class extends Fs{constructor(e,t){super(e,t,bK,yg),this.core=e,this.logger=t}},qx=class extends Fs{constructor(e,t){super(e,t,yK,yg,n=>n.id),this.core=e,this.logger=t}},_K=Object.defineProperty,AK=(r,e,t)=>e in r?_K(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kx=(r,e,t)=>AK(r,typeof e!="symbol"?e+"":e,t),zx=class{constructor(e,t){this.core=e,this.logger=t,kx(this,"authKeys"),kx(this,"pairingTopics"),kx(this,"requests"),this.authKeys=new jx(this.core,this.logger),this.pairingTopics=new Hx(this.core,this.logger),this.requests=new qx(this.core,this.logger)}init(){return p(this,null,function*(){yield this.authKeys.init(),yield this.pairingTopics.init(),yield this.requests.init()})}},SK=Object.defineProperty,IK=(r,e,t)=>e in r?SK(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ze=(r,e,t)=>IK(r,typeof e!="symbol"?e+"":e,t),gg=class r extends Um{constructor(e){super(e),ze(this,"protocol",LP),ze(this,"version",VP),ze(this,"name",Ox.name),ze(this,"metadata"),ze(this,"core"),ze(this,"logger"),ze(this,"events",new bg.EventEmitter),ze(this,"engine"),ze(this,"session"),ze(this,"proposal"),ze(this,"pendingRequest"),ze(this,"auth"),ze(this,"signConfig"),ze(this,"on",(n,i)=>this.events.on(n,i)),ze(this,"once",(n,i)=>this.events.once(n,i)),ze(this,"off",(n,i)=>this.events.off(n,i)),ze(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),ze(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),ze(this,"connect",n=>p(this,null,function*(){try{return yield this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"pair",n=>p(this,null,function*(){try{return yield this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"approve",n=>p(this,null,function*(){try{return yield this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"reject",n=>p(this,null,function*(){try{return yield this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"update",n=>p(this,null,function*(){try{return yield this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"extend",n=>p(this,null,function*(){try{return yield this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"request",n=>p(this,null,function*(){try{return yield this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"respond",n=>p(this,null,function*(){try{return yield this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"ping",n=>p(this,null,function*(){try{return yield this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"emit",n=>p(this,null,function*(){try{return yield this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"disconnect",n=>p(this,null,function*(){try{return yield this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),ze(this,"authenticate",(n,i)=>p(this,null,function*(){try{return yield this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}})),ze(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),ze(this,"approveSessionAuthenticate",n=>p(this,null,function*(){try{return yield this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}})),ze(this,"rejectSessionAuthenticate",n=>p(this,null,function*(){try{return yield this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}})),this.name=e?.name||Ox.name,this.metadata=e?.metadata||eg(),this.signConfig=e?.signConfig;let t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:(0,qa.default)(Bo({level:e?.logger||Ox.logger}));this.core=e?.core||new MP(e),this.logger=Xr(t,this.name),this.session=new Lx(this.core,this.logger),this.proposal=new Ux(this.core,this.logger),this.pendingRequest=new Vx(this.core,this.logger),this.engine=new Bx(this),this.auth=new zx(this.core,this.logger)}static init(e){return p(this,null,function*(){let t=new r(e);return yield t.initialize(),t})}get context(){return vn(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){return p(this,null,function*(){this.logger.trace("Initialized");try{yield this.core.start(),yield this.session.init(),yield this.proposal.init(),yield this.pendingRequest.init(),yield this.auth.init(),yield this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,Fe.toMiliseconds)(Fe.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}})}};var eT=dn(Ha());var HP="error",PK="wss://relay.walletconnect.org",TK="wc",NK="universal_provider",vg=`${TK}@2:${NK}:`,tT="https://rpc.walletconnect.org/v1/",wu="generic",DK=`${tT}bundler`,wi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function RK(){}function uE(r){return r==null||typeof r!="object"&&typeof r!="function"}function hE(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function OK(r){if(uE(r))return r;if(Array.isArray(r)||hE(r)||r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer)return r.slice(0);let e=Object.getPrototypeOf(r),t=e.constructor;if(r instanceof Date||r instanceof Map||r instanceof Set)return new t(r);if(r instanceof RegExp){let n=new t(r);return n.lastIndex=r.lastIndex,n}if(r instanceof DataView)return new t(r.buffer.slice(0));if(r instanceof Error){let n=new t(r.message);return n.stack=r.stack,n.name=r.name,n.cause=r.cause,n}if(typeof File<"u"&&r instanceof File)return new t([r],r.name,{type:r.type,lastModified:r.lastModified});if(typeof r=="object"){let n=Object.create(e);return Object.assign(n,r)}return r}function qP(r){return typeof r=="object"&&r!==null}function rT(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function nT(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var MK="[object RegExp]",iT="[object String]",sT="[object Number]",oT="[object Boolean]",aT="[object Arguments]",kK="[object Symbol]",FK="[object Date]",BK="[object Map]",UK="[object Set]",LK="[object Array]",VK="[object ArrayBuffer]",jK="[object Object]",HK="[object DataView]",qK="[object Uint8Array]",zK="[object Uint8ClampedArray]",$K="[object Uint16Array]",GK="[object Uint32Array]",KK="[object Int8Array]",WK="[object Int16Array]",JK="[object Int32Array]",YK="[object Float32Array]",QK="[object Float64Array]";function ZK(r,e){return xu(r,void 0,r,new Map,e)}function xu(r,e,t,n=new Map,i=void 0){let s=i?.(r,e,t,n);if(s!=null)return s;if(uE(r))return r;if(n.has(r))return n.get(r);if(Array.isArray(r)){let o=new Array(r.length);n.set(r,o);for(let a=0;a<r.length;a++)o[a]=xu(r[a],a,t,n,i);return Object.hasOwn(r,"index")&&(o.index=r.index),Object.hasOwn(r,"input")&&(o.input=r.input),o}if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp){let o=new RegExp(r.source,r.flags);return o.lastIndex=r.lastIndex,o}if(r instanceof Map){let o=new Map;n.set(r,o);for(let[a,c]of r)o.set(a,xu(c,a,t,n,i));return o}if(r instanceof Set){let o=new Set;n.set(r,o);for(let a of r)o.add(xu(a,void 0,t,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(r))return r.subarray();if(hE(r)){let o=new(Object.getPrototypeOf(r)).constructor(r.length);n.set(r,o);for(let a=0;a<r.length;a++)o[a]=xu(r[a],a,t,n,i);return o}if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer)return r.slice(0);if(r instanceof DataView){let o=new DataView(r.buffer.slice(0),r.byteOffset,r.byteLength);return n.set(r,o),wc(o,r,t,n,i),o}if(typeof File<"u"&&r instanceof File){let o=new File([r],r.name,{type:r.type});return n.set(r,o),wc(o,r,t,n,i),o}if(r instanceof Blob){let o=new Blob([r],{type:r.type});return n.set(r,o),wc(o,r,t,n,i),o}if(r instanceof Error){let o=new r.constructor;return n.set(r,o),o.message=r.message,o.name=r.name,o.stack=r.stack,o.cause=r.cause,wc(o,r,t,n,i),o}if(typeof r=="object"&&XK(r)){let o=Object.create(Object.getPrototypeOf(r));return n.set(r,o),wc(o,r,t,n,i),o}return r}function wc(r,e,t=r,n,i){let s=[...Object.keys(e),...rT(e)];for(let o=0;o<s.length;o++){let a=s[o],c=Object.getOwnPropertyDescriptor(r,a);(c==null||c.writable)&&(r[a]=xu(e[a],a,t,n,i))}}function XK(r){switch(nT(r)){case aT:case LK:case VK:case HK:case oT:case FK:case YK:case QK:case KK:case WK:case JK:case BK:case sT:case jK:case MK:case UK:case iT:case kK:case qK:case zK:case $K:case GK:return!0;default:return!1}}function eW(r,e){return ZK(r,(t,n,i,s)=>{let o=e?.(t,n,i,s);if(o!=null)return o;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case sT:case iT:case oT:{let a=new r.constructor(r?.valueOf());return wc(a,r),a}case aT:{let a={};return wc(a,r),a.length=r.length,a[Symbol.iterator]=r[Symbol.iterator],a}default:return}})}function zP(r){return eW(r)}function $P(r){return r!==null&&typeof r=="object"&&nT(r)==="[object Arguments]"}function tW(r){return hE(r)}function rW(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){let t=r[Symbol.toStringTag];return t==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${t}]`}let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function nW(r,...e){let t=e.slice(0,-1),n=e[e.length-1],i=r;for(let s=0;s<t.length;s++){let o=t[s];i=Yx(i,o,n,new Map)}return i}function Yx(r,e,t,n){if(uE(r)&&(r=Object(r)),e==null||typeof e!="object")return r;if(n.has(e))return OK(n.get(e));if(n.set(e,r),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}let i=[...Object.keys(e),...rT(e)];for(let s=0;s<i.length;s++){let o=i[s],a=e[o],c=r[o];if($P(a)&&(a=k({},a)),$P(c)&&(c=k({},c)),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=zP(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){let u=[],h=Reflect.ownKeys(c);for(let m=0;m<h.length;m++){let b=h[m];u[b]=c[b]}c=u}else c=[];let l=t(c,a,o,r,e,n);l!=null?r[o]=l:Array.isArray(a)||qP(c)&&qP(a)?r[o]=Yx(c,a,t,n):c==null&&rW(a)?r[o]=Yx({},a,t,n):c==null&&tW(a)?r[o]=zP(a):(c===void 0||a!==void 0)&&(r[o]=a)}return r}function iW(r,...e){return nW(r,...e,RK)}var sW=Object.defineProperty,oW=Object.defineProperties,aW=Object.getOwnPropertyDescriptors,GP=Object.getOwnPropertySymbols,cW=Object.prototype.hasOwnProperty,lW=Object.prototype.propertyIsEnumerable,KP=(r,e,t)=>e in r?sW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,wg=(r,e)=>{for(var t in e||(e={}))cW.call(e,t)&&KP(r,t,e[t]);if(GP)for(var t of GP(e))lW.call(e,t)&&KP(r,t,e[t]);return r},uW=(r,e)=>oW(r,aW(e));function Xn(r,e,t){var n;let i=la(r);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${tT}?chainId=${i.namespace}:${i.reference}&projectId=${t}`}function xc(r){return r.includes(":")?r.split(":")[1]:r}function cT(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function hW(r,e){let t=Object.keys(e.namespaces).filter(i=>i.includes(r));if(!t.length)return[];let n=[];return t.forEach(i=>{let s=e.namespaces[i].accounts;n.push(...s)}),n}function Gx(r={},e={}){let t=WP(r),n=WP(e);return iW(t,n)}function WP(r){var e,t,n,i;let s={};if(!vc(r))return s;for(let[o,a]of Object.entries(r)){let c=cg(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],h=a.rpcMap||{},m=iu(o);s[m]=uW(wg(wg({},s[m]),a),{chains:Sd(c,(e=s[m])==null?void 0:e.chains),methods:Sd(l,(t=s[m])==null?void 0:t.methods),events:Sd(u,(n=s[m])==null?void 0:n.events),rpcMap:wg(wg({},h),(i=s[m])==null?void 0:i.rpcMap)})}return s}function dW(r){return r.includes(":")?r.split(":")[2]:r}function JP(r){let e={};for(let[t,n]of Object.entries(r)){let i=n.methods||[],s=n.events||[],o=n.accounts||[],a=cg(t)?[t]:n.chains?n.chains:cT(n.accounts);e[t]={chains:a,methods:i,events:s,accounts:o}}return e}function Kx(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}var lT={},tt=r=>lT[r],Wx=(r,e)=>{lT[r]=e},fW=Object.defineProperty,pW=(r,e,t)=>e in r?fW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lu=(r,e,t)=>pW(r,typeof e!="symbol"?e+"":e,t),Qx=class{constructor(e){lu(this,"name","polkadot"),lu(this,"client"),lu(this,"httpProviders"),lu(this,"events"),lu(this,"namespace"),lu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;let i=xc(t);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},mW=Object.defineProperty,gW=Object.defineProperties,bW=Object.getOwnPropertyDescriptors,YP=Object.getOwnPropertySymbols,yW=Object.prototype.hasOwnProperty,vW=Object.prototype.propertyIsEnumerable,Zx=(r,e,t)=>e in r?mW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,QP=(r,e)=>{for(var t in e||(e={}))yW.call(e,t)&&Zx(r,t,e[t]);if(YP)for(var t of YP(e))vW.call(e,t)&&Zx(r,t,e[t]);return r},ZP=(r,e)=>gW(r,bW(e)),uu=(r,e,t)=>Zx(r,typeof e!="symbol"?e+"":e,t),Xx=class{constructor(e){uu(this,"name","eip155"),uu(this,"client"),uu(this,"chainId"),uu(this,"namespace"),uu(this,"httpProviders"),uu(this,"events"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(e){return p(this,null,function*(){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return yield this.getCapabilities(e);case"wallet_getCallsStatus":return yield this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?yield this.client.request(e):this.getHttpProvider().request(e.request)})}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let n=t||Xn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;let i=parseInt(xc(t));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){return p(this,null,function*(){var t,n;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;let s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))yield this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null})}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}getCapabilities(e){return p(this,null,function*(){var t,n,i;let s=(n=(t=e.request)==null?void 0:t.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");let o=this.client.session.get(e.topic),a=((i=o?.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a?.[s];let c=yield this.client.request(e);try{yield this.client.session.update(e.topic,{sessionProperties:ZP(QP({},o.sessionProperties||{}),{capabilities:ZP(QP({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c})}getCallStatus(e){return p(this,null,function*(){var t,n;let i=this.client.session.get(e.topic),s=(t=i.sessionProperties)==null?void 0:t.bundler_name;if(s){let a=this.getBundlerUrl(e.chainId,s);try{return yield this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}let o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return yield this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return yield this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")})}getUserOperationReceipt(e,t){return p(this,null,function*(){var n;let i=new URL(e),s=yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ti("eth_getUserOperationReceipt",[(n=t.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return yield s.json()})}getBundlerUrl(e,t){return`${DK}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}},wW=Object.defineProperty,xW=(r,e,t)=>e in r?wW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hu=(r,e,t)=>xW(r,typeof e!="symbol"?e+"":e,t),eE=class{constructor(e){hu(this,"name","solana"),hu(this,"client"),hu(this,"httpProviders"),hu(this,"events"),hu(this,"namespace"),hu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;let i=xc(t);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},EW=Object.defineProperty,CW=(r,e,t)=>e in r?EW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,du=(r,e,t)=>CW(r,typeof e!="symbol"?e+"":e,t),tE=class{constructor(e){du(this,"name","cosmos"),du(this,"client"),du(this,"httpProviders"),du(this,"events"),du(this,"namespace"),du(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;let i=xc(t);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},_W=Object.defineProperty,AW=(r,e,t)=>e in r?_W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fu=(r,e,t)=>AW(r,typeof e!="symbol"?e+"":e,t),rE=class{constructor(e){fu(this,"name","algorand"),fu(this,"client"),fu(this,"httpProviders"),fu(this,"events"),fu(this,"namespace"),fu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let n=t||Xn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new wn(new xn(n,tt("disableProviderPing")))}},SW=Object.defineProperty,IW=(r,e,t)=>e in r?SW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pu=(r,e,t)=>IW(r,typeof e!="symbol"?e+"":e,t),nE=class{constructor(e){pu(this,"name","cip34"),pu(this,"client"),pu(this,"httpProviders"),pu(this,"events"),pu(this,"namespace"),pu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let n=this.getCardanoRPCUrl(t),i=xc(t);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},PW=Object.defineProperty,TW=(r,e,t)=>e in r?PW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mu=(r,e,t)=>TW(r,typeof e!="symbol"?e+"":e,t),iE=class{constructor(e){mu(this,"name","elrond"),mu(this,"client"),mu(this,"httpProviders"),mu(this,"events"),mu(this,"namespace"),mu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;let i=xc(t);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},NW=Object.defineProperty,DW=(r,e,t)=>e in r?NW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gu=(r,e,t)=>DW(r,typeof e!="symbol"?e+"":e,t),sE=class{constructor(e){gu(this,"name","multiversx"),gu(this,"client"),gu(this,"httpProviders"),gu(this,"events"),gu(this,"namespace"),gu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;let i=xc(t);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},RW=Object.defineProperty,OW=(r,e,t)=>e in r?RW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,bu=(r,e,t)=>OW(r,typeof e!="symbol"?e+"":e,t),oE=class{constructor(e){bu(this,"name","near"),bu(this,"client"),bu(this,"httpProviders"),bu(this,"events"),bu(this,"namespace"),bu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let n=t||Xn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace);return typeof n>"u"?void 0:new wn(new xn(n,tt("disableProviderPing")))}},MW=Object.defineProperty,kW=(r,e,t)=>e in r?MW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,yu=(r,e,t)=>kW(r,typeof e!="symbol"?e+"":e,t),aE=class{constructor(e){yu(this,"name","tezos"),yu(this,"client"),yu(this,"httpProviders"),yu(this,"events"),yu(this,"namespace"),yu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let n=t||Xn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace);return typeof n>"u"?void 0:new wn(new xn(n))}},FW=Object.defineProperty,BW=(r,e,t)=>e in r?FW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vu=(r,e,t)=>BW(r,typeof e!="symbol"?e+"":e,t),cE=class{constructor(e){vu(this,"name",wu),vu(this,"client"),vu(this,"httpProviders"),vu(this,"events"),vu(this,"namespace"),vu(this,"chainId"),this.namespace=e.namespace,this.events=tt("events"),this.client=tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(wi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;let n={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(i=>{let s=la(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){let n=t||Xn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new wn(new xn(n,tt("disableProviderPing")))}},UW=Object.defineProperty,LW=Object.defineProperties,VW=Object.getOwnPropertyDescriptors,XP=Object.getOwnPropertySymbols,jW=Object.prototype.hasOwnProperty,HW=Object.prototype.propertyIsEnumerable,lE=(r,e,t)=>e in r?UW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xg=(r,e)=>{for(var t in e||(e={}))jW.call(e,t)&&lE(r,t,e[t]);if(XP)for(var t of XP(e))HW.call(e,t)&&lE(r,t,e[t]);return r},Jx=(r,e)=>LW(r,VW(e)),vi=(r,e,t)=>lE(r,typeof e!="symbol"?e+"":e,t),Eg=class r{constructor(e){vi(this,"client"),vi(this,"namespaces"),vi(this,"optionalNamespaces"),vi(this,"sessionProperties"),vi(this,"scopedProperties"),vi(this,"events",new eT.default),vi(this,"rpcProviders",{}),vi(this,"session"),vi(this,"providerOpts"),vi(this,"logger"),vi(this,"uri"),vi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:(0,qa.default)(Bo({level:e?.logger||HP})),this.disableProviderPing=e?.disableProviderPing||!1}static init(e){return p(this,null,function*(){let t=new r(e);return yield t.initialize(),t})}request(e,t,n){return p(this,null,function*(){let[i,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return yield this.getProvider(i).request({request:xg({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})})}sendAsync(e,t,n,i){let s=new Date().getTime();this.request(e,n,i).then(o=>t(null,Lo(s,o))).catch(o=>t(o,void 0))}enable(){return p(this,null,function*(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||(yield this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties})),yield this.requestAccounts()})}disconnect(){return p(this,null,function*(){var e;if(!this.session)throw new Error("Please call connect() before enable()");yield this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:it("USER_DISCONNECTED")}),yield this.cleanup()})}connect(e){return p(this,null,function*(){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),yield this.cleanupPendingPairings(),!e.skipPairing)return yield this.pair(e.pairingTopic)})}authenticate(e,t){return p(this,null,function*(){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),yield this.cleanupPendingPairings();let{uri:n,response:i}=yield this.client.authenticate(e,t);n&&(this.uri=n,this.events.emit("display_uri",n));let s=yield i();if(this.session=s.session,this.session){let o=JP(this.session.namespaces);this.namespaces=Gx(this.namespaces,o),yield this.persist("namespaces",this.namespaces),this.onConnect()}return s})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){return p(this,null,function*(){let{uri:t,approval:n}=yield this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=yield n();this.session=i;let s=JP(i.namespaces);return this.namespaces=Gx(this.namespaces,s),yield this.persist("namespaces",this.namespaces),yield this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session})}setDefaultChain(e,t){try{if(!this.session)return;let[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===wu?s.setDefaultChain(`${n}:${i}`,t):s.setDefaultChain(i,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}cleanupPendingPairings(){return p(this,arguments,function*(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(po(t)){for(let n of t)e.deletePairings?this.client.core.expirer.set(n.topic,0):yield this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}})}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}checkStorage(){return p(this,null,function*(){this.namespaces=(yield this.getFromStore("namespaces"))||{},this.optionalNamespaces=(yield this.getFromStore("optionalNamespaces"))||{},this.session&&this.createProviders()})}initialize(){return p(this,null,function*(){this.logger.trace("Initialized"),yield this.createClient(),yield this.checkStorage(),this.registerEventListeners()})}createClient(){return p(this,null,function*(){var e,t;if(this.client=this.providerOpts.client||(yield gg.init({core:this.providerOpts.core,logger:this.providerOpts.logger||HP,relayUrl:this.providerOpts.relayUrl||PK,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled})),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{let n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")})}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(t=>iu(t)))];Wx("client",this.client),Wx("events",this.events),Wx("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;let n=hW(t,this.session),i=cT(n),s=Gx(this.namespaces,this.optionalNamespaces),o=Jx(xg({},s[t]),{accounts:n,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new Xx({namespace:o});break;case"algorand":this.rpcProviders[t]=new rE({namespace:o});break;case"solana":this.rpcProviders[t]=new eE({namespace:o});break;case"cosmos":this.rpcProviders[t]=new tE({namespace:o});break;case"polkadot":this.rpcProviders[t]=new Qx({namespace:o});break;case"cip34":this.rpcProviders[t]=new nE({namespace:o});break;case"elrond":this.rpcProviders[t]=new iE({namespace:o});break;case"multiversx":this.rpcProviders[t]=new sE({namespace:o});break;case"near":this.rpcProviders[t]=new oE({namespace:o});break;case"tezos":this.rpcProviders[t]=new aE({namespace:o});break;default:this.rpcProviders[wu]?this.rpcProviders[wu].updateNamespace(o):this.rpcProviders[wu]=new cE({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:n}=e;n===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:n,topic:i}=e;if(i!==((t=this.session)==null?void 0:t.topic))return;let{event:s}=n;if(s.name==="accountsChanged"){let o=s.data;o&&po(o)&&this.events.emit("accountsChanged",o.map(dW))}else if(s.name==="chainChanged"){let o=n.chainId,a=n.event.data,c=iu(o),l=Kx(o)!==Kx(a)?`${c}:${Kx(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;let{namespaces:s}=t,o=(i=this.client)==null?void 0:i.session.get(e);this.session=Jx(xg({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",e=>p(this,null,function*(){var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(yield this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Jx(xg({},it("USER_DISCONNECTED")),{data:e.topic})))})),this.on(wi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[wu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){let[t,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(o=>iu(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];let i=iu(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}requestAccounts(){return p(this,null,function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()})}onChainChanged(e,t=!1){return p(this,null,function*(){if(!this.namespaces)return;let[n,i]=this.validateChain(e);i&&(t||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.events.emit("chainChanged",i),yield this.persist("namespaces",this.namespaces))})}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){return p(this,null,function*(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,yield this.deleteFromStore("namespaces"),yield this.deleteFromStore("optionalNamespaces"),yield this.deleteFromStore("sessionProperties"),this.session=void 0,yield this.cleanupPendingPairings({deletePairings:!0}),yield this.cleanupStorage()})}persist(e,t){return p(this,null,function*(){var n;let i=((n=this.session)==null?void 0:n.topic)||"";yield this.client.core.storage.setItem(`${vg}/${e}${i}`,t)})}getFromStore(e){return p(this,null,function*(){var t;let n=((t=this.session)==null?void 0:t.topic)||"";return yield this.client.core.storage.getItem(`${vg}/${e}${n}`)})}deleteFromStore(e){return p(this,null,function*(){var t;let n=((t=this.session)==null?void 0:t.topic)||"";yield this.client.core.storage.removeItem(`${vg}/${e}${n}`)})}cleanupStorage(){return p(this,null,function*(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;let t=yield this.client.core.storage.getKeys();for(let n of t)n.startsWith(vg)&&(yield this.client.core.storage.removeItem(n))}catch(t){this.logger.warn("Failed to cleanup storage",t)}})}};var Us={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};var dE=i_({id:80094,name:"Berachain",nativeCurrency:{decimals:18,name:"BERA Token",symbol:"BERA"},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:0},ensRegistry:{address:"0x5b22280886a2f5e09a49bea7e320eab0e5320e28",blockCreated:877007},ensUniversalResolver:{address:"0xddfb18888a9466688235887dec2a10c4f5effee9",blockCreated:877008}},rpcUrls:{default:{http:["https://rpc.berachain.com"]}},blockExplorers:{default:{name:"Berascan",url:"https://berascan.com"}},testnet:!1});function go(r){return k({formatters:void 0,fees:void 0,serializers:void 0},r)}var fE=go({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});var pE=go({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});var Pae=go({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});var kae=go({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),Fae=go({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var Eu={getMethodsByChainNamespace(r){switch(r){case"solana":return["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"];case"eip155":return["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];case"bip122":return["sendTransfer","signMessage","signPsbt","getAccountAddresses"];default:return[]}},createNamespaces(r){return r.reduce((e,t)=>{let{id:n,chainNamespace:i,rpcUrls:s}=t,o=s.default.http[0],a=this.getMethodsByChainNamespace(i);e[i]||(e[i]={methods:a,events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}});let c=`${i}:${n}`,l=e[i];switch(l.chains.push(c),c){case fE.caipNetworkId:l.chains.push(fE.deprecatedCaipNetworkId);break;case pE.caipNetworkId:l.chains.push(pE.deprecatedCaipNetworkId);break;default:}return l?.rpcMap&&o&&(l.rpcMap[n]=o),e},{})},resolveReownName:r=>p(void 0,null,function*(){let e=yield Uf.resolveName(r);return(Object.values(e?.addresses)||[])[0]?.address||!1}),getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{let t=e.chains||[],n=e.accounts.map(i=>{let[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...t,...n]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null}};var fa=class{constructor({provider:e,caipNetworks:t,namespace:n}){this.id=He.CONNECTOR_ID.WALLET_CONNECT,this.name=ph.ConnectorNamesMap[He.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=ph.ConnectorImageIds[He.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=t,this.provider=e,this.chain=n}get chains(){return this.caipNetworks}connectWalletConnect(){return p(this,null,function*(){return(yield this.authenticate())||(yield this.provider.connect({optionalNamespaces:Eu.createNamespaces(this.caipNetworks)})),{clientId:yield this.provider.client.core.crypto.getClientId(),session:this.provider.session}})}disconnect(){return p(this,null,function*(){yield this.provider.disconnect()})}authenticate(){return p(this,null,function*(){let e=this.chains.map(t=>t.caipNetworkId);return n_.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:qW})})}},qW=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];var Ec=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:He.CONNECTOR_ID.AUTH,type:"AUTH",name:He.CONNECTOR_NAMES.AUTH,provider:e,imageId:ph.ConnectorImageIds[He.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>t.has(n.id)?!1:(t.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){ke.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let n=this.eventListeners.get(e);n&&n.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let n=this.eventListeners.get(e);n&&n.forEach(i=>i(t))}connectWalletConnect(e){return p(this,null,function*(){return{clientId:(yield this.getWalletConnectConnector().connectWalletConnect()).clientId}})}switchNetwork(e){return p(this,null,function*(){let{caipNetwork:t,providerType:n}=e;if(!e.provider)return;let i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(t.caipNetworkId);return}if(i&&n==="AUTH"){let s=i;yield s.switchNetwork(t.caipNetworkId);let o=yield s.getUser({chainId:t.caipNetworkId,preferredAccountType:ye.state.defaultAccountTypes[t.chainNamespace]});this.emit("switchNetwork",o)}})}getWalletConnectConnector(){let e=this.connectors.find(t=>t instanceof fa);if(!e)throw new Error("WalletConnectConnector not found");return e}};var Cg=class extends Ec{setUniversalProvider(e){this.addConnector(new fa({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}connect(e){return p(this,null,function*(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})})}disconnect(){return p(this,null,function*(){try{yield this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}})}getAccounts(t){return p(this,arguments,function*({namespace:e}){let i=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{let[,,o]=s.split(":");return o}).filter((s,o,a)=>a.indexOf(s)===o)||[];return Promise.resolve({accounts:i.map(s=>Br.createAccount(e,s,e==="bip122"?"payment":"eoa"))})})}syncConnectors(){return p(this,null,function*(){return Promise.resolve()})}getBalance(e){return p(this,null,function*(){if(!(e.caipNetwork&&el.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(ke.state.balanceLoading&&e.chainId===Q.state.activeCaipNetwork?.id)return{balance:ke.state.balance||"0.00",symbol:ke.state.balanceSymbol||""};let i=(yield ke.fetchTokenBalance()).find(s=>s.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&s.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}})}signMessage(e){return p(this,null,function*(){let{provider:t,message:n,address:i}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return Q.state.activeCaipNetwork?.chainNamespace===He.CHAIN.SOLANA?s=(yield t.request({method:"solana_signMessage",params:{message:em.encode(new TextEncoder().encode(n)),pubkey:i}},Q.state.activeCaipNetwork?.caipNetworkId)).signature:s=yield t.request({method:"personal_sign",params:[n,i]},Q.state.activeCaipNetwork?.caipNetworkId),{signature:s}})}estimateGas(){return p(this,null,function*(){return Promise.resolve({gas:BigInt(0)})})}getProfile(){return p(this,null,function*(){return Promise.resolve({profileImage:"",profileName:""})})}sendTransaction(){return p(this,null,function*(){return Promise.resolve({hash:""})})}walletGetAssets(e){return Promise.resolve({})}writeContract(){return p(this,null,function*(){return Promise.resolve({hash:""})})}getEnsAddress(){return p(this,null,function*(){return Promise.resolve({address:!1})})}parseUnits(){return 0n}formatUnits(){return"0"}getCapabilities(){return p(this,null,function*(){return Promise.resolve({})})}grantPermissions(){return p(this,null,function*(){return Promise.resolve({})})}revokePermissions(){return p(this,null,function*(){return Promise.resolve("0x")})}syncConnection(){return p(this,null,function*(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})})}switchNetwork(e){return p(this,null,function*(){let{caipNetwork:t}=e,n=this.getWalletConnectConnector();if(t.chainNamespace===He.CHAIN.EVM)try{yield n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:Zb(t.id)}]})}catch(i){if(i.code===Us.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===Us.ERROR_INVALID_CHAIN_ID||i.code===Us.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===Us.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{yield n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:Zb(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(t.caipNetworkId)})}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}};var _g=class{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=t=>{if(t){let n=Q.getNetworkData(t)?.caipNetwork;return n||Q.getRequestedCaipNetworks(t).filter(i=>i.chainNamespace===t)?.[0]}return Q.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{let t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>Q.getRequestedCaipNetworks(t),this.getActiveChainNamespace=()=>Q.state.activeChain,this.setRequestedCaipNetworks=(t,n)=>{Q.setRequestedCaipNetworks(t,n)},this.getApprovedCaipNetworkIds=()=>Q.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>Q.state.activeChain===t||!t?Q.state.activeCaipAddress:Q.getAccountProp("caipAddress",t),this.setClientId=t=>{Xb.setClientId(t)},this.getProvider=t=>Ve.getProvider(t),this.getProviderType=t=>Ve.getProviderId(t),this.getPreferredAccountType=()=>ke.state.preferredAccountType,this.setCaipAddress=(t,n)=>{ke.setCaipAddress(t,n)},this.setBalance=(t,n,i)=>{ke.setBalance(t,n,i)},this.setProfileName=(t,n)=>{ke.setProfileName(t,n)},this.setProfileImage=(t,n)=>{ke.setProfileImage(t,n)},this.setUser=(t,n)=>{ke.setUser(t,n),ye.state.enableEmbedded&&il.close()},this.resetAccount=t=>{ke.resetAccount(t)},this.setCaipNetwork=t=>{Q.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,n)=>{Q.setChainNetworkData(n,{caipNetwork:t})},this.setAllAccounts=(t,n)=>{ke.setAllAccounts(t,n),ye.setHasMultipleAddresses(t?.length>1)},this.setStatus=(t,n)=>{ke.setStatus(t,n),Ut.isConnected()?Kt.setConnectionStatus("connected"):Kt.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>Q.getAccountProp("address",t),this.setConnectors=t=>{let n=[...Ut.getConnectors(),...t];Ut.setConnectors(n)},this.fetchIdentity=t=>Xb.fetchIdentity(t),this.getReownName=t=>Uf.getNamesForAddress(t),this.getConnectors=()=>Ut.getConnectors(),this.getConnectorImage=t=>XC.getConnectorImage(t),this.setConnectedWalletInfo=(t,n)=>{let i=Ve.getProviderId(n),s=t?de(k({},t),{type:i}):void 0;ke.setConnectedWalletInfo(s,n)},this.getIsConnectedState=()=>!!Q.state.activeCaipAddress,this.addAddressLabel=(t,n,i)=>{ke.addAddressLabel(t,n,i)},this.removeAddressLabel=(t,n)=>{ke.removeAddressLabel(t,n)},this.getAddress=t=>Q.state.activeChain===t||!t?ke.state.address:Q.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>Q.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{Q.resetNetwork(t)},this.addConnector=t=>{Ut.addConnector(t)},this.resetWcConnection=()=>{Di.resetWcConnection()},this.setAddressExplorerUrl=(t,n)=>{ke.setAddressExplorerUrl(t,n)},this.setSmartAccountDeployed=(t,n)=>{ke.setSmartAccountDeployed(t,n)},this.setSmartAccountEnabledNetworks=(t,n)=>{Q.setSmartAccountEnabledNetworks(t,n)},this.setPreferredAccountType=(t,n)=>{ke.setPreferredAccountType(t,n)},this.setEIP6963Enabled=t=>{ye.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set(this.caipNetworks?.map(t=>t.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}initialize(e){return p(this,null,function*(){this.initControllers(e),yield this.initChainAdapters(),yield this.injectModalUi(),yield this.syncExistingConnection(),Bf.set({initialized:!0})})}sendInitializeEvent(e){let t=ah(e,[]);delete t.adapters,nl.sendEvent({type:"track",event:"INITIALIZE",properties:de(k({},t),{networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}})})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&li.setThemeMode(e.themeMode),e.themeVariables&&li.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");Q.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&Q.setActiveCaipNetwork(t)}initializeConnectionController(e){Di.setWcBasic(e.basic??!1)}initializeConnectorController(){Ut.initialize(this.chainNamespaces)}initializeOptionsController(e){ye.setDebug(e.debug!==!1),ye.setEnableWalletConnect(e.enableWalletConnect!==!1),ye.setEnableWalletGuide(e.enableWalletGuide!==!1),ye.setEnableWallets(e.enableWallets!==!1),ye.setEIP6963Enabled(e.enableEIP6963!==!1),ye.setEnableAuthLogger(e.enableAuthLogger!==!1),ye.setSdkVersion(e.sdkVersion),ye.setProjectId(e.projectId),ye.setEnableEmbedded(e.enableEmbedded),ye.setAllWallets(e.allWallets),ye.setIncludeWalletIds(e.includeWalletIds),ye.setExcludeWalletIds(e.excludeWalletIds),ye.setFeaturedWalletIds(e.featuredWalletIds),ye.setTokens(e.tokens),ye.setTermsConditionsUrl(e.termsConditionsUrl),ye.setPrivacyPolicyUrl(e.privacyPolicyUrl),ye.setCustomWallets(e.customWallets),ye.setFeatures(e.features),ye.setAllowUnsupportedChain(e.allowUnsupportedChain),ye.setDefaultAccountTypes(e.defaultAccountTypes);let t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),ye.setMetadata(e.metadata),ye.setDisableAppend(e.disableAppend),ye.setEnableEmbedded(e.enableEmbedded),ye.setSIWX(e.siwx),!e.projectId){rl.open(Ga.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(i=>i.namespace===He.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ye.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return typeof window<"u"&&typeof document<"u"?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}getUnsupportedNetwork(e){return{id:e.split(":")[1],caipNetworkId:e,name:He.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let n=this.getUnsupportedNetwork(`${t}:${e}`);Q.setActiveCaipNetwork(n)}}getDefaultNetwork(){let e=Kt.getActiveCaipNetworkId();if(e){let t=this.caipNetworks?.find(n=>n.caipNetworkId===e);return t||(this.defaultCaipNetwork?this.defaultCaipNetwork:this.getUnsupportedNetwork(e))}return this.defaultCaipNetwork?this.defaultCaipNetwork:this.caipNetworks?.[0]}extendCaipNetwork(e,t){return Vf.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Vf.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(i=>i.id===e.defaultNetwork?.id);return t?Vf.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:()=>p(this,null,function*(){let e=Q.state.activeChain,t=this.getAdapter(e),n=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");let i=yield t.connectWalletConnect(n);this.close(),this.setClientId(i?.clientId||null),Kt.setConnectedNamespaces([...Q.state.chains.keys()]),this.chainNamespaces.forEach(s=>{Ut.setConnectorId(En.CONNECTOR_TYPE_WALLET_CONNECT,s)}),yield this.syncWalletConnectAccount()}),connectExternal:a=>p(this,[a],function*({id:e,info:t,type:n,provider:i,chain:s,caipNetwork:o}){let c=Q.state.activeChain,l=s||c,u=this.getAdapter(l);if(s&&s!==c&&!o){let f=this.caipNetworks?.find(v=>v.chainNamespace===s);f&&this.setCaipNetwork(f)}if(!u)throw new Error("Adapter not found");let h=this.getCaipNetwork(l),m=yield u.connect({id:e,info:t,type:n,provider:i,chainId:o?.id||h?.id,rpcUrl:o?.rpcUrls?.default?.http?.[0]||h?.rpcUrls?.default?.http?.[0]});if(!m)return;Kt.addConnectedNamespace(l),this.syncProvider(de(k({},m),{chainNamespace:l})),yield this.syncAccount(de(k({},m),{chainNamespace:l}));let{accounts:b}=yield u.getAccounts({namespace:l,id:e});this.setAllAccounts(b,l)}),reconnectExternal:s=>p(this,[s],function*({id:e,info:t,type:n,provider:i}){let o=Q.state.activeChain,a=this.getAdapter(o);a?.reconnect&&(yield a?.reconnect({id:e,info:t,type:n,provider:i,chainId:this.getCaipNetwork()?.id}),Kt.addConnectedNamespace(o))}),disconnect:()=>p(this,null,function*(){let e=Q.state.activeChain,t=this.getAdapter(e),n=Ve.getProvider(e),i=Ve.getProviderId(e);yield t?.disconnect({provider:n,providerType:i}),Kt.removeConnectedNamespace(e),Ve.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e)}),checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:e=>p(this,null,function*(){return(yield this.getAdapter(Q.state.activeChain)?.signMessage({message:e,address:ke.state.address,provider:Ve.getProvider(Q.state.activeChain)}))?.signature||""}),sendTransaction:e=>p(this,null,function*(){if(e.chainNamespace===He.CHAIN.EVM){let t=this.getAdapter(Q.state.activeChain),n=Ve.getProvider(Q.state.activeChain);return(yield t?.sendTransaction(de(k({},e),{provider:n})))?.hash||""}return""}),estimateGas:e=>p(this,null,function*(){if(e.chainNamespace===He.CHAIN.EVM){let t=this.getAdapter(Q.state.activeChain),n=Ve.getProvider(Q.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");return(yield t?.estimateGas(de(k({},e),{provider:n,caipNetwork:i})))?.gas||0n}return 0n}),getEnsAvatar:()=>p(this,null,function*(){return(yield this.getAdapter(Q.state.activeChain)?.getProfile({address:ke.state.address,chainId:Number(this.getCaipNetwork()?.id)}))?.profileImage||!1}),getEnsAddress:e=>p(this,null,function*(){let t=this.getAdapter(Q.state.activeChain),n=this.getCaipNetwork();return n&&(yield t?.getEnsAddress({name:e,caipNetwork:n}))?.address||!1}),writeContract:e=>p(this,null,function*(){let t=this.getAdapter(Q.state.activeChain),n=this.getCaipNetwork(),i=this.getCaipAddress(),s=Ve.getProvider(Q.state.activeChain);if(!n||!i)throw new Error("CaipNetwork or CaipAddress is undefined");return(yield t?.writeContract(de(k({},e),{caipNetwork:n,provider:s,caipAddress:i})))?.hash}),parseUnits:(e,t)=>this.getAdapter(Q.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(Q.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:e=>p(this,null,function*(){return yield this.getAdapter(Q.state.activeChain)?.getCapabilities(e)}),grantPermissions:e=>p(this,null,function*(){return yield this.getAdapter(Q.state.activeChain)?.grantPermissions(e)}),revokePermissions:e=>p(this,null,function*(){let t=this.getAdapter(Q.state.activeChain);return t?.revokePermissions?yield t.revokePermissions(e):"0x"}),walletGetAssets:e=>p(this,null,function*(){return(yield this.getAdapter(Q.state.activeChain)?.walletGetAssets(e))??{}})},this.networkControllerClient={switchCaipNetwork:e=>p(this,null,function*(){return yield this.switchCaipNetwork(e)}),getApprovedCaipNetworksData:()=>p(this,null,function*(){return this.getApprovedCaipNetworksData()})},Di.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Ve.getProviderId(Q.state.activeChain)===En.CONNECTOR_TYPE_WALLET_CONNECT){let t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}switchCaipNetwork(e){return p(this,null,function*(){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let i=Ve.getProvider(t),s=Ve.getProviderId(t);if(e.chainNamespace===Q.state.activeChain)yield this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:i,providerType:s});else if(this.setCaipNetwork(e),s===En.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let o=this.getAddressByChainNamespace(t);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)})}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{let n=t.chains||[],i=t.accounts.map(s=>{let{chainId:o,chainNamespace:a}=Js.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,n)=>{let i=e?.find(s=>s.namespace===n);return i?(t[n]=i,t[n].namespace=n,t[n].construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks})):t[n]=new Cg({namespace:n,networks:this.caipNetworks}),t},{})}initChainAdapter(e){return p(this,null,function*(){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),yield this.createUniversalProviderForAdapter(e)})}initChainAdapters(){return p(this,null,function*(){yield Promise.all(this.chainNamespaces.map(e=>p(this,null,function*(){yield this.initChainAdapter(e)})))})}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let n=Kt.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Kt.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),t.on("switchNetwork",({address:i,chainId:s})=>{let o=this.caipNetworks?.find(l=>l.id===s||l.caipNetworkId===s),a=Q.state.activeChain===e,c=Q.getAccountProp("address",e);if(o){let l=a&&i?i:c;l&&this.syncAccount({address:l,chainId:s,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),t.on("disconnect",this.disconnect.bind(this)),t.on("pendingTransactions",()=>{let i=ke.state.address,s=Q.state.activeCaipNetwork;!i||!s?.id||this.updateNativeBalance(i,s.id,s.chainNamespace)}),t.on("accountChanged",({address:i,chainId:s})=>{let o=Q.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&Q.state.activeCaipNetwork?.id?this.syncAccount({address:i,chainId:Q.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(i,s,e)})}createUniversalProviderForAdapter(e){return p(this,null,function*(){yield this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)})}syncExistingConnection(){return p(this,null,function*(){yield Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))})}syncNamespaceConnection(e){return p(this,null,function*(){try{let t=Ut.getConnectorId(e);switch(this.setStatus("connecting",e),t){case He.CONNECTOR_ID.WALLET_CONNECT:yield this.syncWalletConnectAccount();break;case He.CONNECTOR_ID.AUTH:break;default:yield this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}})}syncAdapterConnection(e){return p(this,null,function*(){let t=this.getAdapter(e),n=Ut.getConnectorId(e),i=this.getCaipNetwork(),s=Ut.getConnectors(e).find(o=>o.id===n);try{if(!t||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");let o=yield t?.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});if(o){let a=yield t?.getAccounts({namespace:e,id:s.id});a&&a.accounts.length>0?this.setAllAccounts(a.accounts,e):this.setAllAccounts([Br.createAccount(e,o.address,"eoa")],e),this.syncProvider(de(k({},o),{chainNamespace:e})),yield this.syncAccount(de(k({},o),{chainNamespace:e})),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}})}syncWalletConnectAccount(){return p(this,null,function*(){let e=this.chainNamespaces.map(t=>p(this,null,function*(){let n=this.getAdapter(t),i=this.universalProvider?.session?.namespaces?.[t]?.accounts||[],s=Q.state.activeCaipNetwork?.id,o=i.find(a=>{let{chainId:c}=Js.parseCaipAddress(a);return c===s?.toString()})||i[0];if(o){let a=Js.validateCaipAddress(o),{chainId:c,address:l}=Js.parseCaipAddress(a);if(Ve.setProviderId(t,En.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&Q.state.activeCaipNetwork&&n?.namespace!==He.CHAIN.EVM){let u=n?.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:Q.state.activeCaipNetwork});Ve.setProvider(t,u)}else Ve.setProvider(t,this.universalProvider);Ut.setConnectorId(He.CONNECTOR_ID.WALLET_CONNECT,t),Kt.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),yield this.syncAccount({address:l,chainId:c,chainNamespace:t})}else this.setStatus("disconnected",t);yield Q.setApprovedCaipNetworksData(t)}));yield Promise.all(e)})}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(n=>{let{address:i}=Js.parseCaipAddress(n);return i}).filter((n,i,s)=>s.indexOf(n)===i);t&&this.setAllAccounts(t.map(n=>Br.createAccount(e,n,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:n,chainNamespace:i}){Ve.setProviderId(i,e),Ve.setProvider(i,t),Ut.setConnectorId(n,i)}syncAccount(e){return p(this,null,function*(){let t=e.chainNamespace===Q.state.activeChain,n=Q.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=Kt.getActiveNetworkProps(),c=s||a,l=Q.state.activeCaipNetwork?.name===He.UNSUPPORTED_NETWORK_NAME,u=Q.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let h=this.caipNetworks?.find(f=>f.id.toString()===c.toString()),m=this.caipNetworks?.find(f=>f.chainNamespace===o);if(!u&&!h&&!m){let f=this.getApprovedCaipNetworkIds()||[],v=f.find(I=>Js.parseCaipNetworkId(I)?.chainId===c.toString()),E=f.find(I=>Js.parseCaipNetworkId(I)?.chainNamespace===o);h=this.caipNetworks?.find(I=>I.caipNetworkId===v),m=this.caipNetworks?.find(I=>I.caipNetworkId===E||"deprecatedCaipNetworkId"in I&&I.deprecatedCaipNetworkId===E)}let b=h||m;b?.chainNamespace===Q.state.activeChain?!ye.state.allowUnsupportedChain&&Q.state.activeCaipNetwork?.name===He.UNSUPPORTED_NETWORK_NAME?Q.showUnsupportedChainUI():this.setCaipNetwork(b):t||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),Lf.isLowerCaseMatch(i,ke.state.address)||this.syncAccountInfo(i,b?.id,o),t?yield this.syncBalance({address:i,chainId:b?.id,chainNamespace:o}):yield this.syncBalance({address:i,chainId:n?.id,chainNamespace:o})}})}syncAccountInfo(e,t,n){return p(this,null,function*(){let i=this.getCaipAddress(n),s=t||i?.split(":")[1];if(!s)return;let o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),yield this.syncIdentity({address:e,chainId:s,chainNamespace:n})})}syncReownName(e,t){return p(this,null,function*(){try{let n=yield this.getReownName(e);if(n[0]){let i=n[0];this.setProfileName(i.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}})}syncConnectedWalletInfo(e){let t=Ut.getConnectorId(e),n=Ve.getProviderId(e);if(n===En.CONNECTOR_TYPE_ANNOUNCED||n===En.CONNECTOR_TYPE_INJECTED){if(t){let i=this.getConnectors().find(s=>s.id===t);if(i){let{info:s,name:o,imageUrl:a}=i,c=a||this.getConnectorImage(i);this.setConnectedWalletInfo(k({name:o,icon:c},s),e)}}}else if(n===En.CONNECTOR_TYPE_WALLET_CONNECT){let i=Ve.getProvider(e);i?.session&&this.setConnectedWalletInfo(de(k({},i.session.peer.metadata),{name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]}),e)}else if(t)if(t===He.CONNECTOR_ID.COINBASE){let i=this.getConnectors().find(s=>s.id===He.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}else this.setConnectedWalletInfo({name:t},e)}syncBalance(e){return p(this,null,function*(){!o_.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||(yield this.updateNativeBalance(e.address,e.chainId,e.chainNamespace))})}updateNativeBalance(e,t,n){return p(this,null,function*(){let i=this.getAdapter(n);if(i){let s=yield i.getBalance({address:e,chainId:t,caipNetwork:this.getCaipNetwork(n),tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,n)}})}initializeUniversalAdapter(){return p(this,null,function*(){let e=c_.createLogger((n,...i)=>{n&&this.handleAlertError(n),console.error(...i)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};ye.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??(yield Eg.init(t)),this.listenWalletConnect()})}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Di.setUri(e)}),this.universalProvider.on("connect",Di.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Di.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.caipNetworks?.find(i=>i.id==e),n=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}n?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(Eu.isSessionEventData(e)){let{name:t,data:n}=e.params.event;t==="accountsChanged"&&Array.isArray(n)&&Br.isCaipAddress(n[0])&&this.syncAccount(Js.parseCaipAddress(n[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&Br.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}getUniversalProvider(){return p(this,null,function*(){if(!this.universalProvider)try{yield this.createUniversalProvider()}catch{throw new Error("AppKit:getUniversalProvider - Cannot create provider")}return this.universalProvider})}handleAlertError(e){let t=Object.entries(Ga.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,i]=t??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){let a=Ga.ALERT_ERRORS[o];a&&(rl.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;if(!t)return;this.createClients();let n=e;n.namespace=t,n.construct({namespace:t,projectId:this.options?.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=n)}open(e){return p(this,null,function*(){yield this.injectModalUi(),e?.uri&&Di.setUri(e.uri),yield il.open(e)})}close(){return p(this,null,function*(){yield this.injectModalUi(),il.close()})}setLoading(e,t){il.setLoading(e,t)}disconnect(){return p(this,null,function*(){yield Di.disconnect()})}getError(){return""}getChainId(){return Q.state.activeCaipNetwork?.id}switchNetwork(e){return p(this,null,function*(){let t=this.caipNetworks?.find(n=>n.id===e.id);if(!t){rl.open(Ga.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}yield Q.switchActiveNetwork(t)})}getWalletProvider(){return Q.state.activeChain?Ve.state.providers[Q.state.activeChain]:null}getWalletProviderType(){return Ve.getProviderId(Q.state.activeChain)}subscribeProviders(e){return Ve.subscribeProviders(e)}getThemeMode(){return li.state.themeMode}getThemeVariables(){return li.state.themeVariables}setThemeMode(e){li.setThemeMode(e),p_(li.state.themeMode)}setTermsConditionsUrl(e){ye.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ye.setPrivacyPolicyUrl(e)}setThemeVariables(e){li.setThemeVariables(e),m_(li.state.themeVariables)}subscribeTheme(e){return li.subscribe(e)}getWalletInfo(){return ke.state.connectedWalletInfo}getAccount(e){let t=Ut.getAuthConnector(e),n=Q.getAccountData(e);if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:Br.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:t?{user:n.user,authProvider:n.socialProvider||"email",accountType:n.preferredAccountType,isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let n=()=>{let i=this.getAccount(t);i&&e(i)};t?Q.subscribeChainProp("accountState",n,t):Q.subscribe(n),Ut.subscribe(n)}subscribeNetwork(e){return Q.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return ke.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ke.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){Q.subscribeKey("activeCaipNetwork",e)}getState(){return Bf.state}subscribeState(e){return Bf.subscribe(e)}showErrorMessage(e){Qb.showError(e)}showSuccessMessage(e){Qb.showSuccess(e)}getEvent(){return k({},nl.state)}subscribeEvents(e){return nl.subscribe(e)}replace(e){$a.replace(e)}redirect(e){$a.push(e)}popTransactionStack(e){$a.popTransactionStack(e)}isOpen(){return il.state.open}isTransactionStackEmpty(){return $a.state.transactionStack.length===0}isTransactionShouldReplaceView(){return $a.state.transactionStack[$a.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){ye.setFeatures(e)}updateOptions(e){let t=ye.state||{},n=k(k({},t),e);ye.setOptions(n)}setConnectMethodsOrder(e){ye.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ye.setWalletFeaturesOrder(e)}setCollapseWallets(e){ye.setCollapseWallets(e)}setSocialsOrder(e){ye.setSocialsOrder(e)}getConnectMethodsOrder(){return f_.getConnectOrderMethod(ye.state.features,Ut.getConnectors())}removeAdapter(e){let t=this.getIsConnectedState(),n=this.getAdapter(e);if(!n||!this.chainAdapters||t)return;let i=this.caipNetworks?.filter(s=>s.chainNamespace!==e);Q.removeAdapter(e),Ut.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(s=>s!==e),this.caipNetworks=i,n.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,t){let n=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!n)return;let i=this.extendCaipNetworks(de(k({},this.options),{networks:t}));this.caipNetworks=[...this.caipNetworks||[],...i],this.createAdapter(e),this.initChainAdapter(n),Q.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},i)}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);let n=this.extendCaipNetwork(t,this.options);Q.addNetwork(n),this.caipNetworks&&!this.caipNetworks?.find(i=>i.id===n.id)&&this.caipNetworks.push(n)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);if(!this.caipNetworks?.find(s=>s.id===t))throw new Error(`Network with ID ${t} not found`);if(!this.caipNetworks)return;let i=this.caipNetworks.filter(s=>s.chainNamespace===e&&s.id!==t);if(!i?.length)throw new Error("Cannot remove last network for a namespace");Q.removeNetwork(e,t),this.caipNetworks=[...i]}};var uT=!1,Ag=class r extends _g{setupAuthConnectorListeners(e){e.onRpcRequest(t=>{jf.checkIfRequestExists(t)?jf.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(ey.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout(()=>{this.showErrorMessage(ey.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))}),e.onRpcSuccess((t,n)=>{let i=jf.checkIfRequestIsSafe(n),s=ke.state.address,o=Q.state.activeCaipNetwork;i||(this.isTransactionStackEmpty()?(this.close(),s&&o?.id&&this.updateNativeBalance(s,o.id,o.chainNamespace)):(this.popTransactionStack(),s&&o?.id&&this.updateNativeBalance(s,o.id,o.chainNamespace)))}),e.onNotConnected(()=>{let t=Q.state.activeChain;Ut.getConnectorId(t)===He.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,t),this.setLoading(!1,t))}),e.onConnect(t=>p(this,null,function*(){let n=Q.state.activeChain,i=n===He.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`;this.setSmartAccountDeployed(!!t.smartAccountDeployed,n),Lf.isLowerCaseMatch(t.address,ke.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:n}),this.setCaipAddress(i,n),this.setUser(de(k({},ke.state.user||{}),{email:t.email}),n);let s=t.preferredAccountType||ye.state.defaultAccountTypes[n];this.setPreferredAccountType(s,n);let o=t.accounts?.map(a=>Br.createAccount(n,a.address,a.type||ye.state.defaultAccountTypes[n]));this.setAllAccounts(o||[Br.createAccount(n,t.address,s)],n),yield e.getSmartAccountEnabledNetworks(),this.setLoading(!1,n)})),e.onSocialConnected(({userName:t})=>{this.setUser(de(k({},ke.state.user||{}),{username:t}),Q.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(t=>{this.setSmartAccountEnabledNetworks(t,Q.state.activeChain)}),e.onSetPreferredAccount(({address:t,type:n})=>{t&&this.setPreferredAccountType(n,Q.state.activeChain)})}syncAuthConnector(e,t){return p(this,null,function*(){let n=He.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!n)return;this.setLoading(!0,t);let i=e.getLoginEmailUsed();this.setLoading(i,t),i&&this.setStatus("connecting",t);let s=e.getEmail(),o=e.getUsername();this.setUser(de(k({},ke.state?.user||{}),{username:o,email:s}),Q.state.activeChain),this.setupAuthConnectorListeners(e);let{isConnected:a}=yield e.isConnected(),c=li.getSnapshot(),l=ye.getSnapshot();e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:a_(c.themeVariables,c.themeMode)}),t&&n&&(a&&this.connectionControllerClient?.connectExternal?(yield this.connectionControllerClient?.connectExternal({id:He.CONNECTOR_ID.AUTH,info:{name:He.CONNECTOR_ID.AUTH},type:En.CONNECTOR_TYPE_AUTH,provider:e,chainId:Q.state.activeCaipNetwork?.id,chain:t}),this.setStatus("connected",t)):Ut.getConnectorId(t)===He.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),Kt.removeConnectedNamespace(t))),this.setLoading(!1,t)})}checkExistingTelegramSocialConnection(e){return p(this,null,function*(){try{if(!Br.isTelegram())return;let t=Kt.getTelegramSocialProvider();if(!t||typeof window>"u"||typeof document>"u")return;let i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;ke.setSocialProvider(t,e),yield this.authProvider?.init();let s=Ut.getAuthConnector();t&&s&&(this.setLoading(!0,e),yield s.provider.connectSocial(i),yield Di.connectExternal(s,s.chain),Kt.setConnectedSocialProvider(t),Kt.removeTelegramSocialProvider(),nl.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{let t=new URL(window.location.href);t.searchParams.delete("result_uri"),window.history.replaceState({},document.title,t.toString())}catch(t){console.error("tma social login failed",t)}})}createAuthProvider(e){if(!He.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;let n=this.options?.features?.email===void 0?el.DEFAULT_FEATURES.email:this.options?.features?.email,i=this.options?.features?.socials?this.options?.features?.socials?.length>0:el.DEFAULT_FEATURES.socials,s=n||i;!this.authProvider&&this.options?.projectId&&s&&(this.authProvider=Am.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,onTimeout:()=>{rl.open(Ga.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),this.subscribeState(o=>{o.open||this.authProvider?.rejectRpcRequests()}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&s_.initializeExcludedWalletRdns({ids:this.options.excludeWalletIds})}switchCaipNetwork(e){return p(this,null,function*(){if(!e)return;let t=Q.state.activeChain,n=e.chainNamespace,i=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===Q.state.activeChain&&i){let s=this.getAdapter(n),o=Ve.getProvider(n),a=Ve.getProviderId(n);yield s?.switchNetwork({caipNetwork:e,provider:o,providerType:a}),this.setCaipNetwork(e)}else{let o=Ve.getProviderId(t)===En.CONNECTOR_TYPE_AUTH,a=Ve.getProviderId(n),c=a===En.CONNECTOR_TYPE_AUTH,l=He.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if((o||c)&&l)try{Q.state.activeChain=e.chainNamespace,yield this.connectionControllerClient?.connectExternal?.({id:He.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:En.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{yield this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:a})}else a===En.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:n}))}})}initChainAdapter(e){return p(this,null,function*(){yield Dn(r.prototype,this,"initChainAdapter").call(this,e),this.createAuthProviderForAdapter(e)})}syncIdentity(i){return p(this,arguments,function*({address:e,chainId:t,chainNamespace:n}){let s=`${n}:${t}`,o=this.caipNetworks?.find(a=>a.caipNetworkId===s);if(n!==He.CHAIN.EVM||o?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}try{let{name:a,avatar:c}=yield this.fetchIdentity({address:e,caipNetworkId:s});if(this.setProfileName(a,n),this.setProfileImage(c,n),!a){let u=yield this.getAdapter(n)?.getProfile({address:e,chainId:Number(t)});u?.profileName?(this.setProfileName(u.profileName,n),u.profileImage&&this.setProfileImage(u.profileImage,n)):(yield this.syncReownName(e,n),this.setProfileImage(null,n))}}catch{yield this.syncReownName(e,n),t!==1&&this.setProfileImage(null,n)}})}syncConnectedWalletInfo(e){let t=Ve.getProviderId(e);if(t===En.CONNECTOR_TYPE_AUTH){let n=this.authProvider;if(n){let i=Kt.getConnectedSocialProvider()??"email",s=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:t,identifier:s,social:i},e)}}else super.syncConnectedWalletInfo(e)}injectModalUi(){return p(this,null,function*(){if(!uT&&Br.isClient()){let e=k(k({},el.DEFAULT_FEATURES),this.options.features),t=[];if(e&&((e.email||e.socials&&e.socials.length)&&t.push(import("./chunk-Z6Y7MC7E.js")),e.email&&t.push(import("./chunk-2D3VP2JN.js")),e.socials&&t.push(import("./chunk-LEO2QG3W.js")),e.swaps&&t.push(import("./chunk-Z6ORSA53.js")),e.send&&t.push(import("./chunk-C44FBRY5.js")),e.receive&&t.push(import("./chunk-MJRX6WGR.js")),e.onramp&&t.push(import("./chunk-X254BBTV.js")),e.history&&t.push(import("./chunk-UITQTJWI.js"))),yield Promise.all([...t,import("./chunk-PU4HF77U.js"),import("./chunk-2HAOEXHZ.js")]),!document.querySelector("w3m-modal")){let i=document.createElement("w3m-modal");!ye.state.disableAppend&&!ye.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",i)}uT=!0}})}};var hT="1.7.0";function dT(r){return new Ag(de(k({},r),{sdkVersion:Br.generateSdkVersion(r.adapters??[],"html",hT)}))}var zW=dn(Ha());var $W="wc",GW="universal_provider",ile=`${$W}@2:${GW}:`,KW="https://rpc.walletconnect.org/v1/";var sle=`${KW}bundler`;var fT="6.13.5";function WW(r,e,t){let n=e.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}let i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}function Ht(r){return p(this,null,function*(){let e=Object.keys(r);return(yield Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,i,s)=>(n[e[s]]=i,n),{})})}function se(r,e,t){for(let n in e){let i=e[n],s=t?t[n]:null;s&&WW(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function Cu(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(Cu).join(", ")+" ]";if(r instanceof Uint8Array){let e="0123456789abcdef",t="0x";for(let n=0;n<r.length;n++)t+=e[r[n]>>4],t+=e[r[n]&15];return t}if(typeof r=="object"&&typeof r.toJSON=="function")return Cu(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{let e=Object.keys(r);return e.sort(),"{ "+e.map(t=>`${Cu(t)}: ${Cu(r[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function bt(r,e){return r&&r.code===e}function Cc(r){return bt(r,"CALL_EXCEPTION")}function We(r,e,t){let n=r;{let s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Cu(t)}`);for(let o in t){if(o==="shortMessage")continue;let a=t[o];s.push(o+"="+Cu(a))}}s.push(`code=${e}`),s.push(`version=${fT}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return se(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&se(i,{shortMessage:n}),i}function H(r,e,t,n){if(!r)throw We(e,t,n)}function O(r,e,t,n){H(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function _u(r,e,t){t==null&&(t=""),t&&(t=": "+t),H(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),H(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}var JW=["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken");r.push(e)}catch{}return r},[]);function Sg(r){H(JW.indexOf(r)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:r}})}function $i(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),H(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function mT(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let n=new Uint8Array((r.length-2)/2),i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}O(!1,"invalid BytesLike value",e||"value",r)}function ge(r,e){return mT(r,e,!1)}function qt(r,e){return mT(r,e,!0)}function Oe(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function pa(r){return Oe(r,!0)||r instanceof Uint8Array}var pT="0123456789abcdef";function X(r){let e=ge(r),t="0x";for(let n=0;n<e.length;n++){let i=e[n];t+=pT[(i&240)>>4]+pT[i&15]}return t}function rt(r){return"0x"+r.map(e=>X(e).substring(2)).join("")}function Gi(r){return Oe(r,!0)?(r.length-2)/2:ge(r).length}function dt(r,e,t){let n=ge(r);return t!=null&&t>n.length&&H(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),X(n.slice(e??0,t??n.length))}function gT(r,e,t){let n=ge(r);H(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});let i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),X(i)}function Vn(r,e){return gT(r,e,!0)}function Ig(r,e){return gT(r,e,!1)}var Pg=BigInt(0),Ki=BigInt(1),Au=9007199254740991;function ma(r,e){let t=Iu(r,"value"),n=BigInt(ve(e,"width"));if(H(t>>n===Pg,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-Ki){let i=(Ki<<n)-Ki;return-((~t&i)+Ki)}return t}function Su(r,e){let t=ie(r,"value"),n=BigInt(ve(e,"width")),i=Ki<<n-Ki;if(t<Pg){t=-t,H(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});let s=(Ki<<n)-Ki;return(~t&s)+Ki}else H(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function xi(r,e){let t=Iu(r,"value"),n=BigInt(ve(e,"bits"));return t&(Ki<<n)-Ki}function ie(r,e){switch(typeof r){case"bigint":return r;case"number":return O(Number.isInteger(r),"underflow",e||"value",r),O(r>=-Au&&r<=Au,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){O(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}O(!1,"invalid BigNumberish value",e||"value",r)}function Iu(r,e){let t=ie(r,e);return H(t>=Pg,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}var bT="0123456789abcdef";function bo(r){if(r instanceof Uint8Array){let e="0x0";for(let t of r)e+=bT[t>>4],e+=bT[t&15];return BigInt(e)}return ie(r)}function ve(r,e){switch(typeof r){case"bigint":return O(r>=-Au&&r<=Au,"overflow",e||"value",r),Number(r);case"number":return O(Number.isInteger(r),"underflow",e||"value",r),O(r>=-Au&&r<=Au,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return ve(BigInt(r),e)}catch(t){O(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}O(!1,"invalid numeric value",e||"value",r)}function Tg(r){return ve(bo(r))}function An(r,e){let n=Iu(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{let i=ve(e,"width");for(H(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function Qt(r){let e=Iu(r,"value");if(e===Pg)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);let n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){let s=i*2;n[i]=parseInt(t.substring(s,s+2),16)}return n}function Wi(r){let e=X(pa(r)?r:Qt(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}var yT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var xle=BigInt(0),vT=BigInt(58);function Ng(r){let e=ge(r),t=bo(e),n="";for(;t;)n=yT[Number(t%vT)]+n,t/=vT;for(let i=0;i<e.length&&!e[i];i++)n=yT[0]+n;return n}function mE(r){r=atob(r);let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return ge(e)}function gE(r){let e=ge(r),t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var ga=class{filter;emitter;#e;constructor(e,t,n){this.#e=t,se(this,{emitter:e,filter:n})}removeListener(){return p(this,null,function*(){this.#e!=null&&(yield this.emitter.off(this.filter,this.#e))})}};function YW(r,e,t,n,i){O(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function wT(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return r==="OVERRUN"?t.length-e-1:0}function QW(r,e,t,n,i){return r==="OVERLONG"?(O(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),wT(r,e,t,n,i))}var bE=Object.freeze({error:YW,ignore:wT,replace:QW});function ZW(r,e){e==null&&(e=bE.error);let t=ge(r,"bytes"),n=[],i=0;for(;i<t.length;){let s=t[i++];if(!(s>>7)){n.push(s);continue}let o=null,a=null;if((s&224)===192)o=1,a=127;else if((s&240)===224)o=2,a=2047;else if((s&248)===240)o=3,a=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+o>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let c=s&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=t[i];if((u&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),c=null;break}c=c<<6|u&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-o,t,n,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-o,t,n,c);continue}if(c<=a){i+=e("OVERLONG",i-1-o,t,n,c);continue}n.push(c)}}return n}function Gr(r,e){O(typeof r=="string","invalid string value","str",r),e!=null&&(Sg(e),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;let s=r.charCodeAt(n);O(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);let o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function XW(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function yo(r,e){return XW(ZW(r,e))}function Dg(r){function e(t,n){return p(this,null,function*(){H(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");let i=t.url.split(":")[0].toLowerCase();H(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),H(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null,o=new AbortController,a=setTimeout(()=>{s=We("request timeout","TIMEOUT"),o.abort()},t.timeout);n&&n.addListener(()=>{s=We("request cancelled","CANCELLED"),o.abort()});let c={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal},l;try{l=yield fetch(t.url,c)}catch(b){throw clearTimeout(a),s||b}clearTimeout(a);let u={};l.headers.forEach((b,f)=>{u[f.toLowerCase()]=b});let h=yield l.arrayBuffer(),m=h==null?null:new Uint8Array(h);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:m}})}return e}var Rle=Dg({});var eJ=12,tJ=250,xT=Dg(),rJ=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),nJ=new RegExp("^ipfs://(ipfs/)?(.*)$","i"),yE=!1;function CT(r,e){return p(this,null,function*(){try{let t=r.match(rJ);if(!t)throw new Error("invalid data");return new Ls(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?mE(t[3]):iJ(t[3]))}catch{return new Ls(599,"BAD REQUEST (invalid data: URI)",{},null,new gn(r))}})}function _T(r){function e(t,n){return p(this,null,function*(){try{let i=t.match(nJ);if(!i)throw new Error("invalid link");return new gn(`${r}${i[2]}`)}catch{return new Ls(599,"BAD REQUEST (invalid IPFS URI)",{},null,new gn(t))}})}return e}var Rg={data:CT,ipfs:_T("https://gateway.ipfs.io/ipfs/")},AT=new WeakMap,Vd=class{#e;#t;constructor(e){this.#e=[],this.#t=!1,AT.set(e,()=>{if(!this.#t){this.#t=!0;for(let t of this.#e)setTimeout(()=>{t()},0);this.#e=[]}})}addListener(e){H(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){H(!this.cancelled,"cancelled","CANCELLED",{})}};function Og(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var gn=class r{#e;#t;#r;#n;#i;#o;#s;#a;#h;#l;#p;#m;#c;#u;#d;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#s==null?null:new Uint8Array(this.#s)}set body(e){if(e==null)this.#s=void 0,this.#a=void 0;else if(typeof e=="string")this.#s=Gr(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#s=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#s=Gr(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#s!=null}get method(){return this.#n?this.#n:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#n=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#r);return this.#h&&(e.authorization=`Basic ${gE(Gr(this.#h))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#r[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#r={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),n=0;return{next:()=>{if(n<t.length){let i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#h||null}setCredentials(e,t){O(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#h=`${e}:${t}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#i}set timeout(e){O(e>=0,"timeout must be non-zero","timeout",e),this.#i=e}get preflightFunc(){return this.#l||null}set preflightFunc(e){this.#l=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#m||null}set retryFunc(e){this.#m=e}get getUrlFunc(){return this.#d||xT}set getUrlFunc(e){this.#d=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#r={},this.#n="",this.#i=3e5,this.#u={slotInterval:tJ,maxAttempts:eJ},this.#d=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#s?X(this.#s):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#u.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#u.maxAttempts=e.maxAttempts)}#f(e,t,n,i,s){return p(this,null,function*(){if(e>=this.#u.maxAttempts)return s.makeServerError("exceeded maximum retry limit");H(ET()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&(yield sJ(n));let o=this.clone(),a=(o.url.split(":")[0]||"").toLowerCase();if(a in Rg){let u=yield Rg[a](o.url,Og(i.#c));if(u instanceof Ls){let h=u;if(this.processFunc){Og(i.#c);try{h=yield this.processFunc(o,h)}catch(m){(m.throttle==null||typeof m.stall!="number")&&h.makeServerError("error in post-processing function",m).assertOk()}}return h}o=u}this.preflightFunc&&(o=yield this.preflightFunc(o));let c=yield this.getUrlFunc(o,Og(i.#c)),l=new Ls(c.statusCode,c.statusMessage,c.headers,c.body,i);if(l.statusCode===301||l.statusCode===302){try{let u=l.headers.location||"";return o.redirect(u).#f(e+1,t,0,i,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||(yield this.retryFunc(o,l,e)))){let u=l.headers["retry-after"],h=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof u=="string"&&u.match(/^[1-9][0-9]*$/)&&(h=parseInt(u)),o.clone().#f(e+1,t,h,i,l)}if(this.processFunc){Og(i.#c);try{l=yield this.processFunc(o,l)}catch(u){(u.throttle==null||typeof u.stall!="number")&&l.makeServerError("error in post-processing function",u).assertOk();let h=this.#u.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return u.stall>=0&&(h=u.stall),o.clone().#f(e+1,t,h,i,l)}}return l})}send(){return H(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new Vd(this),this.#f(0,ET()+this.timeout,0,this,new Ls(0,"",{},null,this))}cancel(){H(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=AT.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();H(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let i=new r(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#r=Object.assign({},this.#r),this.#s&&(i.#s=new Uint8Array(this.#s)),i.#a=this.#a,i}clone(){let e=new r(this.url);return e.#n=this.#n,this.#s&&(e.#s=this.#s),e.#a=this.#a,e.#r=Object.assign({},this.#r),e.#h=this.#h,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#l=this.#l,e.#p=this.#p,e.#m=this.#m,e.#u=Object.assign({},this.#u),e.#d=this.#d,e}static lockConfig(){yE=!0}static getGateway(e){return Rg[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(yE)throw new Error("gateways locked");Rg[e]=t}static registerGetUrl(e){if(yE)throw new Error("gateways locked");xT=e}static createGetUrlFunc(e){return Dg(e)}static createDataGateway(){return CT}static createIpfsGatewayFunc(e){return _T(e)}},Ls=class r{#e;#t;#r;#n;#i;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#n?X(this.#n):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#r)}get body(){return this.#n==null?null:new Uint8Array(this.#n)}get bodyText(){try{return this.#n==null?"":yo(this.#n)}catch{H(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{H(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),n=0;return{next:()=>{if(n<t.length){let i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,i,s){this.#e=e,this.#t=t,this.#r=Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{}),this.#n=i==null?null:new Uint8Array(i),this.#i=s||null,this.#o={message:""}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);let i=new r(599,n,this.headers,this.body,this.#i||void 0);return i.#o={message:e,error:t},i}throwThrottleError(e,t){t==null?t=-1:O(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let n=new Error(e||"throttling requests");throw se(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#n!=null}get request(){return this.#i}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let i=null;try{this.#n&&(i=yo(this.#n))}catch{}H(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};function ET(){return new Date().getTime()}function iJ(r){return Gr(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function sJ(r){return new Promise(e=>setTimeout(e,r))}var oJ=BigInt(-1),Ji=BigInt(0),Tu=BigInt(1),aJ=BigInt(5),Pu={},Nu="0000";for(;Nu.length<80;)Nu+=Nu;function _c(r){let e=Nu;for(;e.length<r;)e+=e;return BigInt("1"+e.substring(0,r))}function jd(r,e,t){let n=BigInt(e.width);if(e.signed){let i=Tu<<n-Tu;H(t==null||r>=-i&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r>Ji?r=ma(xi(r,n),n):r=-ma(xi(-r,n),n)}else{let i=Tu<<n;H(t==null||r>=0&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r=(r%i+i)%i&i-Tu}return r}function vE(r){typeof r=="number"&&(r=`fixed128x${r}`);let e=!0,t=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")e=!1;else{let s=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);O(s,"invalid fixed format","format",r),e=s[1]!=="u",t=parseInt(s[2]),n=parseInt(s[3])}}else if(r){let s=r,o=(a,c,l)=>s[a]==null?l:(O(typeof s[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),t=o("width","number",t),n=o("decimals","number",n)}O(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),O(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);let i=(e?"":"u")+"fixed"+String(t)+"x"+String(n);return{signed:e,width:t,decimals:n,name:i}}function cJ(r,e){let t="";r<Ji&&(t="-",r*=oJ);let n=r.toString();if(e===0)return t+n;for(;n.length<=e;)n=Nu+n;let i=n.length-e;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return t+n}var Du=class r{format;#e;#t;#r;_value;constructor(e,t,n){$i(e,Pu,"FixedNumber"),this.#t=t,this.#e=n;let i=cJ(t,n.decimals);se(this,{format:n.name,_value:i}),this.#r=_c(n.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#n(e){O(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#i(e,t){return e=jd(e,this.#e,t),new r(Pu,e,this.#e)}#o(e,t){return this.#n(e),this.#i(this.#t+e.#t,t)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#s(e,t){return this.#n(e),this.#i(this.#t-e.#t,t)}subUnsafe(e){return this.#s(e)}sub(e){return this.#s(e,"sub")}#a(e,t){return this.#n(e),this.#i(this.#t*e.#t/this.#r,t)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#n(e);let t=this.#t*e.#t;return H(t%this.#r===Ji,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#i(t/this.#r,"mulSignal")}#h(e,t){return H(e.#t!==Ji,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e),this.#i(this.#t*this.#r/e.#t,t)}divUnsafe(e){return this.#h(e)}div(e){return this.#h(e,"div")}divSignal(e){H(e.#t!==Ji,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e);let t=this.#t*this.#r;return H(t%e.#t===Ji,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#i(t/e.#t,"divSignal")}cmp(e){let t=this.value,n=e.value,i=this.decimals-e.decimals;return i>0?n*=_c(i):i<0&&(t*=_c(-i)),t<n?-1:t>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<Ji&&(e-=this.#r-Tu),e=this.#t/this.#r*this.#r,this.#i(e,"floor")}ceiling(){let e=this.#t;return this.#t>Ji&&(e+=this.#r-Tu),e=this.#t/this.#r*this.#r,this.#i(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;let t=this.decimals-e,n=aJ*_c(t-1),i=this.value+n,s=_c(t);return i=i/s*s,jd(i,this.#e,"round"),new r(Pu,i,this.#e)}isZero(){return this.#t===Ji}isNegative(){return this.#t<Ji}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return r.fromString(this.toString(),e)}static fromValue(e,t,n){let i=t==null?0:ve(t),s=vE(n),o=ie(e,"value"),a=i-s.decimals;if(a>0){let c=_c(a);H(o%c===Ji,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=_c(-a));return jd(o,s,"fromValue"),new r(Pu,o,s)}static fromString(e,t){let n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);O(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);let i=vE(t),s=n[2]||"0",o=n[3]||"";for(;o.length<i.decimals;)o+=Nu;H(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);let a=BigInt(n[1]+s+o);return jd(a,i,"fromString"),new r(Pu,a,i)}static fromBytes(e,t){let n=bo(ge(e,"value")),i=vE(t);return i.signed&&(n=ma(n,i.width)),jd(n,i,"fromBytes"),new r(Pu,n,i)}};function lJ(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function ST(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function IT(r,e,t,n){let i=[];for(;t<e+1+n;){let s=PT(r,t);i.push(s.result),t+=s.consumed,H(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:e})}return{consumed:1+n,result:i}}function PT(r,e){H(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});let t=n=>{H(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[e]>=248){let n=r[e]-247;t(e+1+n);let i=ST(r,e+1,n);return t(e+1+n+i),IT(r,e,e+1+n,n+i)}else if(r[e]>=192){let n=r[e]-192;return t(e+1+n),IT(r,e,e+1,n)}else if(r[e]>=184){let n=r[e]-183;t(e+1+n);let i=ST(r,e+1,n);t(e+1+n+i);let s=X(r.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:s}}else if(r[e]>=128){let n=r[e]-128;t(e+1+n);let i=X(r.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:lJ(r[e])}}function Ac(r){let e=ge(r,"data"),t=PT(e,0);return O(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function TT(r){let e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function DT(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(DT(s))}),n.length<=55)return n.unshift(192+n.length),n;let i=TT(n.length);return i.unshift(247+i.length),i.concat(n)}let e=Array.prototype.slice.call(ge(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;let t=TT(e.length);return t.unshift(183+t.length),t.concat(e)}var NT="0123456789abcdef";function Yi(r){let e="0x";for(let t of DT(r))e+=NT[t>>4],e+=NT[t&15];return e}var RT=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Hd(r,e){let t=18;if(typeof e=="string"){let n=RT.indexOf(e);O(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=ve(e,"unit"));return Du.fromValue(r,t,{decimals:t,width:512}).toString()}function Mg(r,e){O(typeof r=="string","value must be a string","value",r);let t=18;if(typeof e=="string"){let n=RT.indexOf(e);O(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=ve(e,"unit"));return Du.fromString(r,{decimals:t,width:512}).value}function kg(r){return Hd(r,18)}var un=32,wE=new Uint8Array(un),pJ=["then"],Fg={},kT=new WeakMap;function Sc(r){return kT.get(r)}function OT(r,e){kT.set(r,e)}function qd(r,e){let t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function xE(r,e,t){return r.indexOf(null)>=0?e.map((n,i)=>n instanceof vo?xE(Sc(n),n,t):n):r.reduce((n,i,s)=>{let o=e.getValue(i);return i in n||(t&&o instanceof vo&&(o=xE(Sc(o),o,t)),n[i]=o),n},{})}var vo=class r extends Array{#e;constructor(...e){let t=e[0],n=e[1],i=(e[2]||[]).slice(),s=!0;t!==Fg&&(n=e,i=[],s=!1),super(n.length),n.forEach((c,l)=>{this[l]=c});let o=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(OT(this,Object.freeze(n.map((c,l)=>{let u=i[l];return u!=null&&o.get(u)===1?u:null}))),this.#e=[],this.#e==null&&this.#e,!s)return;Object.freeze(this);let a=new Proxy(this,{get:(c,l,u)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){let m=ve(l,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");let b=c[m];return b instanceof Error&&qd(`index ${m}`,b),b}if(pJ.indexOf(l)>=0)return Reflect.get(c,l,u);let h=c[l];if(h instanceof Function)return function(...m){return h.apply(this===u?c:this,m)};if(!(l in c))return c.getValue.apply(this===u?c:this,[l])}return Reflect.get(c,l,u)}});return OT(a,Sc(this)),a}toArray(e){let t=[];return this.forEach((n,i)=>{n instanceof Error&&qd(`index ${i}`,n),e&&n instanceof r&&(n=n.toArray(e)),t.push(n)}),t}toObject(e){let t=Sc(this);return t.reduce((n,i,s)=>(H(i!=null,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),xE(t,this,e)),{})}slice(e,t){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),t==null&&(t=this.length),t<0&&(t+=this.length,t<0&&(t=0)),t>this.length&&(t=this.length);let n=Sc(this),i=[],s=[];for(let o=e;o<t;o++)i.push(this[o]),s.push(n[o]);return new r(Fg,i,s)}filter(e,t){let n=Sc(this),i=[],s=[];for(let o=0;o<this.length;o++){let a=this[o];a instanceof Error&&qd(`index ${o}`,a),e.call(t,a,o,this)&&(i.push(a),s.push(n[o]))}return new r(Fg,i,s)}map(e,t){let n=[];for(let i=0;i<this.length;i++){let s=this[i];s instanceof Error&&qd(`index ${i}`,s),n.push(e.call(t,s,i,this))}return n}getValue(e){let t=Sc(this).indexOf(e);if(t===-1)return;let n=this[t];return n instanceof Error&&qd(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,t){return new r(Fg,e,t)}};function MT(r){let e=Qt(r);return H(e.length<=un,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:un,offset:e.length}),e.length!==un&&(e=qt(rt([wE.slice(e.length%un),e]))),e}var _r=class{name;type;localName;dynamic;constructor(e,t,n,i){se(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){O(!1,e,this.localName,t)}},Ic=class{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return rt(this.#e)}get length(){return this.#t}#r(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#r(qt(e.data))}writeBytes(e){let t=qt(e),n=t.length%un;return n&&(t=qt(rt([t,wE.slice(n)]))),this.#r(t)}writeValue(e){return this.#r(MT(e))}writeUpdatableValue(){let e=this.#e.length;return this.#e.push(wE),this.#t+=un,t=>{this.#e[e]=MT(t)}}},Bg=class r{allowLoose;#e;#t;#r;#n;#i;constructor(e,t,n){se(this,{allowLoose:!!t}),this.#e=qt(e),this.#r=0,this.#n=null,this.#i=n??1024,this.#t=0}get data(){return X(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#n)return this.#n.#o(e);this.#r+=e,H(this.#i<1||this.#r<=this.#i*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#i} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:qt(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#r,dataLength:this.dataLength}})}#s(e,t,n){let i=Math.ceil(t/un)*un;return this.#t+i>this.#e.length&&(this.allowLoose&&n&&this.#t+t<=this.#e.length?i=t:H(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:qt(this.#e),length:this.#e.length,offset:this.#t+i})),this.#e.slice(this.#t,this.#t+i)}subReader(e){let t=new r(this.#e.slice(this.#t+e),this.allowLoose,this.#i);return t.#n=this,t}readBytes(e,t){let n=this.#s(0,e,!!t);return this.#o(e),this.#t+=n.length,n.slice(0,e)}readValue(){return bo(this.readBytes(un))}readIndex(){return Tg(this.readBytes(un))}};function zd(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function $d(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function FT(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");zd(r.outputLen),zd(r.blockLen)}function wo(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Ug(r,e){$d(r);let t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Lg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var BT=r=>r instanceof Uint8Array;var UT=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Vg=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Qi=(r,e)=>r<<32-e|r>>>e,mJ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!mJ)throw new Error("Non little-endian hardware is not supported");function gJ(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function ya(r){if(typeof r=="string"&&(r=gJ(r)),!BT(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function LT(...r){let e=new Uint8Array(r.reduce((n,i)=>n+i.length,0)),t=0;return r.forEach(n=>{if(!BT(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}var ba=class{clone(){return this._cloneInto()}},xue={}.toString;function Ru(r){let e=n=>r().update(ya(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function VT(r){let e=(n,i)=>r(i).update(ya(n)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}function jT(r=32){if(Lg&&typeof Lg.getRandomValues=="function")return Lg.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}var jg=class extends ba{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,FT(e);let n=ya(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return wo(this),this.iHash.update(e),this}digestInto(e){wo(this),$d(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},EE=(r,e,t)=>new jg(r,e).update(t).digest();EE.create=(r,e)=>new jg(r,e);function bJ(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}var Ou=class extends ba{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Vg(this.buffer)}update(e){wo(this);let{view:t,buffer:n,blockLen:i}=this;e=ya(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let c=Vg(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wo(this),Ug(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;bJ(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=Vg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}};var yJ=(r,e,t)=>r&e^~r&t,vJ=(r,e,t)=>r&e^r&t^e&t,wJ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),va=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wa=new Uint32Array(64),CE=class extends Ou{constructor(){super(64,32,8,!1),this.A=va[0]|0,this.B=va[1]|0,this.C=va[2]|0,this.D=va[3]|0,this.E=va[4]|0,this.F=va[5]|0,this.G=va[6]|0,this.H=va[7]|0}get(){let{A:e,B:t,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,t,n,i,s,o,a,c]}set(e,t,n,i,s,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)wa[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){let m=wa[h-15],b=wa[h-2],f=Qi(m,7)^Qi(m,18)^m>>>3,v=Qi(b,17)^Qi(b,19)^b>>>10;wa[h]=v+wa[h-7]+f+wa[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){let m=Qi(a,6)^Qi(a,11)^Qi(a,25),b=u+m+yJ(a,c,l)+wJ[h]+wa[h]|0,v=(Qi(n,2)^Qi(n,13)^Qi(n,22))+vJ(n,i,s)|0;u=l,l=c,c=a,a=o+b|0,o=s,s=i,i=n,n=b+v|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){wa.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Hg=Ru(()=>new CE);var qg=BigInt(4294967295),_E=BigInt(32);function HT(r,e=!1){return e?{h:Number(r&qg),l:Number(r>>_E&qg)}:{h:Number(r>>_E&qg)|0,l:Number(r&qg)|0}}function AE(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){let{h:s,l:o}=HT(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}var xJ=(r,e)=>BigInt(r>>>0)<<_E|BigInt(e>>>0),EJ=(r,e,t)=>r>>>t,CJ=(r,e,t)=>r<<32-t|e>>>t,_J=(r,e,t)=>r>>>t|e<<32-t,AJ=(r,e,t)=>r<<32-t|e>>>t,SJ=(r,e,t)=>r<<64-t|e>>>t-32,IJ=(r,e,t)=>r>>>t-32|e<<64-t,PJ=(r,e)=>e,TJ=(r,e)=>r,SE=(r,e,t)=>r<<t|e>>>32-t,IE=(r,e,t)=>e<<t|r>>>32-t,PE=(r,e,t)=>e<<t-32|r>>>64-t,TE=(r,e,t)=>r<<t-32|e>>>64-t;function NJ(r,e,t,n){let i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}var DJ=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),RJ=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,OJ=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),MJ=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,kJ=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),FJ=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0;var BJ={fromBig:HT,split:AE,toBig:xJ,shrSH:EJ,shrSL:CJ,rotrSH:_J,rotrSL:AJ,rotrBH:SJ,rotrBL:IJ,rotr32H:PJ,rotr32L:TJ,rotlSH:SE,rotlSL:IE,rotlBH:PE,rotlBL:TE,add:NJ,add3L:DJ,add3H:RJ,add4L:OJ,add4H:MJ,add5H:FJ,add5L:kJ},De=BJ;var[UJ,LJ]=De.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),xa=new Uint32Array(80),Ea=new Uint32Array(80),NE=class extends Ou{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:m,Gh:b,Gl:f,Hh:v,Hl:E}=this;return[e,t,n,i,s,o,a,c,l,u,h,m,b,f,v,E]}set(e,t,n,i,s,o,a,c,l,u,h,m,b,f,v,E){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=m|0,this.Gh=b|0,this.Gl=f|0,this.Hh=v|0,this.Hl=E|0}process(e,t){for(let D=0;D<16;D++,t+=4)xa[D]=e.getUint32(t),Ea[D]=e.getUint32(t+=4);for(let D=16;D<80;D++){let F=xa[D-15]|0,U=Ea[D-15]|0,L=De.rotrSH(F,U,1)^De.rotrSH(F,U,8)^De.shrSH(F,U,7),B=De.rotrSL(F,U,1)^De.rotrSL(F,U,8)^De.shrSL(F,U,7),M=xa[D-2]|0,V=Ea[D-2]|0,P=De.rotrSH(M,V,19)^De.rotrBH(M,V,61)^De.shrSH(M,V,6),d=De.rotrSL(M,V,19)^De.rotrBL(M,V,61)^De.shrSL(M,V,6),y=De.add4L(B,d,Ea[D-7],Ea[D-16]),C=De.add4H(y,L,P,xa[D-7],xa[D-16]);xa[D]=C|0,Ea[D]=y|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:m,Fh:b,Fl:f,Gh:v,Gl:E,Hh:I,Hl:N}=this;for(let D=0;D<80;D++){let F=De.rotrSH(h,m,14)^De.rotrSH(h,m,18)^De.rotrBH(h,m,41),U=De.rotrSL(h,m,14)^De.rotrSL(h,m,18)^De.rotrBL(h,m,41),L=h&b^~h&v,B=m&f^~m&E,M=De.add5L(N,U,B,LJ[D],Ea[D]),V=De.add5H(M,I,F,L,UJ[D],xa[D]),P=M|0,d=De.rotrSH(n,i,28)^De.rotrBH(n,i,34)^De.rotrBH(n,i,39),y=De.rotrSL(n,i,28)^De.rotrBL(n,i,34)^De.rotrBL(n,i,39),C=n&s^n&a^s&a,A=i&o^i&c^o&c;I=v|0,N=E|0,v=b|0,E=f|0,b=h|0,f=m|0,{h,l:m}=De.add(l|0,u|0,V|0,P|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;let w=De.add3L(P,y,A);n=De.add3H(w,V,d,C),i=w|0}({h:n,l:i}=De.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=De.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=De.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=De.add(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:m}=De.add(this.Eh|0,this.El|0,h|0,m|0),{h:b,l:f}=De.add(this.Fh|0,this.Fl|0,b|0,f|0),{h:v,l:E}=De.add(this.Gh|0,this.Gl|0,v|0,E|0),{h:I,l:N}=De.add(this.Hh|0,this.Hl|0,I|0,N|0),this.set(n,i,s,o,a,c,l,u,h,m,b,f,v,E,I,N)}roundClean(){xa.fill(0),Ea.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var qT=Ru(()=>new NE);function VJ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}var zT=VJ(),jue=zT.crypto||zT.msCrypto;function DE(r){switch(r){case"sha256":return Hg.create();case"sha512":return qT.create()}O(!1,"invalid hashing algorithm name","algorithm",r)}var[KT,WT,JT]=[[],[],[]],jJ=BigInt(0),Gd=BigInt(1),HJ=BigInt(2),qJ=BigInt(7),zJ=BigInt(256),$J=BigInt(113);for(let r=0,e=Gd,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],KT.push(2*(5*n+t)),WT.push((r+1)*(r+2)/2%64);let i=jJ;for(let s=0;s<7;s++)e=(e<<Gd^(e>>qJ)*$J)%zJ,e&HJ&&(i^=Gd<<(Gd<<BigInt(s))-Gd);JT.push(i)}var[GJ,KJ]=AE(JT,!0),$T=(r,e,t)=>t>32?PE(r,e,t):SE(r,e,t),GT=(r,e,t)=>t>32?TE(r,e,t):IE(r,e,t);function WJ(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=$T(l,u,1)^t[a],m=GT(l,u,1)^t[a+1];for(let b=0;b<50;b+=10)r[o+b]^=h,r[o+b+1]^=m}let i=r[2],s=r[3];for(let o=0;o<24;o++){let a=WT[o],c=$T(i,s,a),l=GT(i,s,a),u=KT[o];i=r[u],s=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=GJ[n],r[1]^=KJ[n]}t.fill(0)}var zg=class r extends ba{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,zd(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=UT(this.state)}keccak(){WJ(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){wo(this);let{blockLen:t,state:n}=this;e=ya(e);let i=e.length;for(let s=0;s<i;){let o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){wo(this,!1),$d(e),this.finish();let t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return zd(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ug(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new r(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}},Ca=(r,e,t)=>Ru(()=>new zg(e,r,t)),Gue=Ca(6,144,224/8),Kue=Ca(6,136,256/8),Wue=Ca(6,104,384/8),Jue=Ca(6,72,512/8),Yue=Ca(1,144,224/8),YT=Ca(1,136,256/8),Que=Ca(1,104,384/8),Zue=Ca(1,72,512/8),QT=(r,e,t)=>VT((n={})=>new zg(e,r,n.dkLen===void 0?t:n.dkLen,!0)),Xue=QT(31,168,128/8),ehe=QT(31,136,256/8);var ZT=!1,XT=function(r){return YT(r)},e5=XT;function at(r){let e=ge(r,"data");return X(e5(e))}at._=XT;at.lock=function(){ZT=!0};at.register=function(r){if(ZT)throw new TypeError("keccak256 is locked");e5=r};Object.freeze(at);var t5=function(r){return DE("sha256").update(r).digest()},r5=function(r){return DE("sha512").update(r).digest()},n5=t5,i5=r5,s5=!1,o5=!1;function _a(r){let e=ge(r,"data");return X(n5(e))}_a._=t5;_a.lock=function(){s5=!0};_a.register=function(r){if(s5)throw new Error("sha256 is locked");n5=r};Object.freeze(_a);function $g(r){let e=ge(r,"data");return X(i5(e))}$g._=r5;$g.lock=function(){o5=!0};$g.register=function(r){if(o5)throw new Error("sha512 is locked");i5=r};Object.freeze(_a);var kE={};Nn(kE,{bitGet:()=>tY,bitLen:()=>eY,bitMask:()=>Kd,bitSet:()=>rY,bytesToHex:()=>Pc,bytesToNumberBE:()=>xo,bytesToNumberLE:()=>Wg,concatBytes:()=>Mu,createHmacDrbg:()=>ME,ensureBytes:()=>ei,equalBytes:()=>ZJ,hexToBytes:()=>Tc,hexToNumber:()=>OE,numberToBytesBE:()=>Aa,numberToBytesLE:()=>Jg,numberToHexUnpadded:()=>l5,numberToVarBytesBE:()=>QJ,utf8ToBytes:()=>XJ,validateObject:()=>Sa});var c5=BigInt(0),Gg=BigInt(1),JJ=BigInt(2),Kg=r=>r instanceof Uint8Array,YJ=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Pc(r){if(!Kg(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=YJ[r[t]];return e}function l5(r){let e=r.toString(16);return e.length&1?`0${e}`:e}function OE(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Tc(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){let i=n*2,s=r.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function xo(r){return OE(Pc(r))}function Wg(r){if(!Kg(r))throw new Error("Uint8Array expected");return OE(Pc(Uint8Array.from(r).reverse()))}function Aa(r,e){return Tc(r.toString(16).padStart(e*2,"0"))}function Jg(r,e){return Aa(r,e).reverse()}function QJ(r){return Tc(l5(r))}function ei(r,e,t){let n;if(typeof e=="string")try{n=Tc(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Kg(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);let i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function Mu(...r){let e=new Uint8Array(r.reduce((n,i)=>n+i.length,0)),t=0;return r.forEach(n=>{if(!Kg(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function ZJ(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function XJ(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function eY(r){let e;for(e=0;r>c5;r>>=Gg,e+=1);return e}function tY(r,e){return r>>BigInt(e)&Gg}var rY=(r,e,t)=>r|(t?Gg:c5)<<BigInt(e),Kd=r=>(JJ<<BigInt(r-1))-Gg,RE=r=>new Uint8Array(r),a5=r=>Uint8Array.from(r);function ME(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=RE(r),i=RE(r),s=0,o=()=>{n.fill(1),i.fill(0),s=0},a=(...h)=>t(i,n,...h),c=(h=RE())=>{i=a(a5([0]),h),n=a(),h.length!==0&&(i=a(a5([1]),h),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0,m=[];for(;h<e;){n=a();let b=n.slice();m.push(b),h+=n.length}return Mu(...m)};return(h,m)=>{o(),c(h);let b;for(;!(b=m(l()));)c();return o(),b}}var nY={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Sa(r,e,t={}){let n=(i,s,o)=>{let a=nY[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let c=r[i];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(let[i,s]of Object.entries(e))n(i,s,!1);for(let[i,s]of Object.entries(t))n(i,s,!0);return r}var Rr=BigInt(0),zt=BigInt(1),Nc=BigInt(2),iY=BigInt(3),FE=BigInt(4),u5=BigInt(5),h5=BigInt(8),sY=BigInt(9),oY=BigInt(16);function bn(r,e){let t=r%e;return t>=Rr?t:e+t}function aY(r,e,t){if(t<=Rr||e<Rr)throw new Error("Expected power/modulo > 0");if(t===zt)return Rr;let n=zt;for(;e>Rr;)e&zt&&(n=n*r%t),r=r*r%t,e>>=zt;return n}function ti(r,e,t){let n=r;for(;e-- >Rr;)n*=n,n%=t;return n}function Yg(r,e){if(r===Rr||e<=Rr)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=bn(r,e),n=e,i=Rr,s=zt,o=zt,a=Rr;for(;t!==Rr;){let l=n/t,u=n%t,h=i-o*l,m=s-a*l;n=t,t=u,i=o,s=a,o=h,a=m}if(n!==zt)throw new Error("invert: does not exist");return bn(i,e)}function cY(r){let e=(r-zt)/Nc,t,n,i;for(t=r-zt,n=0;t%Nc===Rr;t/=Nc,n++);for(i=Nc;i<r&&aY(i,e,r)!==r-zt;i++);if(n===1){let o=(r+zt)/FE;return function(c,l){let u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}let s=(t+zt)/Nc;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,i),t),h=a.pow(c,s),m=a.pow(c,t);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let b=1;for(let v=a.sqr(m);b<l&&!a.eql(v,a.ONE);b++)v=a.sqr(v);let f=a.pow(u,zt<<BigInt(l-b-1));u=a.sqr(f),h=a.mul(h,f),m=a.mul(m,u),l=b}return h}}function lY(r){if(r%FE===iY){let e=(r+zt)/FE;return function(n,i){let s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%h5===u5){let e=(r-u5)/h5;return function(n,i){let s=n.mul(i,Nc),o=n.pow(s,e),a=n.mul(i,o),c=n.mul(n.mul(a,Nc),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return r%oY,cY(r)}var uY=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function BE(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=uY.reduce((n,i)=>(n[i]="function",n),e);return Sa(r,t)}function hY(r,e,t){if(t<Rr)throw new Error("Expected power > 0");if(t===Rr)return r.ONE;if(t===zt)return e;let n=r.ONE,i=e;for(;t>Rr;)t&zt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=zt;return n}function dY(r,e){let t=new Array(e.length),n=e.reduce((s,o,a)=>r.is0(o)?s:(t[a]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,a)=>r.is0(o)?s:(t[a]=r.mul(s,t[a]),r.mul(s,o)),i),t}function UE(r,e){let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function d5(r,e,t=!1,n={}){if(r<=Rr)throw new Error(`Expected Field ORDER > 0, got ${r}`);let{nBitLength:i,nByteLength:s}=UE(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=lY(r),a=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:Kd(i),ZERO:Rr,ONE:zt,create:c=>bn(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Rr<=c&&c<r},is0:c=>c===Rr,isOdd:c=>(c&zt)===zt,neg:c=>bn(-c,r),eql:(c,l)=>c===l,sqr:c=>bn(c*c,r),add:(c,l)=>bn(c+l,r),sub:(c,l)=>bn(c-l,r),mul:(c,l)=>bn(c*l,r),pow:(c,l)=>hY(a,c,l),div:(c,l)=>bn(c*Yg(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Yg(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>dY(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>t?Jg(c,s):Aa(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?Wg(c):xo(c)}});return Object.freeze(a)}function f5(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function LE(r){let e=f5(r);return e+Math.ceil(e/2)}function p5(r,e,t=!1){let n=r.length,i=f5(e),s=LE(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);let o=t?xo(r):Wg(r),a=bn(o,e-zt)+zt;return t?Jg(a,i):Aa(a,i)}var pY=BigInt(0),VE=BigInt(1);function m5(r,e){let t=(i,s)=>{let o=s.negate();return i?o:s},n=i=>{let s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=r.ZERO,a=i;for(;s>pY;)s&VE&&(o=o.add(a)),a=a.double(),s>>=VE;return o},precomputeWindow(i,s){let{windows:o,windowSize:a}=n(s),c=[],l=i,u=l;for(let h=0;h<o;h++){u=l,c.push(u);for(let m=1;m<a;m++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(i,s,o){let{windows:a,windowSize:c}=n(i),l=r.ZERO,u=r.BASE,h=BigInt(2**i-1),m=2**i,b=BigInt(i);for(let f=0;f<a;f++){let v=f*c,E=Number(o&h);o>>=b,E>c&&(E-=m,o+=VE);let I=v,N=v+Math.abs(E)-1,D=f%2!==0,F=E<0;E===0?u=u.add(t(D,s[I])):l=l.add(t(F,s[N]))}return{p:l,f:u}},wNAFCached(i,s,o,a){let c=i._WINDOW_SIZE||1,l=s.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&s.set(i,a(l))),this.wNAF(c,l,o)}}}function jE(r){return BE(r.Fp),Sa(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(de(k(k({},UE(r.n,r.nBitLength)),r),{p:r.Fp.ORDER}))}function mY(r){let e=jE(r);Sa(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(k({},e))}var{bytesToNumberBE:gY,hexToBytes:bY}=kE,Dc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){let{Err:e}=Dc;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");let t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:gY(n),l:r.subarray(t+2)}},toSig(r){let{Err:e}=Dc,t=typeof r=="string"?bY(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=Dc._parseInt(t.subarray(2)),{d:o,l:a}=Dc._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let u=l.toString(16);return u.length&1?`0${u}`:u},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,o=i.length/2,a=t(s),c=t(o);return`30${t(o+s+4)}02${c}${i}02${a}${n}`}},Eo=BigInt(0),Ei=BigInt(1),ghe=BigInt(2),g5=BigInt(3),bhe=BigInt(4);function yY(r){let e=mY(r),{Fp:t}=e,n=e.toBytes||((f,v,E)=>{let I=v.toAffine();return Mu(Uint8Array.from([4]),t.toBytes(I.x),t.toBytes(I.y))}),i=e.fromBytes||(f=>{let v=f.subarray(1),E=t.fromBytes(v.subarray(0,t.BYTES)),I=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:E,y:I}});function s(f){let{a:v,b:E}=e,I=t.sqr(f),N=t.mul(I,f);return t.add(t.add(N,t.mul(f,v)),E)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(f){return typeof f=="bigint"&&Eo<f&&f<e.n}function a(f){if(!o(f))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(f){let{allowedPrivateKeyLengths:v,nByteLength:E,wrapPrivateKey:I,n:N}=e;if(v&&typeof f!="bigint"){if(f instanceof Uint8Array&&(f=Pc(f)),typeof f!="string"||!v.includes(f.length))throw new Error("Invalid key");f=f.padStart(E*2,"0")}let D;try{D=typeof f=="bigint"?f:xo(ei("private key",f,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof f}`)}return I&&(D=bn(D,N)),a(D),D}let l=new Map;function u(f){if(!(f instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(v,E,I){if(this.px=v,this.py=E,this.pz=I,v==null||!t.isValid(v))throw new Error("x required");if(E==null||!t.isValid(E))throw new Error("y required");if(I==null||!t.isValid(I))throw new Error("z required")}static fromAffine(v){let{x:E,y:I}=v||{};if(!v||!t.isValid(E)||!t.isValid(I))throw new Error("invalid affine point");if(v instanceof h)throw new Error("projective point not allowed");let N=D=>t.eql(D,t.ZERO);return N(E)&&N(I)?h.ZERO:new h(E,I,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){let E=t.invertBatch(v.map(I=>I.pz));return v.map((I,N)=>I.toAffine(E[N])).map(h.fromAffine)}static fromHex(v){let E=h.fromAffine(i(ei("pointHex",v)));return E.assertValidity(),E}static fromPrivateKey(v){return h.BASE.multiply(c(v))}_setWindowSize(v){this._WINDOW_SIZE=v,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:v,y:E}=this.toAffine();if(!t.isValid(v)||!t.isValid(E))throw new Error("bad point: x or y not FE");let I=t.sqr(E),N=s(v);if(!t.eql(I,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){u(v);let{px:E,py:I,pz:N}=this,{px:D,py:F,pz:U}=v,L=t.eql(t.mul(E,U),t.mul(D,N)),B=t.eql(t.mul(I,U),t.mul(F,N));return L&&B}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){let{a:v,b:E}=e,I=t.mul(E,g5),{px:N,py:D,pz:F}=this,U=t.ZERO,L=t.ZERO,B=t.ZERO,M=t.mul(N,N),V=t.mul(D,D),P=t.mul(F,F),d=t.mul(N,D);return d=t.add(d,d),B=t.mul(N,F),B=t.add(B,B),U=t.mul(v,B),L=t.mul(I,P),L=t.add(U,L),U=t.sub(V,L),L=t.add(V,L),L=t.mul(U,L),U=t.mul(d,U),B=t.mul(I,B),P=t.mul(v,P),d=t.sub(M,P),d=t.mul(v,d),d=t.add(d,B),B=t.add(M,M),M=t.add(B,M),M=t.add(M,P),M=t.mul(M,d),L=t.add(L,M),P=t.mul(D,F),P=t.add(P,P),M=t.mul(P,d),U=t.sub(U,M),B=t.mul(P,V),B=t.add(B,B),B=t.add(B,B),new h(U,L,B)}add(v){u(v);let{px:E,py:I,pz:N}=this,{px:D,py:F,pz:U}=v,L=t.ZERO,B=t.ZERO,M=t.ZERO,V=e.a,P=t.mul(e.b,g5),d=t.mul(E,D),y=t.mul(I,F),C=t.mul(N,U),A=t.add(E,I),w=t.add(D,F);A=t.mul(A,w),w=t.add(d,y),A=t.sub(A,w),w=t.add(E,N);let x=t.add(D,U);return w=t.mul(w,x),x=t.add(d,C),w=t.sub(w,x),x=t.add(I,N),L=t.add(F,U),x=t.mul(x,L),L=t.add(y,C),x=t.sub(x,L),M=t.mul(V,w),L=t.mul(P,C),M=t.add(L,M),L=t.sub(y,M),M=t.add(y,M),B=t.mul(L,M),y=t.add(d,d),y=t.add(y,d),C=t.mul(V,C),w=t.mul(P,w),y=t.add(y,C),C=t.sub(d,C),C=t.mul(V,C),w=t.add(w,C),d=t.mul(y,w),B=t.add(B,d),d=t.mul(x,w),L=t.mul(A,L),L=t.sub(L,d),d=t.mul(A,y),M=t.mul(x,M),M=t.add(M,d),new h(L,B,M)}subtract(v){return this.add(v.negate())}is0(){return this.equals(h.ZERO)}wNAF(v){return b.wNAFCached(this,l,v,E=>{let I=t.invertBatch(E.map(N=>N.pz));return E.map((N,D)=>N.toAffine(I[D])).map(h.fromAffine)})}multiplyUnsafe(v){let E=h.ZERO;if(v===Eo)return E;if(a(v),v===Ei)return this;let{endo:I}=e;if(!I)return b.unsafeLadder(this,v);let{k1neg:N,k1:D,k2neg:F,k2:U}=I.splitScalar(v),L=E,B=E,M=this;for(;D>Eo||U>Eo;)D&Ei&&(L=L.add(M)),U&Ei&&(B=B.add(M)),M=M.double(),D>>=Ei,U>>=Ei;return N&&(L=L.negate()),F&&(B=B.negate()),B=new h(t.mul(B.px,I.beta),B.py,B.pz),L.add(B)}multiply(v){a(v);let E=v,I,N,{endo:D}=e;if(D){let{k1neg:F,k1:U,k2neg:L,k2:B}=D.splitScalar(E),{p:M,f:V}=this.wNAF(U),{p:P,f:d}=this.wNAF(B);M=b.constTimeNegate(F,M),P=b.constTimeNegate(L,P),P=new h(t.mul(P.px,D.beta),P.py,P.pz),I=M.add(P),N=V.add(d)}else{let{p:F,f:U}=this.wNAF(E);I=F,N=U}return h.normalizeZ([I,N])[0]}multiplyAndAddUnsafe(v,E,I){let N=h.BASE,D=(U,L)=>L===Eo||L===Ei||!U.equals(N)?U.multiplyUnsafe(L):U.multiply(L),F=D(this,E).add(D(v,I));return F.is0()?void 0:F}toAffine(v){let{px:E,py:I,pz:N}=this,D=this.is0();v==null&&(v=D?t.ONE:t.inv(N));let F=t.mul(E,v),U=t.mul(I,v),L=t.mul(N,v);if(D)return{x:t.ZERO,y:t.ZERO};if(!t.eql(L,t.ONE))throw new Error("invZ was invalid");return{x:F,y:U}}isTorsionFree(){let{h:v,isTorsionFree:E}=e;if(v===Ei)return!0;if(E)return E(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:v,clearCofactor:E}=e;return v===Ei?this:E?E(h,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),n(h,this,v)}toHex(v=!0){return Pc(this.toRawBytes(v))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);let m=e.nBitLength,b=m5(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function vY(r){let e=jE(r);return Sa(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(k({lowS:!0},e))}function b5(r){let e=vY(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(w){return Eo<w&&w<t.ORDER}function a(w){return bn(w,n)}function c(w){return Yg(w,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:m}=yY(de(k({},e),{toBytes(w,x,T){let _=x.toAffine(),g=t.toBytes(_.x),S=Mu;return T?S(Uint8Array.from([x.hasEvenY()?2:3]),g):S(Uint8Array.from([4]),g,t.toBytes(_.y))},fromBytes(w){let x=w.length,T=w[0],_=w.subarray(1);if(x===i&&(T===2||T===3)){let g=xo(_);if(!o(g))throw new Error("Point is not on curve");let S=h(g),q=t.sqrt(S),$=(q&Ei)===Ei;return(T&1)===1!==$&&(q=t.neg(q)),{x:g,y:q}}else if(x===s&&T===4){let g=t.fromBytes(_.subarray(0,t.BYTES)),S=t.fromBytes(_.subarray(t.BYTES,2*t.BYTES));return{x:g,y:S}}else throw new Error(`Point of length ${x} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}})),b=w=>Pc(Aa(w,e.nByteLength));function f(w){let x=n>>Ei;return w>x}function v(w){return f(w)?a(-w):w}let E=(w,x,T)=>xo(w.slice(x,T));class I{constructor(x,T,_){this.r=x,this.s=T,this.recovery=_,this.assertValidity()}static fromCompact(x){let T=e.nByteLength;return x=ei("compactSignature",x,T*2),new I(E(x,0,T),E(x,T,2*T))}static fromDER(x){let{r:T,s:_}=Dc.toSig(ei("DER",x));return new I(T,_)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(x){return new I(this.r,this.s,x)}recoverPublicKey(x){let{r:T,s:_,recovery:g}=this,S=B(ei("msgHash",x));if(g==null||![0,1,2,3].includes(g))throw new Error("recovery id invalid");let q=g===2||g===3?T+e.n:T;if(q>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let $=g&1?"03":"02",W=l.fromHex($+b(q)),Z=c(q),ce=a(-S*Z),fe=a(_*Z),Te=l.BASE.multiplyAndAddUnsafe(W,ce,fe);if(!Te)throw new Error("point at infinify");return Te.assertValidity(),Te}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Tc(this.toDERHex())}toDERHex(){return Dc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Tc(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}let N={isValidPrivateKey(w){try{return u(w),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let w=LE(e.n);return p5(e.randomBytes(w),e.n)},precompute(w=8,x=l.BASE){return x._setWindowSize(w),x.multiply(BigInt(3)),x}};function D(w,x=!0){return l.fromPrivateKey(w).toRawBytes(x)}function F(w){let x=w instanceof Uint8Array,T=typeof w=="string",_=(x||T)&&w.length;return x?_===i||_===s:T?_===2*i||_===2*s:w instanceof l}function U(w,x,T=!0){if(F(w))throw new Error("first arg must be private key");if(!F(x))throw new Error("second arg must be public key");return l.fromHex(x).multiply(u(w)).toRawBytes(T)}let L=e.bits2int||function(w){let x=xo(w),T=w.length*8-e.nBitLength;return T>0?x>>BigInt(T):x},B=e.bits2int_modN||function(w){return a(L(w))},M=Kd(e.nBitLength);function V(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(Eo<=w&&w<M))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Aa(w,e.nByteLength)}function P(w,x,T=d){if(["recovered","canonical"].some(pe=>pe in T))throw new Error("sign() legacy options not supported");let{hash:_,randomBytes:g}=e,{lowS:S,prehash:q,extraEntropy:$}=T;S==null&&(S=!0),w=ei("msgHash",w),q&&(w=ei("prehashed msgHash",_(w)));let W=B(w),Z=u(x),ce=[V(Z),V(W)];if($!=null){let pe=$===!0?g(t.BYTES):$;ce.push(ei("extraEntropy",pe))}let fe=Mu(...ce),Te=W;function be(pe){let Nt=L(pe);if(!m(Nt))return;let je=c(Nt),Me=l.BASE.multiply(Nt).toAffine(),Tn=a(Me.x);if(Tn===Eo)return;let Je=a(je*a(Te+Tn*Z));if(Je===Eo)return;let ct=(Me.x===Tn?0:2)|Number(Me.y&Ei),ka=Je;return S&&f(Je)&&(ka=v(Je),ct^=1),new I(Tn,ka,ct)}return{seed:fe,k2sig:be}}let d={lowS:e.lowS,prehash:!1},y={lowS:e.lowS,prehash:!1};function C(w,x,T=d){let{seed:_,k2sig:g}=P(w,x,T),S=e;return ME(S.hash.outputLen,S.nByteLength,S.hmac)(_,g)}l.BASE._setWindowSize(8);function A(w,x,T,_=y){let g=w;if(x=ei("msgHash",x),T=ei("publicKey",T),"strict"in _)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:q}=_,$,W;try{if(typeof g=="string"||g instanceof Uint8Array)try{$=I.fromDER(g)}catch(Me){if(!(Me instanceof Dc.Err))throw Me;$=I.fromCompact(g)}else if(typeof g=="object"&&typeof g.r=="bigint"&&typeof g.s=="bigint"){let{r:Me,s:Tn}=g;$=new I(Me,Tn)}else throw new Error("PARSE");W=l.fromHex(T)}catch(Me){if(Me.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&$.hasHighS())return!1;q&&(x=e.hash(x));let{r:Z,s:ce}=$,fe=B(x),Te=c(ce),be=a(fe*Te),pe=a(Z*Te),Nt=l.BASE.multiplyAndAddUnsafe(W,be,pe)?.toAffine();return Nt?a(Nt.x)===Z:!1}return{CURVE:e,getPublicKey:D,getSharedSecret:U,sign:C,verify:A,ProjectivePoint:l,Signature:I,utils:N}}function wY(r){return{hash:r,hmac:(e,...t)=>EE(r,e,LT(...t)),randomBytes:jT}}function y5(r,e){let t=n=>b5(k(k({},r),wY(n)));return Object.freeze(de(k({},t(e)),{create:t}))}var x5=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),v5=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xY=BigInt(1),HE=BigInt(2),w5=(r,e)=>(r+e/HE)/e;function EY(r){let e=x5,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,u=l*l*r%e,h=ti(u,t,e)*u%e,m=ti(h,t,e)*u%e,b=ti(m,HE,e)*l%e,f=ti(b,i,e)*b%e,v=ti(f,s,e)*f%e,E=ti(v,a,e)*v%e,I=ti(E,c,e)*E%e,N=ti(I,a,e)*v%e,D=ti(N,t,e)*u%e,F=ti(D,o,e)*f%e,U=ti(F,n,e)*l%e,L=ti(U,HE,e);if(!qE.eql(qE.sqr(L),r))throw new Error("Cannot find square root");return L}var qE=d5(x5,void 0,void 0,{sqrt:EY}),Co=y5({a:BigInt(0),b:BigInt(7),Fp:qE,n:v5,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let e=v5,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-xY*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=w5(s*r,e),c=w5(-n*r,e),l=bn(r-a*t-c*i,e),u=bn(-a*n-c*s,e),h=l>o,m=u>o;if(h&&(l=e-l),m&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:h,k1:l,k2neg:m,k2:u}}}},Hg),Phe=BigInt(0);var The=Co.ProjectivePoint;var _o="0x0000000000000000000000000000000000000000";var Qg="0x0000000000000000000000000000000000000000000000000000000000000000";var E5=BigInt(0),C5=BigInt(1),_5=BigInt(2),A5=BigInt(27),S5=BigInt(28),Zg=BigInt(35),ku={};function I5(r){return Vn(Qt(r),32)}var Sn=class r{#e;#t;#r;#n;get r(){return this.#e}set r(e){O(Gi(e)===32,"invalid r","value",e),this.#e=X(e)}get s(){return this.#t}set s(e){O(Gi(e)===32,"invalid s","value",e);let t=X(e);O(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),this.#t=t}get v(){return this.#r}set v(e){let t=ve(e,"value");O(t===27||t===28,"invalid v","v",e),this.#r=t}get networkV(){return this.#n}get legacyChainId(){let e=this.networkV;return e==null?null:r.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){let e=ge(this.s);return this.yParity&&(e[0]|=128),X(e)}get compactSerialized(){return rt([this.r,this.yParityAndS])}get serialized(){return rt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,i){$i(e,ku,"Signature"),this.#e=t,this.#t=n,this.#r=i,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new r(ku,this.r,this.s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=ie(e,"v");return t==A5||t==S5?E5:(O(t>=Zg,"invalid EIP-155 v","v",e),(t-Zg)/_5)}static getChainIdV(e,t){return ie(e)*_5+BigInt(35+t-27)}static getNormalizedV(e){let t=ie(e);return t===E5||t===A5?27:t===C5||t===S5?28:(O(t>=Zg,"invalid v","v",e),t&C5?27:28)}static from(e){function t(l,u){O(l,u,"signature",e)}if(e==null)return new r(ku,Qg,Qg,27);if(typeof e=="string"){let l=ge(e,"signature");if(l.length===64){let u=X(l.slice(0,32)),h=l.slice(32,64),m=h[0]&128?28:27;return h[0]&=127,new r(ku,u,X(h),m)}if(l.length===65){let u=X(l.slice(0,32)),h=l.slice(32,64);t((h[0]&128)===0,"non-canonical s");let m=r.getNormalizedV(l[64]);return new r(ku,u,X(h),m)}t(!1,"invalid raw signature length")}if(e instanceof r)return e.clone();let n=e.r;t(n!=null,"missing r");let i=I5(n),s=function(l,u){if(l!=null)return I5(l);if(u!=null){t(Oe(u,32),"invalid yParityAndS");let h=ge(u);return h[0]&=127,X(h)}t(!1,"missing s")}(e.s,e.yParityAndS);t((ge(s)[0]&128)==0,"non-canonical s");let{networkV:o,v:a}=function(l,u,h){if(l!=null){let m=ie(l);return{networkV:m>=Zg?m:void 0,v:r.getNormalizedV(m)}}if(u!=null)return t(Oe(u,32),"invalid yParityAndS"),{v:ge(u)[0]&128?28:27};if(h!=null){switch(ve(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new r(ku,i,s,a);return o&&(c.#n=o),t(e.yParity==null||ve(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};var Ia=class r{#e;constructor(e){O(Gi(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=X(e)}get privateKey(){return this.#e}get publicKey(){return r.computePublicKey(this.#e)}get compressedPublicKey(){return r.computePublicKey(this.#e,!0)}sign(e){O(Gi(e)===32,"invalid digest length","digest",e);let t=Co.sign(qt(e),qt(this.#e),{lowS:!0});return Sn.from({r:An(t.r,32),s:An(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=r.computePublicKey(e);return X(Co.getSharedSecret(qt(this.#e),ge(t),!1))}static computePublicKey(e,t){let n=ge(e,"key");if(n.length===32){let s=Co.getPublicKey(n,!!t);return X(s)}if(n.length===64){let s=new Uint8Array(65);s[0]=4,s.set(n,1),n=s}let i=Co.ProjectivePoint.fromHex(n);return X(i.toRawBytes(t))}static recoverPublicKey(e,t){O(Gi(e)===32,"invalid digest length","digest",e);let n=Sn.from(t),i=Co.Signature.fromCompact(qt(rt([n.r,n.s])));i=i.addRecoveryBit(n.yParity);let s=i.recoverPublicKey(qt(e));return O(s!=null,"invalid signautre for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,n){let i=Co.ProjectivePoint.fromHex(r.computePublicKey(e).substring(2)),s=Co.ProjectivePoint.fromHex(r.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!n)}};var CY=BigInt(0),_Y=BigInt(36);function P5(r){r=r.toLowerCase();let e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);let n=ge(at(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}var zE={};for(let r=0;r<10;r++)zE[String(r)]=String(r);for(let r=0;r<26;r++)zE[String.fromCharCode(65+r)]=String(10+r);var T5=15;function AY(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>zE[n]).join("");for(;e.length>=T5;){let n=e.substring(0,T5);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}var SY=function(){let r={};for(let e=0;e<36;e++){let t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function IY(r){r=r.toLowerCase();let e=CY;for(let t=0;t<r.length;t++)e=e*_Y+SY[r[t]];return e}function Pe(r){if(O(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);let e=P5(r);return O(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){O(r.substring(2,4)===AY(r),"bad icap checksum","address",r);let e=IY(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return P5("0x"+e)}O(!1,"invalid address","address",r)}function Xg(r){let e=Pe(r.from),n=ie(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,Pe(dt(at(Yi([e,n])),12))}function Wd(r){return r&&typeof r.getAddress=="function"}function $E(r,e){return p(this,null,function*(){let t=yield e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(H(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),O(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),Pe(t)})}function Zt(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?Pe(r):(H(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),$E(r,e.resolveName(r)));if(Wd(r))return $E(r,r.getAddress());if(r&&typeof r.then=="function")return $E(r,r);O(!1,"unsupported addressable value","target",r)}var Zi={};function ue(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new yt(Zi,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function nt(r,e){return new yt(Zi,`bytes${e||""}`,r,{size:e})}var N5=Symbol.for("_ethers_typed"),yt=class r{type;value;#e;_typedSymbol;constructor(e,t,n,i){i==null&&(i=null),$i(Zi,e,"Typed"),se(this,{_typedSymbol:N5,type:t,value:n}),this.#e=i,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,t){return new r(Zi,e,t)}static uint8(e){return ue(e,8)}static uint16(e){return ue(e,16)}static uint24(e){return ue(e,24)}static uint32(e){return ue(e,32)}static uint40(e){return ue(e,40)}static uint48(e){return ue(e,48)}static uint56(e){return ue(e,56)}static uint64(e){return ue(e,64)}static uint72(e){return ue(e,72)}static uint80(e){return ue(e,80)}static uint88(e){return ue(e,88)}static uint96(e){return ue(e,96)}static uint104(e){return ue(e,104)}static uint112(e){return ue(e,112)}static uint120(e){return ue(e,120)}static uint128(e){return ue(e,128)}static uint136(e){return ue(e,136)}static uint144(e){return ue(e,144)}static uint152(e){return ue(e,152)}static uint160(e){return ue(e,160)}static uint168(e){return ue(e,168)}static uint176(e){return ue(e,176)}static uint184(e){return ue(e,184)}static uint192(e){return ue(e,192)}static uint200(e){return ue(e,200)}static uint208(e){return ue(e,208)}static uint216(e){return ue(e,216)}static uint224(e){return ue(e,224)}static uint232(e){return ue(e,232)}static uint240(e){return ue(e,240)}static uint248(e){return ue(e,248)}static uint256(e){return ue(e,256)}static uint(e){return ue(e,256)}static int8(e){return ue(e,-8)}static int16(e){return ue(e,-16)}static int24(e){return ue(e,-24)}static int32(e){return ue(e,-32)}static int40(e){return ue(e,-40)}static int48(e){return ue(e,-48)}static int56(e){return ue(e,-56)}static int64(e){return ue(e,-64)}static int72(e){return ue(e,-72)}static int80(e){return ue(e,-80)}static int88(e){return ue(e,-88)}static int96(e){return ue(e,-96)}static int104(e){return ue(e,-104)}static int112(e){return ue(e,-112)}static int120(e){return ue(e,-120)}static int128(e){return ue(e,-128)}static int136(e){return ue(e,-136)}static int144(e){return ue(e,-144)}static int152(e){return ue(e,-152)}static int160(e){return ue(e,-160)}static int168(e){return ue(e,-168)}static int176(e){return ue(e,-176)}static int184(e){return ue(e,-184)}static int192(e){return ue(e,-192)}static int200(e){return ue(e,-200)}static int208(e){return ue(e,-208)}static int216(e){return ue(e,-216)}static int224(e){return ue(e,-224)}static int232(e){return ue(e,-232)}static int240(e){return ue(e,-240)}static int248(e){return ue(e,-248)}static int256(e){return ue(e,-256)}static int(e){return ue(e,-256)}static bytes1(e){return nt(e,1)}static bytes2(e){return nt(e,2)}static bytes3(e){return nt(e,3)}static bytes4(e){return nt(e,4)}static bytes5(e){return nt(e,5)}static bytes6(e){return nt(e,6)}static bytes7(e){return nt(e,7)}static bytes8(e){return nt(e,8)}static bytes9(e){return nt(e,9)}static bytes10(e){return nt(e,10)}static bytes11(e){return nt(e,11)}static bytes12(e){return nt(e,12)}static bytes13(e){return nt(e,13)}static bytes14(e){return nt(e,14)}static bytes15(e){return nt(e,15)}static bytes16(e){return nt(e,16)}static bytes17(e){return nt(e,17)}static bytes18(e){return nt(e,18)}static bytes19(e){return nt(e,19)}static bytes20(e){return nt(e,20)}static bytes21(e){return nt(e,21)}static bytes22(e){return nt(e,22)}static bytes23(e){return nt(e,23)}static bytes24(e){return nt(e,24)}static bytes25(e){return nt(e,25)}static bytes26(e){return nt(e,26)}static bytes27(e){return nt(e,27)}static bytes28(e){return nt(e,28)}static bytes29(e){return nt(e,29)}static bytes30(e){return nt(e,30)}static bytes31(e){return nt(e,31)}static bytes32(e){return nt(e,32)}static address(e){return new r(Zi,"address",e)}static bool(e){return new r(Zi,"bool",!!e)}static bytes(e){return new r(Zi,"bytes",e)}static string(e){return new r(Zi,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new r(Zi,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===N5}static dereference(e,t){if(r.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};var e0=class extends _r{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=yt.dereference(t,"string");try{n=Pe(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return Pe(An(e.readValue(),20))}};var t0=class extends _r{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}};function GE(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(l=>{let u=l.localName;return H(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),H(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[u]=!0,t[u]})}else O(!1,"invalid tuple value","tuple",t);O(e.length===n.length,"types/value length mismatch","tuple",t);let i=new Ic,s=new Ic,o=[];e.forEach((c,l)=>{let u=n[l];if(c.dynamic){let h=s.length;c.encode(s,u);let m=i.writeUpdatableValue();o.push(b=>{m(b+h)})}else c.encode(i,u)}),o.forEach(c=>{c(i.length)});let a=r.appendWriter(i);return a+=r.appendWriter(s),a}function KE(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(s=>{let o=null;if(s.dynamic){let a=r.readIndex(),c=i.subReader(a);try{o=s.decode(c)}catch(l){if(bt(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(r)}catch(a){if(bt(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}if(o==null)throw new Error("investigate");t.push(o),n.push(s.localName||null)}),vo.fromItems(t,n)}var r0=class extends _r{coder;length;constructor(e,t,n){let i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,n,s),se(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){let n=yt.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let i=this.length;i===-1&&(i=n.length,e.writeValue(n.length)),_u(n.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let o=0;o<n.length;o++)s.push(this.coder);return GE(e,s,n)}decode(e){let t=this.length;t===-1&&(t=e.readIndex(),H(t*un<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*un,length:e.dataLength}));let n=[];for(let i=0;i<t;i++)n.push(new t0(this.coder));return KE(e,n)}};var n0=class extends _r{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let n=yt.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}};var Jd=class extends _r{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=qt(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}},i0=class extends Jd{constructor(e){super("bytes",e)}decode(e){return X(super.decode(e))}};var s0=class extends _r{size;constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),se(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=qt(yt.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return X(e.readBytes(this.size))}};var DY=new Uint8Array([]),o0=class extends _r{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(DY)}decode(e){return e.readBytes(0),null}};var RY=BigInt(0),OY=BigInt(1),MY=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),a0=class extends _r{size;signed;constructor(e,t,n){let i=(t?"int":"uint")+e*8;super(i,i,n,!1),se(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=ie(yt.dereference(t,this.type)),i=xi(MY,un*8);if(this.signed){let s=xi(i,this.size*8-1);(n>s||n<-(s+OY))&&this._throwError("value out-of-bounds",t),n=Su(n,8*un)}else(n<RY||n>xi(i,this.size*8))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=xi(e.readValue(),this.size*8);return this.signed&&(t=ma(t,this.size*8)),t}};var c0=class extends Jd{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Gr(yt.dereference(t,"string")))}decode(e){return yo(super.decode(e))}};var Rc=class extends _r{coders;constructor(e,t){let n=!1,i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});let s="tuple("+i.join(",")+")";super("tuple",s,t,n),se(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});let t=this.coders.reduce((n,i)=>{let s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){let n=yt.dereference(t,"tuple");return GE(e,this.coders,n)}decode(e){return KE(e,this.coders)}};function Xi(r){return at(Gr(r))}var kY="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI",D5=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),R5=4;function FY(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let U=1;U<n;U++)s.push(i+=t());let o=t(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|r[e++],c=8),l>>--c&1}let h=31,m=2**h,b=m>>>1,f=b>>1,v=m-1,E=0;for(let U=0;U<h;U++)E=E<<1|u();let I=[],N=0,D=m;for(;;){let U=Math.floor(((E-N+1)*i-1)/D),L=0,B=n;for(;B-L>1;){let P=L+B>>>1;U<s[P]?B=P:L=P}if(L==0)break;I.push(L);let M=N+Math.floor(D*s[L]/i),V=N+Math.floor(D*s[L+1]/i)-1;for(;!((M^V)&b);)E=E<<1&v|u(),M=M<<1&v,V=V<<1&v|1;for(;M&~V&f;)E=E&b|E<<1&v>>>1|u(),M=M<<1^b,V=(V^b)<<1|b|1;N=M,D=1+V-M}let F=n-4;return I.map(U=>{switch(U-F){case 3:return F+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return F+256+(r[a++]<<8|r[a++]);case 1:return F+r[a++];default:return U-1}})}function BY(r){let e=0;return()=>r[e++]}function F5(r){return BY(FY(UY(r)))}function UY(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=r.length,n=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,a=0;i<t;i++)a=a<<6|e[r.charCodeAt(i)],o+=6,o>=8&&(n[s++]=a>>(o-=8));return n}function LY(r){return r&1?~r>>1:r>>1}function VY(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=LY(e());return t}function Zd(r,e=0){let t=[];for(;;){let n=r(),i=r();if(!i)break;e+=n;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function B5(r){return Xd(()=>{let e=Zd(r);if(e.length)return e})}function U5(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(jY(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(HY(t,r))}return e.flat()}function Xd(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function L5(r,e,t){let n=Array(r).fill().map(()=>[]);for(let i=0;i<e;i++)VY(r,t).forEach((s,o)=>n[o].push(s));return n}function jY(r,e){let t=1+e(),n=e(),i=Xd(e);return L5(i.length,1+r,e).flatMap((o,a)=>{let[c,...l]=o;return Array(i[a]).fill().map((u,h)=>{let m=h*n;return[c+h*t,l.map(b=>b+m)]})})}function HY(r,e){let t=1+e();return L5(t,1+r,e).map(i=>[i[0],i.slice(1)])}function qY(r){let e=[],t=Zd(r);return i(n([]),[]),e;function n(s){let o=r(),a=Xd(()=>{let c=Zd(r).map(l=>t[l]);if(c.length)return n(c)});return{S:o,B:a,Q:s}}function i({S:s,B:o},a,c){if(!(s&4&&c===a[a.length-1])){s&2&&(c=a[a.length-1]),s&1&&e.push(a);for(let l of o)for(let u of l.Q)i(l,[...a,u],c)}}}function zY(r){return r.toString(16).toUpperCase().padStart(2,"0")}function V5(r){return`{${zY(r)}}`}function $Y(r){let e=[];for(let t=0,n=r.length;t<n;){let i=r.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Uu(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let n=[];for(let i=0;i<t;)n.push(String.fromCodePoint(...r.slice(i,i+=4096)));return n.join("")}function GY(r,e){let t=r.length,n=t-e.length;for(let i=0;n==0&&i<t;i++)n=r[i]-e[i];return n}var KY="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g",ef=44032,u0=4352,h0=4449,d0=4519,j5=19,H5=21,Lu=28,f0=H5*Lu,WY=j5*f0,JY=ef+WY,YY=u0+j5,QY=h0+H5,ZY=d0+Lu;function Yd(r){return r>>24&255}function q5(r){return r&16777215}var JE,O5,YE,l0;function XY(){let r=F5(KY);JE=new Map(B5(r).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),O5=new Set(Zd(r)),YE=new Map,l0=new Map;for(let[e,t]of U5(r)){if(!O5.has(e)&&t.length==2){let[n,i]=t,s=l0.get(n);s||(s=new Map,l0.set(n,s)),s.set(i,e)}YE.set(e,t.reverse())}}function z5(r){return r>=ef&&r<JY}function eQ(r,e){if(r>=u0&&r<YY&&e>=h0&&e<QY)return ef+(r-u0)*f0+(e-h0)*Lu;if(z5(r)&&e>d0&&e<ZY&&(r-ef)%Lu==0)return r+(e-d0);{let t=l0.get(r);return t&&(t=t.get(e),t)?t:-1}}function $5(r){JE||XY();let e=[],t=[],n=!1;function i(s){let o=JE.get(s);o&&(n=!0,s|=o),e.push(s)}for(let s of r)for(;;){if(s<128)e.push(s);else if(z5(s)){let o=s-ef,a=o/f0|0,c=o%f0/Lu|0,l=o%Lu;i(u0+a),i(h0+c),l>0&&i(d0+l)}else{let o=YE.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(n&&e.length>1){let s=Yd(e[0]);for(let o=1;o<e.length;o++){let a=Yd(e[o]);if(a==0||s<=a){s=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(s=Yd(e[--c]),s<=a))break}s=Yd(e[o])}}return e}function tQ(r){let e=[],t=[],n=-1,i=0;for(let s of r){let o=Yd(s),a=q5(s);if(n==-1)o==0?n=a:e.push(a);else if(i>0&&i>=o)o==0?(e.push(n,...t),t.length=0,n=a):t.push(a),i=o;else{let c=eQ(n,a);c>=0?n=c:i==0&&o==0?(e.push(n),n=a):(t.push(a),i=o)}}return n>=0&&e.push(n,...t),e}function G5(r){return $5(r).map(q5)}function rQ(r){return tQ($5(r))}var M5=45;var K5=".",W5=65039,J5=1,p0=r=>Array.from(r);function tf(r,e){return r.P.has(e)||r.Q.has(e)}var QE=class extends Array{get is_emoji(){return!0}},ZE,Y5,Mc,XE,Q5,nQ,Bu,WE,Fu,Oc,k5,e2;function t2(){if(ZE)return;let r=F5(kY),e=()=>Zd(r),t=()=>new Set(e()),n=(u,h)=>h.forEach(m=>u.add(m));ZE=new Map(U5(r)),Y5=t(),Mc=e(),XE=new Set(e().map(u=>Mc[u])),Mc=new Set(Mc),Q5=t(),nQ=t();let i=B5(r),s=r(),o=()=>{let u=new Set;return e().forEach(h=>n(u,i[h])),n(u,e()),u};Bu=Xd(u=>{let h=Xd(r).map(m=>m+96);if(h.length){let m=u>=s;h[0]-=32,h=Uu(h),m&&(h=`Restricted[${h}]`);let b=o(),f=o(),v=!r();return{N:h,P:b,Q:f,M:v,R:m}}}),WE=t(),Fu=new Map;let a=e().concat(p0(WE)).sort((u,h)=>u-h);a.forEach((u,h)=>{let m=r(),b=a[h]=m?a[h-m]:{V:[],M:new Map};b.V.push(u),WE.has(u)||Fu.set(u,b)});for(let{V:u,M:h}of new Set(Fu.values())){let m=[];for(let f of u){let v=Bu.filter(I=>tf(I,f)),E=m.find(({G:I})=>v.some(N=>I.has(N)));E||(E={G:new Set,V:[]},m.push(E)),E.V.push(f),n(E.G,v)}let b=m.flatMap(f=>p0(f.G));for(let{G:f,V:v}of m){let E=new Set(b.filter(I=>!f.has(I)));for(let I of v)h.set(I,E)}}Oc=new Set;let c=new Set,l=u=>Oc.has(u)?c.add(u):Oc.add(u);for(let u of Bu){for(let h of u.P)l(h);for(let h of u.Q)l(h)}for(let u of Oc)!Fu.has(u)&&!c.has(u)&&Fu.set(u,J5);n(Oc,G5(Oc)),k5=qY(r).map(u=>QE.from(u)).sort(GY),e2=new Map;for(let u of k5){let h=[e2];for(let m of u){let b=h.map(f=>{let v=f.get(m);return v||(v=new Map,f.set(m,v)),v});m===W5?h.push(...b):h=b}for(let m of h)m.V=u}}function r2(r){return(Z5(r)?"":`${n2(m0([r]))} `)+V5(r)}function n2(r){return`"${r}"\u200E`}function iQ(r){if(r.length>=4&&r[2]==M5&&r[3]==M5)throw new Error(`invalid label extension: "${Uu(r.slice(0,4))}"`)}function sQ(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function oQ(r){let e=r[0],t=D5.get(e);if(t)throw Qd(`leading ${t}`);let n=r.length,i=-1;for(let s=1;s<n;s++){e=r[s];let o=D5.get(e);if(o){if(i==s)throw Qd(`${t} + ${o}`);i=s+1,t=o}}if(i==n)throw Qd(`trailing ${t}`)}function m0(r,e=1/0,t=V5){let n=[];aQ(r[0])&&n.push("\u25CC"),r.length>e&&(e>>=1,r=[...r.slice(0,e),8230,...r.slice(-e)]);let i=0,s=r.length;for(let o=0;o<s;o++){let a=r[o];Z5(a)&&(n.push(Uu(r.slice(i,o))),n.push(t(a)),i=o+1)}return n.push(Uu(r.slice(i,s))),n.join("")}function aQ(r){return t2(),Mc.has(r)}function Z5(r){return t2(),Q5.has(r)}function X5(r){return hQ(cQ(r,rQ,pQ))}function cQ(r,e,t){if(!r)return[];t2();let n=0;return r.split(K5).map(i=>{let s=$Y(i),o={input:s,offset:n};n+=s.length+1;try{let a=o.tokens=fQ(s,e,t),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(sQ(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(m=>m<128))iQ(u),l="ASCII";else{let m=a.flatMap(b=>b.is_emoji?[]:b);if(!m.length)l="Emoji";else{if(Mc.has(u[0]))throw Qd("leading combining mark");for(let v=1;v<c;v++){let E=a[v];if(!E.is_emoji&&Mc.has(E[0]))throw Qd(`emoji + combining mark: "${Uu(a[v-1])} + ${m0([E[0]])}"`)}oQ(u);let b=p0(new Set(m)),[f]=uQ(b);dQ(f,m),lQ(f,b),l=f.N}}o.type=l}catch(a){o.error=a}return o})}function lQ(r,e){let t,n=[];for(let i of e){let s=Fu.get(i);if(s===J5)return;if(s){let o=s.M.get(i);if(t=t?t.filter(a=>o.has(a)):p0(o),!t.length)return}else n.push(i)}if(t){for(let i of t)if(n.every(s=>tf(i,s)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function uQ(r){let e=Bu;for(let t of r){let n=e.filter(i=>tf(i,t));if(!n.length)throw Bu.some(i=>tf(i,t))?tN(e[0],t):eN(t);if(e=n,n.length==1)break}return e}function hQ(r){return r.map(({input:e,error:t,output:n})=>{if(t){let i=t.message;throw new Error(r.length==1?i:`Invalid label ${n2(m0(e,63))}: ${i}`)}return Uu(n)}).join(K5)}function eN(r){return new Error(`disallowed character: ${r2(r)}`)}function tN(r,e){let t=r2(e),n=Bu.find(i=>i.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function Qd(r){return new Error(`illegal placement: ${r}`)}function dQ(r,e){for(let t of e)if(!tf(r,t))throw tN(r,t);if(r.M){let t=G5(e);for(let n=1,i=t.length;n<i;n++)if(XE.has(t[n])){let s=n+1;for(let o;s<i&&XE.has(o=t[s]);s++)for(let a=n;a<s;a++)if(t[a]==o)throw new Error(`duplicate non-spacing marks: ${r2(o)}`);if(s-n>R5)throw new Error(`excessive non-spacing marks: ${n2(m0(t.slice(n-1,s)))} (${s-n}/${R5})`);n=s}}}function fQ(r,e,t){let n=[],i=[];for(r=r.slice().reverse();r.length;){let s=mQ(r);if(s)i.length&&(n.push(e(i)),i=[]),n.push(t(s));else{let o=r.pop();if(Oc.has(o))i.push(o);else{let a=ZE.get(o);if(a)i.push(...a);else if(!Y5.has(o))throw eN(o)}}}return i.length&&n.push(e(i)),n}function pQ(r){return r.filter(e=>e!=W5)}function mQ(r,e){let t=e2,n,i=r.length;for(;i&&(t=t.get(r[--i]),!!t);){let{V:s}=t;s&&(n=s,e&&e.push(...r.slice(i).reverse()),r.length=i)}return n}var nN=new Uint8Array(32);nN.fill(0);function rN(r){return O(r.length!==0,"invalid ENS name; empty component","comp",r),r}function iN(r){let e=Gr(sN(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(rN(e.slice(n,i))),n=i+1);return O(n<e.length,"invalid ENS name; empty component","name",r),t.push(rN(e.slice(n))),t}function sN(r){try{if(r.length===0)throw new Error("empty label");return X5(r)}catch(e){O(!1,`invalid ENS name (${e.message})`,"name",r)}}function Vu(r){O(typeof r=="string","invalid ENS name; not a string","name",r),O(r.length,"invalid ENS name (empty label)","name",r);let e=nN,t=iN(r);for(;t.length;)e=at(rt([e,at(t.pop())]));return X(e)}function i2(r,e){let t=e??63;return O(t<=255,"DNS encoded label cannot exceed 255","length",t),X(rt(iN(r).map(n=>{O(n.length<=t,`label ${JSON.stringify(r)} exceeds ${t} bytes`,"name",r);let i=new Uint8Array(n.length+1);return i.set(n,1),i[0]=i.length-1,i})))+"00"}function s2(r,e){return{address:Pe(r),storageKeys:e.map((t,n)=>(O(Oe(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function ri(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(O(t.length===2,"invalid slot set",`value[${n}]`,t),s2(t[0],t[1])):(O(t!=null&&typeof t=="object","invalid address-slot set","value",r),s2(t.address,t.storageKeys)));O(r!=null&&typeof r=="object","invalid access list","value",r);let e=Object.keys(r).map(t=>{let n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return s2(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function gQ(r){let e;return typeof r=="string"?e=Ia.computePublicKey(r,!1):e=r.publicKey,Pe(at("0x"+e.substring(4)).substring(26))}function oN(r,e){return gQ(Ia.recoverPublicKey(r,e))}var Kr=BigInt(0),bQ=BigInt(2),yQ=BigInt(27),vQ=BigInt(28),wQ=BigInt(35),xQ=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),o2=4096*32;function aN(r,e){let t=r.toString(16);for(;t.length<2;)t="0"+t;return t+=_a(e).substring(4),"0x"+t}function g0(r){return r==="0x"?null:Pe(r)}function a2(r,e){try{return ri(r)}catch(t){O(!1,t.message,e,r)}}function rf(r,e){return r==="0x"?0:ve(r,e)}function Xt(r,e){if(r==="0x")return Kr;let t=ie(r,e);return O(t<=xQ,"value exceeds uint size",e,t),t}function vt(r,e){let t=ie(r,"value"),n=Qt(t);return O(n.length<=32,"value too large",`tx.${e}`,t),n}function c2(r){return ri(r).map(e=>[e.address,e.storageKeys])}function EQ(r,e){O(Array.isArray(r),`invalid ${e}`,"value",r);for(let t=0;t<r.length;t++)O(Oe(r[t],32),"invalid ${ param } hash",`value[${t}]`,r[t]);return r}function CQ(r){let e=Ac(r);O(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);let t={type:0,nonce:rf(e[0],"nonce"),gasPrice:Xt(e[1],"gasPrice"),gasLimit:Xt(e[2],"gasLimit"),to:g0(e[3]),value:Xt(e[4],"value"),data:X(e[5]),chainId:Kr};if(e.length===6)return t;let n=Xt(e[6],"v"),i=Xt(e[7],"r"),s=Xt(e[8],"s");if(i===Kr&&s===Kr)t.chainId=n;else{let o=(n-wQ)/bQ;o<Kr&&(o=Kr),t.chainId=o,O(o!==Kr||n===yQ||n===vQ,"non-canonical legacy v","v",e[6]),t.signature=Sn.from({r:Vn(e[7],32),s:Vn(e[8],32),v:n})}return t}function _Q(r,e){let t=[vt(r.nonce,"nonce"),vt(r.gasPrice||0,"gasPrice"),vt(r.gasLimit,"gasLimit"),r.to||"0x",vt(r.value,"value"),r.data],n=Kr;if(r.chainId!=Kr)n=ie(r.chainId,"tx.chainId"),O(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){let s=r.signature.legacyChainId;s!=null&&(n=s)}if(!e)return n!==Kr&&(t.push(Qt(n)),t.push("0x"),t.push("0x")),Yi(t);let i=BigInt(27+e.yParity);return n!==Kr?i=Sn.getChainIdV(n,e.v):BigInt(e.v)!==i&&O(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(Qt(i)),t.push(Qt(e.r)),t.push(Qt(e.s)),Yi(t)}function l2(r,e){let t;try{if(t=rf(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{O(!1,"invalid yParity","yParity",e[0])}let n=Vn(e[1],32),i=Vn(e[2],32),s=Sn.from({r:n,s:i,yParity:t});r.signature=s}function AQ(r){let e=Ac(ge(r).slice(1));O(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",X(r));let t={type:2,chainId:Xt(e[0],"chainId"),nonce:rf(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:g0(e[5]),value:Xt(e[6],"value"),data:X(e[7]),accessList:a2(e[8],"accessList")};return e.length===9||l2(t,e.slice(9)),t}function SQ(r,e){let t=[vt(r.chainId,"chainId"),vt(r.nonce,"nonce"),vt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),vt(r.maxFeePerGas||0,"maxFeePerGas"),vt(r.gasLimit,"gasLimit"),r.to||"0x",vt(r.value,"value"),r.data,c2(r.accessList||[])];return e&&(t.push(vt(e.yParity,"yParity")),t.push(Qt(e.r)),t.push(Qt(e.s))),rt(["0x02",Yi(t)])}function IQ(r){let e=Ac(ge(r).slice(1));O(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",X(r));let t={type:1,chainId:Xt(e[0],"chainId"),nonce:rf(e[1],"nonce"),gasPrice:Xt(e[2],"gasPrice"),gasLimit:Xt(e[3],"gasLimit"),to:g0(e[4]),value:Xt(e[5],"value"),data:X(e[6]),accessList:a2(e[7],"accessList")};return e.length===8||l2(t,e.slice(8)),t}function PQ(r,e){let t=[vt(r.chainId,"chainId"),vt(r.nonce,"nonce"),vt(r.gasPrice||0,"gasPrice"),vt(r.gasLimit,"gasLimit"),r.to||"0x",vt(r.value,"value"),r.data,c2(r.accessList||[])];return e&&(t.push(vt(e.yParity,"recoveryParam")),t.push(Qt(e.r)),t.push(Qt(e.s))),rt(["0x01",Yi(t)])}function TQ(r){let e=Ac(ge(r).slice(1)),t="3",n=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";let s=e[1],o=e[2],a=e[3];O(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),O(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),O(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),O(s.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),O(s.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:s[c],commitment:o[c],proof:a[c]});e=e[0]}O(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",X(r));let i={type:3,chainId:Xt(e[0],"chainId"),nonce:rf(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:g0(e[5]),value:Xt(e[6],"value"),data:X(e[7]),accessList:a2(e[8],"accessList"),maxFeePerBlobGas:Xt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),O(i.to!=null,`invalid address for transaction type: ${t}`,"data",r),O(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let s=0;s<i.blobVersionedHashes.length;s++)O(Oe(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",r);return e.length===11||l2(i,e.slice(11)),i}function NQ(r,e,t){let n=[vt(r.chainId,"chainId"),vt(r.nonce,"nonce"),vt(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),vt(r.maxFeePerGas||0,"maxFeePerGas"),vt(r.gasLimit,"gasLimit"),r.to||_o,vt(r.value,"value"),r.data,c2(r.accessList||[]),vt(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),EQ(r.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(vt(e.yParity,"yParity")),n.push(Qt(e.r)),n.push(Qt(e.s)),t)?rt(["0x03",Yi([n,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):rt(["0x03",Yi(n)])}var kc=class r{#e;#t;#r;#n;#i;#o;#s;#a;#h;#l;#p;#m;#c;#u;#d;#f;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;default:O(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){let e=this.#t;return e==null&&this.type===3?_o:e}set to(e){this.#t=e==null?null:Pe(e)}get nonce(){return this.#n}set nonce(e){this.#n=ve(e,"value")}get gasLimit(){return this.#i}set gasLimit(e){this.#i=ie(e)}get gasPrice(){let e=this.#o;return e==null&&(this.type===0||this.type===1)?Kr:e}set gasPrice(e){this.#o=e==null?null:ie(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#s;return e??(this.type===2||this.type===3?Kr:null)}set maxPriorityFeePerGas(e){this.#s=e==null?null:ie(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#a;return e??(this.type===2||this.type===3?Kr:null)}set maxFeePerGas(e){this.#a=e==null?null:ie(e,"maxFeePerGas")}get data(){return this.#r}set data(e){this.#r=X(e)}get value(){return this.#h}set value(e){this.#h=ie(e,"value")}get chainId(){return this.#l}set chainId(e){this.#l=ie(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Sn.from(e)}get accessList(){let e=this.#m||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#m=e==null?null:ri(e)}get maxFeePerBlobGas(){let e=this.#c;return e==null&&this.type===3?Kr:e}set maxFeePerBlobGas(e){this.#c=e==null?null:ie(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#u;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){O(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)O(Oe(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#u=e}get blobs(){return this.#f==null?null:this.#f.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#f=null;return}let t=[],n=[];for(let i=0;i<e.length;i++){let s=e[i];if(pa(s)){H(this.#d,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=ge(s);if(O(o.length<=o2,"blob is too large",`blobs[${i}]`,s),o.length!==o2){let l=new Uint8Array(o2);l.set(o),o=l}let a=this.#d.blobToKzgCommitment(o),c=X(this.#d.computeBlobKzgProof(o,a));t.push({data:X(o),commitment:X(a),proof:c}),n.push(aN(1,a))}else{let o=X(s.commitment);t.push({data:X(s.data),commitment:o,proof:X(s.proof)}),n.push(aN(1,o))}}this.#f=t,this.#u=n}get kzg(){return this.#d}set kzg(e){this.#d=e}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#i=Kr,this.#o=null,this.#s=null,this.#a=null,this.#r="0x",this.#h=Kr,this.#l=Kr,this.#p=null,this.#m=null,this.#c=null,this.#u=null,this.#f=null,this.#d=null}get hash(){return this.signature==null?null:at(this.#g(!0,!1))}get unsignedHash(){return at(this.unsignedSerialized)}get from(){return this.signature==null?null:oN(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:Ia.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#g(e,t){H(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let n=e?this.signature:null;switch(this.inferType()){case 0:return _Q(this,n);case 1:return PQ(this,n);case 2:return SQ(this,n);case 3:return NQ(this,n,t?this.blobs:null)}H(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#g(!0,!0)}get unsignedSerialized(){return this.#g(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=this.#c!=null||this.#u;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&H(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),H(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),H(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let s=[];return this.type!=null?s.push(this.type):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return r.from(this)}toJSON(){let e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new r;if(typeof e=="string"){let n=ge(e);if(n[0]>=127)return r.from(CQ(n));switch(n[0]){case 1:return r.from(IQ(n));case 2:return r.from(AQ(n));case 3:return r.from(TQ(n))}H(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new r;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Sn.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(O(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),O(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(O(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),O(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};var hN=new Uint8Array(32);hN.fill(0);var DQ=BigInt(-1),dN=BigInt(0),fN=BigInt(1),RQ=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function OQ(r){let e=ge(r),t=e.length%32;return t?rt([e,hN.slice(t)]):X(e)}var MQ=An(fN,32),kQ=An(dN,32),cN={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},u2=["name","version","chainId","verifyingContract","salt"];function lN(r){return function(e){return O(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}var FQ={name:lN("name"),version:lN("version"),chainId:function(r){let e=ie(r,"domain.chainId");return O(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):Wi(e)},verifyingContract:function(r){try{return Pe(r).toLowerCase()}catch{}O(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){let e=ge(r,"domain.salt");return O(e.length===32,'invalid domain value "salt"',"domain.salt",r),X(e)}};function h2(r){{let e=r.match(/^(u?)int(\d+)$/);if(e){let t=e[1]==="",n=parseInt(e[2]);O(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",r);let i=xi(RQ,t?n-1:n),s=t?(i+fN)*DQ:dN;return function(o){let a=ie(o,"value");return O(a>=s&&a<=i,`value out-of-bounds for ${r}`,"value",a),An(t?Su(a,256):a,32)}}}{let e=r.match(/^bytes(\d+)$/);if(e){let t=parseInt(e[1]);return O(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(n){let i=ge(n);return O(i.length===t,`invalid length for ${r}`,"value",n),OQ(n)}}}switch(r){case"address":return function(e){return Vn(Pe(e),32)};case"bool":return function(e){return e?MQ:kQ};case"bytes":return function(e){return at(e)};case"string":return function(e){return Xi(e)}}return null}function uN(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}function b0(r){let e=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:r}}var ju=class r{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(e){this.#t=new Map,this.#r=new Map;let t=new Map,n=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:l,type:u})=>{let{base:h,index:m}=b0(u);return h==="int"&&!e.int&&(h="int256"),h==="uint"&&!e.uint&&(h="uint256"),{name:l,type:h+(m||"")}}),t.set(c,new Set),n.set(c,[]),i.set(c,new Set)}),this.#e=JSON.stringify(s);for(let c in s){let l=new Set;for(let u of s[c]){O(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);let h=b0(u.type).base;O(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",e),!h2(h)&&(O(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",e),n.get(h).push(c),t.get(c).add(h))}}let o=Array.from(n.keys()).filter(c=>n.get(c).length===0);O(o.length!==0,"missing primary type","types",e),O(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),se(this,{primaryType:o[0]});function a(c,l){O(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(let u of t.get(c))if(n.has(u)){a(u,l);for(let h of l)i.get(h).add(u)}l.delete(c)}a(this.primaryType,new Set);for(let[c,l]of i){let u=Array.from(l);u.sort(),this.#t.set(c,uN(c,s[c])+u.map(h=>uN(h,s[h])).join(""))}}getEncoder(e){let t=this.#r.get(e);return t||(t=this.#n(e),this.#r.set(e,t)),t}#n(e){{let i=h2(e);if(i)return i}let t=b0(e).array;if(t){let i=t.prefix,s=this.getEncoder(i);return o=>{O(t.count===-1||t.count===o.length,`array length mismatch; expected length ${t.count}`,"value",o);let a=o.map(s);return this.#t.has(i)&&(a=a.map(at)),at(rt(a))}}let n=this.types[e];if(n){let i=Xi(this.#t.get(e));return s=>{let o=n.map(({name:a,type:c})=>{let l=this.getEncoder(c)(s[a]);return this.#t.has(c)?at(l):l});return o.unshift(i),rt(o)}}O(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#t.get(e);return O(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return at(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(h2(e))return n(e,t);let i=b0(e).array;if(i)return O(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(o=>this._visit(i.prefix,o,n));let s=this.types[e];if(s)return s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,t[a],n),o),{});O(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new r(e)}static getPrimaryType(e){return r.from(e).primaryType}static hashStruct(e,t,n){return r.from(t).hashStruct(e,n)}static hashDomain(e){let t=[];for(let n in e){if(e[n]==null)continue;let i=cN[n];O(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>u2.indexOf(n.name)-u2.indexOf(i.name)),r.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return rt(["0x1901",r.hashDomain(e),r.from(t).hash(n)])}static hash(e,t,n){return at(r.encode(e,t,n))}static resolveNames(e,t,n,i){return p(this,null,function*(){e=Object.assign({},e);for(let a in e)e[a]==null&&delete e[a];let s={};e.verifyingContract&&!Oe(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");let o=r.from(t);o.visit(n,(a,c)=>(a==="address"&&!Oe(c,20)&&(s[c]="0x"),c));for(let a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,t,n){r.hashDomain(e);let i={},s=[];u2.forEach(c=>{let l=e[c];l!=null&&(i[c]=FQ[c](l),s.push({name:c,type:cN[c]}))});let o=r.from(t);t=o.types;let a=Object.assign({},t);return O(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return X(ge(l));if(c.match(/^u?int/))return ie(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return O(typeof l=="string","invalid string","value",l),l}O(!1,"unsupported type","type",c)})}}};function In(r){let e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}var BQ="external public payable override",UQ=In(BQ.split(" ")),CN="constant external internal payable private public pure view override",LQ=In(CN.split(" ")),_N="constructor error event fallback function receive struct",AN=In(_N.split(" ")),SN="calldata memory storage payable indexed",VQ=In(SN.split(" ")),jQ="tuple returns",HQ=[_N,SN,jQ,CN].join(" "),qQ=In(HQ.split(" ")),zQ={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},$Q=new RegExp("^(\\s*)"),GQ=new RegExp("^([0-9]+)"),KQ=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),IN=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),PN=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),es=class r{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new r(this.#t)}reset(){this.#e=0}#r(e=0,t=0){return new r(this.#t.slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))}popKeyword(e){let t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");let t=this.#r(this.#e+1,e.match+1);return this.#e=e.match+1,t}popParams(){let e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");let t=[];for(;this.#e<e.match-1;){let n=this.peek().linkNext;t.push(this.#r(this.#e+1,n)),this.#e=n}return this.#e=e.match+1,t}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){let t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#e++,e}toString(){let e=[];for(let t=this.#e;t<this.#t.length;t++){let n=this.#t[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};function Pa(r){let e=[],t=o=>{let a=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${a} at ${s}: ${o}`)},n=[],i=[],s=0;for(;s<r.length;){let o=r.substring(s),a=o.match($Q);a&&(s+=a[1].length,o=r.substring(s));let c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let l=zQ[o[0]]||"";if(l){if(c.type=l,c.text=o[0],s++,l==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){let h=e.pop().text;u=h+u,e[e.length-1].value=ve(h)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(KQ),a){if(c.text=a[1],s+=c.text.length,qQ.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(PN)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(GQ),a){c.text=a[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new es(e.map(o=>Object.freeze(o)))}function pN(r,e){let t=[];for(let n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function v0(r,e){if(e.peekKeyword(AN)){let t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function So(r,e){let t=new Set;for(;;){let n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function TN(r){let e=So(r,LQ);return pN(e,In("constant payable nonpayable".split(" "))),pN(e,In("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Ao(r,e){return r.popParams().map(t=>Or.from(t,e))}function NN(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return ie(r.pop().text);throw new Error("invalid gas")}return null}function Lc(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}var WQ=new RegExp(/^(.*)\[([0-9]*)\]$/);function mN(r){let e=r.match(PN);if(O(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){let t=parseInt(e[2]);O(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){let t=parseInt(e[3]);O(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}var Tt={},jn=Symbol.for("_ethers_internal"),gN="_ParamTypeInternal",bN="_ErrorInternal",yN="_EventInternal",vN="_ConstructorInternal",wN="_FallbackInternal",xN="_FunctionInternal",EN="_StructInternal",Or=class r{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,n,i,s,o,a,c){if($i(e,Tt,"ParamType"),Object.defineProperty(this,jn,{value:gN}),o&&(o=Object.freeze(o.slice())),i==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(i==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");se(this,{name:t,type:n,baseType:i,indexed:s,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){let n=this.name||"";if(this.isArray()){let s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}let i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");let n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");let n=this;return e.map((i,s)=>n.components[s].walk(i,t))}return t(this.type,e)}#e(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");let o=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{o.#e(e,c,n,u=>{a[l]=u})}),i(a);return}if(this.isTuple()){let o=this.components,a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{o[l].#e(e,c,n,u=>{a[l]=u})}),i(a);return}let s=n(this.type,t);s.then?e.push(function(){return p(this,null,function*(){i(yield s)})}()):i(s)}walkAsync(e,t){return p(this,null,function*(){let n=[],i=[e];return this.#e(n,e,t,s=>{i[0]=s}),n.length&&(yield Promise.all(n)),i[0]})}static from(e,t){if(r.isParamType(e))return e;if(typeof e=="string")try{return r.from(Pa(e),t)}catch{O(!1,"invalid param type","obj",e)}else if(e instanceof es){let a="",c="",l=null;So(e,In(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(v=>r.from(v)),a=`tuple(${l.map(v=>v.format()).join(",")})`):(a=mN(e.popType("TYPE")),c=a);let u=null,h=null;for(;e.length&&e.peekType("BRACKET");){let v=e.pop();u=new r(Tt,"",a,c,null,l,h,u),h=v.value,a+=v.text,c="array",l=null}let m=null;if(So(e,VQ).has("indexed")){if(!t)throw new Error("");m=!0}let f=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new r(Tt,f,a,c,m,l,h,u)}let n=e.name;O(!n||typeof n=="string"&&n.match(IN),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(O(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,o=s.match(WQ);if(o){let a=parseInt(o[2]||"-1"),c=r.from({type:o[1],components:e.components});return new r(Tt,n||"",s,"array",i,null,a,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){let a=e.components!=null?e.components.map(l=>r.from(l)):null;return new r(Tt,n||"",s,"tuple",i,a,null,null)}return s=mN(e.type),new r(Tt,n||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[jn]===gN}},Vc=class r{type;inputs;constructor(e,t,n){$i(e,Tt,"Fragment"),n=Object.freeze(n.slice()),se(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{r.from(JSON.parse(e))}catch{}return r.from(Pa(e))}if(e instanceof es)switch(e.peekKeyword(AN)){case"constructor":return Bc.from(e);case"error":return Ci.from(e);case"event":return Fc.from(e);case"fallback":case"receive":return y0.from(e);case"function":return Uc.from(e);case"struct":return nf.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Bc.from(e);case"error":return Ci.from(e);case"event":return Fc.from(e);case"fallback":case"receive":return y0.from(e);case"function":return Uc.from(e);case"struct":return nf.from(e)}H(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}O(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Bc.isFragment(e)}static isError(e){return Ci.isFragment(e)}static isEvent(e){return Fc.isFragment(e)}static isFunction(e){return Uc.isFragment(e)}static isStruct(e){return nf.isFragment(e)}},Hu=class extends Vc{name;constructor(e,t,n,i){super(e,t,i),O(typeof n=="string"&&n.match(IN),"invalid identifier","name",n),i=Object.freeze(i.slice()),se(this,{name:n})}};function sf(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}var Ci=class r extends Hu{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,jn,{value:bN})}get selector(){return Xi(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+sf(e,this.inputs)),t.join(" ")}static from(e){if(r.isFragment(e))return e;if(typeof e=="string")return r.from(Pa(e));if(e instanceof es){let t=v0("error",e),n=Ao(e);return Lc(e),new r(Tt,t,n)}return new r(Tt,e.name,e.inputs?e.inputs.map(Or.from):[])}static isFragment(e){return e&&e[jn]===bN}},Fc=class r extends Hu{anonymous;constructor(e,t,n,i){super(e,"event",t,n),Object.defineProperty(this,jn,{value:yN}),se(this,{anonymous:i})}get topicHash(){return Xi(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t=[];return e!=="sighash"&&t.push("event"),t.push(this.name+sf(e,this.inputs)),e!=="sighash"&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return t=(t||[]).map(i=>Or.from(i)),new r(Tt,e,t,!1).topicHash}static from(e){if(r.isFragment(e))return e;if(typeof e=="string")try{return r.from(Pa(e))}catch{O(!1,"invalid event fragment","obj",e)}else if(e instanceof es){let t=v0("event",e),n=Ao(e,!0),i=!!So(e,In(["anonymous"])).has("anonymous");return Lc(e),new r(Tt,t,n,i)}return new r(Tt,e.name,e.inputs?e.inputs.map(t=>Or.from(t,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[jn]===yN}},Bc=class r extends Vc{payable;gas;constructor(e,t,n,i,s){super(e,t,n),Object.defineProperty(this,jn,{value:vN}),se(this,{payable:i,gas:s})}format(e){if(H(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t=[`constructor${sf(e,this.inputs)}`];return this.payable&&t.push("payable"),this.gas!=null&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(r.isFragment(e))return e;if(typeof e=="string")try{return r.from(Pa(e))}catch{O(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof es){So(e,In(["constructor"]));let t=Ao(e),n=!!So(e,UQ).has("payable"),i=NN(e);return Lc(e),new r(Tt,"constructor",t,n,i)}return new r(Tt,"constructor",e.inputs?e.inputs.map(Or.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[jn]===vN}},y0=class r extends Vc{payable;constructor(e,t,n){super(e,"fallback",t),Object.defineProperty(this,jn,{value:wN}),se(this,{payable:n})}format(e){let t=this.inputs.length===0?"receive":"fallback";if(e==="json"){let n=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:n})}return`${t}()${this.payable?" payable":""}`}static from(e){if(r.isFragment(e))return e;if(typeof e=="string")try{return r.from(Pa(e))}catch{O(!1,"invalid fallback fragment","obj",e)}else if(e instanceof es){let t=e.toString(),n=e.peekKeyword(In(["fallback","receive"]));if(O(n,"type must be fallback or receive","obj",t),e.popKeyword(In(["fallback","receive"]))==="receive"){let a=Ao(e);return O(a.length===0,"receive cannot have arguments","obj.inputs",a),So(e,In(["payable"])),Lc(e),new r(Tt,[],!0)}let s=Ao(e);s.length?O(s.length===1&&s[0].type==="bytes","invalid fallback inputs","obj.inputs",s.map(a=>a.format("minimal")).join(", ")):s=[Or.from("bytes")];let o=TN(e);if(O(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),So(e,In(["returns"])).has("returns")){let a=Ao(e);O(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Lc(e),new r(Tt,s,o==="payable")}if(e.type==="receive")return new r(Tt,[],!0);if(e.type==="fallback"){let t=[Or.from("bytes")],n=e.stateMutability==="payable";return new r(Tt,t,n)}O(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[jn]===wN}},Uc=class r extends Hu{constant;outputs;stateMutability;payable;gas;constructor(e,t,n,i,s,o){super(e,"function",t,i),Object.defineProperty(this,jn,{value:xN}),s=Object.freeze(s.slice()),se(this,{constant:n==="view"||n==="pure",gas:o,outputs:s,payable:n==="payable",stateMutability:n})}get selector(){return Xi(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let t=[];return e!=="sighash"&&t.push("function"),t.push(this.name+sf(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(sf(e,this.outputs))),this.gas!=null&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return t=(t||[]).map(i=>Or.from(i)),new r(Tt,e,"view",t,[],null).selector}static from(e){if(r.isFragment(e))return e;if(typeof e=="string")try{return r.from(Pa(e))}catch{O(!1,"invalid function fragment","obj",e)}else if(e instanceof es){let n=v0("function",e),i=Ao(e),s=TN(e),o=[];So(e,In(["returns"])).has("returns")&&(o=Ao(e));let a=NN(e);return Lc(e),new r(Tt,n,s,i,o,a)}let t=e.stateMutability;return t==null&&(t="payable",typeof e.constant=="boolean"?(t="view",e.constant||(t="payable",typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(t="nonpayable")),new r(Tt,e.name,t,e.inputs?e.inputs.map(Or.from):[],e.outputs?e.outputs.map(Or.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[jn]===xN}},nf=class r extends Hu{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,jn,{value:EN})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return r.from(Pa(e))}catch{O(!1,"invalid struct fragment","obj",e)}else if(e instanceof es){let t=v0("struct",e),n=Ao(e);return Lc(e),new r(Tt,t,n)}return new r(Tt,e.name,e.inputs?e.inputs.map(Or.from):[])}static isFragment(e){return e&&e[jn]===EN}};var ts=new Map;ts.set(0,"GENERIC_PANIC");ts.set(1,"ASSERT_FALSE");ts.set(17,"OVERFLOW");ts.set(18,"DIVIDE_BY_ZERO");ts.set(33,"ENUM_RANGE_ERROR");ts.set(34,"BAD_STORAGE_DATA");ts.set(49,"STACK_UNDERFLOW");ts.set(50,"ARRAY_RANGE_ERROR");ts.set(65,"OUT_OF_MEMORY");ts.set(81,"UNINITIALIZED_FUNCTION_CALL");var JQ=new RegExp(/^bytes([0-9]*)$/),YQ=new RegExp(/^(u?int)([0-9]*)$/),d2=null,DN=1024;function QQ(r,e,t,n){let i="missing revert data",s=null,o=null,a=null;if(t){i="execution reverted";let l=ge(t);if(t=X(t),l.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(l.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(X(l.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(X(l.slice(0,4))==="0x4e487b71")try{let u=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},s=`Panic due to ${ts.get(u)||"UNKNOWN"}(${u})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}let c={to:e.to?Pe(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Pe(e.from)),We(i,"CALL_EXCEPTION",{action:r,data:t,reason:s,transaction:c,invocation:o,revert:a})}var Ta=class r{#e(e){if(e.isArray())return new r0(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Rc(e.components.map(n=>this.#e(n)),e.name);switch(e.baseType){case"address":return new e0(e.name);case"bool":return new n0(e.name);case"string":return new c0(e.name);case"bytes":return new i0(e.name);case"":return new o0(e.name)}let t=e.type.match(YQ);if(t){let n=parseInt(t[2]||"256");return O(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new a0(n/8,t[1]==="int",e.name)}if(t=e.type.match(JQ),t){let n=parseInt(t[1]);return O(n!==0&&n<=32,"invalid bytes length","param",e),new s0(n,e.name)}O(!1,"invalid type","type",e.type)}getDefaultValue(e){let t=e.map(i=>this.#e(Or.from(i)));return new Rc(t,"_").defaultValue()}encode(e,t){_u(t.length,e.length,"types/values length mismatch");let n=e.map(o=>this.#e(Or.from(o))),i=new Rc(n,"_"),s=new Ic;return i.encode(s,t),s.data}decode(e,t,n){let i=e.map(o=>this.#e(Or.from(o)));return new Rc(i,"_").decode(new Bg(t,n,DN))}static _setDefaultMaxInflation(e){O(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),DN=e}static defaultAbiCoder(){return d2==null&&(d2=new r),d2}static getBuiltinCallException(e,t,n){return QQ(e,t,n,r.defaultAbiCoder())}};var w0=class{fragment;name;signature;topic;args;constructor(e,t,n){let i=e.name,s=e.format();se(this,{fragment:e,name:i,signature:s,topic:t,args:n})}},x0=class{fragment;name;args;signature;selector;value;constructor(e,t,n,i){let s=e.name,o=e.format();se(this,{fragment:e,name:s,args:n,signature:o,selector:t,value:i})}},E0=class{fragment;name;args;signature;selector;constructor(e,t,n){let i=e.name,s=e.format();se(this,{fragment:e,name:i,args:n,signature:s,selector:t})}},of=class{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){se(this,{hash:e,_isIndexed:!0})}},RN={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},ON={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&RN[r.toString()]&&(e=RN[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}},af=class r{fragments;deploy;fallback;receive;#e;#t;#r;#n;constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,this.#r=new Map,this.#e=new Map,this.#t=new Map;let n=[];for(let o of t)try{n.push(Vc.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}se(this,{fragments:Object.freeze(n)});let i=null,s=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}se(this,{deploy:o});return;case"fallback":o.inputs.length===0?s=!0:(O(!i||o.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,o),i=o,s=i.payable);return;case"function":c=this.#r;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}let l=o.format();c.has(l)||c.set(l,o)}),this.deploy||se(this,{deploy:Bc.from("constructor()")}),se(this,{fallback:i,receive:s})}format(e){let t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){let e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return Ta.defaultAbiCoder()}#i(e,t,n){if(Oe(e)){let s=e.toLowerCase();for(let o of this.#r.values())if(s===o.selector)return o;return null}if(e.indexOf("(")===-1){let s=[];for(let[o,a]of this.#r)o.split("(")[0]===e&&s.push(a);if(t){let o=t.length>0?t[t.length-1]:null,a=t.length,c=!0;yt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=s.length-1;l>=0;l--){let u=s[l].inputs.length;u!==a&&(!c||u!==a-1)&&s.splice(l,1)}for(let l=s.length-1;l>=0;l--){let u=s[l].inputs;for(let h=0;h<t.length;h++)if(yt.isTyped(t[h])){if(h>=u.length){if(t[h].type==="overrides")continue;s.splice(l,1);break}if(t[h].type!==u[h].baseType){s.splice(l,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){let o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){let o=s.map(a=>JSON.stringify(a.format())).join(", ");O(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return s[0]}let i=this.#r.get(Uc.from(e).format());return i||null}getFunctionName(e){let t=this.#i(e,null,!1);return O(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#i(e,null,!1)}getFunction(e,t){return this.#i(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#r.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){let i=t[n];e(this.#r.get(i),n)}}#o(e,t,n){if(Oe(e)){let s=e.toLowerCase();for(let o of this.#t.values())if(s===o.topicHash)return o;return null}if(e.indexOf("(")===-1){let s=[];for(let[o,a]of this.#t)o.split("(")[0]===e&&s.push(a);if(t){for(let o=s.length-1;o>=0;o--)s[o].inputs.length<t.length&&s.splice(o,1);for(let o=s.length-1;o>=0;o--){let a=s[o].inputs;for(let c=0;c<t.length;c++)if(yt.isTyped(t[c])&&t[c].type!==a[c].baseType){s.splice(o,1);break}}}if(s.length===0)return null;if(s.length>1&&n){let o=s.map(a=>JSON.stringify(a.format())).join(", ");O(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return s[0]}let i=this.#t.get(Fc.from(e).format());return i||null}getEventName(e){let t=this.#o(e,null,!1);return O(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,t){return this.#o(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#t.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){let i=t[n];e(this.#t.get(i),n)}}getError(e,t){if(Oe(e)){let i=e.toLowerCase();if(ON[i])return Ci.from(ON[i].signature);for(let s of this.#e.values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){let i=[];for(let[s,o]of this.#e)s.split("(")[0]===e&&i.push(o);if(i.length===0)return e==="Error"?Ci.from("error Error(string)"):e==="Panic"?Ci.from("error Panic(uint256)"):null;if(i.length>1){let s=i.map(o=>JSON.stringify(o.format())).join(", ");O(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Ci.from(e).format(),e==="Error(string)")return Ci.from("error Error(string)");if(e==="Panic(uint256)")return Ci.from("error Panic(uint256)");let n=this.#e.get(e);return n||null}forEachError(e){let t=Array.from(this.#e.keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){let i=t[n];e(this.#e.get(i),n)}}_decodeParams(e,t){return this.#n.decode(e,t)}_encodeParams(e,t){return this.#n.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){let n=this.getError(e);O(n,"unknown error","fragment",e),e=n}return O(dt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,dt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){let n=this.getError(e);O(n,"unknown error","fragment",e),e=n}return rt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){let n=this.getFunction(e);O(n,"unknown function","fragment",e),e=n}return O(dt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,dt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){let n=this.getFunction(e);O(n,"unknown function","fragment",e),e=n}return rt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){let s=this.getFunction(e);O(s,"unknown function","fragment",e),e=s}let n="invalid length for result data",i=qt(t);if(i.length%32===0)try{return this.#n.decode(e.outputs,i)}catch{n="could not decode result data"}H(!1,n,"BAD_DATA",{value:X(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){let n=ge(e,"data"),i=Ta.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){let a=X(n.slice(0,4)),c=this.getError(a);if(c)try{let l=this.#n.decode(c.inputs,n.slice(4));i.revert={name:c.name,signature:c.format(),args:l},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}let o=this.parseTransaction(t);return o&&(i.invocation={method:o.name,signature:o.signature,args:o.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){let n=this.getFunction(e);O(n,"unknown function","fragment",e),e=n}return X(this.#n.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){let s=this.getEvent(e);O(s,"unknown event","eventFragment",e),e=s}H(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let n=[];e.anonymous||n.push(e.topicHash);let i=(s,o)=>s.type==="string"?Xi(o):s.type==="bytes"?at(X(o)):(s.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":s.type.match(/^u?int/)?o=An(o):s.type.match(/^bytes/)?o=Ig(o,32):s.type==="address"&&this.#n.encode(["address"],[o]),Vn(X(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){O(s==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?O(!1,"filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){let o=this.getEvent(e);O(o,"unknown event","eventFragment",e),e=o}let n=[],i=[],s=[];return e.anonymous||n.push(e.topicHash),O(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{let c=t[a];if(o.indexed)if(o.type==="string")n.push(Xi(c));else if(o.type==="bytes")n.push(at(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this.#n.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this.#n.encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){let b=this.getEvent(e);O(b,"unknown event","eventFragment",e),e=b}if(n!=null&&!e.anonymous){let b=e.topicHash;O(Oe(n[0],32)&&n[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((b,f)=>{b.indexed?b.type==="string"||b.type==="bytes"||b.baseType==="tuple"||b.baseType==="array"?(i.push(Or.from({type:"bytes32",name:b.name})),o.push(!0)):(i.push(b),o.push(!1)):(s.push(b),o.push(!1))});let a=n!=null?this.#n.decode(i,rt(n)):null,c=this.#n.decode(s,t,!0),l=[],u=[],h=0,m=0;return e.inputs.forEach((b,f)=>{let v=null;if(b.indexed)if(a==null)v=new of(null);else if(o[f])v=new of(a[m++]);else try{v=a[m++]}catch(E){v=E}else try{v=c[h++]}catch(E){v=E}l.push(v),u.push(b.name||null)}),vo.fromItems(l,u)}parseTransaction(e){let t=ge(e.data,"tx.data"),n=ie(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(X(t.slice(0,4)));if(!i)return null;let s=this.#n.decode(i.inputs,t.slice(4));return new x0(i,i.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new w0(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=X(e),n=this.getError(dt(t,0,4));if(!n)return null;let i=this.#n.decode(n.inputs,dt(t,4));return new E0(n,n.selector,i)}static from(e){return e instanceof r?e:typeof e=="string"?new r(JSON.parse(e)):typeof e.formatJson=="function"?new r(e.formatJson()):typeof e.format=="function"?new r(e.format("json")):new r(e)}};var MN=BigInt(0);function qu(r){return r??null}function er(r){return r==null?null:r.toString()}var zu=class{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,n){se(this,{gasPrice:qu(e),maxFeePerGas:qu(t),maxPriorityFeePerGas:qu(n)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:er(e),maxFeePerGas:er(t),maxPriorityFeePerGas:er(n)}}};function Da(r){let e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=X(r.data));let t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(let i of t)!(i in r)||r[i]==null||(e[i]=ie(r[i],`request.${i}`));let n="type,nonce".split(/,/);for(let i of n)!(i in r)||r[i]==null||(e[i]=ve(r[i],`request.${i}`));return r.accessList&&(e.accessList=ri(r.accessList)),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(e.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(e.kzg=r.kzg),"blobs"in r&&r.blobs&&(e.blobs=r.blobs.map(i=>pa(i)?X(i):Object.assign({},i))),e}var cf=class{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,t){this.#e=e.transactions.map(n=>typeof n!="string"?new Na(n,t):n),se(this,{provider:t,hash:qu(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:qu(e.prevRandao),extraData:e.extraData,baseFeePerGas:qu(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){let e=this.#e.slice();return e.length===0?[]:(H(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:i,gasUsed:s,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:h,parentBeaconBlockRoot:m,stateRoot:b,receiptsRoot:f,timestamp:v,transactions:E}=this;return{_type:"Block",baseFeePerGas:er(e),difficulty:er(t),extraData:n,gasLimit:er(i),gasUsed:er(s),blobGasUsed:er(this.blobGasUsed),excessBlobGas:er(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:h,timestamp:v,parentBeaconBlockRoot:m,stateRoot:b,receiptsRoot:f,transactions:E}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}getTransaction(e){return p(this,null,function*(){let t;if(typeof e=="number")t=this.#e[e];else{let n=e.toLowerCase();for(let i of this.#e)if(typeof i=="string"){if(i!==n)continue;t=i;break}else{if(i.hash!==n)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?yield this.provider.getTransaction(t):t})}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(let n of t)if(n.hash===e)return n;O(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return XQ(this)}},rs=class{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let n=Object.freeze(e.topics.slice());se(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:o,topics:a,transactionHash:c,transactionIndex:l}}getBlock(){return p(this,null,function*(){let e=yield this.provider.getBlock(this.blockHash);return H(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e})}getTransaction(){return p(this,null,function*(){let e=yield this.provider.getTransaction(this.transactionHash);return H(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e})}getTransactionReceipt(){return p(this,null,function*(){let e=yield this.provider.getTransactionReceipt(this.transactionHash);return H(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e})}removedEvent(){return eZ(this)}},jc=class{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,t){this.#e=Object.freeze(e.logs.map(i=>new rs(i,t)));let n=MN;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),se(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){let{to:e,from:t,contractAddress:n,hash:i,index:s,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:er(this.cumulativeGasUsed),from:t,gasPrice:er(this.gasPrice),blobGasUsed:er(this.blobGasUsed),blobGasPrice:er(this.blobGasPrice),gasUsed:er(this.gasUsed),hash:i,index:s,logs:l,logsBloom:c,root:h,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}getBlock(){return p(this,null,function*(){let e=yield this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e})}getTransaction(){return p(this,null,function*(){let e=yield this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e})}getResult(){return p(this,null,function*(){return yield this.provider.getTransactionResult(this.hash)})}confirmations(){return p(this,null,function*(){return(yield this.provider.getBlockNumber())-this.blockNumber+1})}removedEvent(){return FN(this)}reorderedEvent(e){return H(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),kN(this,e)}},Na=class r{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;#e;constructor(e,t){this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.#e=-1}toJSON(){let{blockNumber:e,blockHash:t,index:n,hash:i,type:s,to:o,from:a,nonce:c,data:l,signature:u,accessList:h,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:e,blockHash:t,blobVersionedHashes:m,chainId:er(this.chainId),data:l,from:a,gasLimit:er(this.gasLimit),gasPrice:er(this.gasPrice),hash:i,maxFeePerGas:er(this.maxFeePerGas),maxPriorityFeePerGas:er(this.maxPriorityFeePerGas),maxFeePerBlobGas:er(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:n,type:s,value:er(this.value)}}getBlock(){return p(this,null,function*(){let e=this.blockNumber;if(e==null){let n=yield this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;let t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t})}getTransaction(){return p(this,null,function*(){return this.provider.getTransaction(this.hash)})}confirmations(){return p(this,null,function*(){if(this.blockNumber==null){let{tx:t,blockNumber:n}=yield Ht({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return(yield this.provider.getBlockNumber())-this.blockNumber+1})}wait(e,t){return p(this,null,function*(){let n=e??1,i=t??0,s=this.#e,o=-1,a=s===-1,c=()=>p(this,null,function*(){if(a)return null;let{blockNumber:m,nonce:b}=yield Ht({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){s=m;return}if(a)return null;let f=yield this.getTransaction();if(!(f&&f.blockNumber!=null))for(o===-1&&(o=s-3,o<this.#e&&(o=this.#e));o<=m;){if(a)return null;let v=yield this.provider.getBlock(o,!0);if(v==null)return;for(let E of v)if(E===this.hash)return;for(let E=0;E<v.length;E++){let I=yield v.getTransaction(E);if(I.from===this.from&&I.nonce===this.nonce){if(a)return null;let N=yield this.provider.getTransactionReceipt(I.hash);if(N==null||m-N.blockNumber+1<n)return;let D="replaced";I.data===this.data&&I.to===this.to&&I.value===this.value?D="repriced":I.data==="0x"&&I.from===I.to&&I.value===MN&&(D="cancelled"),H(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:I.replaceableTransaction(s),hash:I.hash,receipt:N})}}o++}}),l=m=>{if(m==null||m.status!==0)return m;H(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},u=yield this.provider.getTransactionReceipt(this.hash);if(n===0)return l(u);if(u){if((yield u.confirmations())>=n)return l(u)}else if(yield c(),n===0)return null;return yield new Promise((m,b)=>{let f=[],v=()=>{f.forEach(I=>I())};if(f.push(()=>{a=!0}),i>0){let I=setTimeout(()=>{v(),b(We("wait for transaction timeout","TIMEOUT"))},i);f.push(()=>{clearTimeout(I)})}let E=I=>p(this,null,function*(){if((yield I.confirmations())>=n){v();try{m(l(I))}catch(N){b(N)}}});if(f.push(()=>{this.provider.off(this.hash,E)}),this.provider.on(this.hash,E),s>=0){let I=()=>p(this,null,function*(){try{yield c()}catch(N){if(bt(N,"TRANSACTION_REPLACED")){v(),b(N);return}}a||this.provider.once("block",I)});f.push(()=>{this.provider.off("block",I)}),this.provider.once("block",I)}})})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return H(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),FN(this)}reorderedEvent(e){return H(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),H(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),kN(this,e)}replaceableTransaction(e){O(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new r(this,this.provider);return t.#e=e,t}};function XQ(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function kN(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function FN(r){return{orphan:"drop-transaction",tx:r}}function eZ(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}var Hc=class extends rs{interface;fragment;args;constructor(e,t,n){super(e,e.provider);let i=t.decodeEventLog(n,e.data,e.topics);se(this,{args:i,fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}},$u=class extends rs{error;constructor(e,t){super(e,e.provider),se(this,{error:t})}},C0=class extends jc{#e;constructor(e,t,n){super(n,t),this.#e=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(t)try{return new Hc(e,this.#e,t)}catch(n){return new $u(e,n)}return e})}},qc=class r extends Na{#e;constructor(e,t,n){super(n,t),this.#e=e}wait(e,t){return p(this,null,function*(){let n=yield Dn(r.prototype,this,"wait").call(this,e,t);return n==null?null:new C0(this.#e,this.provider,n)})}},Gu=class extends ga{log;constructor(e,t,n,i){super(e,t,n),se(this,{log:i})}getBlock(){return p(this,null,function*(){return yield this.log.getBlock()})}getTransaction(){return p(this,null,function*(){return yield this.log.getTransaction()})}getTransactionReceipt(){return p(this,null,function*(){return yield this.log.getTransactionReceipt()})}},lf=class extends Gu{constructor(e,t,n,i,s){super(e,t,n,new Hc(s,e.interface,i));let o=e.interface.decodeEventLog(i,this.log.data,this.log.topics);se(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};var BN=BigInt(0);function LN(r){return r&&typeof r.call=="function"}function VN(r){return r&&typeof r.estimateGas=="function"}function S0(r){return r&&typeof r.resolveName=="function"}function jN(r){return r&&typeof r.sendTransaction=="function"}function HN(r){if(r!=null){if(S0(r))return r;if(r.provider)return r.provider}}var f2=class{#e;fragment;constructor(e,t,n){if(se(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");let i=$c(e.runner,"resolveName"),s=S0(i)?i:null;this.#e=function(){return p(this,null,function*(){let o=yield Promise.all(t.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(u,h)=>u==="address"?Array.isArray(h)?Promise.all(h.map(m=>Zt(m,s))):Zt(h,s):h)));return e.interface.encodeFilterTopics(t,o)})}()}getTopicFilter(){return this.#e}};function $c(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function zc(r){return r==null?null:r.provider||null}function qN(r,e){return p(this,null,function*(){let t=yt.dereference(r,"overrides");O(typeof t=="object","invalid overrides parameter","overrides",r);let n=Da(t);return O(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),O(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n})}function tZ(r,e,t){return p(this,null,function*(){let n=$c(r,"resolveName"),i=S0(n)?n:null;return yield Promise.all(e.map((s,o)=>s.walkAsync(t[o],(a,c)=>(c=yt.dereference(c,a),a==="address"?Zt(c,i):c))))})}function rZ(r){let e=function(o){return p(this,null,function*(){let a=yield qN(o,["data"]);a.to=yield r.getAddress(),a.from&&(a.from=yield Zt(a.from,HN(r.runner)));let c=r.interface,l=ie(a.value||BN,"overrides.value")===BN,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&O(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),O(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);let h=c.receive||c.fallback&&c.fallback.payable;return O(h||l,"cannot send value to non-payable fallback","overrides.value",a.value),O(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a})},t=function(o){return p(this,null,function*(){let a=$c(r.runner,"call");H(LN(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let c=yield e(o);try{return yield a.call(c)}catch(l){throw Cc(l)&&l.data?r.interface.makeError(l.data,c):l}})},n=function(o){return p(this,null,function*(){let a=r.runner;H(jN(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let c=yield a.sendTransaction(yield e(o)),l=zc(r.runner);return new qc(r.interface,l,c)})},i=function(o){return p(this,null,function*(){let a=$c(r.runner,"estimateGas");return H(VN(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),yield a.estimateGas(yield e(o))})},s=o=>p(this,null,function*(){return yield n(o)});return se(s,{_contract:r,estimateGas:i,populateTransaction:e,send:n,staticCall:t}),s}function nZ(r,e){let t=function(...l){let u=r.interface.getFunction(e,l);return H(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},n=function(...l){return p(this,null,function*(){let u=t(...l),h={};if(u.inputs.length+1===l.length&&(h=yield qN(l.pop()),h.from&&(h.from=yield Zt(h.from,HN(r.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");let m=yield tZ(r.runner,u.inputs,l);return Object.assign({},h,yield Ht({to:r.getAddress(),data:r.interface.encodeFunctionData(u,m)}))})},i=function(...l){return p(this,null,function*(){let u=yield a(...l);return u.length===1?u[0]:u})},s=function(...l){return p(this,null,function*(){let u=r.runner;H(jN(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let h=yield u.sendTransaction(yield n(...l)),m=zc(r.runner);return new qc(r.interface,m,h)})},o=function(...l){return p(this,null,function*(){let u=$c(r.runner,"estimateGas");return H(VN(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),yield u.estimateGas(yield n(...l))})},a=function(...l){return p(this,null,function*(){let u=$c(r.runner,"call");H(LN(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let h=yield n(...l),m="0x";try{m=yield u.call(h)}catch(f){throw Cc(f)&&f.data?r.interface.makeError(f.data,h):f}let b=t(...l);return r.interface.decodeFunctionResult(b,m)})},c=(...l)=>p(this,null,function*(){return t(...l).constant?yield i(...l):yield s(...l)});return se(c,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:o,populateTransaction:n,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{let l=r.interface.getFunction(e);return H(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function iZ(r,e){let t=function(...i){let s=r.interface.getEvent(e,i);return H(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},n=function(...i){return new f2(r,t(...i),i)};return se(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{let i=r.interface.getEvent(e);return H(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),n}var A0=Symbol.for("_ethersInternal_contract"),zN=new WeakMap;function sZ(r,e){zN.set(r[A0],e)}function ni(r){return zN.get(r[A0])}function oZ(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}function g2(r,e){return p(this,null,function*(){let t,n=null;if(Array.isArray(e)){let s=function(o){if(Oe(o,32))return o;let a=r.interface.getEvent(o);return O(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(s):s(o))}else e==="*"?t=[null]:typeof e=="string"?Oe(e,32)?t=[e]:(n=r.interface.getEvent(e),O(n,"unknown fragment","event",e),t=[n.topicHash]):oZ(e)?t=yield e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):O(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){let o=Array.from(new Set(s.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return s.toLowerCase()});let i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:n,tag:i,topics:t}})}function uf(r,e){return p(this,null,function*(){let{subs:t}=ni(r);return t.get((yield g2(r,e)).tag)||null})}function UN(r,e,t){return p(this,null,function*(){let n=zc(r.runner);H(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});let{fragment:i,tag:s,topics:o}=yield g2(r,t),{addr:a,subs:c}=ni(r),l=c.get(s);if(!l){let h={address:a||r,topics:o},m=E=>{let I=i;if(I==null)try{I=r.interface.getEvent(E.topics[0])}catch{}if(I){let N=I,D=i?r.interface.decodeEventLog(i,E.data,E.topics):[];m2(r,t,D,F=>new lf(r,F,t,N,E))}else m2(r,t,[],N=>new Gu(r,N,t,E))},b=[];l={tag:s,listeners:[],start:()=>{b.length||b.push(n.on(h,m))},stop:()=>p(this,null,function*(){if(b.length==0)return;let E=b;b=[],yield Promise.all(E),n.off(h,m)})},c.set(s,l)}return l})}var p2=Promise.resolve();function aZ(r,e,t,n){return p(this,null,function*(){yield p2;let i=yield uf(r,e);if(!i)return!1;let s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:o,once:a})=>{let c=Array.from(t);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),i.listeners.length===0&&(i.stop(),ni(r).subs.delete(i.tag)),s>0})}function m2(r,e,t,n){return p(this,null,function*(){try{yield p2}catch{}let i=aZ(r,e,t,n);return p2=i,yield i})}var _0=["then"],hf=class r{target;interface;runner;filters;[A0];fallback;constructor(e,t,n,i){O(typeof e=="string"||Wd(e),"invalid value for Contract target","target",e),n==null&&(n=null);let s=af.from(t);se(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,A0,{value:{}});let o,a=null,c=null;if(i){let h=zc(n);c=new qc(this.interface,h,i)}let l=new Map;if(typeof e=="string")if(Oe(e))a=e,o=Promise.resolve(e);else{let h=$c(n,"resolveName");if(!S0(h))throw We("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(e).then(m=>{if(m==null)throw We("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ni(this).addr=m,m})}else o=e.getAddress().then(h=>{if(h==null)throw new Error("TODO");return ni(this).addr=h,h});sZ(this,{addrPromise:o,addr:a,deployTx:c,subs:l});let u=new Proxy({},{get:(h,m,b)=>{if(typeof m=="symbol"||_0.indexOf(m)>=0)return Reflect.get(h,m,b);try{return this.getEvent(m)}catch(f){if(!bt(f,"INVALID_ARGUMENT")||f.argument!=="key")throw f}},has:(h,m)=>_0.indexOf(m)>=0?Reflect.has(h,m):Reflect.has(h,m)||this.interface.hasEvent(String(m))});return se(this,{filters:u}),se(this,{fallback:s.receive||s.fallback?rZ(this):null}),new Proxy(this,{get:(h,m,b)=>{if(typeof m=="symbol"||m in h||_0.indexOf(m)>=0)return Reflect.get(h,m,b);try{return h.getFunction(m)}catch(f){if(!bt(f,"INVALID_ARGUMENT")||f.argument!=="key")throw f}},has:(h,m)=>typeof m=="symbol"||m in h||_0.indexOf(m)>=0?Reflect.has(h,m):h.interface.hasFunction(m)})}connect(e){return new r(this.target,this.interface,e)}attach(e){return new r(e,this.interface,this.runner)}getAddress(){return p(this,null,function*(){return yield ni(this).addrPromise})}getDeployedCode(){return p(this,null,function*(){let e=zc(this.runner);H(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=yield e.getCode(yield this.getAddress());return t==="0x"?null:t})}waitForDeployment(){return p(this,null,function*(){let e=this.deploymentTransaction();if(e)return yield e.wait(),this;if((yield this.getDeployedCode())!=null)return this;let n=zc(this.runner);return H(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{let o=()=>p(this,null,function*(){try{if((yield this.getDeployedCode())!=null)return i(this);n.once("block",o)}catch(a){s(a)}});o()})})}deploymentTransaction(){return ni(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),nZ(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),iZ(this,e)}queryTransaction(e){return p(this,null,function*(){throw new Error("@TODO")})}queryFilter(e,t,n){return p(this,null,function*(){t==null&&(t=0),n==null&&(n="latest");let{addr:i,addrPromise:s}=ni(this),o=i||(yield s),{fragment:a,topics:c}=yield g2(this,e),l={address:o,topics:c,fromBlock:t,toBlock:n},u=zc(this.runner);return H(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(yield u.getLogs(l)).map(h=>{let m=a;if(m==null)try{m=this.interface.getEvent(h.topics[0])}catch{}if(m)try{return new Hc(h,this.interface,m)}catch(b){return new $u(h,b)}return new rs(h,u)})})}on(e,t){return p(this,null,function*(){let n=yield UN(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this})}once(e,t){return p(this,null,function*(){let n=yield UN(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this})}emit(e,...t){return p(this,null,function*(){return yield m2(this,e,t,null)})}listenerCount(e){return p(this,null,function*(){if(e){let i=yield uf(this,e);return i?i.listeners.length:0}let{subs:t}=ni(this),n=0;for(let{listeners:i}of t.values())n+=i.length;return n})}listeners(e){return p(this,null,function*(){if(e){let i=yield uf(this,e);return i?i.listeners.map(({listener:s})=>s):[]}let{subs:t}=ni(this),n=[];for(let{listeners:i}of t.values())n=n.concat(i.map(({listener:s})=>s));return n})}off(e,t){return p(this,null,function*(){let n=yield uf(this,e);if(!n)return this;if(t){let i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(t==null||n.listeners.length===0)&&(n.stop(),ni(this).subs.delete(n.tag)),this})}removeAllListeners(e){return p(this,null,function*(){if(e){let t=yield uf(this,e);if(!t)return this;t.stop(),ni(this).subs.delete(t.tag)}else{let{subs:t}=ni(this);for(let{tag:n,stop:i}of t.values())i(),t.delete(n)}return this})}addListener(e,t){return p(this,null,function*(){return yield this.on(e,t)})}removeListener(e,t){return p(this,null,function*(){return yield this.off(e,t)})}static buildClass(e){class t extends r{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};function cZ(){return hf}var ii=class extends cZ(){};function b2(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):O(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}var I0=class{name;constructor(e){se(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}encodeAddress(e,t){return p(this,null,function*(){throw new Error("unsupported coin")})}decodeAddress(e,t){return p(this,null,function*(){throw new Error("unsupported coin")})}};var GN=new RegExp("^(ipfs)://(.*)$","i"),$N=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),GN,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")],Ku=class r{provider;address;name;#e;#t;constructor(e,t,n){se(this,{provider:e,address:t,name:n}),this.#e=null,this.#t=new ii(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}supportsWildcard(){return p(this,null,function*(){return this.#e==null&&(this.#e=p(this,null,function*(){try{return yield this.#t.supportsInterface("0x9061b923")}catch(e){if(bt(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})),yield this.#e})}#r(e,t){return p(this,null,function*(){t=(t||[]).slice();let n=this.#t.interface;t.unshift(Vu(this.name));let i=null;(yield this.supportsWildcard())&&(i=n.getFunction(e),H(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[i2(this.name,255),n.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let s=yield this.#t[e](...t);return i?n.decodeFunctionResult(i,s)[0]:s}catch(s){if(!bt(s,"CALL_EXCEPTION"))throw s}return null})}getAddress(e){return p(this,null,function*(){if(e==null&&(e=60),e===60)try{let s=yield this.#r("addr(bytes32)");return s==null||s===_o?null:s}catch(s){if(bt(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648,o=yield this.#r("addr(bytes32,uint)",[s]);if(Oe(o,20))return Pe(o)}let t=null;for(let s of this.provider.plugins)if(s instanceof I0&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;let n=yield this.#r("addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;let i=yield t.decodeAddress(e,n);if(i!=null)return i;H(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})})}getText(e){return p(this,null,function*(){let t=yield this.#r("text(bytes32,string)",[e]);return t==null||t==="0x"?null:t})}getContentHash(){return p(this,null,function*(){let e=yield this.#r("contenthash(bytes32)");if(e==null||e==="0x")return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${Ng("0x"+t[2])}`}let n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;H(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})})}getAvatar(){return p(this,null,function*(){return(yield this._getAvatar()).url})}_getAvatar(){return p(this,null,function*(){let e=[{type:"name",value:this.name}];try{let t=yield this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<$N.length;n++){let i=t.match($N[n]);if(i==null)continue;let s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let o=b2(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{let o=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});let a=yield this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};let l=c[1],u=new ii(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){let v=yield u.ownerOf(l);if(a!==v)return e.push({type:"!owner",value:v}),{url:null,linkage:e};e.push({type:"owner",value:v})}else if(s==="erc1155"){let v=yield u.balanceOf(a,l);if(!v)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:v.toString()})}let h=yield u[o](l);if(h==null||h==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),s==="erc1155"&&(h=h.replace("{id}",An(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=b2(h)),e.push({type:"metadata-url",value:h});let m={},b=yield new gn(h).send();b.assertOk();try{m=b.bodyJson}catch{try{e.push({type:"!metadata",value:b.bodyText})}catch{let I=b.body;return I&&e.push({type:"!metadata",value:X(I)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let f=m.image;if(typeof f!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!f.match(/^(https:\/\/|data:)/i)){if(f.match(GN)==null)return e.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:f}),f=b2(f)}return e.push({type:"url",value:f}),{linkage:e,url:f}}}}}catch{}return{linkage:e,url:null}})}static getEnsAddress(e){return p(this,null,function*(){let t=yield e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return H(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address})}static#n(e,t){return p(this,null,function*(){let n=yield r.getEnsAddress(e);try{let s=yield new ii(n,["function resolver(bytes32) view returns (address)"],e).resolver(Vu(t),{enableCcipRead:!0});return s===_o?null:s}catch(i){throw i}return null})}static fromName(e,t){return p(this,null,function*(){let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;let i=yield r.#n(e,n);if(i!=null){let s=new r(e,i,t);return n!==t&&!(yield s.supportsWildcard())?null:s}n=n.split(".").slice(1).join(".")}})}};var KN=BigInt(0);function Ge(r,e){return function(t){return t==null?e:r(t)}}function P0(r,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(n=>r(n))}}function df(r,e){return t=>{let n={};for(let i in r){let s=i;if(e&&i in e&&!(s in t)){for(let o of e[i])if(o in t){s=o;break}}try{let o=r[i](t[s]);o!==void 0&&(n[i]=o)}catch(o){let a=o instanceof Error?o.message:"not-an-error";H(!1,`invalid value for value.${i} (${a})`,"BAD_DATA",{value:t})}}return n}}function lZ(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}O(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function Wu(r){return O(Oe(r,!0),"invalid data","value",r),r}function hn(r){return O(Oe(r,32),"invalid hash","value",r),r}var uZ=df({address:Pe,blockHash:hn,blockNumber:ve,data:Wu,index:ve,removed:Ge(lZ,!1),topics:P0(hn),transactionHash:hn,transactionIndex:ve},{index:["logIndex"]});function WN(r){return uZ(r)}var hZ=df({hash:Ge(hn),parentHash:hn,parentBeaconBlockRoot:Ge(hn,null),number:ve,timestamp:ve,nonce:Ge(Wu),difficulty:ie,gasLimit:ie,gasUsed:ie,stateRoot:Ge(hn,null),receiptsRoot:Ge(hn,null),blobGasUsed:Ge(ie,null),excessBlobGas:Ge(ie,null),miner:Ge(Pe),prevRandao:Ge(hn,null),extraData:Wu,baseFeePerGas:Ge(ie)},{prevRandao:["mixHash"]});function JN(r){let e=hZ(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:y2(t)),e}var dZ=df({transactionIndex:ve,blockNumber:ve,transactionHash:hn,address:Pe,topics:P0(hn),data:Wu,index:ve,blockHash:hn},{index:["logIndex"]});function fZ(r){return dZ(r)}var pZ=df({to:Ge(Pe,null),from:Ge(Pe,null),contractAddress:Ge(Pe,null),index:ve,root:Ge(X),gasUsed:ie,blobGasUsed:Ge(ie,null),logsBloom:Ge(Wu),blockHash:hn,hash:hn,logs:P0(fZ),blockNumber:ve,cumulativeGasUsed:ie,effectiveGasPrice:Ge(ie),blobGasPrice:Ge(ie,null),status:Ge(ve),type:Ge(ve,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function YN(r){return pZ(r)}function y2(r){r.to&&ie(r.to)===KN&&(r.to="0x0000000000000000000000000000000000000000");let e=df({hash:hn,index:Ge(ve,void 0),type:t=>t==="0x"||t==null?0:ve(t),accessList:Ge(ri,null),blobVersionedHashes:Ge(P0(hn,!0),null),blockHash:Ge(hn,null),blockNumber:Ge(ve,null),transactionIndex:Ge(ve,null),from:Pe,gasPrice:Ge(ie),maxPriorityFeePerGas:Ge(ie),maxFeePerGas:Ge(ie),maxFeePerBlobGas:Ge(ie,null),gasLimit:ie,to:Ge(Pe,null),value:ie,nonce:ve,data:Wu,creates:Ge(Pe,null),chainId:Ge(ie,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(e.to==null&&e.creates==null&&(e.creates=Xg(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=Sn.from(r.signature):e.signature=Sn.from(r),e.chainId==null){let t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&ie(e.blockHash)===KN&&(e.blockHash=null),e}var mZ="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",Ju=class r{name;constructor(e){se(this,{name:e})}clone(){return new r(this.name)}},Yu=class r extends Ju{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let n={effectiveBlock:e};function i(s,o){let a=(t||{})[s];a==null&&(a=o),O(typeof a=="number",`invalud value for ${s}`,"costs",t),n[s]=a}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),se(this,n)}clone(){return new r(this.effectiveBlock,this)}},Qu=class r extends Ju{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),se(this,{address:e||mZ,targetNetwork:t??1})}clone(){return new r(this.address,this.targetNetwork)}};var ff=class extends Ju{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=t}clone(){return this}};var v2=new Map,Pn=class r{#e;#t;#r;constructor(e,t){this.#e=e,this.#t=ie(t),this.#r=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=ie(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===ie(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===ie(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===ie(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#r.values())}attachPlugin(e){if(this.#r.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#r.set(e.name,e.clone()),this}getPlugin(e){return this.#r.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new r(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Yu,n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){let i=ri(e.accessList);for(let s in i)n+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return n}static from(e){if(gZ(),e==null)return r.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){let t=v2.get(e);if(t)return t();if(typeof e=="bigint")return new r("unknown",e);O(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){O(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);let t=new r(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Qu(e.ensAddress,e.ensNetwork)),t}O(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));let n=v2.get(e);n&&O(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),v2.set(e,t)}};function QN(r,e){let t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);let n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function ZN(r){return new ff(r,(e,t,n)=>p(this,null,function*(){n.setHeader("User-Agent","ethers");let i;try{let[s,o]=yield Promise.all([n.send(),e()]);i=s;let a=i.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:QN(a.maxFee,9),maxPriorityFeePerGas:QN(a.maxPriorityFee,9)}}catch(s){H(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:s})}}))}var XN=!1;function gZ(){if(XN)return;XN=!0;function r(e,t,n){let i=function(){let s=new Pn(e,t);return n.ensNetwork!=null&&s.attachPlugin(new Qu(null,n.ensNetwork)),s.attachPlugin(new Yu),(n.plugins||[]).forEach(o=>{s.attachPlugin(o)}),s};Pn.register(e,i),Pn.register(t,i),n.altNames&&n.altNames.forEach(s=>{Pn.register(s,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[ZN("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[ZN("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function w2(r){return JSON.parse(JSON.stringify(r))}var T0=class{#e;#t;#r;#n;constructor(e){this.#e=e,this.#t=null,this.#r=4e3,this.#n=-2}get pollingInterval(){return this.#r}set pollingInterval(e){this.#r=e}#i(){return p(this,null,function*(){try{let e=yield this.#e.getBlockNumber();if(this.#n===-2){this.#n=e;return}if(e!==this.#n){for(let t=this.#n+1;t<=e;t++){if(this.#t==null)return;yield this.#e.emit("block",t)}this.#n=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#r))})}start(){this.#t||(this.#t=this.#e._setTimeout(this.#i.bind(this),this.#r),this.#i())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#n=-2)}resume(){this.start()}},pf=class{#e;#t;#r;constructor(e){this.#e=e,this.#r=!1,this.#t=t=>{this._poll(t,this.#e)}}_poll(e,t){return p(this,null,function*(){throw new Error("sub-classes must override this")})}start(){this.#r||(this.#r=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}},N0=class extends pf{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}_poll(e,t){return p(this,null,function*(){let n=yield t.getBlock(this.#e);n!=null&&(this.#t===-2?this.#t=n.number:n.number>this.#t&&(t.emit(this.#e,n.number),this.#t=n.number))})}},D0=class extends pf{#e;constructor(e,t){super(e),this.#e=w2(t)}_poll(e,t){return p(this,null,function*(){throw new Error("@TODO")})}},R0=class extends pf{#e;constructor(e,t){super(e),this.#e=t}_poll(e,t){return p(this,null,function*(){let n=yield t.getTransactionReceipt(this.#e);n&&t.emit(this.#e,n)})}},Ra=class{#e;#t;#r;#n;#i;constructor(e,t){this.#e=e,this.#t=w2(t),this.#r=this.#o.bind(this),this.#n=!1,this.#i=-2}#o(e){return p(this,null,function*(){if(this.#i===-2)return;let t=w2(this.#t);t.fromBlock=this.#i+1,t.toBlock=e;let n=yield this.#e.getLogs(t);if(n.length===0){this.#i<e-60&&(this.#i=e-60);return}for(let i of n)this.#e.emit(this.#t,i),this.#i=i.blockNumber})}start(){this.#n||(this.#n=!0,this.#i===-2&&this.#e.getBlockNumber().then(e=>{this.#i=e}),this.#e.on("block",this.#r))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#r))}pause(e){this.stop(),e&&(this.#i=-2)}resume(){this.start()}};var bZ=BigInt(2),yZ=10;function O0(r){return r&&typeof r.then=="function"}function M0(r,e){return r+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n);return i.sort(),i.reduce((s,o)=>(s[o]=n[o],s),{})}return n})}var Io=class{name;constructor(e){se(this,{name:e})}start(){}stop(){}pause(e){}resume(){}};function vZ(r){return JSON.parse(JSON.stringify(r))}function C2(r){return r=Array.from(new Set(r).values()),r.sort(),r}function x2(r,e){return p(this,null,function*(){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Oe(r,32)){let t=r.toLowerCase();return{type:"transaction",tag:M0("tx",{hash:t}),hash:t}}if(r.orphan){let t=r;return{type:"orphan",tag:M0("orphan",t),filter:vZ(t)}}if(r.address||r.topics){let t=r,n={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?C2(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){let i=[],s=[],o=a=>{Oe(a)?i.push(a):s.push(p(this,null,function*(){i.push(yield Zt(a,e))}))};Array.isArray(t.address)?t.address.forEach(o):o(t.address),s.length&&(yield Promise.all(s)),n.address=C2(i.map(a=>a.toLowerCase()))}return{filter:n,tag:M0("event",n),type:"event"}}O(!1,"unknown ProviderEvent","event",r)})}function E2(){return new Date().getTime()}var wZ={cacheTimeout:250,pollingInterval:4e3},mf=class{#e;#t;#r;#n;#i;#o;#s;#a;#h;#l;#p;#m;constructor(e,t){if(this.#m=Object.assign({},wZ,t||{}),e==="any")this.#o=!0,this.#i=null;else if(e){let n=Pn.from(e);this.#o=!1,this.#i=Promise.resolve(n),setTimeout(()=>{this.emit("network",n,null)},0)}else this.#o=!1,this.#i=null;this.#a=-1,this.#s=new Map,this.#e=new Map,this.#t=new Map,this.#r=null,this.#n=!1,this.#h=1,this.#l=new Map,this.#p=!1}get pollingInterval(){return this.#m.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}#c(e){return p(this,null,function*(){let t=this.#m.cacheTimeout;if(t<0)return yield this._perform(e);let n=M0(e.method,e),i=this.#s.get(n);return i||(i=this._perform(e),this.#s.set(n,i),setTimeout(()=>{this.#s.get(n)===i&&this.#s.delete(n)},t)),yield i})}ccipReadFetch(e,t,n){return p(this,null,function*(){if(this.disableCcipRead||n.length===0||e.to==null)return null;let i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<n.length;a++){let c=n[a],l=c.replace("{sender}",i).replace("{data}",s),u=new gn(l);c.indexOf("{data}")===-1&&(u.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:n});let h="unknown error",m;try{m=yield u.send()}catch(b){o.push(b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:b}});continue}try{let b=m.bodyJson;if(b.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:b}),b.data;b.message&&(h=b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:b})}catch{}H(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:h}}),o.push(h)}H(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})})}_wrapBlock(e,t){return new cf(JN(e),this)}_wrapLog(e,t){return new rs(WN(e),this)}_wrapTransactionReceipt(e,t){return new jc(YN(e),this)}_wrapTransactionResponse(e,t){return new Na(y2(e),this)}_detectNetwork(){H(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}_perform(e){return p(this,null,function*(){H(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})})}getBlockNumber(){return p(this,null,function*(){let e=ve(yield this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e})}_getAddress(e){return Zt(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Oe(e))return Oe(e,32)?e:Wi(e);if(typeof e=="bigint"&&(e=ve(e,"blockTag")),typeof e=="number")return e>=0?Wi(e):this.#a>=0?Wi(this.#a+e):this.getBlockNumber().then(t=>Wi(t+e));O(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?C2(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,i=(c,l,u)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(l!=null||u!=null))throw new Error("invalid filter");let m={};return h&&(m.address=h),t.length&&(m.topics=t),l&&(m.fromBlock=l),u&&(m.toBlock=u),n&&(m.blockHash=n),m},s=[];if(e.address)if(Array.isArray(e.address))for(let c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(s),o,a]).then(c=>i(c[0],c[1],c[2])):i(s,o,a)}_getTransactionRequest(e){let t=Da(e),n=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;let s=Zt(t[i],this);O0(s)?n.push(function(){return p(this,null,function*(){t[i]=yield s})}()):t[i]=s}),t.blockTag!=null){let i=this._getBlockTag(t.blockTag);O0(i)?n.push(function(){return p(this,null,function*(){t.blockTag=yield i})}()):t.blockTag=i}return n.length?function(){return p(this,null,function*(){return yield Promise.all(n),t})}():t}getNetwork(){return p(this,null,function*(){if(this.#i==null){let i=p(this,null,function*(){try{let s=yield this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw this.#i===i&&(this.#i=null),s}});return this.#i=i,(yield i).clone()}let e=this.#i,[t,n]=yield Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(this.#o?(this.emit("network",n,t),this.#i===e&&(this.#i=Promise.resolve(n))):H(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()})}getFeeData(){return p(this,null,function*(){let e=yield this.getNetwork(),t=()=>p(this,null,function*(){let{_block:i,gasPrice:s,priorityFee:o}=yield Ht({_block:this.#g("latest",!1),gasPrice:p(this,null,function*(){try{let u=yield this.#c({method:"getGasPrice"});return ie(u,"%response")}catch{}return null}),priorityFee:p(this,null,function*(){try{let u=yield this.#c({method:"getPriorityFee"});return ie(u,"%response")}catch{}return null})}),a=null,c=null,l=this._wrapBlock(i,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*bZ+c),new zu(s,a,c)}),n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){let i=new gn(n.url),s=yield n.processFunc(t,this,i);return new zu(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return yield t()})}estimateGas(e){return p(this,null,function*(){let t=this._getTransactionRequest(e);return O0(t)&&(t=yield t),ie(yield this.#c({method:"estimateGas",transaction:t}),"%response")})}#u(e,t,n){return p(this,null,function*(){H(n<yZ,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let i=Da(e);try{return X(yield this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&Cc(s)&&s.data&&n>=0&&t==="latest"&&i.to!=null&&dt(s.data,0,4)==="0x556f1830"){let o=s.data,a=yield Zt(i.to,this),c;try{c=AZ(dt(s.data,4))}catch(h){H(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:o}})}H(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});let l=yield this.ccipReadFetch(i,c.calldata,c.urls);H(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});let u={to:a,data:rt([c.selector,_Z([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{let h=yield this.#u(u,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:h}),h}}throw s}})}#d(e){return p(this,null,function*(){let{value:t}=yield Ht({network:this.getNetwork(),value:e});return t})}call(e){return p(this,null,function*(){let{tx:t,blockTag:n}=yield Ht({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return yield this.#d(this.#u(t,n,e.enableCcipRead?0:-1))})}#f(e,t,n){return p(this,null,function*(){let i=this._getAddress(t),s=this._getBlockTag(n);return(typeof i!="string"||typeof s!="string")&&([i,s]=yield Promise.all([i,s])),yield this.#d(this.#c(Object.assign(e,{address:i,blockTag:s})))})}getBalance(e,t){return p(this,null,function*(){return ie(yield this.#f({method:"getBalance"},e,t),"%response")})}getTransactionCount(e,t){return p(this,null,function*(){return ve(yield this.#f({method:"getTransactionCount"},e,t),"%response")})}getCode(e,t){return p(this,null,function*(){return X(yield this.#f({method:"getCode"},e,t))})}getStorage(e,t,n){return p(this,null,function*(){let i=ie(t,"position");return X(yield this.#f({method:"getStorage",position:i},e,n))})}broadcastTransaction(e){return p(this,null,function*(){let{blockNumber:t,hash:n,network:i}=yield Ht({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=kc.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)})}#g(e,t){return p(this,null,function*(){if(Oe(e,32))return yield this.#c({method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=yield n),yield this.#c({method:"getBlock",blockTag:n,includeTransactions:t})})}getBlock(e,t){return p(this,null,function*(){let{network:n,params:i}=yield Ht({network:this.getNetwork(),params:this.#g(e,!!t)});return i==null?null:this._wrapBlock(i,n)})}getTransaction(e){return p(this,null,function*(){let{network:t,params:n}=yield Ht({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)})}getTransactionReceipt(e){return p(this,null,function*(){let{network:t,params:n}=yield Ht({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){let i=yield this.#c({method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,t)})}getTransactionResult(e){return p(this,null,function*(){let{result:t}=yield Ht({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return t==null?null:X(t)})}getLogs(e){return p(this,null,function*(){let t=this._getFilter(e);O0(t)&&(t=yield t);let{network:n,params:i}=yield Ht({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,n))})}_getProvider(e){H(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}getResolver(e){return p(this,null,function*(){return yield Ku.fromName(this,e)})}getAvatar(e){return p(this,null,function*(){let t=yield this.getResolver(e);return t?yield t.getAvatar():null})}resolveName(e){return p(this,null,function*(){let t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return p(this,null,function*(){e=Pe(e);let t=Vu(e.substring(2).toLowerCase()+".addr.reverse");try{let n=yield Ku.getEnsAddress(this),s=yield new ii(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===_o)return null;let a=yield new ii(s,["function name(bytes32) view returns (string)"],this).name(t);return(yield this.resolveName(a))!==e?null:a}catch(n){if(bt(n,"BAD_DATA")&&n.value==="0x"||bt(n,"CALL_EXCEPTION"))return null;throw n}return null})}waitForTransaction(e,t,n){return p(this,null,function*(){let i=t??1;return i===0?this.getTransactionReceipt(e):new Promise((s,o)=>p(this,null,function*(){let a=null,c=l=>p(this,null,function*(){try{let u=yield this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=i){s(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)});n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(We("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(yield this.getBlockNumber())}))})}waitForBlock(e){return p(this,null,function*(){H(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})})}_clearTimeout(e){let t=this.#l.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#l.delete(e))}_setTimeout(e,t){t==null&&(t=0);let n=this.#h++,i=()=>{this.#l.delete(n),e()};if(this.paused)this.#l.set(n,{timer:null,func:i,time:t});else{let s=setTimeout(i,t);this.#l.set(n,{timer:s,func:i,time:E2()})}return n}_forEachSubscriber(e){for(let t of this.#e.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Io(e.type);case"block":{let t=new T0(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new N0(this,e.type);case"event":return new Ra(this,e.filter);case"transaction":return new R0(this,e.hash);case"orphan":return new D0(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let n of this.#e.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),this.#r!=null&&t.pause(this.#r);break}}#b(e,t){return p(this,null,function*(){let n=yield x2(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=yield x2({orphan:"drop-log",log:t[0]},this)),this.#e.get(n.tag)||null})}#y(e){return p(this,null,function*(){let t=yield x2(e,this),n=t.tag,i=this.#e.get(n);return i||(i={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(n,i)),i})}on(e,t){return p(this,null,function*(){let n=yield this.#y(e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,this.#r!=null&&n.subscriber.pause(this.#r)),this})}once(e,t){return p(this,null,function*(){let n=yield this.#y(e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,this.#r!=null&&n.subscriber.pause(this.#r)),this})}emit(e,...t){return p(this,null,function*(){let n=yield this.#b(e,t);if(!n||n.listeners.length===0)return!1;let i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:s,once:o})=>{let a=new ga(this,o?null:s,e);try{s.call(this,...t,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),this.#e.delete(n.tag)),i>0})}listenerCount(e){return p(this,null,function*(){if(e){let n=yield this.#b(e);return n?n.listeners.length:0}let t=0;for(let{listeners:n}of this.#e.values())t+=n.length;return t})}listeners(e){return p(this,null,function*(){if(e){let n=yield this.#b(e);return n?n.listeners.map(({listener:i})=>i):[]}let t=[];for(let{listeners:n}of this.#e.values())t=t.concat(n.map(({listener:i})=>i));return t})}off(e,t){return p(this,null,function*(){let n=yield this.#b(e);if(!n)return this;if(t){let i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),this.#e.delete(n.tag)),this})}removeAllListeners(e){return p(this,null,function*(){if(e){let{tag:t,started:n,subscriber:i}=yield this.#y(e);n&&i.stop(),this.#e.delete(t)}else for(let[t,{started:n,subscriber:i}]of this.#e)n&&i.stop(),this.#e.delete(t);return this})}addListener(e,t){return p(this,null,function*(){return yield this.on(e,t)})}removeListener(e,t){return p(this,null,function*(){return this.off(e,t)})}get destroyed(){return this.#n}destroy(){this.removeAllListeners();for(let e of this.#l.keys())this._clearTimeout(e);this.#n=!0}get paused(){return this.#r!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#r!=null){if(this.#r==!!e)return;H(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),this.#r=!!e;for(let t of this.#l.values())t.timer&&clearTimeout(t.timer),t.time=E2()-t.time}resume(){if(this.#r!=null){this._forEachSubscriber(e=>e.resume()),this.#r=null;for(let e of this.#l.values()){let t=e.time;t<0&&(t=0),e.time=E2(),setTimeout(e.func,t)}}}};function xZ(r,e){try{let t=_2(r,e);if(t)return yo(t)}catch{}return null}function _2(r,e){if(r==="0x")return null;try{let t=ve(dt(r,e,e+32)),n=ve(dt(r,t,t+32));return dt(r,t+32,t+32+n)}catch{}return null}function eD(r){let e=Qt(r);if(e.length>32)throw new Error("internal; should not happen");let t=new Uint8Array(32);return t.set(e,32-e.length),t}function EZ(r){if(r.length%32===0)return r;let e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}var CZ=new Uint8Array([]);function _Z(r){let e=[],t=0;for(let n=0;n<r.length;n++)e.push(CZ),t+=32;for(let n=0;n<r.length;n++){let i=ge(r[n]);e[n]=eD(t),e.push(eD(i.length)),e.push(EZ(i)),t+=32+Math.ceil(i.length/32)*32}return rt(e)}var tD="0x0000000000000000000000000000000000000000000000000000000000000000";function AZ(r){let e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};H(Gi(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let t=dt(r,0,32);H(dt(t,0,12)===dt(tD,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=dt(t,12);try{let n=[],i=ve(dt(r,32,64)),s=ve(dt(r,i,i+32)),o=dt(r,i+32);for(let a=0;a<s;a++){let c=xZ(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{H(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let n=_2(r,64);if(n==null)throw new Error("abort");e.calldata=n}catch{H(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}H(dt(r,100,128)===dt(tD,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=dt(r,96,100);try{let n=_2(r,128);if(n==null)throw new Error("abort");e.extraData=n}catch{H(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Zu(r,e){if(r.provider)return r.provider;H(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}function rD(r,e){return p(this,null,function*(){let t=Da(e);if(t.to!=null&&(t.to=Zt(t.to,r)),t.from!=null){let n=t.from;t.from=Promise.all([r.getAddress(),Zt(n,r)]).then(([i,s])=>(O(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=r.getAddress();return yield Ht(t)})}var gf=class{provider;constructor(e){se(this,{provider:e||null})}getNonce(e){return p(this,null,function*(){return Zu(this,"getTransactionCount").getTransactionCount(yield this.getAddress(),e)})}populateCall(e){return p(this,null,function*(){return yield rD(this,e)})}populateTransaction(e){return p(this,null,function*(){let t=Zu(this,"populateTransaction"),n=yield rD(this,e);n.nonce==null&&(n.nonce=yield this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=yield this.estimateGas(n));let i=yield this.provider.getNetwork();if(n.chainId!=null){let o=ie(n.chainId);O(o===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=i.chainId;let s=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||s)?O(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&s&&O(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){let o=yield t.getFeeData();H(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{let o=yield t.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){let a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(H(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):H(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return yield Ht(n)})}estimateGas(e){return p(this,null,function*(){return Zu(this,"estimateGas").estimateGas(yield this.populateCall(e))})}call(e){return p(this,null,function*(){return Zu(this,"call").call(yield this.populateCall(e))})}resolveName(e){return p(this,null,function*(){return yield Zu(this,"resolveName").resolveName(e)})}sendTransaction(e){return p(this,null,function*(){let t=Zu(this,"sendTransaction"),n=yield this.populateTransaction(e);delete n.from;let i=kc.from(n);return yield t.broadcastTransaction(yield this.signTransaction(i))})}};var nD=new Set;function A2(r){nD.has(r)||(nD.add(r),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${r} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function SZ(r){return JSON.parse(JSON.stringify(r))}var k0=class{#e;#t;#r;#n;#i;#o;constructor(e){this.#e=e,this.#t=null,this.#r=this.#s.bind(this),this.#n=!1,this.#i=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}#s(e){return p(this,null,function*(){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let t=null;try{t=yield this.#t}catch(s){if(!bt(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}let n=yield this.#e.getNetwork();if(this.#i||(this.#i=n),this.#i.chainId!==n.chainId)throw new Error("chaid changed");if(this.#o)return;let i=yield this.#e.send("eth_getFilterChanges",[t]);yield this._emitResults(this.#e,i)}catch(t){console.log("@TODO",t)}this.#e.once("block",this.#r)})}#a(){let e=this.#t;e&&(this.#t=null,e.then(t=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[t])}))}start(){this.#n||(this.#n=!0,this.#s(-2))}stop(){this.#n&&(this.#n=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#r))}pause(e){e&&this.#a(),this.#e.off("block",this.#r)}resume(){this.start()}},F0=class extends k0{#e;constructor(e,t){super(e),this.#e=SZ(t)}_recover(e){return new Ra(e,this.#e)}_subscribe(e){return p(this,null,function*(){return yield e.send("eth_newFilter",[this.#e])})}_emitResults(e,t){return p(this,null,function*(){for(let n of t)e.emit(this.#e,e._wrapLog(n,e._network))})}},B0=class extends k0{_subscribe(e){return p(this,null,function*(){return yield e.send("eth_newPendingTransactionFilter",[])})}_emitResults(e,t){return p(this,null,function*(){for(let n of t)e.emit("pending",n)})}};var IZ="bigint,boolean,function,number,string,symbol".split(/,/g);function U0(r){if(r==null||IZ.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(U0);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function PZ(r){return new Promise(e=>{setTimeout(e,r)})}function Xu(r){return r&&r.toLowerCase()}function iD(r){return r&&typeof r.pollingInterval=="number"}var sD={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3},ns=class extends gf{address;constructor(e,t){super(e),t=Pe(t),se(this,{address:t})}connect(e){H(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}getAddress(){return p(this,null,function*(){return this.address})}populateTransaction(e){return p(this,null,function*(){return yield this.populateCall(e)})}sendUncheckedTransaction(e){return p(this,null,function*(){let t=U0(e),n=[];if(t.from){let s=t.from;n.push(p(this,null,function*(){let o=yield Zt(s,this.provider);O(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=o}))}else t.from=this.address;if(t.gasLimit==null&&n.push(p(this,null,function*(){t.gasLimit=yield this.provider.estimateGas(de(k({},t),{from:this.address}))})),t.to!=null){let s=t.to;n.push(p(this,null,function*(){t.to=yield Zt(s,this.provider)}))}n.length&&(yield Promise.all(n));let i=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[i])})}sendTransaction(e){return p(this,null,function*(){let t=yield this.provider.getBlockNumber(),n=yield this.sendUncheckedTransaction(e);return yield new Promise((i,s)=>{let o=[1e3,100],a=0,c=()=>p(this,null,function*(){try{let l=yield this.provider.getTransaction(n);if(l!=null){i(l.replaceableTransaction(t));return}}catch(l){if(bt(l,"CANCELLED")||bt(l,"BAD_DATA")||bt(l,"NETWORK_ERROR")||bt(l,"UNSUPPORTED_OPERATION")){l.info==null&&(l.info={}),l.info.sendTransactionHash=n,s(l);return}if(bt(l,"INVALID_ARGUMENT")&&(a++,l.info==null&&(l.info={}),l.info.sendTransactionHash=n,a>10)){s(l);return}this.provider.emit("error",We("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:l}))}this.provider._setTimeout(()=>{c()},o.pop()||4e3)});c()})})}signTransaction(e){return p(this,null,function*(){let t=U0(e);if(t.from){let i=yield Zt(t.from,this.provider);O(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=i}else t.from=this.address;let n=this.provider.getRpcTransaction(t);return yield this.provider.send("eth_signTransaction",[n])})}signMessage(e){return p(this,null,function*(){let t=typeof e=="string"?Gr(e):e;return yield this.provider.send("personal_sign",[X(t),this.address.toLowerCase()])})}signTypedData(e,t,n){return p(this,null,function*(){let i=U0(n),s=yield ju.resolveNames(e,t,i,o=>p(this,null,function*(){let a=yield Zt(o);return O(a!=null,"TypedData does not support null address","value",o),a}));return yield this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ju.getPayload(s.domain,t,s.value))])})}unlock(e){return p(this,null,function*(){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])})}_legacySignMessage(e){return p(this,null,function*(){let t=typeof e=="string"?Gr(e):e;return yield this.provider.send("eth_sign",[this.address.toLowerCase(),X(t)])})}},Gc=class r extends mf{#e;#t;#r;#n;#i;#o;#s;#a(){if(this.#n)return;let e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#n=setTimeout(()=>{this.#n=null;let t=this.#r;for(this.#r=[];t.length;){let n=[t.shift()];for(;t.length&&n.length!==this.#e.batchMaxCount;)if(n.push(t.shift()),JSON.stringify(n.map(s=>s.payload)).length>this.#e.batchMaxSize){t.unshift(n.pop());break}p(this,null,function*(){let i=n.length===1?n[0].payload:n.map(s=>s.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{let s=yield this._send(i);this.emit("debug",{action:"receiveRpcResult",result:s});for(let{resolve:o,reject:a,payload:c}of n){if(this.destroyed){a(We("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}let l=s.filter(u=>u.id===c.id)[0];if(l==null){let u=We("missing response for request","BAD_DATA",{value:s,info:{payload:c}});this.emit("error",u),a(u);continue}if("error"in l){a(this.getRpcError(c,l));continue}o(l.result)}}catch(s){this.emit("debug",{action:"receiveRpcError",error:s});for(let{reject:o}of n)o(s)}})}},e)}constructor(e,t){super(e,t),this.#t=1,this.#e=Object.assign({},sD,t||{}),this.#r=[],this.#n=null,this.#o=null,this.#s=null;{let i=null,s=new Promise(o=>{i=o});this.#i={promise:s,resolve:i}}let n=this._getOption("staticNetwork");typeof n=="boolean"?(O(!n||e!=="any","staticNetwork cannot be used on special network 'any'","options",t),n&&e!=null&&(this.#o=Pn.from(e))):n&&(O(e==null||n.matches(e),"staticNetwork MUST match network object","options",t),this.#o=n)}_getOption(e){return this.#e[e]}get _network(){return H(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}_perform(e){return p(this,null,function*(){if(e.method==="call"||e.method==="estimateGas"){let n=e.transaction;if(n&&n.type!=null&&ie(n.type)&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){let i=yield this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},n,{type:void 0})}))}}let t=this.getRpcRequest(e);return t!=null?yield this.send(t.method,t.args):Dn(r.prototype,this,"_perform").call(this,e)})}_detectNetwork(){return p(this,null,function*(){let e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#s?yield this.#s:this.ready?(this.#s=p(this,null,function*(){try{let t=Pn.from(ie(yield this.send("eth_chainId",[])));return this.#s=null,t}catch(t){throw this.#s=null,t}}),yield this.#s):(this.#s=p(this,null,function*(){let t={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let n;try{n=(yield this._send(t))[0],this.#s=null}catch(i){throw this.#s=null,this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return Pn.from(ie(n.result));throw this.getRpcError(t,n)}),yield this.#s)})}_start(){this.#i==null||this.#i.resolve==null||(this.#i.resolve(),this.#i=null,p(this,null,function*(){for(;this.#o==null&&!this.destroyed;)try{this.#o=yield this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",We("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),yield PZ(1e3)}this.#a()}))}_waitUntilReady(){return p(this,null,function*(){if(this.#i!=null)return yield this.#i.promise})}_getSubscriber(e){return e.type==="pending"?new B0(this):e.type==="event"?this._getOption("polling")?new Ra(this,e.filter):new F0(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Io("orphan"):super._getSubscriber(e)}get ready(){return this.#i==null}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(n=>{if(e[n]==null)return;let i=n;n==="gasLimit"&&(i="gas"),t[i]=Wi(ie(e[n],`tx.${n}`))}),["from","to","data"].forEach(n=>{e[n]!=null&&(t[n]=X(e[n]))}),e.accessList&&(t.accessList=ri(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(n=>n.toLowerCase())),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Xu(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Xu(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[Xu(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Xu(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(Xu):e.filter.address=Xu(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:n}=e,{error:i}=t;if(n==="eth_estimateGas"&&i.message){let a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return We("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}})}if(n==="eth_call"||n==="eth_estimateGas"){let a=S2(i),c=Ta.getBuiltinCallException(n==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:i,payload:e},c}let s=JSON.stringify(TZ(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return We("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(n==="eth_sendRawTransaction"||n==="eth_sendTransaction"){let a=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return We("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(s.match(/nonce/i)&&s.match(/too low/i))return We("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return We("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(s.match(/only replay-protected/i))return We("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:a,info:{error:i}}})}let o=!!s.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?We("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):We("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(We("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let n=this.#t++,i=new Promise((s,o)=>{this.#r.push({resolve:s,reject:o,payload:{method:e,params:t,id:n,jsonrpc:"2.0"}})});return this.#a(),i}getSigner(e){return p(this,null,function*(){e==null&&(e=0);let t=this.send("eth_accounts",[]);if(typeof e=="number"){let i=yield t;if(e>=i.length)throw new Error("no such account");return new ns(this,i[e])}let{accounts:n}=yield Ht({network:this.getNetwork(),accounts:t});e=Pe(e);for(let i of n)if(Pe(i)===e)return new ns(this,e);throw new Error("invalid account")})}listAccounts(){return p(this,null,function*(){return(yield this.send("eth_accounts",[])).map(t=>new ns(this,t))})}destroy(){this.#n&&(clearTimeout(this.#n),this.#n=null);for(let{payload:e,reject:t}of this.#r)t(We("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#r=[],super.destroy()}},bf=class extends Gc{#e;constructor(e,t){super(e,t);let n=this._getOption("pollingInterval");n==null&&(n=sD.pollingInterval),this.#e=n}_getSubscriber(e){let t=super._getSubscriber(e);return iD(t)&&(t.pollingInterval=this.#e),t}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(t=>{iD(t)&&(t.pollingInterval=this.#e)})}},Oa=class r extends bf{#e;constructor(e,t,n){e==null&&(e="http://localhost:8545"),super(t,n),typeof e=="string"?this.#e=new gn(e):this.#e=e.clone()}_getConnection(){return this.#e.clone()}send(e,t){return p(this,null,function*(){return yield this._start(),yield Dn(r.prototype,this,"send").call(this,e,t)})}_send(e){return p(this,null,function*(){let t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");let n=yield t.send();n.assertOk();let i=n.bodyJson;return Array.isArray(i)||(i=[i]),i})}};function S2(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Oe(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(let e in r){let t=S2(r[e]);if(t)return t}return null}if(typeof r=="string")try{return S2(JSON.parse(r))}catch{}return null}function I2(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(let t in r)I2(r[t],e);if(typeof r=="string")try{return I2(JSON.parse(r),e)}catch{}}}function TZ(r){let e=[];return I2(r,e),e}function NZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}var oD=NZ().WebSocket;var eh=class{#e;#t;get filter(){return JSON.parse(this.#t)}#r;#n;#i;constructor(e,t){this.#e=e,this.#t=JSON.stringify(t),this.#r=null,this.#n=null,this.#i=null}start(){this.#r=this.#e.send("eth_subscribe",this.filter).then(e=>(this.#e._register(e,this),e))}stop(){this.#r.then(e=>{this.#e.destroyed||this.#e.send("eth_unsubscribe",[e])}),this.#r=null}pause(e){H(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#n=!!e}resume(){this.#n=null}_handleMessage(e){if(this.#r!=null&&this.#n===null){let t=this.#i;t==null?t=this._emit(this.#e,e):t=t.then(()=>p(this,null,function*(){yield this._emit(this.#e,e)})),this.#i=t.then(()=>{this.#i===t&&(this.#i=null)})}}_emit(e,t){return p(this,null,function*(){throw new Error("sub-classes must implemente this; _emit")})}},L0=class extends eh{constructor(e){super(e,["newHeads"])}_emit(e,t){return p(this,null,function*(){e.emit("block",parseInt(t.number))})}},V0=class extends eh{constructor(e){super(e,["newPendingTransactions"])}_emit(e,t){return p(this,null,function*(){e.emit("pending",t)})}},j0=class extends eh{#e;get logFilter(){return JSON.parse(this.#e)}constructor(e,t){super(e,["logs",t]),this.#e=JSON.stringify(t)}_emit(e,t){return p(this,null,function*(){e.emit(this.logFilter,e._wrapLog(t,e._network))})}},yf=class extends Gc{#e;#t;#r;constructor(e,t){let n=Object.assign({},t??{});O(n.batchMaxCount==null||n.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",t),n.batchMaxCount=1,n.staticNetwork==null&&(n.staticNetwork=!0),super(e,n),this.#e=new Map,this.#t=new Map,this.#r=new Map}_getSubscriber(e){switch(e.type){case"close":return new Io("close");case"block":return new L0(this);case"pending":return new V0(this);case"event":return new j0(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log")return new Io("drop-log")}return super._getSubscriber(e)}_register(e,t){this.#t.set(e,t);let n=this.#r.get(e);if(n){for(let i of n)t._handleMessage(i);this.#r.delete(e)}}_send(e){return p(this,null,function*(){O(!Array.isArray(e),"WebSocket does not support batch send","payload",e);let t=new Promise((n,i)=>{this.#e.set(e.id,{payload:e,resolve:n,reject:i})});return yield this._waitUntilReady(),yield this._write(JSON.stringify(e)),[yield t]})}_processMessage(e){return p(this,null,function*(){let t=JSON.parse(e);if(t&&typeof t=="object"&&"id"in t){let n=this.#e.get(t.id);if(n==null){this.emit("error",We("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));return}this.#e.delete(t.id),n.resolve(t)}else if(t&&t.method==="eth_subscription"){let n=t.params.subscription,i=this.#t.get(n);if(i)i._handleMessage(t.params.result);else{let s=this.#r.get(n);s==null&&(s=[],this.#r.set(n,s)),s.push(t.params.result)}}else{this.emit("error",We("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));return}})}_write(e){return p(this,null,function*(){throw new Error("sub-classes must override this")})}};var vf=class r extends yf{#e;#t;get websocket(){if(this.#t==null)throw new Error("websocket closed");return this.#t}constructor(e,t,n){super(t,n),typeof e=="string"?(this.#e=()=>new oD(e),this.#t=this.#e()):typeof e=="function"?(this.#e=e,this.#t=e()):(this.#e=null,this.#t=e),this.websocket.onopen=()=>p(this,null,function*(){try{yield this._start(),this.resume()}catch(i){console.log("failed to start WebsocketProvider",i)}}),this.websocket.onmessage=i=>{this._processMessage(i.data)}}_write(e){return p(this,null,function*(){this.websocket.send(e)})}destroy(){return p(this,null,function*(){this.#t!=null&&(this.#t.close(),this.#t=null),Dn(r.prototype,this,"destroy").call(this)})}};var wf="84842078b09946638c03157f83405213";function DZ(r){switch(r){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bnbsmartchain-mainnet.infura.io";case"bnbt":return"bnbsmartchain-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}O(!1,"unsupported network","network",r)}var xf=class extends vf{projectId;projectSecret;constructor(e,t){let n=new Vs(e,t),i=n._getConnection();H(!i.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});let s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,n._network),se(this,{projectId:n.projectId,projectSecret:n.projectSecret})}isCommunityResource(){return this.projectId===wf}},Vs=class r extends Oa{projectId;projectSecret;constructor(e,t,n){e==null&&(e="mainnet");let i=Pn.from(e);t==null&&(t=wf),n==null&&(n=null);let s=r.getRequest(i,t,n);super(s,i,{staticNetwork:i}),se(this,{projectId:t,projectSecret:n})}_getProvider(e){try{return new r(e,this.projectId,this.projectSecret)}catch{}return super._getProvider(e)}isCommunityResource(){return this.projectId===wf}static getWebSocketProvider(e,t){return new xf(e,t)}static getRequest(e,t,n){t==null&&(t=wf),n==null&&(n=null);let i=new gn(`https://${DZ(e.name)}/v3/${t}`);return i.allowGzip=!0,n&&i.setCredentials("",n),t===wf&&(i.retryFunc=(s,o,a)=>p(this,null,function*(){return A2("InfuraProvider"),!0})),i}};var js=class r extends bf{#e;constructor(e,t,n){let i=Object.assign({},n??{},{batchMaxCount:1});O(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,i),this.#e=(s,o)=>p(this,null,function*(){let a={method:s,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{let c=yield e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){let l=new Error(c.message);throw l.code=c.code,l.data=c.data,l.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}})}send(e,t){return p(this,null,function*(){return yield this._start(),yield Dn(r.prototype,this,"send").call(this,e,t)})}_send(e){return p(this,null,function*(){O(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=yield this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}})}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}hasSigner(e){return p(this,null,function*(){e==null&&(e=0);let t=yield this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(n=>n.toLowerCase()===e).length!==0)})}getSigner(e){return p(this,null,function*(){if(e==null&&(e=0),!(yield this.hasSigner(e)))try{yield this.#e("eth_requestAccounts",[])}catch(t){let n=t.payload;throw this.getRpcError(n,{id:n.id,error:t})}return yield Dn(r.prototype,this,"getSigner").call(this,e)})}};var $e={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"};var P2={validateCaipAddress(r){if(r.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return r},parseCaipAddress(r){let e=r.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${r}`);let[t,n,i]=e;if(!t||!n||!i)throw new Error(`Invalid CAIP-10 address: ${r}`);return{chainNamespace:t,chainId:n,address:i}},parseCaipNetworkId(r){let e=r.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${r}`);let[t,n]=e;if(!t||!n)throw new Error(`Invalid CAIP-2 network id: ${r}`);return{chainNamespace:t,chainId:n}}};function T2(r){return r?.endsWith($e.WC_NAME_SUFFIX_LEGACY)||r?.endsWith($e.WC_NAME_SUFFIX)}var yn={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"};var Po={ConnectorExplorerIds:{[$e.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[$e.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[$e.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[$e.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[$e.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[yn.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[yn.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[yn.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[yn.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[yn.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[yn.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[yn.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[yn.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[yn.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[yn.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[yn.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"21c895fa-e105-4829-9434-378bb54fa600","000000000933ea01ad0ee984209779ba":"220bcb01-ba47-41d3-fe5b-e29bbc4a4b00"},ConnectorImageIds:{[$e.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[$e.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[$e.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[$e.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[$e.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[$e.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[$e.CONNECTOR_ID.INJECTED]:"Browser Wallet",[$e.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[$e.CONNECTOR_ID.COINBASE]:"Coinbase",[$e.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[$e.CONNECTOR_ID.LEDGER]:"Ledger",[$e.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[$e.CONNECTOR_ID.INJECTED]:"INJECTED",[$e.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[$e.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[$e.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]};var Kc={hexStringToNumber(r){let e=r.startsWith("0x")?r.slice(2):r;return parseInt(e,16)},numberToHexString(r){return`0x${r.toString(16)}`},getUserInfo(r){return p(this,null,function*(){let[e,t]=yield Promise.all([Kc.getAddresses(r),Kc.getChainId(r)]);return{chainId:t,addresses:e}})},getChainId(r){return p(this,null,function*(){let e=yield r.request({method:"eth_chainId"});return Number(e)})},getAddress(r){return p(this,null,function*(){let[e]=yield r.request({method:"eth_accounts"});return e})},getAddresses(r){return p(this,null,function*(){return yield r.request({method:"eth_accounts"})})},addEthereumChain(r,e){return p(this,null,function*(){let t=e.rpcUrls.chainDefault?.http||[];yield r.request({method:"wallet_addEthereumChain",params:[{chainId:Kc.numberToHexString(e.id),rpcUrls:[...t],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[Po.NetworkImageIds[e.id]]}]})})}};var To={signMessage:(r,e,t)=>p(void 0,null,function*(){if(!e)throw new Error("signMessage - provider is undefined");let n=Oe(r)?r:X(Gr(r));return yield e.request({method:"personal_sign",params:[n,t]})}),estimateGas:(r,e,t,n)=>p(void 0,null,function*(){if(!e)throw new Error("estimateGas - provider is undefined");if(!t)throw new Error("estimateGas - address is undefined");if(r.chainNamespace&&r.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");let i={from:r.address,to:r.to,data:r.data,type:0},s=new js(e,n);return yield new ns(s,t).estimateGas(i)}),sendTransaction:(r,e,t,n)=>p(void 0,null,function*(){if(!e)throw new Error("sendTransaction - provider is undefined");if(!t)throw new Error("sendTransaction - address is undefined");if(r.chainNamespace&&r.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");let i={to:r.to,value:r.value,gasLimit:r.gas,gasPrice:r.gasPrice,data:r.data,type:0},s=new js(e,n);return(yield(yield new ns(s,t).sendTransaction(i)).wait())?.hash||null}),writeContract:(r,e,t,n)=>p(void 0,null,function*(){if(!e)throw new Error("writeContract - provider is undefined");if(!t)throw new Error("writeContract - address is undefined");let i=new js(e,n),s=new ns(i,t),o=new ii(r.tokenAddress,r.abi,s);if(!o||!r.method)throw new Error("Contract method is undefined");let a=o[r.method];if(a)return yield a(...r.args);throw new Error("Contract method is undefined")}),getEnsAddress:(r,e)=>p(void 0,null,function*(){try{let t=Number(e.id),n=null,i=!1;return T2(r)&&(i=(yield Eu.resolveReownName(r))||!1),t===1&&(n=yield new Vs("mainnet").resolveName(r)),n||i||!1}catch{return!1}}),getEnsAvatar:(r,e)=>p(void 0,null,function*(){return e===1&&(yield new Vs("mainnet").getAvatar(r))||!1}),parseWalletCapabilities:r=>{try{return JSON.parse(r)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:Mg,formatUnits:Hd};var Ef=class r extends Ec{constructor(){super({}),this.adapterType="ethers",this.balancePromises={},this.providerHandlers=null,this.namespace=$e.CHAIN.EVM}createEthersConfig(e){return p(this,null,function*(){if(!e.metadata)return;let t;function n(){if(t)return t;if(!(typeof window>"u")&&window.ethereum)return t=window.ethereum,t}function i(){return p(this,null,function*(){try{let{createCoinbaseWalletSDK:o}=yield import("./chunk-6EJHJRBA.js");return typeof window>"u"?void 0:o({appName:e?.metadata?.name,appLogoUrl:e?.metadata?.icons[0],appChainIds:e.networks?.map(c=>c.id)||[1,84532],preference:{options:e.coinbasePreference??"all"}}).getProvider()}catch(o){console.error("Failed to import Coinbase Wallet SDK:",o);return}})}let s={metadata:e.metadata};if(e.enableInjected!==!1&&(s.injected=n()),e.enableCoinbase!==!1){let o=yield i();o&&(s.coinbase=o)}return s.EIP6963=e.enableEIP6963!==!1,s})}signMessage(e){return p(this,null,function*(){let{message:t,address:n,provider:i}=e;if(!i)throw new Error("Provider is undefined");try{return{signature:yield To.signMessage(t,i,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}})}sendTransaction(e){return p(this,null,function*(){if(!e.provider)throw new Error("Provider is undefined");return{hash:yield To.sendTransaction({value:e.value,to:e.to,data:e.data,gas:e.gas,gasPrice:e.gasPrice,address:e.address},e.provider,e.address,Number(e.caipNetwork?.id))}})}writeContract(e){return p(this,null,function*(){if(!e.provider)throw new Error("Provider is undefined");let{address:t}=P2.parseCaipAddress(e.caipAddress);return{hash:yield To.writeContract(e,e.provider,t,Number(e.caipNetwork?.id))}})}estimateGas(e){return p(this,null,function*(){let{provider:t,caipNetwork:n,address:i}=e;if(!t)throw new Error("Provider is undefined");try{return{gas:yield To.estimateGas({data:e.data,to:e.to,address:i},t,i,Number(n?.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}})}getEnsAddress(e){return p(this,null,function*(){let{name:t,caipNetwork:n}=e;return n?{address:yield To.getEnsAddress(t,n)}:{address:""}})}parseUnits(e){return To.parseUnits(e.value,e.decimals)}formatUnits(e){return To.formatUnits(e.value,e.decimals)}syncConnection(e){return p(this,null,function*(){let{id:t,chainId:n}=e,i=this.connectors.find(c=>c.id===t),s=i?.provider;if(!s)throw new Error("Provider not found");let o=yield s.request({method:"eth_requestAccounts"}),a=yield s.request({method:"eth_chainId"});if(this.listenProviderEvents(s),!o[0])throw new Error("No accounts found");if(!i?.type)throw new Error("Connector type not found");return{address:o[0],chainId:Number(a)||Number(n),provider:s,type:i.type,id:t}})}syncConnectors(e){return p(this,null,function*(){this.ethersConfig=yield this.createEthersConfig(e),this.ethersConfig?.EIP6963&&this.listenInjectedConnector(!0),Object.keys(this.ethersConfig||{}).filter(n=>n!=="metadata"&&n!=="EIP6963").forEach(n=>{let i=n==="coinbase"?"coinbaseWalletSDK":n,s=n===$e.CONNECTOR_ID.INJECTED;this.namespace&&this.addConnector({id:i,explorerId:Po.ConnectorExplorerIds[i],imageUrl:e?.connectorImages?.[i],name:Po.ConnectorNamesMap[i]||"Unknown",imageId:Po.ConnectorImageIds[i],type:Po.ConnectorTypesMap[i]??"EXTERNAL",info:s?void 0:{rdns:i},chain:this.namespace,chains:[],provider:this.ethersConfig?.[n]})})})}setUniversalProvider(e){this.addConnector(new fa({provider:e,caipNetworks:this.caipNetworks||[],namespace:"eip155"}))}eip6963EventHandler(e){if(e.detail){let{info:t,provider:n}=e.detail;if(!this.connectors?.find(s=>s.name===t?.name)){let s=Po.ConnectorTypesMap[$e.CONNECTOR_ID.EIP6963],o=t?.rdns||t?.name||t?.uuid;s&&this.namespace&&o&&this.addConnector({id:o,type:s,imageUrl:t?.icon,name:t?.name||"Unknown",provider:n,info:t,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){let t=this.eip6963EventHandler.bind(this);window.addEventListener(yn.EIP6963_ANNOUNCE_EVENT,t),window.dispatchEvent(new Event(yn.EIP6963_REQUEST_EVENT))}}connect(i){return p(this,arguments,function*({id:e,type:t,chainId:n}){let o=this.connectors.find(l=>l.id===e)?.provider;if(!o)throw new Error("Provider not found");let a=[],c;if(t==="AUTH"){let{address:l}=yield o.connect({chainId:n,preferredAccountType:ye.state.defaultAccountTypes.eip155});a=[l]}else{if(a=yield o.request({method:"eth_requestAccounts"}),c=yield o.request({method:"eth_chainId"}),c!==n){let l=this.caipNetworks?.find(u=>u.id===n);if(!l)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{yield this.switchNetwork({caipNetwork:l,provider:o,providerType:t})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.listenProviderEvents(o)}return{address:a[0],chainId:Number(n),provider:o,type:t,id:e}})}reconnect(e){return p(this,null,function*(){let{id:t,chainId:n}=e,i=this.connectors.find(s=>s.id===t);i&&i.type==="AUTH"&&n&&(yield i.provider.connect({chainId:n,preferredAccountType:ye.state.defaultAccountTypes.eip155}))})}getAccounts(e){return p(this,null,function*(){let t=this.connectors.find(s=>s.id===e.id),n=t?.provider;if(!n||!t)throw new Error("Provider not found");if(e.id===$e.CONNECTOR_ID.AUTH){let s=t.provider,{address:o,accounts:a}=yield s.connect();return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Br.createAccount("eip155",c.address,c.type))})}return{accounts:(yield n.request({method:"eth_requestAccounts"})).map(s=>Br.createAccount("eip155",s,"eoa"))}})}disconnect(e){return p(this,null,function*(){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");switch(e.providerType){case"WALLET_CONNECT":e.provider.session&&e.provider.disconnect();break;case"AUTH":yield e.provider.disconnect();break;case"ANNOUNCED":case"EXTERNAL":yield this.revokeProviderPermissions(e.provider);break;default:throw new Error("Unsupported provider type")}})}getBalance(e){return p(this,null,function*(){let t=e.address,n=this.caipNetworks?.find(i=>i.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&n.chainNamespace==="eip155"){let i=`${n.caipNetworkId}:${t}`,s=this.balancePromises[i];if(s)return s;let o=Kt.getNativeBalanceCacheForCaipAddress(i);if(o)return{balance:o.balance,symbol:o.symbol};let a=new Oa(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[i]=new Promise(c=>p(this,null,function*(){let l=yield a.getBalance(t),u=kg(l);Kt.updateNativeBalanceCache({caipAddress:i,balance:u,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:u,symbol:n.nativeCurrency.symbol})})).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}})}getProfile(e){return p(this,null,function*(){if(e.chainId===1){let t=new Vs("mainnet"),n=yield t.lookupAddress(e.address),i=yield t.getAvatar(e.address);return{profileName:n||void 0,profileImage:i||void 0}}return{profileName:void 0,profileImage:void 0}})}listenProviderEvents(e){let t=()=>{this.removeProviderListeners(e),this.emit("disconnect")},n=s=>{s.length>0?this.emit("accountChanged",{address:s[0]}):t()},i=s=>{let o=typeof s=="string"?Kc.hexStringToNumber(s):Number(s);this.emit("switchNetwork",{chainId:o})};e.on("disconnect",t),e.on("accountsChanged",n),e.on("chainChanged",i),this.providerHandlers={disconnect:t,accountsChanged:n,chainChanged:i}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("chainChanged",this.providerHandlers.chainChanged),this.providerHandlers=null)}switchNetwork(e){return p(this,null,function*(){let{caipNetwork:t,provider:n,providerType:i}=e;if(i==="AUTH"){yield Dn(r.prototype,this,"switchNetwork").call(this,e);return}try{yield n.request({method:"wallet_switchEthereumChain",params:[{chainId:Kc.numberToHexString(t.id)}]})}catch(s){if(s.code===Us.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===Us.ERROR_INVALID_CHAIN_ID||s.code===Us.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===Us.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)yield Kc.addEthereumChain(n,t);else if(i==="ANNOUNCED"||i==="EXTERNAL"||i==="INJECTED")throw new Error("Chain is not supported")}})}getWalletConnectProvider(){return this.connectors.find(e=>e.type==="WALLET_CONNECT")?.provider}revokeProviderPermissions(e){return p(this,null,function*(){try{(yield e.request({method:"wallet_getPermissions"})).find(i=>i.parentCapability==="eth_accounts")&&(yield e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}))}catch(t){console.info("Could not revoke permissions from wallet. Disconnecting...",t)}})}getCapabilities(e){return p(this,null,function*(){let t=Ve.getProvider($e.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");let n=t.session?.sessionProperties?.capabilities;if(n){let s=To.parseWalletCapabilities(n)[e];if(s)return s}return yield t.request({method:"wallet_getCapabilities",params:[e]})})}grantPermissions(e){return p(this,null,function*(){let t=Ve.getProvider($e.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return yield t.request({method:"wallet_grantPermissions",params:e})})}revokePermissions(e){return p(this,null,function*(){let t=Ve.getProvider($e.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return yield t.request({method:"wallet_revokePermissions",params:[e]})})}walletGetAssets(e){return p(this,null,function*(){let t=Ve.getProvider($e.CHAIN.EVM);if(!t)throw new Error("Provider is undefined");return yield t.request({method:"wallet_getAssets",params:[e]})})}};var _i=class r{constructor(e){this.ngZone=e;this.ngZone.runOutsideAngular(()=>{let t={name:"CryptoManager",description:"Manage your crypto assets with ease",url:"https://localhost:4200",icons:["https://avatars.githubusercontent.com/u/179229932"]};this.modal=dT({adapters:[new Ef],networks:[dE],metadata:t,themeMode:"dark",themeVariables:{"--w3m-accent":"#9145de","--w3m-color-mix":"#9145de","--w3m-color-mix-strength":3,"--w3m-border-radius-master":"3px"},features:{analytics:!1},projectId:this.projectId}),this.modal?.subscribeAccount(n=>{n.address?this.walletAddressSig.set(Pe(n.address)):this.walletAddressSig.set(void 0)}),this.modal?.subscribeEvents(n=>{this.walletConnectEventsSig.set(k({},n))})})}projectId="ed4df6855affb067866326a536a6421e";modal;walletAddressSig=xe(void 0);walletConnectEventsSig=xe(void 0);$walletAddress=this.walletAddressSig.asReadonly();$walletConnectEvents=this.walletConnectEventsSig.asReadonly();disconnect(){this.modal?.disconnect()}static \u0275fac=function(t){return new(t||r)(Ie(Er))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var H0=class r{constructor(e){this.walletConnectService=e}static \u0275fac=function(t){return new(t||r)(Ae(_i))};static \u0275cmp=Ce({type:r,selectors:[["appkit-btn"]],decls:1,vars:0,consts:[["size","sm"]],template:function(t,n){t&1&&le(0,"appkit-button",0)},encapsulation:2})};var q0=class r{constructor(e){this.pageLayoutService=e}onMenuClick(){this.pageLayoutService.toggleSidebar()}static \u0275fac=function(t){return new(t||r)(Ae(Ko))};static \u0275cmp=Ce({type:r,selectors:[["top-bar"]],hostAttrs:[1,"pr-5","h-16","py-2","gap-4","w-full","fixed","top-0","flex","justify-between","items-center","bg-mutedDark","z-[100]"],decls:14,vars:0,consts:[[1,"flex","items-center","gap-1"],[1,"p-2","ml-3","rounded-xl","cursor-pointer","hover:bg-accent","hover:text-accentForeground","transition-colors",3,"click"],[1,"fi","fi-sr-menu-burger","flex","text-lg"],[1,"font-bold","text-2xl","leading-none"],[1,"flex","items-center","gap-5"],[1,"bg-primary/15","border","border-primary","text-primary","hover:opacity-95","rounded-lg","px-3","py-1","flex","items-center","gap-2","transition-all"],[1,"fi","fi-sr-fire-flame-curved","flex"],[1,"text-sm","font-medium"],[1,"p-3","rounded-xl","cursor-pointer","hover:bg-accent","hover:text-accentForeground","transition-colors"],[1,"fi","fi-ss-bell","flex"]],template:function(t,n){t&1&&(j(0,"div",0)(1,"div",1),Ee("click",function(){return n.onMenuClick()}),le(2,"i",2),z(),j(3,"h1",3),ne(4,"CryptoManager"),z()(),j(5,"div",4)(6,"div")(7,"button",5),le(8,"i",6),j(9,"span",7),ne(10,"Upgrade"),z()()(),j(11,"div",8),le(12,"i",9),z(),le(13,"appkit-btn"),z())},dependencies:[H0],encapsulation:2,changeDetection:0})};var RZ=(r,e,t)=>({"layout-border--expanded":r,"layout-border--small-screen":e,"layout-border--small-screen--expanded":t}),OZ=(r,e)=>({"ml-64":r,"ml-16":e});function MZ(r,e){}function kZ(r,e){if(r&1&&le(0,"sidebar",1),r&2){let t=te();oe("sidebarSections",t.sidebarSections)("@queryAnimationSidebar",void 0)}}var z0=class r{pageLayoutService=K(Ko);get isCollapsed(){return this.pageLayoutService.isSidebarCollapsed$()}get smallScreen(){return this.pageLayoutService.isSmallScreen$()}sidebarSections=[{label:"Wallet",collapsed:!1,items:[{name:"Dashboard",icon:{active:"fi-sr-dashboard",inactive:"fi-rr-dashboard"},route:"/dashboard"},{name:"Smart Contracts",icon:{active:"fi-sr-document",inactive:"fi-rr-document"},route:"/smart-contract"},{name:"NFTs View",icon:{active:"fi-sr-floor-layer",inactive:"fi-rr-floor-layer"},route:"/nfts"},{name:"Logs",icon:{active:"fi-sr-receipt",inactive:"fi-rr-receipt"},route:"/logs"}]},{label:"Trends",collapsed:!1,items:[{name:"Market Overview",icon:{active:"fi-sr-chart-simple",inactive:"fi-rr-chart-simple"},route:"/overview"},{name:"Social Trends",icon:{active:"fi-sr-bookmark",inactive:"fi-rr-bookmark"},route:"/trends"}]}];static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["dashboard-section-layout"]],hostAttrs:[1,"h-screen","bg-mutedDark","text-foreground"],decls:6,vars:10,consts:[[1,"layout-border",3,"ngClass"],[3,"sidebarSections"],[1,"flex-1","transition-all","duration-300","bg-background","overflow-visible","mt-16",3,"ngClass"]],template:function(t,n){t&1&&(le(0,"span",0)(1,"top-bar"),Le(2,MZ,0,0)(3,kZ,1,2,"sidebar",1),j(4,"div",2),le(5,"router-outlet"),z()),t&2&&(oe("ngClass",CC(3,RZ,!n.isCollapsed&&!n.smallScreen,n.smallScreen,!n.isCollapsed&&n.smallScreen)),Y(2),Ke(n.smallScreen===!0&&n.isCollapsed===!0?2:3),Y(2),oe("ngClass",Qc(7,OZ,!n.smallScreen&&!n.isCollapsed,!n.smallScreen&&n.isCollapsed)))},dependencies:[Bt,Ir,jp,q0,ec],styles:[".layout-border[_ngcontent-%COMP%]{display:block;position:fixed;top:calc(4rem + 1px);left:calc(4rem + 1px);width:calc(100% - 4rem);height:calc(100vh - 4rem);pointer-events:none;background-color:transparent;box-shadow:0 0 0 1px hsla(var(--border)),-10px 0 0 10px hsla(var(--muted-dark));border-top-left-radius:1.5rem;z-index:100;transition:all .25s ease-in-out}.layout-border--expanded[_ngcontent-%COMP%]{left:calc(16rem + 1px);width:calc(100% - 16rem)}.layout-border--small-screen[_ngcontent-%COMP%]{left:0;width:100%;border-top-left-radius:0;box-shadow:0 0 0 1px hsla(var(--border))}.layout-border--small-screen--expanded[_ngcontent-%COMP%]{left:calc(16rem + 1px);width:calc(100% - 16rem);box-shadow:0 0 0 1px hsla(var(--border)),-10px 0 0 10px hsla(var(--muted-dark));border-top-left-radius:1.5rem}"],data:{animation:[gs("queryAnimationSidebar","@navbarSlideInOut"),Wt("navbarSlideInOut",{duration:"250ms",animateX:!0,opacity:"1"})]},changeDetection:0})};var $0=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["navbar"]],hostAttrs:[1,"sticky","top-0","z-10","bg-background/55","backdrop-blur","flex","items-center","justify-between","md:px-14","xl:px-16","px-8","py-4","gap-10","font-semibold"],decls:21,vars:0,consts:[[1,"text-xl"],[1,"hidden","md:block"],[1,"flex","gap-6","items-center","justify-center","font-medium","text-neutral-200"],[1,"hover:text-white","transition-colors"],["href",""],[1,"flex","py-2","px-4","items-center","gap-2","border","border-border","rounded-dft","min-w-fit"],[1,"fi","fi-rr-wallet","flex"]],template:function(t,n){t&1&&(j(0,"div",0)(1,"h1"),ne(2,"BeraPools"),z()(),j(3,"nav",1)(4,"ul",2)(5,"li",3)(6,"a",4),ne(7,"Dashboard"),z()(),j(8,"li",3)(9,"a",4),ne(10,"Pools"),z()(),j(11,"li",3)(12,"a",4),ne(13,"Analytics"),z()(),j(14,"li",3)(15,"a",4),ne(16,"FAQ"),z()()()(),j(17,"button",5),le(18,"i",6),j(19,"span"),ne(20,"Connect Wallet"),z()())},encapsulation:2,changeDetection:0})};var FZ=["custom-footer",""],G0=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["footer","custom-footer",""]],hostAttrs:[1,"text-foreground"],attrs:FZ,decls:32,vars:0,consts:[[1,"flex","flex-col","sm:gap-2","gap-6","md:px-14","px-8","py-4","max-w-[1920px]","mx-auto"],[1,"flex","items-center","justify-between","sm:gap-8","gap-6"],[1,""],[1,"text-2xl","font-medium","leading-none"],[1,"flex","items-center","divide-x","divide-border","text-sm","text-foreground"],[1,"pr-4","hover:text-white","transition-colors"],["href","#"],[1,"px-4","hover:text-white","transition-colors"],[1,"pl-4","hover:text-white","transition-colors"],[1,"text-sm","text-mutedForegroundNeutral"],[1,"flex","items-center","gap-4","text-lg","text-mutedForegroundNeutral"],["href","#","target","_blank",1,"hover:text-foreground","transition-colors"],[1,"fi","fi-brands-discord","flex"],[1,"fi","fi-brands-twitter-alt","flex"],[1,"fi","fi-brands-instagram","flex"],[1,"fi","fi-brands-github","flex"]],template:function(t,n){t&1&&(j(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),ne(4,"BeraPools"),z()(),j(5,"nav")(6,"ul",4)(7,"li",5)(8,"a",6),ne(9,"Ecosystem"),z()(),j(10,"li",7)(11,"a",6),ne(12,"Contact Us"),z()(),j(13,"li",8)(14,"a",6),ne(15,"Terms of Service"),z()()()()(),j(16,"div",1)(17,"span",9),ne(18,"\xA9 2025 BeraPools. All rights reserved."),z(),j(19,"ul",10)(20,"li")(21,"a",11),le(22,"i",12),z()(),j(23,"li")(24,"a",11),le(25,"i",13),z()(),j(26,"li")(27,"a",11),le(28,"i",14),z()(),j(29,"li")(30,"a",11),le(31,"i",15),z()()()()())},encapsulation:2,changeDetection:0})};var K0=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["landing-page-section"]],decls:3,vars:0,consts:[["custom-footer","",1,"mt-12","md:mt-16","border-t","border-border/30"]],template:function(t,n){t&1&&le(0,"navbar")(1,"router-outlet")(2,"footer",0)},dependencies:[$0,ec,G0],encapsulation:2,changeDetection:0})};var BZ=["customized-button",""],UZ=["*"],LZ=r=>({"loader--light":r});function VZ(r,e){if(r&1&&le(0,"span",0),r&2){let t=te();oe("ngClass",It(1,LZ,t.variant()==="contained"))}}function jZ(r,e){r&1&&le(0,"i",1)}function HZ(r,e){r&1&&Gs(0)}var th=class r{variant=ee("contained");status=ee("default");contained={default:"bg-primary text-foreground border border-primary enabled:hover:bg-primary-600 enabled:hover:border-primary-600 disabled:opacity-40 disabled:bg-primary-700 disabled:text-primary-300 disabled:border-primary-700 enabled:active:opacity-90",loading:"bg-primary text-foreground border border-primary opacity-50 hover:cursor-default pointer-events-none",success:"bg-success text-foreground border border-success hover:cursor-default pointer-events-none"};outline={default:"border border-primary text-primary enabled:hover:bg-primary-600 enabled:hover:text-foreground enabled:hover:border-primary-600 disabled:opacity-30 enabled:active:opacity-90",loading:"border border-primary opacity-50 hover:cursor-default pointer-events-none",success:"border border-success text-success hover:cursor-default pointer-events-none"};get variantClasses(){return`${this[this.variant()][this.status()]}`}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["button","customized-button",""]],hostAttrs:[1,"px-4","py-2","rounded-dft","transition-all","min-h-[2.5rem]","min-w-fit"],hostVars:2,hostBindings:function(t,n){t&2&&hs(n.variantClasses)},inputs:{variant:[1,"variant"],status:[1,"status"]},attrs:BZ,ngContentSelectors:UZ,decls:3,vars:1,consts:[[1,"loader","w-6","mx-auto","my-auto",3,"ngClass"],[1,"fi","fi-br-check","flex","items-center","justify-center"]],template:function(t,n){t&1&&(Mo(),Le(0,VZ,1,3,"span",0)(1,jZ,1,0,"i",1)(2,HZ,1,0)),t&2&&Ke(n.status()==="loading"?0:n.status()==="success"?1:n.status()==="default"?2:-1)},dependencies:[Ir],encapsulation:2,changeDetection:0})};function qZ(r,e){if(r&1&&(j(0,"div",1)(1,"div",2),le(2,"i",3),z(),j(3,"div")(4,"h2",4),ne(5),z(),j(6,"p",5),ne(7),z()()()),r&2){let t=e.$implicit;Y(2),hs("fi flex text-primary text-lg "+t.icon),Y(3),Sr(t.title),Y(2),Sr(t.description)}}var W0=class r{cards=[{icon:"fi-br-chart-line-up",title:"Real-time Analytics",description:"Track your pool performance with detailed metrics and charts"},{icon:"fi-sr-coins",title:"Multi-pool Management",description:"Manage multiple liquidity positions from a single dashboard"},{icon:"fi-br-shield-check",title:"Smart Security",description:"Advanced security features to protect your valuable assets"}];static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["cards-section"]],decls:3,vars:0,consts:[[1,"cards-grid","grid","md:grid-cols-[repeat(auto-fit,_minmax(300px,_1fr))]","grid-cols-[repeat(auto-fit,_minmax(250px,_1fr))]","m-px","rounded-2xl","border","border-border","overflow-clip","gap-px","bg-border"],[1,"bg-background","flex","flex-col","sm:items-start","items-center","sm:gap-2","sm:p-6","gap-2","p-4","sm:text-start","text-center"],[1,"p-3","rounded-dft","border","border-primary-700","bg-primary-600/10","shadow-[5px_5px_30px_4px]","shadow-primary/15"],["aria-hidden","true"],[1,"font-medium","text-xl","leading-8"],[1,"text-neutral-400"]],template:function(t,n){t&1&&(j(0,"div",0),Qr(1,qZ,8,4,"div",1,Yr),z()),t&2&&(Y(),Zr(n.cards))},dependencies:[Bt],styles:["@media (max-width: 980px) and (min-width: 640px){.cards-grid[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-last-child(1):nth-child(odd):not(:nth-child(1)){grid-column:span 2/span 2}}"]})};var zZ=["*"],$Z=r=>({"rotate-180":r});function GZ(r,e){r&1&&(j(0,"div",4),Gs(1),z()),r&2&&oe("@slideAccordion",void 0)}var J0=class r{title=ee.required();isOpen=ee(!1);clicked=Wr();static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["accordion"]],hostAttrs:[1,"accordion"],inputs:{title:[1,"title"],isOpen:[1,"isOpen"]},outputs:{clicked:"clicked"},ngContentSelectors:zZ,decls:6,vars:6,consts:[[1,"border","rounded-dft","transition-colors",3,"ngClass"],[1,"flex","items-center","justify-between","px-6","py-4","cursor-pointer",3,"click"],[1,"text-lg","font-semibold"],[1,"fi","fi-rr-angle-small-down","flex","transition-all",3,"ngClass"],[1,"px-6","pb-4","overflow-hidden"]],template:function(t,n){t&1&&(Mo(),j(0,"div",0)(1,"div",1),Ee("click",function(){return n.clicked.emit()}),j(2,"h2",2),ne(3),z(),le(4,"i",3),z(),Le(5,GZ,2,1,"div",4),z()),t&2&&(oe("ngClass",n.isOpen()?"border-accent bg-accent/5":"border-border"),Y(3),Sr(n.title()),Y(),oe("ngClass",It(4,$Z,n.isOpen())),Y(),Ke(n.isOpen()?5:-1))},dependencies:[Ir],encapsulation:2,data:{animation:[Wt("slideAccordion",{animateY:!0})]},changeDetection:0})};var KZ=(r,e)=>({"background-color":r,border:e}),WZ=()=>({"background-color":"hsla(0, 0%, 100%, 0.01)",border:"1px solid hsla(0, 0%, 100%, 0.15)"}),JZ=r=>({"background-color":r}),YZ=()=>({"background-color":"hsla(0, 0%, 60%)"});function QZ(r,e){if(r&1){let t=xt();j(0,"a",5)(1,"div",6),Ee("mouseover",function(){let i=Ye(t).$index,s=te();return Qe(s.hover(i))})("mouseleave",function(){let i=Ye(t).$index,s=te();return Qe(s.leave(i))}),le(2,"div",7),z()()}if(r&2){let t=e.$implicit,n=e.$index,i=te();oe("href",t.href,Sf),Y(),oe("ngStyle",i.itemHover()[n]?Qc(5,KZ,"hsla("+t.hslColor+", 0.05)","1px solid hsla("+t.hslColor+")"):qb(8,WZ)),Y(),yC("mask-image","url("+t.iconUrl+")"),oe("ngStyle",i.itemHover()[n]?It(9,JZ,"hsla("+t.hslColor+")"):qb(11,YZ))}}var Y0=class r{itemHover=xe([]);platformList=[{iconUrl:"https://raw.githubusercontent.com/Uniswap/brand-assets/refs/heads/main/Uniswap%20Brand%20Assets/Uniswap_icon_pink.svg",href:"https://uniswap.org",alt:"Uniswap",hslColor:"331, 40%, 50%"},{iconUrl:"/logo/pendle.png",href:"https://pendle.finance",alt:"Pendle",hslColor:"200, 40%, 50%"},{iconUrl:"/logo/pancakeswap-bunny.png",href:"https://pancakeswap.finance",alt:"PancakeSwap",hslColor:"39, 40%, 50%"},{iconUrl:"https://raw.githubusercontent.com/base/brand-kit/refs/heads/main/logo/symbol/Base_Symbol_Black.png",href:"https://base.org",alt:"Base",hslColor:"240, 40%, 50%"}];constructor(){this.itemHover.set(this.platformList.map(()=>!1))}hover(e){this.itemHover.update(t=>(t[e]=!0,t))}leave(e){this.itemHover.update(t=>(t[e]=!1,t))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["supported-platforms"]],decls:9,vars:0,consts:[[1,"flex","flex-col","gap-6"],[1,"flex","flex-col","gap-4","items-center","text-center"],[1,"text-3xl","font-semibold"],[1,"text-neutral-300","max-w-[32rem]"],[1,"flex","flex-wrap","gap-4","justify-center"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"group","p-6","backdrop-blur-sm","rounded-dft","transition-all",3,"mouseover","mouseleave","ngStyle"],[1,"mask","transition-all",3,"ngStyle"]],template:function(t,n){t&1&&(j(0,"div",0)(1,"div",1)(2,"h2",2),ne(3,"Supported Platforms"),z(),j(4,"p",3),ne(5,"Our platform supports a wide range of liquidity pool platforms, enabling seamless integration and efficient management of your assets."),z()(),j(6,"div",4),Qr(7,QZ,3,12,"a",5,Yr),z()()),t&2&&(Y(7),Zr(n.platformList))},dependencies:[Xc],styles:[".mask[_ngcontent-%COMP%]{width:7.2rem;height:7.2rem;mask-size:100% 100%;mask-repeat:no-repeat;mask-position:center}"],changeDetection:0})};function ZZ(r,e){if(r&1){let t=xt();j(0,"accordion",37),Ee("clicked",function(){let i=Ye(t).$index,s=te();return Qe(s.accordionClicked(i))}),j(1,"p",38),ne(2),z()()}if(r&2){let t=e.$implicit;oe("title",t.title)("isOpen",t.active),Y(2),Sr(t.text)}}var Q0=class r{accordions=xe([{active:!1,title:"Accordion 1",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."},{active:!1,title:"Accordion 2",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."},{active:!1,title:"Accordion 3",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."},{active:!1,title:"Accordion 4",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."}]);accordionClicked(e){this.accordions.update(t=>t.map((n,i)=>(i===e?n.active=!n.active:n.active=!1,n)))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["home-page"]],decls:52,vars:0,consts:[[1,"lp-header"],[1,"landing-page-container","flex","flex-col","items-center","justify-center","gap-6","pt-24","md:pt-32","pb-12","md:pb-16","relative"],["src",`/pattern/halftone-pattern.jpg
        `,"aria-hidden","true",1,"halftone-mask","mix-blend-exclusion","invert","absolute","-z-10","top-[50px]","h-full","aspect-video","bg-cover"],[1,"flex","flex-col","items-center","text-center"],[1,"md:mb-6","mb-4","md:text-5xl","text-4xl","font-semibold","max-w-[50rem]","leading-tight"],[1,"flex","justify-center","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 3238.5 1608","fill","hsla(270, 70%, 67%, 1)",1,"w-auto","h-8","block"],["d",`M1286.9,687.3c-2.2-7-3.8-14.1-5-21.3c-0.6-3.3-1.2-6.7-1.9-10c-1.6-7.2-3.3-14.3-5.2-21.4v0
                          c31.5-47.6,181.9-296.1,10.7-455.6c-190-177-412,55-412,55l0.7,1c-99.8-30.3-208-33.9-313.2-1c0,0,0,0,0,0
                          c-1.3-1.4-222.5-231.5-412-55c-189.5,176.5,15.1,462.1,16.2,463.6c0,0,0,0,0,0c-2.2,6.7-3.9,13.6-5.1,20.5
                          C139.6,785.4,0,823.1,0,1036s146,388,444,388h122.3c0,0,0,0,0,0c0.5,0.8,50.9,72.1,154.3,72.1c96-0.1,159.3-71.4,159.9-72.1
                          c0,0,0,0,0,0h116.7c298,0,444-171,444-388C1441.2,837.8,1320.1,791.4,1286.9,687.3z`],["d",`M3223.3,377c0,0,25.2-233.3-166.4-283.4V0h-148.3v91.2l0,0c-202.1,44.7-176,285.8-176,285.8v40
                          c0,0-26.1,241.1,176.1,285.8h0v200.3c-213,38.8-186.1,287.8-186.1,287.8v40c0,0-26.1,241.1,176,285.8l0,0v91.2H3047v-93.6
                          c191.6-50.1,166.4-283.4,166.4-283.4c8.4,0,15.2-6.8,15.2-15.2v-9.7c0-8.4-6.8-15.2-15.2-15.2c0,0,25-231.3-163.9-282.8l0,0V702.8
                          h-2.2c202.1-44.7,176.1-285.8,176.1-285.8c8.4,0,15.2-6.8,15.2-15.2v-9.7C3238.5,383.8,3231.7,377,3223.3,377z
                           M3102.4,1190.8h-13.6c-8.4,0-15.2,6.8-15.2,15.2v9.7c0,8.4,6.8,15.2,15.2,15.2h13.6c0,144.7-48.1,169.1-64.2,173.2
                          c-2.7,0.7-5.2-1.3-5.2-4v-46.1c0-25.5-16.2-39.5-32.5-47.1c-20.5-9.6-44.5-9.6-65,0c-16.2,7.6-32.5,21.6-32.5,47.1v46.1
                          c0,2.7-2.5,4.7-5.1,4.1c-16.1-4-64.3-28.2-64.3-173.2v-40c0-144.7,48.1-169.1,64.2-173.2c2.7-0.7,5.2,1.3,5.2,4v46.1
                          c0,25.5,16.2,39.5,32.5,47.1c20.5,9.6,44.5,9.6,65,0c16.2-7.6,32.5-21.6,32.5-47.1v-46.1c0-2.7,2.5-4.7,5.1-4.1
                          C3054.2,1021.7,3102.4,1045.9,3102.4,1190.8z M3098.9,417h13.6c0,145-48.2,169.2-64.3,173.2c-2.6,0.7-5.1-1.4-5.1-4.1V540
                          c0-25.5-16.2-39.5-32.5-47.1c-20.5-9.6-44.5-9.6-65,0c-16.2,7.6-32.5,21.6-32.5,47.1v46.1c0,2.7-2.6,4.7-5.2,4
                          c-16.2-4.1-64.2-28.5-64.2-173.2v-40c0-145,48.2-169.2,64.3-173.2c2.6-0.7,5.1,1.4,5.1,4.1V254c0,25.5,16.2,39.5,32.5,47.1
                          c20.5,9.6,44.5,9.6,65,0c16.2-7.6,32.5-21.6,32.5-47.1v-46.1c0-2.7,2.6-4.7,5.2-4c16.2,4.1,64.2,28.4,64.2,173.2h-13.6
                          c-8.4,0-15.2,6.8-15.2,15.2v9.7C3083.7,410.2,3090.5,417,3098.9,417z`],["d",`M2490.3,789c0,0,26.2-242.5-177.8-286.1V285c198.6-46.5,172.8-285,172.8-285S2374,0,2374.4,0
                          c0,145-48.2,169.2-64.3,173.2c-2.6,0.7-5.1-1.4-5.1-4.1V123c0-25.5-16.2-39.5-32.5-47.1c-20.5-9.6-44.5-9.6-65,0
                          c-16.2,7.6-32.5,21.6-32.5,47.1v46.1c0,2.7-2.6,4.7-5.2,4c-16.2-4.1-64.2-28.4-64.2-173.2c0.5,0-110.9,0-110.9,0
                          s-26.7,247.5,184.2,287.4v215.1C1973.3,545.4,1999.6,789,1999.6,789v40c0,0-26.3,243.6,179.2,286.4v205.1
                          c-210.9,39.9-184.2,287.4-184.2,287.4s111.3,0,110.9,0c0-145,48.2-169.2,64.3-173.2c2.6-0.7,5.1,1.4,5.1,4.1v46.1
                          c0,25.5,16.2,39.5,32.5,47.1c20.5,9.6,44.5,9.6,65,0c16.2-7.6,32.5-21.6,32.5-47.1v-46.1c0-2.7,2.6-4.7,5.2-4
                          c16.2,4.1,64.2,28.4,64.2,173.2c-0.5,0,110.9,0,110.9,0s25.8-238.5-172.8-285v-207.8c204-43.7,177.8-286.1,177.8-286.1
                          c8.4,0,15.2-6.8,15.2-15.2v-9.7C2505.5,795.8,2498.7,789,2490.3,789z M2365.9,829h13.6c0,145-48.2,169.2-64.3,173.2
                          c-2.6,0.7-5.1-1.4-5.1-4.1V952c0-25.5-16.2-39.5-32.5-47.1c-20.5-9.6-44.5-9.6-65,0c-16.2,7.6-32.5,21.6-32.5,47.1v46.1
                          c0,2.7-2.6,4.7-5.2,4c-16.2-4.1-64.2-28.5-64.2-173.2v-40c0-145,48.2-169.2,64.3-173.2c2.6-0.7,5.1,1.4,5.1,4.1V666
                          c0,25.5,16.2,39.5,32.5,47.1c20.5,9.6,44.5,9.6,65,0c16.2-7.6,32.5-21.6,32.5-47.1v-46.1c0-2.7,2.6-4.7,5.2-4
                          c16.2,4.1,64.2,28.5,64.2,173.2h-13.6c-8.4,0-15.2,6.8-15.2,15.2v9.7C2350.7,822.2,2357.5,829,2365.9,829z`],[1,"font-bold","text-transparent","bg-clip-text","bg-gradient-to-r","from-primary-400","to-primary-600","leading-tight"],[1,"md:max-w-[36rem]","max-w-[27rem]","md:text-lg","text-base","text-neutral-300"],[1,"lg:flex","flex","md:gap-8","gap-6"],["customized-button","","variant","contained",1,"px-6"],["href","#lp-faq"],["customized-button","","variant","outline",1,"px-6"],[1,"py-12","md:py-16"],[1,"landing-page-container"],["id","lp-faq",1,"lp-faq","py-12","md:py-16"],[1,"landing-page-container","grid","grid-cols-1","md:grid-cols-2","gap-6","relative","items-start"],[1,"md:sticky","md:top-24"],[1,"text-3xl","font-semibold","mb-4","md:text-start","text-center"],[1,"text-neutral-400","text-justify"],[1,"flex","flex-col","gap-4"],[3,"title","isOpen"],[1,"lp-supported-platform","py-12","md:py-16"],[1,"landing-page-container","relative"],["src",`/pattern/halftone-wave.jpg
        `,"aria-hidden","true",1,"halftone-mask-wave","mix-blend-exclusion","invert","absolute","-z-10","top-[-5vw]","w-[min(720px,80%)]","left-[20%]","object-cover","aspect-video","bg-cover"],[1,"landing-page-container","flex","flex-col","items-center","justify-center","gap-6"],[1,"glow-fx","flex","w-full","items-center","gap-4","relative"],[1,"h-[1px]","flex-grow","bg-gradient-to-r","from-transparent","via-primary-200","to-primary-200","opacity-5"],[1,"fi","fi-ts-rocket-lunch","flex","text-4xl","text-primary","p-4","rounded-full"],[1,"h-[1px]","flex-grow","bg-gradient-to-l","from-transparent","via-primary-200","to-primary-200","opacity-5"],[1,"flex","flex-col","gap-4","items-center","text-center"],[1,"text-3xl","font-semibold"],[1,"text-neutral-300","w-[min(32rem,80%)]"],["customized-button","","variant","outline"],[3,"clicked","title","isOpen"],[1,"text-neutral-300"]],template:function(t,n){t&1&&(j(0,"header",0)(1,"div",1),le(2,"img",2),j(3,"div",3)(4,"h1",4),ne(5,"Manage your liquidity on "),j(6,"div",5),nC(),j(7,"svg",6),le(8,"path",7)(9,"path",8)(10,"path",9),z(),iC(),j(11,"span",10),ne(12,"BeraChain"),z()()(),j(13,"p",11),ne(14,"Advanced tools for liquidity providers to optimize yields and manage positions across multiple pools."),z()(),j(15,"div",12)(16,"button",13),ne(17,"Launch App"),z(),j(18,"a",14)(19,"button",15),ne(20,"Learn More"),z()()()()(),j(21,"section",16)(22,"div",17),le(23,"cards-section"),z()(),j(24,"section",18)(25,"div",19)(26,"div",20)(27,"h2",21),ne(28,"How BeraPools Works"),z(),j(29,"p",22),ne(30,"BeraPools connects your wallet to the Berachain network and aggregates all your liquidity positions across different platforms into a single, streamlined dashboard. With an intuitive interface, it displays detailed investment data, including metrics like impermanent loss, yield performance, and asset allocation. Everything is automated and customizable \u2014 helping you track your DeFi activity with clarity and make smarter decisions."),z()(),j(31,"div",23),Qr(32,ZZ,3,3,"accordion",24,Yr),z()()(),j(34,"section",25)(35,"div",26),le(36,"img",27)(37,"supported-platforms"),z()(),j(38,"section",16)(39,"div",28)(40,"div",29),le(41,"span",30)(42,"i",31)(43,"span",32),z(),j(44,"div",33)(45,"h1",34),ne(46,"Ready to level up your liquidity pools management?"),z(),j(47,"p",35),ne(48,"Take full control of your DeFi investments with BeraPools. Track all your liquidity positions across the Berachain ecosystem."),z(),j(49,"p")(50,"button",36),ne(51,"Get started now"),z()()()()()),t&2&&(Y(32),Zr(n.accordions()))},dependencies:[th,W0,J0,Y0],styles:['.lp-header[_ngcontent-%COMP%]{position:relative}.lp-header[_ngcontent-%COMP%]:after{content:"";position:absolute;top:40%;left:50%;transform:translate(-50%);width:0px;height:0px;border-radius:50%;background-color:hsla(var(--primary),1);box-shadow:0 0 200px 80px hsla(var(--primary),.6);pointer-events:none;z-index:-1}.lp-faq[_ngcontent-%COMP%]{position:relative}.lp-faq[_ngcontent-%COMP%]:after{content:"";position:absolute;top:min(70%,250px);left:0;width:0;height:0;border-radius:50%;box-shadow:0 0 250px 80px hsla(var(--primary),.3);pointer-events:none;z-index:-1}.lp-supported-platform[_ngcontent-%COMP%]{position:relative}.lp-supported-platform[_ngcontent-%COMP%]:after{content:"";position:absolute;top:150px;left:50%;transform:translate(-50%);background-color:transparent;width:min(40%,800px);height:0;border-radius:200%;box-shadow:0 0 150px 20px hsla(var(--primary),.3);pointer-events:none;z-index:-1}.filter-primary[_ngcontent-%COMP%]{filter:invert(30%) sepia(80%) saturate(500%) hue-rotate(265deg) brightness(100%) contrast(105%)}.halftone-mask[_ngcontent-%COMP%]{mask-image:radial-gradient(ellipse at center,black 5%,transparent 70%);mask-repeat:no-repeat;mask-size:100% 100%;opacity:.1;-webkit-mask-image:radial-gradient(ellipse at center,black 5%,transparent 70%);-webkit-mask-repeat:no-repeat;-webkit-mask-size:100% 100%}.halftone-mask-wave[_ngcontent-%COMP%]{mask-image:radial-gradient(ellipse at center,black 5%,transparent 70%);mask-repeat:no-repeat;mask-size:100% 100%;opacity:.04;-webkit-mask-image:radial-gradient(ellipse at center,black 5%,transparent 70%);-webkit-mask-repeat:no-repeat;-webkit-mask-size:100% 100%}.glow-fx[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:50%;box-shadow:0 0 100px 30px hsla(var(--primary),.3);z-index:-1}@media screen and (max-width: 640px){  cards-section .cards-grid{grid-template-columns:1fr}}'],changeDetection:0})};var cD=[{path:"",component:K0,children:[{path:"",component:Q0}]},{path:"dashboard",component:z0,children:[{path:"",component:Vp}]}];var XZ=(()=>{class r extends qf{constructor(t,n,i){super(t,n,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(n){return new(n||r)(Ie(Gt),Ie(mh),Ie(Hf))};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})();function eX(){return new b_}function tX(r,e,t){return new v_(r,e,t)}var lD=[{provide:Hf,useFactory:eX},{provide:qf,useClass:XZ},{provide:cs,useFactory:tX,deps:[sl,qf,Er]}],N2=[{provide:mh,useFactory:()=>new y_},{provide:ch,useValue:"BrowserAnimations"},...lD],rX=[{provide:mh,useClass:g_},{provide:ch,useValue:"NoopAnimations"},...lD],uD=(()=>{class r{static withConfig(t){return{ngModule:r,providers:t.disableAnimations?rX:N2}}static \u0275fac=function(n){return new(n||r)};static \u0275mod=ls({type:r});static \u0275inj=ss({providers:N2,imports:[Q_]})}return r})();function hD(){return Jc("NgEagerAnimations"),[...N2]}var nX="@",iX=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=K(qs);loadingSchedulerFn=K(sX,{optional:!0});_engine;constructor(t,n,i,s,o){this.doc=t,this.delegate=n,this.zone=i,this.animationType=s,this.moduleImpl=o}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-IQBXTVZ3.js").then(i=>i),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(t):n=t(),n.catch(i=>{throw new ot(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,n){let i=this.delegate.createRenderer(t,n);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let s=new D2(i);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let a=o.createRenderer(t,n);s.use(a),this.scheduler??=this.injector.get(oC,null,{optional:!0}),this.scheduler?.notify(11)}).catch(o=>{s.use(i)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static \u0275fac=function(n){Ub()};static \u0275prov=he({token:r,factory:r.\u0275fac})}return r})(),D2=class{delegate;replay=[];\u0275type=1;constructor(e){this.delegate=e}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,n,i){this.delegate.insertBefore(e,t,n,i)}removeChild(e,t,n){this.delegate.removeChild(e,t,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(e,t,n)),this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n,i){return this.shouldReplay(t)&&this.replay.push(s=>s.listen(e,t,n,i)),this.delegate.listen(e,t,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(nX)}},sX=new Ue("");function dD(r="animations"){return Jc("NgAsyncAnimations"),os([{provide:cs,useFactory:(e,t,n)=>new iX(e,t,n,r),deps:[Gt,sl,Er]},{provide:ch,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ma=class r{tokenKey="authToken";platformId=K(zs);saveToken(e){kf(this.platformId)&&localStorage.setItem(this.tokenKey,e)}getToken(){return kf(this.platformId)?localStorage.getItem(this.tokenKey):null}removeToken(){kf(this.platformId)&&localStorage.removeItem(this.tokenKey)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var Z0=class r{constructor(e){this.walletConnectService=e;e.modal?.subscribeProviders(t=>p(this,null,function*(){if(!t.eip155){this.providerSubject.next(null),console.error("No EIP-155 provider found in WalletConnect provider.");return}let n=t.eip155,i={request:n.request.bind(n)},s=new js(i);this.providerSubject.next(s)}))}providerSubject=new Rn(null);provider$=this.providerSubject.asObservable();signMessage(e){return this.provider$.pipe(is(t=>t!==null),Do(1),Ft(t=>Mr(t.getSigner())),Ft(t=>Mr(t.signMessage(e))))}static \u0275fac=function(t){return new(t||r)(Ie(_i))};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var rh=class r{url="/api/auth";http=K(Wa);localStorageService=K(Ma);register(e,t){this.http.post(`${this.url}/register`,{id:e,wallet:t}).subscribe({next:n=>{this.localStorageService.saveToken(n.data.token)},error:n=>{console.error(n)}})}update(e,t){let n={};return e!==""&&(n.name=e),t!==""&&(n.email=t),this.http.put(`${this.url}/user`,n).pipe(xr({error:i=>{console.error(i)}}))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var X0=class r{constructor(e,t){this.elementRef=e;$n(()=>{let n=t.event$();n instanceof KeyboardEvent&&this.handleKeyDown(n)})}firstFocusableElement=null;lastFocusableElement=null;ngAfterViewInit(){let e=this.elementRef.nativeElement.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0&&(this.firstFocusableElement=e[0],this.lastFocusableElement=e[e.length-1])}handleKeyDown(e){e.key==="Tab"&&(e.shiftKey?document.activeElement===this.firstFocusableElement&&(e.preventDefault(),this.lastFocusableElement?.focus()):document.activeElement===this.lastFocusableElement&&(e.preventDefault(),this.firstFocusableElement?.focus()))}static \u0275fac=function(t){return new(t||r)(Ae(Jr),Ae(bs))};static \u0275dir=Ar({type:r,selectors:[["","focusTrap",""]]})};var oX=["vc"],aX=["ModalCloseButton"],cX=r=>({width:r});function lX(r,e){}var eb=class r{envInjector=K(as);documentListener=K(bs);component=ee.required();componentInputs=ee({});onCloseModal=Wr();minWidth=ee("350px");role=ee.required();ariaLabelledBy=ee();ariaDescribedBy=ee();ariaLabel=ee();vc;modalCloseButton;cmpRef;constructor(){$n(()=>{let e=this.documentListener.event$();e instanceof KeyboardEvent&&this.handleKeyDown(e)})}ngAfterViewInit(){this.modalCloseButton.nativeElement.focus(),this.cmpRef=this.vc.createComponent(this.component(),{environmentInjector:this.envInjector});for(let[e,t]of Object.entries(this.componentInputs()))this.cmpRef.setInput(e,t)}onKeydownClose(e){(e.key==="Enter"||e.key===" ")&&this.onCloseModal.emit()}handleKeyDown(e){e.key==="Escape"&&this.onCloseModal.emit()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["modal"]],viewQuery:function(t,n){if(t&1&&(Ii(oX,7,If),Ii(aX,5)),t&2){let i;kr(i=Fr())&&(n.vc=i.first),kr(i=Fr())&&(n.modalCloseButton=i.first)}},hostAttrs:[1,"modal"],hostVars:1,hostBindings:function(t,n){t&2&&Yc("@queryAnimationsModal",void 0)},inputs:{component:[1,"component"],componentInputs:[1,"componentInputs"],minWidth:[1,"minWidth"],role:[1,"role"],ariaLabelledBy:[1,"ariaLabelledBy"],ariaDescribedBy:[1,"ariaDescribedBy"],ariaLabel:[1,"ariaLabel"]},outputs:{onCloseModal:"onCloseModal"},decls:6,vars:9,consts:[["ModalCloseButton",""],["vc",""],["focusTrap","","aria-modal","true",1,"modal__content",3,"ngStyle"],["aria-label","Close Modal",1,"close-sr-only",3,"keydown"],[1,"modal__backdrop",3,"click"]],template:function(t,n){if(t&1){let i=xt();j(0,"div",2)(1,"button",3,0),Ee("keydown",function(o){return Ye(i),Qe(n.onKeydownClose(o))}),z(),Le(3,lX,0,0,"ng-template",null,1,SC),z(),j(5,"div",4),Ee("click",function(){return Ye(i),Qe(n.onCloseModal.emit())}),z()}t&2&&(oe("@popUp",void 0)("ngStyle",It(7,cX,"min("+n.minWidth()+", 100%)")),zn("role",n.role())("aria-labelledby",n.ariaLabelledBy())("aria-describedby",n.ariaDescribedBy())("aria-label",n.ariaLabel()),Y(5),oe("@fadeInOut",void 0))},dependencies:[Bt,Xc,X0],styles:["[_nghost-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.modal__backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:hsla(var(--backdrop))}.modal__content[_ngcontent-%COMP%]{background-color:hsl(var(--background));color:hsla(var(--foreground));border-radius:var(--radius);padding:2em;position:relative;cursor:default;z-index:1;word-break:break-word}.modal__close-btn[_ngcontent-%COMP%]{position:absolute;top:1em;right:1.1em;padding:.2em;display:flex;color:hsla(var(--muted));font-size:1.2em;cursor:pointer;transition:color .15s ease-in-out;z-index:2}.modal__close-btn[_ngcontent-%COMP%]:hover, .modal__close-btn[_ngcontent-%COMP%]:focus{color:hsla(var(--primary))}.modal__close-btn[_ngcontent-%COMP%]:active{transition:ease-out .1s;color:hsla(var(--primary-light))}.modal__close-btn[_ngcontent-%COMP%]   .fi[_ngcontent-%COMP%]:before{pointer-events:none}.close-sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}"],data:{animation:[Wt("popUp",{duration:"200ms",transform:"scale(.3)",opacity:"0"}),Wt("fadeInOut",{duration:"250ms",opacity:"0"}),gs("queryAnimationsModal","@popUp, @fadeInOut")]},changeDetection:0})};var tb=class r{appRef=K(Ua);injector=K(qs);envInjector=K(as);document=K(Gt);open(e,t){let n=new si,i=RC(eb,{environmentInjector:this.envInjector,elementInjector:this.injector});this.setInputs(t,i,e),this.appRef.attachView(i.hostView);let s=i.hostView.rootNodes[0];this.document.body.appendChild(s),i.changeDetectorRef.detectChanges();let o={componentRef:i.instance.cmpRef,close:()=>{this.appRef.detachView(i.hostView),i.destroy(),n.next(),n.complete()},afterClosed$:n.asObservable()};return i.instance.onCloseModal.subscribe(()=>o.close()),o}close(e){this.appRef.detachView(e.hostView),e.destroy()}setInputs(e,t,n){t.setInput("component",n),t.setInput("componentInputs",e.componentInputs??{}),t.setInput("role",e.role),e.minWidth&&t.setInput("minWidth",e.minWidth),e.ariaLabelledBy&&t.setInput("ariaLabelledBy",e.ariaLabelledBy),e.ariaDescribedBy&&t.setInput("ariaDescribedBy",e.ariaDescribedBy),e.ariaLabel&&t.setInput("ariaLabel",e.ariaLabel)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var uX=["input"],hX=[[["","right-info",""]],[["","invalid",""]]],dX=["[right-info]","[invalid]"],fX=r=>({error:r}),pX=r=>({filled:r});function mX(r,e){r&1&&(j(0,"div",3),Gs(1),z())}function gX(r,e){r&1&&le(0,"i",7)}function bX(r,e){r&1&&le(0,"i",8)}function yX(r,e){if(r&1){let t=xt();j(0,"button",6),Ee("click",function(){Ye(t);let i=te();return Qe(i.togglePasswordVisibility())}),Le(1,gX,1,0,"i",7)(2,bX,1,0,"i",8),z()}if(r&2){let t=te();Y(),Ke(t.passwordVisible()?1:2)}}function vX(r,e){if(r&1&&(j(0,"div",5),Gs(1,1),z()),r&2){let t=te();oe("@fadeInOut",void 0)("id",t.inputErrorId)}}var rb=class r{type=ee("text");title=ee("");placeholder=ee("");isInvalid=ee(!1);rightInfo=ee(!1);id=ee.required();disabled=ee(!1);inputElementRef;ariaLabel=ee("");ariaLabelledby=ee("");ariaRequired=ee(!1);mask=ee("");prefix=ee("");suffix=ee("");maxLength=ee(0);hideShowPassword=ee(!1);initialValue=ee("");passwordVisible=xe(!1);inputErrorId="";value=xe("");ngOnInit(){this.inputErrorId="input-error-"+this.id()}ngAfterViewInit(){setTimeout(()=>{this.inputElementRef.nativeElement.value=this.initialValue()})}constructor(){$n(()=>{this.inputElementRef&&(this.inputElementRef.nativeElement.value=this.initialValue()),this.value.set(this.initialValue())})}showPassword(){this.passwordVisible.set(!0)}hidePassword(){this.passwordVisible.set(!1)}togglePasswordVisibility(){this.passwordVisible.update(e=>!e)}onChange=()=>{};onTouched=()=>{};onInput(e){let t=e.target.value;this.onChange(t),this.onTouched()}writeValue(e){setTimeout(()=>{this.value.set(e)})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["custom-input"]],viewQuery:function(t,n){if(t&1&&Ii(uX,5),t&2){let i;kr(i=Fr())&&(n.inputElementRef=i.first)}},hostAttrs:[1,"input-wrapper"],inputs:{type:[1,"type"],title:[1,"title"],placeholder:[1,"placeholder"],isInvalid:[1,"isInvalid"],rightInfo:[1,"rightInfo"],id:[1,"id"],disabled:[1,"disabled"],ariaLabel:[1,"ariaLabel"],ariaLabelledby:[1,"ariaLabelledby"],ariaRequired:[1,"ariaRequired"],mask:[1,"mask"],prefix:[1,"prefix"],suffix:[1,"suffix"],maxLength:[1,"maxLength"],hideShowPassword:[1,"hideShowPassword"],initialValue:[1,"initialValue"]},features:[Pi([{provide:nc,useExisting:Ba(()=>r),multi:!0}])],ngContentSelectors:dX,decls:7,vars:24,consts:[["input",""],[3,"input","disabled","value","id","type","ngClass","placeholder","mask","prefix","suffix"],[1,"placeholder-title",3,"ngClass"],[1,"right-info"],["type","button",1,"show-password-btn"],["aria-live","assertive",1,"invalid",3,"id"],["type","button",1,"show-password-btn",3,"click"],[1,"fi","fi-br-eye-crossed"],[1,"fi","fi-br-eye"]],template:function(t,n){if(t&1){let i=xt();Mo(hX),j(0,"input",1,0),Ee("input",function(o){return Ye(i),Qe(n.onInput(o))}),z(),j(2,"span",2),ne(3),z(),Le(4,mX,2,0,"div",3)(5,yX,3,1,"button",4)(6,vX,2,2,"div",5)}if(t&2){let i=ko(1);oe("disabled",n.disabled())("value",n.value())("id",n.id())("type",n.passwordVisible()?"text":n.type())("ngClass",It(20,fX,n.isInvalid()))("placeholder",n.placeholder())("mask",n.mask())("prefix",n.prefix())("suffix",n.suffix()),zn("maxLength",n.maxLength()?n.maxLength():null)("aria-label",n.ariaLabel()||n.placeholder())("aria-labelledby",n.ariaLabelledby())("aria-invalid",n.isInvalid())("aria-describedby",n.inputErrorId)("aria-required",n.ariaRequired()),Y(2),oe("ngClass",It(22,pX,i.value.length>0)),Y(),St(" ",n.title()," "),Y(),Ke(n.rightInfo()?4:-1),Y(),Ke(!n.hideShowPassword()&&n.type()==="password"?5:-1),Y(),Ke(n.isInvalid()?6:-1)}},dependencies:[kp,Bt,Ir,Mp,Bp],styles:['@charset "UTF-8";.ng-invalid.ng-dirty[_nghost-%COMP%]   input[_ngcontent-%COMP%]{outline:hsl(var(--danger)) solid 1px;border-color:transparent}.ng-invalid.ng-dirty[_nghost-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:transparent}.ng-invalid.ng-dirty[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:transparent;outline-offset:0}.ng-invalid.ng-dirty[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus::placeholder{color:hsla(var(--danger),.45)}.ng-invalid.ng-dirty[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus + .placeholder-title[_ngcontent-%COMP%] + .right-info[_ngcontent-%COMP%]{outline-color:transparent}.ng-invalid.ng-dirty[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus + .placeholder-title[_ngcontent-%COMP%]{color:hsl(var(--danger))}.ng-invalid.ng-dirty[_nghost-%COMP%]   .placeholder-title[_ngcontent-%COMP%]{color:hsl(var(--danger))}.ng-invalid.ng-dirty[_nghost-%COMP%]   .right-info[_ngcontent-%COMP%]{background-color:hsl(var(--danger))}[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:.8em}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{color:hsl(var(--foreground));font-size:1em;border-radius:var(--radius);border:1px solid hsl(var(--input));padding:.75em 1.25em;width:100%;background-color:hsl(var(--background));text-overflow:ellipsis;outline:1px solid transparent;transition:all .15s ease-in-out}[_nghost-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:transparent;transition:color .15s ease-in-out}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:hover:not(:focus,:disabled){border-color:hsla(var(--accent))}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-color:hsla(var(--ring));border-color:transparent}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus::placeholder{color:hsla(var(--ring),.45)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:disabled{color:hsla(var(--muted-foreground),.65)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:disabled + .placeholder-title[_ngcontent-%COMP%]{color:hsla(var(--muted-foreground),.5)}[_nghost-%COMP%]   .placeholder-title[_ngcontent-%COMP%]{position:absolute;--padding: .3em;padding-bottom:.3em;white-space:nowrap;padding-inline:var(--padding);left:calc(1.25em - var(--padding));top:.75em;-webkit-user-select:none;user-select:none;pointer-events:none;background-color:hsl(var(--background));border-radius:var(--radius);color:hsla(var(--muted-foreground));transition:color .15s ease-in-out,top .2s ease-in-out,transform .2s ease-in-out,padding-inline .2s ease-in-out}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus + .placeholder-title[_ngcontent-%COMP%], [_nghost-%COMP%]   .placeholder-title.filled[_ngcontent-%COMP%]{top:0;transform:translateY(-50%) scale(.9);padding-inline:.4em}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus + .placeholder-title[_ngcontent-%COMP%]{color:hsl(var(--ring))}[_nghost-%COMP%]   .show-password-btn[_ngcontent-%COMP%]{cursor:pointer;padding:.25em;position:absolute;right:1.25em;font-size:1em;background-color:transparent;border:0;color:hsla(var(--ring),.3);transition:color .15s ease-in-out}[_nghost-%COMP%]   .show-password-btn[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .show-password-btn[_ngcontent-%COMP%]   .fi-br-eye-crossed[_ngcontent-%COMP%]{color:hsl(var(--ring))}[_nghost-%COMP%]   .right-info[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;padding-inline:1em;background-color:hsla(var(--primary));border-radius:0 calc(var(--radius) / 1.07) calc(var(--radius) / 1.07) 0;right:0;top:0;height:100%;font-size:1em;color:hsla(var(--foreground));transition:all .15s ease-in-out}[_nghost-%COMP%]   .invalid[_ngcontent-%COMP%]{width:100%;font-size:.9em;font-weight:600;color:hsla(var(--danger));position:relative}[_nghost-%COMP%]   .fi[_ngcontent-%COMP%]{display:flex}input[type=password][_ngcontent-%COMP%]::-webkit-credentials-auto-fill-button{visibility:hidden;display:none!important}input[type=password][_ngcontent-%COMP%]::-ms-reveal{display:none}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}p[_ngcontent-%COMP%]{position:absolute;left:1.25em}input[type=number][_ngcontent-%COMP%]{padding-left:3em!important;caret-color:#fff;color:transparent!important;-webkit-user-select:none;user-select:none}input[type=number][_ngcontent-%COMP%]::selection{background-color:transparent}'],data:{animation:[Wt("fadeInOut",{duration:"200ms",opacity:"0",animateY:!0,transform:"translateY(-100%)"})]},changeDetection:0})};function wX(r,e){if(r&1&&(j(0,"div",0)(1,"h2"),ne(2),z()()),r&2){let t=te();oe("@popUpError",void 0),Y(2),Sr(t.errorMessage)}}function xX(r,e){r&1&&(j(0,"small",5),ne(1,"Invalid e-mail"),z())}var nb=class r{constructor(e){this.fb=e;this.registerForm=this.fb.group({name:this.fb.control("",{nonNullable:!0}),email:this.fb.control("",{nonNullable:!0,validators:[xp.email]})}),this.registerForm.valueChanges.subscribe(t=>{t.name||t.email?this.isEmpty.set(!1):this.isEmpty.set(!0)})}walletConnectService=K(_i);registerService=K(nh);registerForm;onCloseRegisterModal=Wr();isEmpty=xe(!0);walletAddress=$t(()=>this.walletConnectService.$walletAddress());skipped=Wr();get errorMessage(){return this.registerService.$error()}get status(){return this.registerService.$state()}onFormSubmit(){if(!this.walletAddress()){console.error("Invalid Wallet");return}this.registerForm.valid&&this.registerService.$state()==="default"&&this.registerService.update(this.registerForm.value.name,this.registerForm.value.email)}static \u0275fac=function(t){return new(t||r)(Ae(gS))};static \u0275cmp=Ce({type:r,selectors:[["register-modal"]],hostVars:1,hostBindings:function(t,n){t&2&&Yc("@queryAnimationsModal",void 0)},outputs:{onCloseRegisterModal:"onCloseRegisterModal",skipped:"skipped"},decls:8,vars:17,consts:[[1,"py-2","px-4","bg-danger/10","text-danger","border","border-danger","mb-6","rounded-dft","overflow-hidden","overflow-ellipsis"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],[1,"login-modal__input",3,"title","id","disabled","initialValue"],["formControlName","name","placeholder","John Doe",1,"login-modal__input",3,"title","id"],["placeholder","JohnDoe@example.com","formControlName","email",1,"login-modal__input",3,"title","type","id","isInvalid"],["invalid",""],["customized-button","","type","submit",1,"mt-2",3,"variant","disabled","status"]],template:function(t,n){t&1&&(Le(0,wX,3,2,"div",0),j(1,"form",1),Ee("ngSubmit",function(){return n.isEmpty()?n.skipped.emit():n.onFormSubmit()}),le(2,"custom-input",2)(3,"custom-input",3),j(4,"custom-input",4),Le(5,xX,2,0,"small",5),z(),j(6,"button",6),ne(7),z()()),t&2&&(Ke(n.errorMessage?0:-1),Y(),oe("formGroup",n.registerForm),Y(),oe("title","Wallet")("id","registerWalletInput")("disabled",!0)("initialValue",n.walletAddress()||""),Y(),oe("title","Name")("id","registerNameInput"),Y(),oe("title","E-mail")("type","text")("id","registerEmailInput")("isInvalid",n.registerForm.controls.email.invalid&&n.registerForm.controls.email.touched),Y(),Ke(n.registerForm.controls.email.errors!=null&&n.registerForm.controls.email.errors.email?5:-1),Y(),oe("variant",n.isEmpty()?"outline":"contained")("disabled",n.registerForm.invalid)("status",n.status),Y(),St(" ",n.isEmpty()?"Skip for now":"Submit"," "))},dependencies:[rb,kp,fS,Np,oS,gv,bv,th],encapsulation:2,data:{animation:[gs("queryAnimationsModal","@popUp, @fadeInOut"),Wt("popUpError",{duration:"200ms",animateY:!0,transform:"scale(.5)"})]},changeDetection:0})};var nh=class r{userService=K(rh);modalService=K(tb);error=xe(null);state=xe("default");modalRef;$error=this.error.asReadonly();$state=this.state.asReadonly();openModal(){this.modalRef=this.modalService.open(nb,{role:"dialog"}),this.modalRef.componentRef.instance.skipped.subscribe(this.modalRef.close),this.modalRef.afterClosed$.subscribe(()=>this.resetState())}resetState(){this.state.set("default"),this.clearError()}closeModal(){this.modalRef&&(this.resetState(),this.modalRef.close())}setError(e){this.clearError(),setTimeout(()=>{this.error.set(e)},200)}clearError(){this.error.set(null)}update(e,t){this.state.set("loading"),this.userService.update(e,t).pipe(Ft(n=>_e(n).pipe(J2(1e3))),ai(n=>W2(1e3).pipe(Ft(()=>Ai(()=>n))))).subscribe({next:()=>{this.clearError(),this.state.set("success"),setTimeout(()=>this.closeModal(),1500)},error:n=>{this.setError(n.error?.message||"An unexpected error occurred"),this.state.set("default")}})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var ib=class r{http=K(Wa);ethersService=K(Z0);localStorageService=K(Ma);walletConnectService=K(_i);userService=K(rh);registerService=K(nh);url="/api/auth";constructor(){$n(()=>{this.walletConnectService.$walletConnectEvents()?.data.event=="CONNECT_SUCCESS"&&this.authenticate()})}generateNonce(e){let t={wallet:e};return this.http.post(this.url+"/nonce",t)}validateSignature(e,t,n,i){let s={id:e,wallet:t,signature:n,nonce:i};return this.http.post(this.url+"/validate",s)}generateToken(e){return this.generateNonce(e).pipe(Ft(t=>this.ethersService.signMessage(t.data.message).pipe(Ft(n=>this.validateSignature(t.data.id,e,n,t.data.nonce).pipe(Ft(i=>(this.localStorageService.saveToken(i.data.token),_e(i))))))),ai(t=>(console.error(t),this.localStorageService.removeToken(),Ai(()=>new Error(t)))))}authenticate(){let e=this.walletConnectService.$walletAddress();e&&this.generateToken(e).subscribe({next:t=>{t.data.registeredUser===!1&&(this.userService.register(t.data.id,e),this.registerService.openModal())},error:t=>{this.walletConnectService.disconnect()}})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"})};var fD=(r,e)=>{let t=K(Ma),n=K(ib),i=K(_i),s=t.getToken(),o="/api",a=s&&(r.url.includes("/api/auth/nonce")||r.url.includes("/api/auth/validate"))==!1&&r.url.startsWith(o)?r.clone({setHeaders:{Authorization:`Bearer ${s}`}}):r;return e(a).pipe(ai(c=>(c instanceof fs&&c.status===401&&a.url.startsWith(o)&&(i.$walletAddress()?n.generateToken(i.$walletAddress()).subscribe():alert("Connect your wallet through Connect Wallet")),Ai(()=>c))))};var pD={providers:[IC({eventCoalescing:!0}),BA(cD),eA(X_()),tC(uD),F_(U_(),B_([fD])),hD(),dD(),wS()]};var sb=class r{title="wallet-manager";static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Ce({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){t&1&&le(0,"router-outlet")},dependencies:[ec,GC],encapsulation:2,data:{animation:[gs("queryAnimationsModal","@popUp, @fadeInOut")]}})};J_(sb,pD).catch(r=>console.error(r));
