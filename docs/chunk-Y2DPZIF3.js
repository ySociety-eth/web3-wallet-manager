import{a as I}from"./chunk-5G5ROAPX.js";import{G as u,J as a,P as h,V as O,Z as f,f as d,g as C,ga as W}from"./chunk-3VEWMGKM.js";import{a as N,b as D}from"./chunk-HIVZEDT5.js";var m={getConnectorsByType(e){let{featured:o,recommended:r}=f.state,{customWallets:l}=u.state,i=d.getRecentWallets(),t=p.filterOutDuplicateWallets(r),s=p.filterOutDuplicateWallets(o),n=e.filter(c=>c.type==="MULTI_CHAIN"),E=e.filter(c=>c.type==="ANNOUNCED"),y=e.filter(c=>c.type==="INJECTED"),R=e.filter(c=>c.type==="EXTERNAL");return{custom:l,recent:i,external:R,multiChain:n,announced:E,injected:y,recommended:t,featured:s}},showConnector(e){if(e.type==="INJECTED"){if(!C.isMobile()&&e.name==="Browser Wallet")return!1;let o=e.info?.rdns;if(!o&&!h.checkInstalled()||o&&f.state.excludedRDNS&&f.state.excludedRDNS.includes(o))return!1}if(e.type==="ANNOUNCED"){let o=e.info?.rdns;if(o&&f.state.excludedRDNS.includes(o))return!1}return!0},getIsConnectedWithWC(){return Array.from(O.state.chains.values()).some(r=>a.getConnectorId(r.namespace)===W.CONNECTOR_ID.WALLET_CONNECT)}};var p={filterOutDuplicatesByRDNS(e){let o=u.state.enableEIP6963?a.state.connectors:[],r=d.getRecentWallets(),l=o.map(n=>n.info?.rdns).filter(Boolean),i=r.map(n=>n.rdns).filter(Boolean),t=l.concat(i);if(t.includes("io.metamask.mobile")&&C.isMobile()){let n=t.indexOf("io.metamask.mobile");t[n]="io.metamask"}return e.filter(n=>!t.includes(String(n?.rdns)))},filterOutDuplicatesByIds(e){let o=a.state.connectors.filter(n=>n.type==="ANNOUNCED"||n.type==="INJECTED"),r=d.getRecentWallets(),l=o.map(n=>n.explorerId),i=r.map(n=>n.id),t=l.concat(i);return e.filter(n=>!t.includes(n?.id))},filterOutDuplicateWallets(e){let o=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(o)},markWalletsAsInstalled(e){let{connectors:o}=a.state,r=o.filter(t=>t.type==="ANNOUNCED").reduce((t,s)=>(s.info?.rdns&&(t[s.info.rdns]=!0),t),{});return e.map(t=>D(N({},t),{installed:!!t.rdns&&!!r[t.rdns??""]})).sort((t,s)=>Number(s.installed)-Number(t.installed))},getConnectOrderMethod(e,o){let r=e?.connectMethodsOrder||u.state.features?.connectMethodsOrder,l=o||a.state.connectors;if(r)return r;let{injected:i,announced:t}=m.getConnectorsByType(l),s=i.filter(m.showConnector),n=t.filter(m.showConnector);return s.length||n.length?["wallet","email","social"]:I.DEFAULT_CONNECT_METHOD_ORDER}};export{p as a,m as b};
